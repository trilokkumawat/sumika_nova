;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b1d100b7-816f-3a45-0973-4e8787faa61f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29750,(e,t,a)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,s=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,o=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,m=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,x=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,j=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type){case u:case m:case i:case o:case l:case h:return e;default:switch(e=e&&e.$$typeof){case d:case p:case g:case x:case c:return e;default:return t}}case n:return t}}}function S(e){return v(e)===m}a.AsyncMode=u,a.ConcurrentMode=m,a.ContextConsumer=d,a.ContextProvider=c,a.Element=s,a.ForwardRef=p,a.Fragment=i,a.Lazy=g,a.Memo=x,a.Portal=n,a.Profiler=o,a.StrictMode=l,a.Suspense=h,a.isAsyncMode=function(e){return S(e)||v(e)===u},a.isConcurrentMode=S,a.isContextConsumer=function(e){return v(e)===d},a.isContextProvider=function(e){return v(e)===c},a.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},a.isForwardRef=function(e){return v(e)===p},a.isFragment=function(e){return v(e)===i},a.isLazy=function(e){return v(e)===g},a.isMemo=function(e){return v(e)===x},a.isPortal=function(e){return v(e)===n},a.isProfiler=function(e){return v(e)===o},a.isStrictMode=function(e){return v(e)===l},a.isSuspense=function(e){return v(e)===h},a.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===m||e===o||e===l||e===h||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===x||e.$$typeof===c||e.$$typeof===d||e.$$typeof===p||e.$$typeof===j||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},a.typeOf=v},213784,(e,t,a)=>{"use strict";t.exports=e.r(29750)},781979,(e,t,a)=>{"use strict";var r=e.r(213784),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function o(e){return r.isMemo(e)?i:l[e.$$typeof]||s}l[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[r.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;t.exports=function e(t,a,r){if("string"!=typeof a){if(h){var s=p(a);s&&s!==h&&e(t,s,r)}var i=d(a);u&&(i=i.concat(u(a)));for(var l=o(t),f=o(a),x=0;x<i.length;++x){var g=i[x];if(!n[g]&&!(r&&r[g])&&!(f&&f[g])&&!(l&&l[g])){var y=m(a,g);try{c(t,g,y)}catch(e){}}}}return t}},298625,e=>{"use strict";var t=e.i(242882),a=e.i(714403),r=e.i(584258);async function s({projectRef:e,connectionString:t},r){let s=`
    select
      s.oid as "id",
      w.fdwname as "name",
      s.srvname as "server_name",
      s.srvoptions as "server_options",
      c.proname as "handler",
      (
        select jsonb_agg(
          jsonb_build_object(
            'id', c.oid::bigint,
            'schema', relnamespace::regnamespace::text,
            'name', c.relname,
            'columns', (
              select jsonb_agg(
                jsonb_build_object(
                  'name', a.attname,
                  'type', pg_catalog.format_type(a.atttypid, a.atttypmod)
                )
              )
              from pg_catalog.pg_attribute a
              where a.attrelid = c.oid and a.attnum > 0 and not a.attisdropped
            ),
            'options', t.ftoptions
          )
        )
        from pg_catalog.pg_class c
        join pg_catalog.pg_foreign_table t on c.oid = t.ftrelid
        where c.oid = any (select t.ftrelid from pg_catalog.pg_foreign_table t where t.ftserver = s.oid)
      ) as "tables"
    from pg_catalog.pg_foreign_server s
    join pg_catalog.pg_foreign_data_wrapper w on s.srvfdw = w.oid
    join pg_catalog.pg_proc c on w.fdwhandler = c.oid;
  `,{result:n}=await (0,a.executeSql)({projectRef:e,connectionString:t,sql:s,queryKey:["fdws"]},r);return n}e.s(["getFDWs",()=>s,"useFDWsQuery",0,({projectRef:e,connectionString:a},{enabled:n=!0,...i}={})=>(0,t.useQuery)({queryKey:r.fdwKeys.list(e),queryFn:({signal:t})=>s({projectRef:e,connectionString:a},t),enabled:n&&void 0!==e,...i})])},450972,e=>{"use strict";var t=e.i(248593),a=e.i(242882),r=e.i(234745),s=e.i(635494);e.i(10429);var n=e.i(837508),i=e.i(667286);async function l({projectRef:e,connectionString:a},s,n){if(!e)throw Error("projectRef is required");let i=new Headers(n);a&&i.set("x-connection-encrypted",a);let{data:l,error:o}=await (0,r.get)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":a,"x-pg-application-name":t.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e}},headers:i,signal:s});return o&&(0,r.handleError)(o),l}e.s(["useDatabaseExtensionsQuery",0,({projectRef:e,connectionString:t},{enabled:r=!0,...o}={})=>{let{data:c}=(0,s.useSelectedProjectQuery)(),d=c?.status===n.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,a.useQuery)({queryKey:i.databaseExtensionsKeys.list(e),queryFn:({signal:a})=>l({projectRef:e,connectionString:t},a),enabled:r&&void 0!==e&&d,...o})}])},12214,e=>{"use strict";var t=e.i(615515);let a=e=>Object.fromEntries(e.map(e=>e.split("=")));function r(e,t){if("wasm_fdw_handler"===e.handlerName){let r=a(t?.server_options??[]);return e.server.options.find(e=>"fdw_package_name"===e.name)?.defaultValue===r.fdw_package_name}return e.handlerName===t?.handler}function s(e){return t.WRAPPERS.find(t=>r(t,e))}e.s(["convertKVStringArrayToJson",0,a,"formatWrapperTables",0,(e,a)=>(e?.tables??[]).map(r=>{let s=0,n=Object.fromEntries(r.options.map(e=>e.split("=")));switch(e.handler){case t.WRAPPER_HANDLERS.STRIPE:s=a?.tables.findIndex(e=>e.options.find(e=>"object"===e.name)?.defaultValue===n.object)??0;break;case t.WRAPPER_HANDLERS.FIREBASE:s="auth/users"===n.object?a?.tables.findIndex(e=>e.options.find(e=>"auth/users"===e.defaultValue))??0:a?.tables.findIndex(e=>"Firestore Collection"===e.label)??0;case t.WRAPPER_HANDLERS.S3:case t.WRAPPER_HANDLERS.AIRTABLE:case t.WRAPPER_HANDLERS.LOGFLARE:case t.WRAPPER_HANDLERS.BIG_QUERY:case t.WRAPPER_HANDLERS.CLICK_HOUSE:}return{...n,index:s,id:r.id,columns:r.columns,is_new_schema:!1,schema:r.schema,schema_name:r.schema,table_name:r.name}}),"getWrapperMetaForWrapper",()=>s,"makeValidateRequired",0,e=>{let t=new Set(e.filter(e=>e.required).map(e=>e.name)),a=new Set(Array.from(t).filter(e=>e.includes("."))),r=Array.from(a);return e=>Object.fromEntries(Object.entries(e).flatMap(([e,t])=>Array.isArray(t)?[[e,t],...t.map((t,a)=>[`${e}.${a}`,t])]:[[e,t]]).filter(([e,s])=>{let[n,i]=e.split(".");if(void 0!==i&&t.has(n)&&Object.keys(s).some(e=>a.has(`${n}.${e}`))){let e=r.find(e=>e.startsWith(`${n}.`));return!!e&&!s[e.split(".")[1]]}return t.has(n)&&(Array.isArray(s)?s.length<1:!s)}).map(([e])=>"table_name"===e?[e,"Please provide a name for your table"]:"columns"===e?[e,"Please select at least one column"]:[e,"This field is required"]))},"wrapperMetaComparator",()=>r])},584258,e=>{"use strict";e.s(["fdwKeys",0,{list:e=>["projects",e,"fdws"]}])},3259,100387,e=>{"use strict";var t=e.i(478902),a=e.i(153545),r=e.i(933505);e.s(["ChevronRightIcon",()=>r.default],100387);var r=r,s=e.i(389959),n=e.i(843778);let i=s.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));i.displayName="Breadcrumb";let l=s.forwardRef(({className:e,...a},r)=>(0,t.jsx)("ol",{ref:r,className:(0,n.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...a}));l.displayName="BreadcrumbList";let o=s.forwardRef(({className:e,...a},r)=>(0,t.jsx)("li",{ref:r,className:(0,n.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...a}));o.displayName="BreadcrumbItem";let c=s.forwardRef(({asChild:e,className:r,...s},i)=>{let l=e?a.Slot:"a";return(0,t.jsx)(l,{ref:i,className:(0,n.cn)("transition-colors underline lg:no-underline hover:text-foreground",r),...s})});c.displayName="BreadcrumbLink";let d=s.forwardRef(({className:e,...a},r)=>(0,t.jsx)("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("no-underline text-foreground",e),...a}));d.displayName="BreadcrumbPage";let u=({children:e,className:a,...s})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5 text-foreground-muted",a),...s,children:e??(0,t.jsx)(r.default,{})});u.displayName="BreadcrumbSeparator";let m=({className:e,...a})=>(0,t.jsxs)("span",{className:(0,n.cn)("flex h-4 w-4 items-center justify-center",e),...a,children:[(0,t.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"sr-only",children:"More"})]});m.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>i,"BreadcrumbEllipsis",()=>m,"BreadcrumbItem",()=>o,"BreadcrumbLink",()=>c,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},744061,418638,e=>{"use strict";var t=e.i(478902),a=e.i(938933),r=e.i(843778);function s({children:e,className:a,tag:r="div",style:s}){let n=`${r}`;return(0,t.jsx)(n,{style:s,children:e})}s.Title=function({className:e,level:a=1,children:r,style:s}){let n=`h${a}`;return(0,t.jsx)(n,{style:s,children:r})},s.Text=function({className:e,children:a,style:r,type:s,disabled:n,mark:i,code:l,keyboard:o,underline:c,strikethrough:d,strong:u,small:m}){return l?(0,t.jsx)("code",{style:r,children:a}):i?(0,t.jsx)("mark",{style:r,children:a}):o?(0,t.jsx)("kbd",{style:r,children:a}):u?(0,t.jsx)("strong",{style:r,children:a}):(0,t.jsx)("span",{style:r,children:a})},s.Link=function({children:e,target:a="_blank",href:r,className:s,onClick:n,style:i}){return(0,t.jsx)("a",{onClick:n,href:r,target:a,rel:"noopener noreferrer",style:i,children:e})},e.s(["default",0,s],418638);var n=e.i(389959);let i=(0,n.createContext)({type:"text"}),l=e=>{let{type:a}=e;return(0,t.jsx)(i.Provider,{value:{type:a},children:e.children})},o=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:a,ulClassName:r,style:s,type:n="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:s,children:(0,t.jsx)(l,{type:n,children:(0,t.jsx)("ul",{className:r,children:e})})})}c.Item=function({children:e,icon:s,active:n,rounded:i,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,a.default)("menu"),{type:p}=o(),h=[m.item.base];h.push(m.item.variants[p].base),n?h.push(m.item.variants[p].active):h.push(m.item.variants[p].normal);let f=[m.item.content.base];n?f.push(m.item.content.active):f.push(m.item.content.normal);let x=[m.item.icon.base];return n?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,r.cn)("outline-none",h),style:u,onClick:l,"aria-current":n?"page":void 0,children:[s&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:s}),(0,t.jsx)("span",{className:f.join(" "),children:e})]})},c.Group=function({children:e,icon:r,title:s}){let n=(0,a.default)("menu"),{type:i}=o();return(0,t.jsxs)("div",{className:[n.group.base,n.group.variants[i]].join(" "),children:[r&&(0,t.jsx)("span",{className:n.group.icon,children:r}),(0,t.jsx)("span",{className:n.group.content,children:s}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(s.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),a=e.i(587433),r=e.i(862326),s=e.i(210419),n=e.i(837710);let i=({item:e,isActive:i,target:l="_self",hoverText:o="",onClick:c})=>{let{name:d="",url:u="",icon:m,rightIcon:p,isExternal:h,label:f,disabled:x}=e,g=(0,t.jsx)(r.Menu.Item,{icon:m,active:i,onClick:c,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:o||("string"==typeof d?d:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:d}),void 0!==f&&(0,t.jsx)(a.Badge,{className:"flex-shrink-0",variant:"new"===f.toLowerCase()?"success":"warning",children:f})]}),p&&(0,t.jsx)("div",{children:p})]})});return x?(0,t.jsx)("div",{className:"opacity-50 pointer-events-none",children:g}):u?h?(0,t.jsx)(n.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:m,children:(0,t.jsx)(s.default,{href:u,target:"_blank",rel:"noreferrer",children:d})}):(0,t.jsx)(s.default,{href:u,className:"block",target:l,children:g}):g};e.s(["ProductMenuItem",0,i],799793),e.s(["ProductMenu",0,({page:e,menu:s})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(r.Menu,{type:"pills",children:s.map((n,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(r.Menu.Group,{title:n.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:n.title}),n.isPreview&&(0,t.jsx)(a.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:n.items.map(a=>{let r=a.pages?a.pages.includes(e??""):e===a.key;return(0,t.jsx)(i,{item:a,isActive:r,target:a.isExternal?"_blank":"_self"},a.key)})})]})}),l!==s.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},n.key||n.title))})})],388147)},127739,e=>{"use strict";var t=e.i(478902),a=e.i(709520),r=e.i(389959),s=e.i(843778);let n=(0,a.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),i=(0,r.forwardRef)(({className:e,size:a,...r},i)=>(0,t.jsx)("div",{ref:i,...r,className:(0,s.cn)(n({size:a}),e)}));i.displayName="PageContainer",e.s(["PageContainer",0,i])},456050,e=>{"use strict";var t=e.i(478902),a=e.i(709520),r=e.i(389959),s=e.i(843778),n=e.i(3259),i=e.i(127739);let l=(0,a.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),o=(0,r.createContext)({size:"default"}),c=()=>(0,r.useContext)(o),d=({className:e,size:a,children:r,...n})=>{let i=a??"default";return(0,t.jsx)(o.Provider,{value:{size:i},children:(0,t.jsx)("div",{"data-slot":"page-header","data-size":i,className:(0,s.cn)(l({size:i}),e),...n,children:r})})},u=({className:e,children:a,...r})=>{let{size:l}=c();return(0,t.jsx)(i.PageContainer,{size:l,children:(0,t.jsx)(n.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,s.cn)("flex items-center gap-4 [&_li]:text-xs",e),...r,children:a})})};u.displayName="PageHeaderBreadcrumb";let m=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-icon",className:(0,s.cn)("text-foreground-light",e),...a});m.displayName="PageHeaderIcon";let p=({className:e,children:a,...r})=>(0,t.jsx)("div",{"data-slot":"page-header-summary",className:(0,s.cn)("flex flex-col gap-1",e),...r,children:a});p.displayName="PageHeaderSummary";let h=({className:e,children:a,...r})=>(0,t.jsx)("h1",{"data-slot":"page-header-title",className:(0,s.cn)("heading-title",e),...r,children:a}),f=({className:e,children:a,...r})=>(0,t.jsx)("div",{"data-slot":"page-header-description",className:(0,s.cn)("heading-subSection text-foreground-light",e),...r,children:a}),x=({className:e,children:a,...r})=>{let{size:n}=c();return(0,t.jsx)(i.PageContainer,{size:n,children:(0,t.jsx)("div",{"data-slot":"page-header-meta",className:(0,s.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...r,children:a})})};x.displayName="PageHeaderMeta";let g=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-actions",className:(0,s.cn)("flex items-center gap-2 shrink-0",e),...a});g.displayName="PageHeaderAside";let y=({className:e,...a})=>{let{size:r}=c();return(0,t.jsx)(i.PageContainer,{size:r,className:(0,s.cn)("full"===r&&"border-b"),children:(0,t.jsx)("div",{"data-slot":"page-header-footer",className:(0,s.cn)("w-full [&>nav]:border-b-0","full"!==r&&"border-b",e),...a})})};y.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>g,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>f,"PageHeaderIcon",()=>m,"PageHeaderMeta",()=>x,"PageHeaderNavigationTabs",()=>y,"PageHeaderSummary",()=>p,"PageHeaderTitle",()=>h])},737051,e=>{"use strict";e.i(128328);var t=e.i(657588),a=e.i(265735);e.s(["useIsETLPrivateAlpha",0,()=>{let{data:e}=(0,a.useSelectedOrganizationQuery)(),r=(0,t.useFlag)("etlPrivateAlpha"),s="string"==typeof r?r.split(",").map(e=>e.trim()):[];return(0,t.useFlag)("etlPrivateAlphaOverride")||s.includes(e?.slug??"")}])},812136,e=>{"use strict";var t=e.i(478902),a=e.i(271226),r=e.i(463333),s=e.i(737051),n=e.i(388147),i=e.i(450972),l=e.i(144676),o=e.i(912793),c=e.i(635494),d=e.i(951138),u=e.i(825713),m=e.i(731201);let p=()=>{let{data:e}=(0,c.useSelectedProjectQuery)(),d=(0,a.useRouter)().pathname.split("/")[4],{data:u}=(0,i.useDatabaseExtensionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{data:p}=(0,l.useProjectAddonsQuery)({projectRef:e?.ref}),h=void 0!==(u??[]).find(e=>"pg_net"===e.name),f=p?.selected_addons.find(e=>"pitr"===e.type)!==void 0,x=(0,r.useIsColumnLevelPrivilegesEnabled)(),g=(0,s.useIsETLPrivateAlpha)(),{databaseReplication:y,databaseRoles:j,integrationsWrappers:b}=(0,o.useIsFeatureEnabled)(["database:replication","database:roles","integrations:wrappers"]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.ProductMenu,{page:d,menu:(0,m.generateDatabaseMenu)(e,{pgNetExtensionExists:h,pitrEnabled:f,columnLevelPrivileges:x,showPgReplicate:y,enablePgReplicate:g,showRoles:j,showWrappers:b})})})},h=(0,d.withAuth)(({children:e})=>(0,t.jsx)(u.ProjectLayout,{product:"Database",productMenu:(0,t.jsx)(p,{}),isBlocking:!1,children:e}));e.s(["default",0,h])},114378,e=>{"use strict";var t=e.i(533488),a=e.i(389959),r=e.i(355901);function s({enabled:e,urlKey:r,select:s,onError:n}){let[i,l]=(0,t.useQueryState)(r,t.parseAsString.withOptions({history:"push",clearOnDefault:!0})),o=(0,a.useMemo)(()=>i?s(i):void 0,[i,s]);return(0,a.useEffect)(()=>{e&&i&&!o&&(n(Error("not found"),i),l(null))},[e,n,i,l,o]),{value:o,setValue:l}}e.s(["handleErrorOnDelete",0,(e,t,a)=>{t!==e.current?r.toast.error(a):e.current=null},"useQueryStateWithSelect",()=>s])},300424,e=>{"use strict";var t=e.i(478902),a=e.i(902858),r=e.i(370410),s=e.i(365257),n=e.i(479232),i=e.i(389959),l=e.i(801834),o=e.i(2579),c=e.i(635494),d=e.i(206413),u=e.i(592360),m=e.i(178527),p=e.i(837710),h=e.i(703526),f=e.i(917007),x=e.i(920432),g=e.i(549815),y=e.i(911509),j=e.i(996960),b=e.i(866205),_=e.i(793912),v=e.i(135144),S=e.i(689805),w=e.i(396831),P=e.i(903248);let N=({className:e,disabled:N=!1,size:T="tiny",showError:E=!0,selectedSchemaName:C,supportSelectAll:k=!1,excludedSchemas:A=[],onSelectSchema:D,onSelectCreateSchema:R,align:$="start"})=>{let[F,L]=(0,i.useState)(!1),{can:M}=(0,o.useAsyncCheckPermissions)(a.PermissionAction.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:I}=(0,c.useSelectedProjectQuery)(),{data:z,isPending:O,isSuccess:B,isError:H,error:V,refetch:W}=(0,l.useSchemasQuery)({projectRef:I?.ref,connectionString:I?.connectionString}),Q=(z||[]).filter(e=>!A.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)("div",{className:e,children:[O&&(0,t.jsx)(p.Button,{type:"default",className:"w-full [&>span]:w-full",size:T,disabled:!0,children:(0,t.jsx)(P.Skeleton,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),E&&H&&(0,t.jsxs)(m.Alert_Shadcn_,{variant:"warning",className:"!px-3 !py-3",children:[(0,t.jsx)(u.AlertTitle_Shadcn_,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,t.jsxs)(d.AlertDescription_Shadcn_,{className:"text-xs mb-2 break-words",children:["Error: ",V?.message]}),(0,t.jsx)(p.Button,{type:"default",size:"tiny",onClick:()=>W(),children:"Reload schemas"})]}),B&&(0,t.jsxs)(S.Popover_Shadcn_,{open:F,onOpenChange:L,modal:!1,children:[(0,t.jsx)(v.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(p.Button,{size:T,disabled:N,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,t.jsx)(s.ChevronsUpDown,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:C?(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,t.jsx)("p",{className:"text-foreground",children:"*"===C?"All schemas":C})]}):(0,t.jsx)("div",{className:"w-full flex gap-1",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,t.jsx)(_.PopoverContent_Shadcn_,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:$,sameWidthAsTrigger:!0,children:(0,t.jsxs)(b.Command_Shadcn_,{children:[(0,t.jsx)(x.CommandInput_Shadcn_,{className:"text-xs",placeholder:"Find schema..."}),(0,t.jsxs)(y.CommandList_Shadcn_,{children:[(0,t.jsx)(h.CommandEmpty_Shadcn_,{children:"No schemas found"}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(w.ScrollArea,{className:(Q||[]).length>7?"h-[210px]":"",children:[k&&(0,t.jsxs)(g.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{D("*"),L(!1)},onClick:()=>{D("*"),L(!1)},children:[(0,t.jsx)("span",{children:"All schemas"}),"*"===C&&(0,t.jsx)(r.Check,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),Q?.map(e=>(0,t.jsxs)(g.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{D(e.name),L(!1)},onClick:()=>{D(e.name),L(!1)},children:[(0,t.jsx)("span",{children:e.name}),C===e.name&&(0,t.jsx)(r.Check,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==R&&M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.CommandSeparator_Shadcn_,{}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(g.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{R(),L(!1)},onClick:()=>{R(),L(!1)},children:[(0,t.jsx)(n.Plus,{size:12}),"Create a new schema"]})})]})]})]})})]})]})};e.s(["SchemaSelector",0,N,"default",0,N])},983783,e=>{"use strict";var t=e.i(533488),a=e.i(389959);e.i(128328);var r=e.i(947748),s=e.i(158639);e.s(["useQuerySchemaState",0,()=>{var e;let{ref:n}=(0,s.useParams)(),i=n&&n.length>0&&window.localStorage.getItem(r.LOCAL_STORAGE_KEYS.LAST_SELECTED_SCHEMA(n))||"public",[l,o]=(e=(0,a.useMemo)(()=>i,[n]),(0,t.useQueryState)("schema",t.parseAsString.withDefault(e).withOptions({clearOnDefault:!1})));return(0,a.useEffect)(()=>{n&&n.length>0&&window.localStorage.setItem(r.LOCAL_STORAGE_KEYS.LAST_SELECTED_SCHEMA(n),l)},[l,n]),{selectedSchema:l,setSelectedSchema:o}}])},892277,e=>{"use strict";var t=e.i(478902),a=e.i(389959),r=e.i(837710),s=e.i(253214),n=e.i(392491),i=e.i(710483);let l=({onClose:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.DialogHeader,{children:(0,t.jsx)(s.DialogTitle,{children:"Schemas managed by Supabase"})}),(0,t.jsx)(s.DialogSectionSeparator,{}),(0,t.jsxs)(s.DialogSection,{className:"space-y-2 prose",children:[(0,t.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:n.INTERNAL_SCHEMAS.map(e=>(0,t.jsx)("code",{className:"text-xs",children:e},e))}),(0,t.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,t.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,t.jsx)(s.DialogFooter,{children:(0,t.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,t.jsx)(r.Button,{type:"default",onClick:e,children:"Understood"})})})]});e.s(["ProtectedSchemaWarning",0,({size:e="md",schema:o,entity:c})=>{let[d,u]=(0,a.useState)(!1),{isSchemaLocked:m,reason:p,fdwType:h}=(0,n.useIsProtectedSchema)({schema:o});return m?(0,t.jsx)(i.Admonition,{showIcon:"sm"!==e,layout:"sm"===e?"vertical":"horizontal",type:"note",title:"sm"===e?"Viewing protected schema":`Viewing ${c} from a protected schema`,description:"fdw"===p&&"iceberg"===h?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):"fdw"===p&&"s3_vectors"===h?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is used by Supabase to connect to vector buckets and is read-only through the dashboard."]}):(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:o})," schema is managed by Supabase and is read-only through the dashboard."]}),actions:("fdw"!==p||"iceberg"!==h&&"s3_vectors"!==h)&&(0,t.jsxs)(s.Dialog,{open:d,onOpenChange:u,children:[(0,t.jsx)(s.DialogTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{type:"default",size:"tiny",onClick:()=>u(!0),children:"Learn more"})}),(0,t.jsx)(s.DialogContent,{children:(0,t.jsx)(l,{onClose:()=>u(!1)})})]})}):null}])},774184,e=>{"use strict";function t(e){return`
    begin;
 
    ${e}
    
    commit;
  `}function a(e){return`
    begin;
 
    ${e}
    
    rollback;
  `}e.s(["wrapWithRollback",()=>a,"wrapWithTransaction",()=>t])},723633,(e,t,a)=>{var r=e.r(959472),s=e.r(262523),n=e.r(838959),i=e.r(413850);t.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),a=arguments[0],l=e;l--;)t[l-1]=arguments[l];return r(i(a)?n(a):[a],s(t,1))}},707409,e=>{"use strict";var t=e.i(723633),a=e.i(339098);let r=["int2","int4","int8","float4","float8","numeric","double precision"],s=["json","jsonb"],n=["text","varchar"],i=["timestamp","timestamptz"],l=["date"],o=["time","timetz"],c=(0,t.default)(i,l,o),d=["uuid","bool","vector","bytea"],u=(0,a.default)((0,t.default)(r,s,n,c,d));e.s(["DATETIME_TYPES",0,c,"DATE_TYPES",0,l,"JSON_TYPES",0,s,"NUMERICAL_TYPES",0,r,"OTHER_DATA_TYPES",0,d,"POSTGRES_DATA_TYPES",0,u,"POSTGRES_DATA_TYPE_OPTIONS",0,[{name:"int2",description:"Signed two-byte integer",type:"number"},{name:"int4",description:"Signed four-byte integer",type:"number"},{name:"int8",description:"Signed eight-byte integer",type:"number"},{name:"float4",description:"Single precision floating-point number (4 bytes)",type:"number"},{name:"float8",description:"Double precision floating-point number (8 bytes)",type:"number"},{name:"numeric",description:"Exact numeric of selectable precision",type:"number"},{name:"json",description:"Textual JSON data",type:"json"},{name:"jsonb",description:"Binary JSON data, decomposed",type:"json"},{name:"text",description:"Variable-length character string",type:"text"},{name:"varchar",description:"Variable-length character string",type:"text"},{name:"uuid",description:"Universally unique identifier",type:"text"},{name:"date",description:"Calendar date (year, month, day)",type:"time"},{name:"time",description:"Time of day (no time zone)",type:"time"},{name:"timetz",description:"Time of day, including time zone",type:"time"},{name:"timestamp",description:"Date and time (no time zone)",type:"time"},{name:"timestamptz",description:"Date and time, including time zone",type:"time"},{name:"bool",description:"Logical boolean (true/false)",type:"bool"},{name:"bytea",description:"Variable-length binary string",type:"others"}],"RECOMMENDED_ALTERNATIVE_DATA_TYPE",0,{varchar:{alternative:"text",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_varchar.28n.29_by_default"},json:{alternative:"jsonb",reference:"https://www.postgresql.org/docs/current/datatype-json.html"},timetz:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timetz"},timestamp:{alternative:"timestamptz",reference:"https://wiki.postgresql.org/wiki/Don't_Do_This#Don.27t_use_timestamp_.28without_time_zone.29"}},"TEXT_TYPES",0,n,"TIMESTAMP_TYPES",0,i,"TIME_TYPES",0,o])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:r=3,redaction:s="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:i=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...i].map(e=>e.toLowerCase())),o=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of o)t=t.replace(e,s);return t}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=r)return n;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let r=[];c.set(t,r);for(let s=0;s<t.length;s++)r[s]=e(t[s],a+1);return r}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let r={};for(let[n,i]of(c.set(t,r),Object.entries(t)))u(n)?r[n]=s:r[n]=e(i,a+1);return r}if(t instanceof Map){let r=[];for(let[n,i]of(c.set(t,r),t.entries())){let t=u(n)?s:e(n,a+1),l=u(n)?s:e(i,a+1);r.push([t,l])}return r}if(t instanceof Set){let r=[];for(let s of(c.set(t,r),t.values()))r.push(e(s,a+1));return r}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:n};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},891858,e=>{"use strict";var t=e.i(478902),a=e.i(53071),r=e.i(471998),s=e.i(366652),n=e.i(211570),i=e.i(533488),l=e.i(389959),o=e.i(355901),c=e.i(567558),d=e.i(513826),u=e.i(300424),m=e.i(155482),p=e.i(114378),h=e.i(983783),f=e.i(635494),x=e.i(392491),g=e.i(837710),y=e.i(627069),j=e.i(874311),b=e.i(171997),_=e.i(492418),v=e.i(108151),S=e.i(892277),w=e.i(532728),P=e.i(867637),N=e.i(17203),T=e.i(479232),E=e.i(210419),C=e.i(828945),k=e.i(408891),A=e.i(531837),D=e.i(38429),R=e.i(356003),$=e.i(714403),F=e.i(774184),L=e.i(686255);async function M({projectRef:e,connectionString:t,schema:a,name:r,description:s,values:n}){let i=`create type "${a}"."${r}" as enum (${n.map(e=>`'${e}'`).join(", ")});`,l=void 0!==s?`comment on type "${a}"."${r}" is '${s}';`:"",o=(0,F.wrapWithTransaction)(`${i} ${l}`),{result:c}=await (0,$.executeSql)({projectRef:e,connectionString:t,sql:o});return c}var I=e.i(206413),z=e.i(592360),O=e.i(178527),B=e.i(24315),H=e.i(215317),V=e.i(61863),W=e.i(191209),Q=e.i(837243),q=e.i(846887),Y=e.i(428353),K=e.i(378277),U=e.i(539013),G=e.i(843778),Z=e.i(525882);let J=({index:e,id:a,field:r,isDisabled:s=!1,onRemoveValue:i})=>(0,t.jsx)(C.Draggable,{draggableId:a,index:e,isDragDisabled:s,children:e=>(0,t.jsxs)("div",{ref:e.innerRef,...e.draggableProps,className:"flex items-center space-x-2 space-y-2",children:[(0,t.jsx)("div",{...e.dragHandleProps,className:`opacity-50 hover:opacity-100 transition ${s?"text-foreground-lighter !cursor-default":"text-foreground"}`,children:(0,t.jsx)(Z.GripVertical,{size:16,strokeWidth:1.5})}),(0,t.jsx)(K.Input_Shadcn_,{...r,className:"w-full"}),(0,t.jsx)(g.Button,{type:"default",size:"small",disabled:s,icon:(0,t.jsx)(n.Trash,{strokeWidth:1.5,size:16}),className:"px-2",onClick:()=>i()})]})});var X=e.i(707409);let ee=[...X.NUMERICAL_TYPES,...X.TEXT_TYPES,...X.JSON_TYPES,...X.TIMESTAMP_TYPES,...X.TIME_TYPES,...X.DATE_TYPES,...X.OTHER_DATA_TYPES,"bigint","bigserial","bit","bit varying","boolean","box","bytea","char","character","character varying","cidr","circle","date","double precision","inet","int","integer","interval","line","lseg","macaddr","macaddr8","money","numeric","decimal","path","pg_lsn","pg_snapshot","point","polygon","real","smallint","smallserial","serial","time with timezone","timestamp with timezone","tsquery","tsvector","txid_snapshot","xml"],et=({visible:e,onClose:a,schema:r})=>{let s={name:"",description:"",values:[{value:""}]},n=(0,l.useRef)(null),{data:i}=(0,f.useSelectedProjectQuery)(),{mutate:c,isPending:d}=(({onSuccess:e,onError:t,...a}={})=>{let r=(0,R.useQueryClient)();return(0,D.useMutation)({mutationFn:e=>M(e),async onSuccess(t,a,s){let{projectRef:n}=a;await r.invalidateQueries({queryKey:L.enumeratedTypesKeys.list(n)}),await e?.(t,a,s)},async onError(e,a,r){void 0===t?o.toast.error(`Failed to create enumerated type: ${e.message}`):t(e,a,r)},...a})})({onSuccess:(e,t)=>{o.toast.success(`Successfully created type "${t.name}"`),j()}});(0,l.useEffect)(()=>{m.reset(s)},[e]);let u=A.object({name:A.string().min(1,"Please provide a name for your enumerated type").refine(e=>!ee.includes(e),{message:"Name cannot be a native Postgres data type"}).default(""),description:A.string().default("").optional(),values:A.object({value:A.string().min(1,"Please provide a value")}).array().default([])}),m=(0,k.useForm)({resolver:(0,w.zodResolver)(u),defaultValues:s}),{fields:p,append:h,remove:x,move:y}=(0,k.useFieldArray)({name:"values",control:m.control}),j=()=>{m.reset(s),a()};return(0,t.jsx)(U.SidePanel,{loading:d,visible:e,onCancel:j,header:"Create a new enumerated type",confirmText:"Create type",onConfirm:()=>{n.current&&n.current.click()},children:(0,t.jsx)(U.SidePanel.Content,{className:"py-4",children:(0,t.jsx)(Y.Form_Shadcn_,{...m,children:(0,t.jsxs)("form",{className:"space-y-4",onSubmit:m.handleSubmit(e=>i?.ref===void 0?console.error("Project ref required"):i?.connectionString===void 0?console.error("Project connectionString required"):void c({projectRef:i.ref,connectionString:i.connectionString,schema:r,name:e.name,description:e.description?.replaceAll("'","''"),values:e.values.filter(e=>e.value.length>0).map(e=>e.value.trim())})),children:[(0,t.jsx)(V.FormField_Shadcn_,{control:m.control,name:"name",render:({field:e})=>(0,t.jsxs)(W.FormItem_Shadcn_,{children:[(0,t.jsx)(Q.FormLabel_Shadcn_,{children:"Name"}),(0,t.jsx)(B.FormControl_Shadcn_,{children:(0,t.jsx)(K.Input_Shadcn_,{...e})}),(0,t.jsx)(q.FormMessage_Shadcn_,{})]})}),(0,t.jsx)(V.FormField_Shadcn_,{control:m.control,name:"description",render:({field:e})=>(0,t.jsxs)(W.FormItem_Shadcn_,{children:[(0,t.jsx)(Q.FormLabel_Shadcn_,{children:"Description"}),(0,t.jsx)(B.FormControl_Shadcn_,{children:(0,t.jsx)(K.Input_Shadcn_,{...e})}),(0,t.jsx)(H.FormDescription_Shadcn_,{children:"Optional"})]})}),(0,t.jsx)(C.DragDropContext,{onDragEnd:e=>{e.destination&&y(e.source.index,e.destination.index)},children:(0,t.jsx)(C.Droppable,{droppableId:"enum_type_values_droppable",children:e=>(0,t.jsxs)("div",{ref:e.innerRef,children:[p.map((e,a)=>(0,t.jsx)(V.FormField_Shadcn_,{control:m.control,name:`values.${a}.value`,render:({field:r})=>(0,t.jsxs)(W.FormItem_Shadcn_,{children:[(0,t.jsx)(Q.FormLabel_Shadcn_,{className:(0,G.cn)(0!==a&&"sr-only"),children:"Values"}),0===a&&(0,t.jsxs)(O.Alert_Shadcn_,{children:[(0,t.jsx)(P.AlertCircle,{strokeWidth:1.5}),(0,t.jsx)(z.AlertTitle_Shadcn_,{children:"After creation, values cannot be deleted or sorted"}),(0,t.jsxs)(I.AlertDescription_Shadcn_,{children:[(0,t.jsx)("p",{className:"!leading-normal track",children:"You will need to delete and recreate the enumerated type with the updated values instead."}),(0,t.jsx)(g.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(N.ExternalLink,{strokeWidth:1.5}),className:"mt-2",children:(0,t.jsx)(E.default,{href:"https://www.postgresql.org/message-id/21012.1459434338%40sss.pgh.pa.us",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,t.jsx)(B.FormControl_Shadcn_,{children:(0,t.jsx)(J,{index:a,id:e.id,field:r,isDisabled:p.length<2,onRemoveValue:()=>x(a)})}),(0,t.jsx)(q.FormMessage_Shadcn_,{className:"ml-6"})]})},e.id)),e.placeholder]})})}),(0,t.jsx)(g.Button,{type:"default",icon:(0,t.jsx)(T.Plus,{strokeWidth:1.5}),onClick:()=>h({value:""}),children:"Add value"}),(0,t.jsx)(g.Button,{ref:n,htmlType:"submit",type:"default",className:"hidden",children:"Update"})]})})})})};async function ea({projectRef:e,connectionString:t,name:a,schema:r}){let s=`drop type if exists ${r}."${a}"`,{result:n}=await (0,$.executeSql)({projectRef:e,connectionString:t,sql:s});return n}var er=e.i(466472);let es=({visible:e,selectedEnumeratedType:a,onClose:r,onDelete:s})=>{let{data:n}=(0,f.useSelectedProjectQuery)(),{mutate:i,isPending:l}=(({onSuccess:e,onError:t,...a}={})=>{let r=(0,R.useQueryClient)();return(0,D.useMutation)({mutationFn:e=>ea(e),async onSuccess(t,a,s){let{projectRef:n}=a;await r.invalidateQueries({queryKey:L.enumeratedTypesKeys.list(n)}),await e?.(t,a,s)},async onError(e,a,r){void 0===t?o.toast.error(`Failed to create enumerated type: ${e.message}`):t(e,a,r)},...a})})({onSuccess:()=>{o.toast.success(`Successfully deleted "${a.name}"`),r()}});return(0,t.jsxs)(er.default,{variant:"destructive",size:"medium",loading:l,visible:e,title:(0,t.jsxs)(t.Fragment,{children:["Confirm to delete enumerated type"," ",(0,t.jsx)("code",{className:"text-sm",children:a?.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onCancel:r,onConfirm:()=>void 0===a?console.error("No enumerated type selected"):n?.ref===void 0?console.error("Project ref required"):n?.connectionString===void 0?console.error("Project connectionString required"):void(s?.(),i({projectRef:n?.ref,connectionString:n?.connectionString,name:a.name,schema:a.schema})),alert:{title:"This action cannot be undone",description:"You will need to re-create the enumerated type if you want to revert the deletion."},children:[(0,t.jsx)("p",{className:"text-sm",children:"Before deleting this enumerated type, consider:"}),(0,t.jsx)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:(0,t.jsx)("li",{className:"list-disc ml-6",children:"This enumerated type is no longer in use in any tables or functions"})})]})};async function en({projectRef:e,connectionString:t,schema:a,name:r,description:s,values:n=[]}){let i=[];r.original!==r.updated&&i.push(`alter type "${a}"."${r.original}" rename to "${r.updated}";`),n.length>0&&n.forEach((e,t)=>{if(e.isNew)if(0===t){let t=n.find(e=>!e.isNew);i.push(`alter type "${a}"."${r.updated}" add value '${e.updated}' before '${t?.original}';`)}else i.push(`alter type "${a}"."${r.updated}" add value '${e.updated}' after '${n[t-1].updated}';`);else e.original!==e.updated&&i.push(`alter type "${a}"."${r.updated}" rename value '${e.original}' to '${e.updated}';`)}),void 0!==s&&i.push(`comment on type "${a}"."${r.updated}" is '${s}';`);let l=(0,F.wrapWithTransaction)(i.join(" ")),{result:o}=await (0,$.executeSql)({projectRef:e,connectionString:t,sql:l});return o}let ei=({visible:e,selectedEnumeratedType:a,onClose:r})=>{let s=(0,l.useRef)(null),{data:n}=(0,f.useSelectedProjectQuery)(),{mutate:i,isPending:c}=(({onSuccess:e,onError:t,...a}={})=>{let r=(0,R.useQueryClient)();return(0,D.useMutation)({mutationFn:e=>en(e),async onSuccess(t,a,s){let{projectRef:n}=a;await r.invalidateQueries({queryKey:L.enumeratedTypesKeys.list(n)}),await e?.(t,a,s)},async onError(e,a,r){void 0===t?o.toast.error(`Failed to add value to enumerated type: ${e.message}`):t(e,a,r)},...a})})({onSuccess:(e,t)=>{o.toast.success(`Successfully updated type "${t.name.updated}"`),r()}}),d=A.object({name:A.string().min(1,"Please provide a name for your enumerated type").default(""),description:A.string().default("").optional(),values:A.object({isNew:A.boolean(),originalValue:A.string(),updatedValue:A.string().min(1,"Please provide a value")}).array().default([])}),u=(0,k.useForm)({resolver:(0,w.zodResolver)(d),defaultValues:{name:"",description:"",values:[{isNew:!0,originalValue:"",updatedValue:""}]}}),{fields:m,append:p,remove:h,move:x}=(0,k.useFieldArray)({name:"values",control:u.control}),y=(a?.enums??[]).map(e=>({isNew:!1,originalValue:e,updatedValue:e}));return(0,l.useEffect)(()=>{void 0!==a&&u.reset({name:a.name,description:a.comment??"",values:y}),void 0==a&&u.reset({values:y})},[a]),(0,t.jsx)(U.SidePanel,{loading:c,visible:e,onCancel:r,header:`Update type "${a?.name}"`,confirmText:"Update type",onConfirm:()=>{s.current&&s.current.click()},children:(0,t.jsx)(U.SidePanel.Content,{className:"py-4",children:(0,t.jsx)(Y.Form_Shadcn_,{...u,children:(0,t.jsxs)("form",{className:"space-y-4",onSubmit:u.handleSubmit(e=>{if(n?.ref===void 0)return console.error("Project ref required");if(n?.connectionString===void 0)return console.error("Project connectionString required");if(void 0===a)return console.error("selectedEnumeratedType required");let t={schema:a.schema,name:{original:a.name,updated:e.name},values:e.values.filter(e=>0!==e.updatedValue.length).map(e=>({original:e.originalValue,updated:e.updatedValue.trim(),isNew:e.isNew})),...e.description!==a.comment?{description:e.description?.replaceAll("'","''")}:{}};i({projectRef:n.ref,connectionString:n.connectionString,...t})}),children:[(0,t.jsx)(V.FormField_Shadcn_,{control:u.control,name:"name",render:({field:e})=>(0,t.jsxs)(W.FormItem_Shadcn_,{children:[(0,t.jsx)(Q.FormLabel_Shadcn_,{children:"Name"}),(0,t.jsx)(B.FormControl_Shadcn_,{children:(0,t.jsx)(K.Input_Shadcn_,{...e})}),(0,t.jsx)(q.FormMessage_Shadcn_,{})]})}),(0,t.jsx)(V.FormField_Shadcn_,{control:u.control,name:"description",render:({field:e})=>(0,t.jsxs)(W.FormItem_Shadcn_,{children:[(0,t.jsx)(Q.FormLabel_Shadcn_,{children:"Description"}),(0,t.jsx)(B.FormControl_Shadcn_,{children:(0,t.jsx)(K.Input_Shadcn_,{...e})}),(0,t.jsx)(H.FormDescription_Shadcn_,{children:"Optional"})]})}),(0,t.jsx)(C.DragDropContext,{onDragEnd:e=>{e.destination&&x(e.source.index,e.destination.index)},children:(0,t.jsx)(C.Droppable,{droppableId:"enum_type_values_droppable",children:e=>(0,t.jsxs)("div",{ref:e.innerRef,children:[m.map((e,a)=>(0,t.jsx)(V.FormField_Shadcn_,{control:u.control,name:`values.${a}.updatedValue`,render:({field:r})=>(0,t.jsxs)(W.FormItem_Shadcn_,{children:[(0,t.jsx)(Q.FormLabel_Shadcn_,{className:(0,G.cn)(0!==a&&"sr-only"),children:"Values"}),0===a&&(0,t.jsxs)(O.Alert_Shadcn_,{children:[(0,t.jsx)(P.AlertCircle,{strokeWidth:1.5}),(0,t.jsx)(z.AlertTitle_Shadcn_,{children:"Existing values cannot be deleted or sorted"}),(0,t.jsxs)(I.AlertDescription_Shadcn_,{children:[(0,t.jsx)("p",{className:"!leading-normal track",children:"You will need to delete and recreate the enumerated type with the updated values instead."}),(0,t.jsx)(g.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(N.ExternalLink,{strokeWidth:1.5}),className:"mt-2",children:(0,t.jsx)(E.default,{href:"https://www.postgresql.org/message-id/21012.1459434338%40sss.pgh.pa.us",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,t.jsx)(B.FormControl_Shadcn_,{children:(0,t.jsx)(J,{index:a,id:e.id,field:r,isDisabled:!e.isNew,onRemoveValue:()=>h(a)})}),(0,t.jsx)(q.FormMessage_Shadcn_,{className:"ml-6"})]})},e.id)),e.placeholder]})})}),(0,t.jsx)(g.Button,{type:"default",icon:(0,t.jsx)(T.Plus,{strokeWidth:1.5}),onClick:()=>p({isNew:!0,originalValue:"",updatedValue:""}),children:"Add value"}),(0,t.jsx)(g.Button,{ref:s,htmlType:"submit",type:"default",className:"hidden",children:"Update"})]})})})})},el=()=>{let{data:e}=(0,f.useSelectedProjectQuery)(),[w,P]=(0,l.useState)(""),{selectedSchema:N,setSelectedSchema:T}=(0,h.useQuerySchemaState)(),E=(0,l.useRef)(null),{data:C,error:k,isPending:A,isError:D,isSuccess:R}=(0,m.useEnumeratedTypesQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),[$,F]=(0,i.useQueryState)("new",i.parseAsBoolean.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{value:L,setValue:M}=(0,p.useQueryStateWithSelect)({urlKey:"edit",select:e=>e?C?.find(t=>t.id.toString()===e):void 0,enabled:!!C,onError:()=>o.toast.error("Enumerated Type not found")}),{value:I,setValue:z}=(0,p.useQueryStateWithSelect)({urlKey:"delete",select:e=>e?C?.find(t=>t.id.toString()===e):void 0,enabled:!!C,onError:(e,t)=>(0,p.handleErrorOnDelete)(E,t,"Enumerated Type not found")}),O=(C??[]).filter(e=>e.enums.length>0),B=w.length>0?O.filter(e=>e.schema===N&&e.name.toLowerCase().includes(w.toLowerCase())):O.filter(e=>e.schema===N),{isSchemaLocked:H}=(0,x.useIsProtectedSchema)({schema:N});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2 flex-wrap",children:[(0,t.jsx)(u.default,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:N,onSelectSchema:T}),(0,t.jsx)(b.Input,{size:"tiny",value:w,className:"w-full lg:w-52",onChange:e=>P(e.target.value),placeholder:"Search for a type",icon:(0,t.jsx)(s.Search,{})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.DocsButton,{href:"https://www.postgresql.org/docs/current/datatype-enum.html"}),!H&&(0,t.jsx)(g.Button,{className:"ml-auto flex-1",type:"primary",onClick:()=>F(!0),children:"Create type"})]})]}),H&&(0,t.jsx)(S.ProtectedSchemaWarning,{schema:N,entity:"enumerated types"}),A&&(0,t.jsx)(v.GenericSkeletonLoader,{}),D&&(0,t.jsx)(c.default,{error:k,subject:"Failed to retrieve database enumerated types"}),R&&(0,t.jsx)(y.Card,{children:(0,t.jsxs)(_.Table,{children:[(0,t.jsx)(_.TableHeader,{children:(0,t.jsxs)(_.TableRow,{children:[(0,t.jsx)(_.TableHead,{children:"Schema"},"schema"),(0,t.jsx)(_.TableHead,{children:"Name"},"name"),(0,t.jsx)(_.TableHead,{children:"Values"},"values"),(0,t.jsx)(_.TableHead,{},"actions")]})}),(0,t.jsx)(_.TableBody,{children:(0,t.jsxs)(t.Fragment,{children:[0===B.length&&0===w.length&&(0,t.jsx)(_.TableRow,{children:(0,t.jsxs)(_.TableCell,{colSpan:4,children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:"No enumerated types created yet"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no enumerated types found in the schema "',N,'"']})]})}),0===B.length&&w.length>0&&(0,t.jsx)(_.TableRow,{children:(0,t.jsxs)(_.TableCell,{colSpan:4,children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',w,'" did not return any results']})]})}),B.length>0&&B.map(e=>(0,t.jsxs)(_.TableRow,{children:[(0,t.jsx)(_.TableCell,{className:"w-20",children:(0,t.jsx)("p",{className:"w-20 truncate",children:e.schema})}),(0,t.jsx)(_.TableCell,{children:e.name}),(0,t.jsx)(_.TableCell,{children:e.enums.join(", ")}),(0,t.jsx)(_.TableCell,{children:!H&&(0,t.jsx)("div",{className:"flex justify-end items-center space-x-2",children:(0,t.jsxs)(j.DropdownMenu,{children:[(0,t.jsx)(j.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(g.Button,{type:"default",className:"px-1",icon:(0,t.jsx)(r.MoreVertical,{})})}),(0,t.jsxs)(j.DropdownMenuContent,{side:"bottom",align:"end",className:"w-32",children:[(0,t.jsxs)(j.DropdownMenuItem,{className:"space-x-2",onClick:()=>M(e.id.toString()),children:[(0,t.jsx)(a.Edit,{size:14}),(0,t.jsx)("p",{children:"Update type"})]}),(0,t.jsxs)(j.DropdownMenuItem,{className:"space-x-2",onClick:()=>z(e.id.toString()),children:[(0,t.jsx)(n.Trash,{size:14}),(0,t.jsx)("p",{children:"Delete type"})]})]})]})})})]},e.id))]})})]})}),(0,t.jsx)(et,{visible:$,onClose:()=>F(!1),schema:N}),(0,t.jsx)(ei,{visible:!!L,selectedEnumeratedType:L,onClose:()=>M(null)}),(0,t.jsx)(es,{visible:!!I,selectedEnumeratedType:I,onClose:()=>z(null),onDelete:()=>{I&&(E.current=I.id.toString())}})]})};var eo=e.i(812136),ec=e.i(448710),ed=e.i(127739),eu=e.i(456050),em=e.i(228027);let ep=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eu.PageHeader,{size:"large",children:(0,t.jsx)(eu.PageHeaderMeta,{children:(0,t.jsxs)(eu.PageHeaderSummary,{children:[(0,t.jsx)(eu.PageHeaderTitle,{children:"Database Enumerated Types"}),(0,t.jsx)(eu.PageHeaderDescription,{children:"Custom data types that you can use in your database tables or functions"})]})})}),(0,t.jsx)(ed.PageContainer,{size:"large",children:(0,t.jsx)(em.PageSection,{children:(0,t.jsx)(em.PageSectionContent,{children:(0,t.jsx)(el,{})})})})]});ep.getLayout=e=>(0,t.jsx)(ec.default,{children:(0,t.jsx)(eo.default,{title:"Database",children:e})}),e.s(["default",0,ep],891858)},807699,(e,t,a)=>{let r="/project/[ref]/database/types";(window.__NEXT_P=window.__NEXT_P||[]).push([r,()=>e.r(891858)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([r])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0860ba34f07162db.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=b1d100b7-816f-3a45-0973-4e8787faa61f
//# sourceMappingURL=7708426e28763ac9.js.map