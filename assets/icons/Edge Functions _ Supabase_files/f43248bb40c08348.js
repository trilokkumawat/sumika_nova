;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="23e8359e-a9cb-1bf3-3015-4583c7e4b81b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),s=e.i(710483);let r=({resourceText:e,isFullPage:r=!1})=>{let a=()=>(0,t.jsx)(s.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return r?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(a,{})})}):(0,t.jsx)(a,{})};e.s(["NoPermission",0,r,"default",0,r])},3259,100387,e=>{"use strict";var t=e.i(478902),s=e.i(153545),r=e.i(933505);e.s(["ChevronRightIcon",()=>r.default],100387);var r=r,a=e.i(389959),n=e.i(843778);let i=a.forwardRef(({...e},s)=>(0,t.jsx)("nav",{ref:s,"aria-label":"breadcrumb",...e}));i.displayName="Breadcrumb";let l=a.forwardRef(({className:e,...s},r)=>(0,t.jsx)("ol",{ref:r,className:(0,n.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...s}));l.displayName="BreadcrumbList";let c=a.forwardRef(({className:e,...s},r)=>(0,t.jsx)("li",{ref:r,className:(0,n.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...s}));c.displayName="BreadcrumbItem";let o=a.forwardRef(({asChild:e,className:r,...a},i)=>{let l=e?s.Slot:"a";return(0,t.jsx)(l,{ref:i,className:(0,n.cn)("transition-colors underline lg:no-underline hover:text-foreground",r),...a})});o.displayName="BreadcrumbLink";let d=a.forwardRef(({className:e,...s},r)=>(0,t.jsx)("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("no-underline text-foreground",e),...s}));d.displayName="BreadcrumbPage";let h=({children:e,className:s,...a})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5 text-foreground-muted",s),...a,children:e??(0,t.jsx)(r.default,{})});h.displayName="BreadcrumbSeparator";let u=({className:e,...s})=>(0,t.jsxs)("span",{className:(0,n.cn)("flex h-4 w-4 items-center justify-center",e),...s,children:[(0,t.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"sr-only",children:"More"})]});u.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>i,"BreadcrumbEllipsis",()=>u,"BreadcrumbItem",()=>c,"BreadcrumbLink",()=>o,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>h],3259)},744061,418638,e=>{"use strict";var t=e.i(478902),s=e.i(938933),r=e.i(843778);function a({children:e,className:s,tag:r="div",style:a}){let n=`${r}`;return(0,t.jsx)(n,{style:a,children:e})}a.Title=function({className:e,level:s=1,children:r,style:a}){let n=`h${s}`;return(0,t.jsx)(n,{style:a,children:r})},a.Text=function({className:e,children:s,style:r,type:a,disabled:n,mark:i,code:l,keyboard:c,underline:o,strikethrough:d,strong:h,small:u}){return l?(0,t.jsx)("code",{style:r,children:s}):i?(0,t.jsx)("mark",{style:r,children:s}):c?(0,t.jsx)("kbd",{style:r,children:s}):h?(0,t.jsx)("strong",{style:r,children:s}):(0,t.jsx)("span",{style:r,children:s})},a.Link=function({children:e,target:s="_blank",href:r,className:a,onClick:n,style:i}){return(0,t.jsx)("a",{onClick:n,href:r,target:s,rel:"noopener noreferrer",style:i,children:e})},e.s(["default",0,a],418638);var n=e.i(389959);let i=(0,n.createContext)({type:"text"}),l=e=>{let{type:s}=e;return(0,t.jsx)(i.Provider,{value:{type:s},children:e.children})},c=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function o({children:e,className:s,ulClassName:r,style:a,type:n="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:a,children:(0,t.jsx)(l,{type:n,children:(0,t.jsx)("ul",{className:r,children:e})})})}o.Item=function({children:e,icon:a,active:n,rounded:i,onClick:l,doNotCloseOverlay:o=!1,showActiveBar:d=!1,style:h}){let u=(0,s.default)("menu"),{type:m}=c(),f=[u.item.base];f.push(u.item.variants[m].base),n?f.push(u.item.variants[m].active):f.push(u.item.variants[m].normal);let p=[u.item.content.base];n?p.push(u.item.content.active):p.push(u.item.content.normal);let x=[u.item.icon.base];return n?x.push(u.item.icon.active):x.push(u.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,r.cn)("outline-none",f),style:h,onClick:l,"aria-current":n?"page":void 0,children:[a&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:a}),(0,t.jsx)("span",{className:p.join(" "),children:e})]})},o.Group=function({children:e,icon:r,title:a}){let n=(0,s.default)("menu"),{type:i}=c();return(0,t.jsxs)("div",{className:[n.group.base,n.group.variants[i]].join(" "),children:[r&&(0,t.jsx)("span",{className:n.group.icon,children:r}),(0,t.jsx)("span",{className:n.group.content,children:a}),e]})},o.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(a.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,o],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),s=e.i(587433),r=e.i(862326),a=e.i(210419),n=e.i(837710);let i=({item:e,isActive:i,target:l="_self",hoverText:c="",onClick:o})=>{let{name:d="",url:h="",icon:u,rightIcon:m,isExternal:f,label:p,disabled:x}=e,g=(0,t.jsx)(r.Menu.Item,{icon:u,active:i,onClick:o,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:c||("string"==typeof d?d:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:d}),void 0!==p&&(0,t.jsx)(s.Badge,{className:"flex-shrink-0",variant:"new"===p.toLowerCase()?"success":"warning",children:p})]}),m&&(0,t.jsx)("div",{children:m})]})});return x?(0,t.jsx)("div",{className:"opacity-50 pointer-events-none",children:g}):h?f?(0,t.jsx)(n.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:u,children:(0,t.jsx)(a.default,{href:h,target:"_blank",rel:"noreferrer",children:d})}):(0,t.jsx)(a.default,{href:h,className:"block",target:l,children:g}):g};e.s(["ProductMenuItem",0,i],799793),e.s(["ProductMenu",0,({page:e,menu:a})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(r.Menu,{type:"pills",children:a.map((n,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(r.Menu.Group,{title:n.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:n.title}),n.isPreview&&(0,t.jsx)(s.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:n.items.map(s=>{let r=s.pages?s.pages.includes(e??""):e===s.key;return(0,t.jsx)(i,{item:s,isActive:r,target:s.isExternal?"_blank":"_self"},s.key)})})]})}),l!==a.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},n.key||n.title))})})],388147)},388034,e=>{"use strict";let t=(0,e.i(388019).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>t])},61187,e=>{"use strict";var t=e.i(388034);e.s(["RefreshCw",()=>t.default])},167892,e=>{"use strict";var t=e.i(478902),s=e.i(389959),r=e.i(843778);let a="mx-auto w-full max-w-[1200px]",n="px-4 @lg:px-6 @xl:px-10",i=(0,s.forwardRef)(({className:e,bottomPadding:s,size:a="default",...i},l)=>(0,t.jsx)("div",{ref:l,...i,className:(0,r.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[a],n,s&&"pb-16",e)})),l=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("header",{...s,ref:a,className:(0,r.cn)("w-full","flex-col gap-3 py-6",e)})),c=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("h1",{ref:a,...s,className:(0,r.cn)(e)})),o=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,...s,className:(0,r.cn)("text-sm text-foreground-light",e)})),d=(0,s.forwardRef)(({className:e,isFullWidth:s,topPadding:a,...n},i)=>(0,t.jsx)("div",{ref:i,...n,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",e)})),h=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,...s,className:(0,r.cn)("w-full h-px bg-border shrink-0",e)})),u=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,...s,className:(0,r.cn)("text-foreground text-xl",e)})),m=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,...s,className:(0,r.cn)("text-sm text-foreground-light",e)})),f=(0,s.forwardRef)(({className:e,children:s,title:a,...n},i)=>(0,t.jsxs)("div",{ref:i,...n,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",e),children:[a&&(0,t.jsx)("h2",{children:a}),s]})),p=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",e)})),x=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",e)})),g=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex w-full items-center",e)})),j=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex flex-row gap-3",e)})),b=(0,s.forwardRef)(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",e)})),v=(0,s.forwardRef)(({className:e,...s},i)=>(0,t.jsx)("div",{ref:i,...s,className:(0,r.cn)(a,n,"my-8 flex flex-col gap-8",e)}));l.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",o.displayName="ScaffoldDescription",i.displayName="ScaffoldContainer",h.displayName="ScaffoldDivider",d.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",p.displayName="ScaffoldSectionContent",x.displayName="ScaffoldFilterAndContent",g.displayName="ScaffoldActionsContainer",j.displayName="ScaffoldActionsGroup",v.displayName="ScaffoldContainerLegacy",u.displayName="ScaffoldSectionTitle",m.displayName="ScaffoldSectionDescription",e.s(["MAX_WIDTH_CLASSES",0,a,"PADDING_CLASSES",0,n,"ScaffoldActionsContainer",0,g,"ScaffoldActionsGroup",0,j,"ScaffoldColumn",0,b,"ScaffoldContainer",0,i,"ScaffoldContainerLegacy",0,v,"ScaffoldDescription",0,o,"ScaffoldDivider",0,h,"ScaffoldFilterAndContent",0,x,"ScaffoldHeader",0,l,"ScaffoldSection",0,d,"ScaffoldSectionContent",0,p,"ScaffoldSectionDescription",0,m,"ScaffoldSectionDetail",0,f,"ScaffoldSectionTitle",0,u,"ScaffoldTitle",0,c])},547723,e=>{"use strict";var t=e.i(478902),s=e.i(389959),r=e.i(843778);let a=(0,s.forwardRef)((e,s)=>(0,t.jsx)("nav",{ref:s,dir:"ltr",...e,className:(0,r.cn)("border-b",e.className),children:(0,t.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),n=(0,s.forwardRef)(({children:e,className:s,active:a,...n},i)=>(0,t.jsx)("li",{ref:i,"aria-selected":a?"true":"false","data-state":a?"active":"inactive",className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",s),...n,children:e}));e.s(["NavMenu",0,a,"NavMenuItem",0,n])},79771,e=>{"use strict";var t=e.i(478902),s=e.i(210419),r=e.i(271226);e.i(128328);var a=e.i(158639),n=e.i(587433),i=e.i(837710),l=e.i(843778),c=e.i(547723),o=e.i(167892),d=e.i(954676),h=e.i(389959),u=e.i(3259);let m=({title:e,subtitle:r,icon:n,breadcrumbs:i=[],primaryActions:c,secondaryActions:m,className:f,isCompact:p=!1})=>{let{ref:x}=(0,a.useParams)(),g=p&&e?[...i,{label:e}]:i;return(0,t.jsxs)("div",{className:(0,l.cn)("space-y-4",f),children:[(g.length>0||p&&(e||c||m))&&(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-4",p?"justify-between":"mb-4"),children:[(0,t.jsx)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:i.length>0?(0,t.jsx)(u.Breadcrumb,{className:(0,l.cn)("text-foreground-muted",p&&"text-base","min-w-0 flex-1"),children:(0,t.jsxs)(u.BreadcrumbList,{className:(0,l.cn)(p?"text-base":"text-xs","min-w-0"),children:[i.map((e,r)=>(0,t.jsxs)(h.Fragment,{children:[(0,t.jsx)(u.BreadcrumbItem,{children:e.element?e.element:e.href?(0,t.jsx)(u.BreadcrumbLink,{asChild:!0,className:"flex items-center gap-2",children:(0,t.jsxs)(s.default,{href:x?e.href.replace("[ref]",x):e.href,children:[1===i.length&&!p&&(0,t.jsx)(d.ChevronLeft,{size:16,strokeWidth:1.5}),e.label]})}):(0,t.jsxs)(u.BreadcrumbPage,{className:"flex items-center gap-2",children:[1===i.length&&(0,t.jsx)(d.ChevronLeft,{size:16,strokeWidth:1.5}),e.label]})}),r<i.length-1&&(0,t.jsx)(u.BreadcrumbSeparator,{})]},e.label||`breadcrumb-${r}`)),p&&e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.BreadcrumbSeparator,{}),(0,t.jsx)(u.BreadcrumbItem,{className:"min-w-0 flex-1",children:(0,t.jsx)(u.BreadcrumbPage,{className:"min-w-0",children:e})})]})]})}):p?(0,t.jsx)("div",{className:"min-w-0 flex-1",children:e}):null}),p&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:m}),c&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:c})]})]}),!p&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[n&&(0,t.jsx)("div",{className:"text-foreground-light",children:n}),(0,t.jsxs)("div",{className:"space-y-1",children:[e&&("string"==typeof e?(0,t.jsx)(o.ScaffoldTitle,{children:e}):e),r&&("string"==typeof r?(0,t.jsx)(o.ScaffoldDescription,{className:"text-sm text-foreground-light",children:r}):r)]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:m}),c&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:c})]})]})]})};e.s(["PageLayout",0,({children:e,title:d,subtitle:h,icon:u,breadcrumbs:f=[],primaryActions:p,secondaryActions:x,navigationItems:g=[],className:j,size:b="default",isCompact:v=!1})=>{let{ref:y}=(0,a.useParams)(),N=(0,r.useRouter)();return(0,t.jsxs)("div",{className:(0,l.cn)("w-full min-h-full flex flex-col items-stretch",j),children:[(0,t.jsxs)(o.ScaffoldContainer,{size:b,className:(0,l.cn)("w-full mx-auto","full"===b&&(v?"max-w-none !px-6 border-b pt-4":"max-w-none pt-6 !px-10 border-b"),"full"!==b&&(v?"pt-4":"pt-12"),0===g.length&&"full"===b&&(v?"pb-4":"pb-8")),children:[(d||h||p||x||f.length>0)&&(0,t.jsx)(m,{title:d,subtitle:h,icon:u,breadcrumbs:f,primaryActions:p,secondaryActions:x,isCompact:v}),g.length>0&&(0,t.jsx)(c.NavMenu,{className:(0,l.cn)(v?"mt-2":"mt-4","full"===b&&"border-none"),children:g.map(e=>{let r=void 0!==e.active?e.active:N.asPath.split("?")[0]===e.href;return(0,t.jsx)(c.NavMenuItem,{active:r,children:e.href?(0,t.jsxs)(s.default,{href:e.href.includes("[ref]")&&y?e.href.replace("[ref]",y):e.href,className:(0,l.cn)("inline-flex items-center gap-2",r&&"text-foreground"),onClick:e.onClick,children:[e.icon&&(0,t.jsx)("span",{children:e.icon}),e.label,e.badge&&(0,t.jsx)(n.Badge,{variant:"default",children:e.badge})]}):(0,t.jsxs)(i.Button,{type:"link",onClick:e.onClick,className:(0,l.cn)(r&&"text-foreground font-medium"),children:[e.icon&&(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.label,e.badge&&(0,t.jsx)(n.Badge,{variant:"default",children:e.badge})]})},e.label)})})]}),e]})}],79771)},492460,(e,t,s)=>{var r=e.r(851333),a=e.r(961388),n=Object.prototype.hasOwnProperty;t.exports=a(function(e,t,s){n.call(e,s)?e[s].push(t):r(e,s,[t])})},624982,e=>{"use strict";var t=e.i(91810);e.s(["CheckCircle2",()=>t.default])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},124446,414101,e=>{"use strict";var t=e.i(242882),s=e.i(234745);let r={list:e=>["projects",e,"actions"],detail:(e,t)=>["projects",e,"actions",t],logs:(e,t)=>["projects",e,"actions",t,"logs"]};async function a({projectRef:e,runId:t},r){if(!e)throw Error("projectRef is required");if(!t)throw Error("runId is required");let{data:a,error:n}=await (0,s.get)("/v1/projects/{ref}/actions/{run_id}/logs",{params:{path:{ref:e,run_id:t}},parseAs:"text",headers:{Accept:"text/plain"},signal:r});return n&&(0,s.handleError)(n),a.split("\n").flatMap(e=>e.split("\r")).join("\n").trim()}e.s(["actionKeys",0,r],414101),e.s(["useActionRunLogsQuery",0,({projectRef:e,runId:s},{enabled:n=!0,...i}={})=>(0,t.useQuery)({queryKey:r.logs(e,s),queryFn:({signal:t})=>a({projectRef:e,runId:s},t),enabled:n&&void 0!==e&&void 0!==s,staleTime:0,...i})],124446)},859414,e=>{"use strict";var t=e.i(38429),s=e.i(356003),r=e.i(355901),a=e.i(234745),n=e.i(522525);async function i({branchRef:e}){let{data:t,error:s}=await (0,a.del)("/v1/branches/{branch_id_or_ref}",{params:{path:{branch_id_or_ref:e}}});return s&&(0,a.handleError)(s),t}e.s(["useBranchDeleteMutation",0,({onSuccess:e,onError:a,...l}={})=>{let c=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>i(e),async onSuccess(t,s,r){let{branchRef:a,projectRef:i}=s;setTimeout(()=>{c.invalidateQueries({queryKey:n.branchKeys.list(i)})},5e3);let l=c.getQueryData(n.branchKeys.list(i));if(l){let e=l.filter(e=>e.project_ref!==a);c.setQueryData(n.branchKeys.list(i),e)}await e?.(t,s,r)},async onError(e,t,s){void 0===a?r.toast.error(`Failed to delete branch: ${e.message}`):a(e,t,s)},...l})}])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function s(e,t={}){let{maxDepth:r=3,redaction:a="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:i=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...i].map(e=>e.toLowerCase())),c=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],o=new WeakMap;function d(e){let t=e;for(let{re:e}of c)t=t.replace(e,a);return t}function h(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,s){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(s>=r)return n;if("object"==typeof t){if(o.has(t))return"[Circular]";if(Array.isArray(t)){let r=[];o.set(t,r);for(let a=0;a<t.length;a++)r[a]=e(t[a],s+1);return r}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let r={};for(let[n,i]of(o.set(t,r),Object.entries(t)))h(n)?r[n]=a:r[n]=e(i,s+1);return r}if(t instanceof Map){let r=[];for(let[n,i]of(o.set(t,r),t.entries())){let t=h(n)?a:e(n,s+1),l=h(n)?a:e(i,s+1);r.push([t,l])}return r}if(t instanceof Set){let r=[];for(let a of(o.set(t,r),t.values()))r.push(e(a,s+1));return r}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:n};return o.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>s,"sanitizeUrlHashParams",()=>t])},286923,737421,520980,676826,e=>{"use strict";var t=e.i(478902),s=e.i(55956),r=e.i(398696),a=e.i(271226),n=e.i(215312),i=e.i(210419),l=e.i(613580),c=e.i(108151),o=e.i(492460),d=e.i(3036),h=e.i(710377),u=e.i(389959),m=e.i(567558),f=e.i(124446),p=e.i(242882),x=e.i(234745),g=e.i(414101);async function j(e,t){let{data:s,error:r}=await (0,x.get)("/v1/projects/{ref}/actions",{params:{path:e},signal:t});return r&&(0,x.handleError)(r),s}var b=e.i(837710),v=e.i(843778),y=e.i(253214),N=e.i(877555),w=e.i(587433);let _=["DEAD","REMOVING"],S=["CREATED","RESTARTING","RUNNING"],C={CREATED:"pending",DEAD:"failed",EXITED:"succeeded",PAUSED:"skipped",REMOVING:"failed",RESTARTING:"restarting",RUNNING:"running"},k={clone:"Cloning repo",pull:"Pulling data",health:"Health check",configure:"Configurations",migrate:"Migrations",seed:"Data seeding",deploy:"Functions deployment"},P=({children:e,status:s,details:r})=>{if("EXITED"===s)return null;let a=_.includes(s),n=S.includes(s);return(0,t.jsxs)(l.Tooltip,{children:[(0,t.jsx)(l.TooltipTrigger,{children:(0,t.jsxs)(w.Badge,{variant:a?"destructive":"default",className:"gap-1.5",children:[(a||n)&&(0,t.jsx)(N.StatusIcon,{variant:a?"destructive":"default",hideBackground:!0}),e]})}),(0,t.jsxs)(l.TooltipContent,{children:["Additional ",C[s]," steps:",(0,t.jsx)("ul",{children:r.map(e=>(0,t.jsx)("li",{className:"before:content-['-'] before:mr-0.5",children:k[e.name]},e.name))})]})]})},A=({name:e,status:s})=>{if("EXITED"===s)return null;let r=_.includes(s),a=S.includes(s);return(0,t.jsxs)(w.Badge,{variant:r?"destructive":"default",className:"gap-1.5",children:[(r||a)&&(0,t.jsx)(N.StatusIcon,{variant:r?"destructive":"default",hideBackground:!0}),k[e],": ",C[s]]})},B=["ACTIVE_UNHEALTHY","INIT_FAILED","UNKNOWN","MIGRATIONS_FAILED","FUNCTIONS_FAILED"],E=["COMING_UP","GOING_DOWN","PAUSING","RESTORING","UPGRADING","RUNNING_MIGRATIONS"],D={ACTIVE_HEALTHY:"Healthy",ACTIVE_UNHEALTHY:"Unhealthy",INIT_FAILED:"Init failed",UNKNOWN:"Unknown",COMING_UP:"Coming up",GOING_DOWN:"Going down",INACTIVE:"Inactive",PAUSING:"Pausing",REMOVED:"Removed",RESTORING:"Restoring",UPGRADING:"Upgrading",RESIZING:"Resizing",CREATING_PROJECT:"Creating project",RUNNING_MIGRATIONS:"Running migrations",MIGRATIONS_FAILED:"Migrations failed",MIGRATIONS_PASSED:"Migrations applied successfully",FUNCTIONS_DEPLOYED:"Functions deployed",FUNCTIONS_FAILED:"Functions failed to deploy",RESTARTING:"Restarting",RESTORE_FAILED:"Failed to restore",PAUSE_FAILED:"Failed to pause"},I=({status:e})=>{if("ACTIVE_HEALTHY"===e||"MIGRATIONS_PASSED"===e)return null;let s=B.includes(e),r=E.includes(e);return(0,t.jsxs)(w.Badge,{variant:s?"destructive":"default",className:"gap-1.5",children:[(s||r)&&(0,t.jsx)(N.StatusIcon,{variant:s?"destructive":"default",hideBackground:!0}),D[e]]})},R=["FUNCTIONS_DEPLOYED","MIGRATIONS_PASSED"],T=["MIGRATIONS_FAILED","FUNCTIONS_FAILED"],M=({projectRef:e,status:r})=>{let[a,n]=(0,u.useState)(!1),{data:i,isSuccess:l,isPending:o,isError:x,error:w}=(({ref:e},{enabled:t=!0,...s}={})=>(0,p.useQuery)({queryKey:g.actionKeys.list(e),queryFn:({signal:t})=>j({ref:e},t),enabled:t&&!!e,staleTime:0,...s}))({ref:e},{enabled:a}),[_,S]=(0,u.useState)(),{data:C,isSuccess:k,isPending:P,isError:A,error:B}=(0,f.useActionRunLogsQuery)({projectRef:e,runId:_?.id},{enabled:a&&!!_}),E=!R.includes(r),D=T.includes(r);return(0,t.jsxs)(y.Dialog,{open:a,onOpenChange:n,children:[(0,t.jsx)(y.DialogTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{type:"default",icon:E?(0,t.jsx)(N.StatusIcon,{variant:D?"destructive":"default",hideBackground:!0}):void 0,onClick:e=>e.stopPropagation(),children:"View Logs"})}),(0,t.jsxs)(y.DialogContent,{size:"xlarge",children:[(0,t.jsxs)(y.DialogHeader,{children:[(0,t.jsx)(y.DialogTitle,{children:"Workflow Logs"}),(0,t.jsx)(y.DialogDescription,{children:"Select a workflow run to view logs"})]}),(0,t.jsx)(y.DialogSectionSeparator,{}),(0,t.jsx)(y.DialogSection,{className:(0,v.cn)("px-0",k?"py-0 pt-2":"!py-0"),children:_?(0,t.jsxs)("div",{className:"flex flex-col gap-2 py-2",children:[(0,t.jsx)(b.Button,{onClick:()=>S(void 0),type:"text",icon:(0,t.jsx)(d.ArrowLeft,{}),className:"self-start",children:"Back to workflow runs"}),P&&(0,t.jsx)(c.GenericSkeletonLoader,{className:"py-2"}),A&&(0,t.jsx)("div",{className:"py-2",children:(0,t.jsx)(m.default,{className:"rounded-none",subject:"Failed to retrieve workflow logs",error:B})}),k&&(0,t.jsx)("pre",{className:"whitespace-pre max-h-[500px] overflow-scroll pb-5 text-sm",children:C})]}):(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsx)(c.GenericSkeletonLoader,{className:"py-4"}),x&&(0,t.jsx)("div",{className:"py-4",children:(0,t.jsx)(m.default,{error:w})}),l&&(i.length>0?(0,t.jsx)("ul",{className:"divide-y",children:i.map(a=>(0,t.jsx)("li",{className:"py-3",children:(0,t.jsxs)("button",{type:"button",disabled:a.id===e,onClick:()=>S(a),className:"flex items-center gap-2 w-full justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[a.run_steps.length>0?(0,t.jsx)(L,{steps:a.run_steps}):(0,t.jsx)(I,{status:r}),(0,t.jsx)("span",{className:"text-sm",children:(0,s.default)(a.created_at).format("DD MMM, YYYY HH:mm")})]}),a.id!==e&&(0,t.jsx)(h.ArrowRight,{size:16})]})},a.id))}):(0,t.jsx)("p",{className:"text-center text-sm text-foreground-light py-4",children:"No workflow runs found."}))]})})]})]})};function L({steps:e}){let s=(0,o.default)(e,"status"),r=s.DEAD?.[0],a=s.DEAD?.length??0;return(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(A,{name:r.name,status:r.status}),a>1&&(0,t.jsxs)(P,{status:"DEAD",details:s.DEAD.slice(1),children:[a-1," more"]}),Object.keys(s).filter(e=>"DEAD"!==e).map(e=>(0,t.jsxs)(P,{status:e,details:s[e],children:[s[e].length," ",C[e]]},e))]})}let G=()=>(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-2.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)(c.ShimmeringLoader,{className:"w-52"}),(0,t.jsx)(c.ShimmeringLoader,{className:"w-52"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)(c.ShimmeringLoader,{className:"w-52"}),(0,t.jsx)(c.ShimmeringLoader,{className:"w-52"})]})]});e.s(["BranchLoader",0,()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G,{}),(0,t.jsx)(G,{}),(0,t.jsx)(G,{}),(0,t.jsx)(G,{}),(0,t.jsx)(G,{})]}),"BranchManagementSection",0,({header:e,footer:s,children:r})=>(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-surface-100 shadow-sm flex justify-between items-center px-4 py-3 rounded-t-lg text-xs font-mono uppercase",children:"string"==typeof e?(0,t.jsx)("span",{children:e}):e}),(0,t.jsx)("div",{className:"bg-surface border-t shadow-sm rounded-b-lg text-sm divide-y",children:r}),void 0!==s&&(0,t.jsx)("div",{className:"bg-surface-100 px-6 py-1 border-t",children:s})]}),"BranchRow",0,({branch:e,isGithubConnected:c,label:o,repo:d,rowLink:h,external:u=!1,rowActions:m})=>{let f=(0,a.useRouter)().pathname.split("/").pop(),p=(0,s.default)().diff((0,s.default)(e.updated_at),"day"),x=e.deletion_scheduled_at?(0,s.default)(e.deletion_scheduled_at).diff((0,s.default)(),"minutes"):null,g=(0,s.default)(e.updated_at).fromNow(),j=(0,s.default)(e.updated_at).format("DD MMM YYYY, HH:mm:ss (ZZ)"),b=h??`/project/${e.project_ref}`;return(0,t.jsxs)("div",{className:"w-full flex items-center justify-between px-4 py-2.5 hover:bg-surface-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-3",children:[e.git_branch&&c&&(0,t.jsx)(n.ButtonTooltip,{asChild:!0,type:"default",className:"px-1.5",tooltip:{content:{side:"bottom",text:"View branch on GitHub"}},children:(0,t.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:`https://github.com/${d}/tree/${e.git_branch}`,children:(0,t.jsx)(r.Github,{size:14,className:"text-foreground-light"})})}),(0,t.jsxs)(l.Tooltip,{children:[(0,t.jsx)(l.TooltipTrigger,{children:(0,t.jsx)(i.default,{target:u?"_blank":"_self",rel:u?"noopener noreferrer":void 0,href:b,className:"flex items-center",children:o||e.name})}),("branches"===f&&!e.is_default||"merge-requests"===f)&&(0,t.jsxs)(l.TooltipContent,{side:"bottom",children:["branches"===f&&!e.is_default&&"Switch to branch","merge-requests"===f&&"View merge request"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[e.deletion_scheduled_at?(0,t.jsx)("p",{className:"text-xs text-foreground-lighter",children:null!==x&&x<0?"Deletion pending...":`Will be deleted in ${x} minutes`}):(0,t.jsx)("p",{className:"text-xs text-foreground-lighter",children:p>1?`Updated on ${j}`:`Updated ${g}`}),(0,t.jsx)(M,{projectRef:e.project_ref,status:e.status}),m]})]})},"BranchRowLoader",0,G],286923);var F=e.i(370410),O=e.i(387911),z=e.i(857889),U=e.i(703526),H=e.i(917007),$=e.i(920432),q=e.i(549815),Q=e.i(911509),K=e.i(866205),V=e.i(793912),Y=e.i(135144),W=e.i(689805),Z=e.i(396831);let X=({branches:e,onBranchSelected:s,disabled:r=!1,isUpdating:a=!1,type:i="primary"})=>{let[l,c]=(0,u.useState)(!1),[o,d]=(0,u.useState)(null),h=e.filter(e=>!e.is_default&&!e.review_requested_at&&!e.git_branch);return(0,t.jsxs)(W.Popover_Shadcn_,{open:l,onOpenChange:c,modal:!1,children:[(0,t.jsx)(Y.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(n.ButtonTooltip,{icon:(0,t.jsx)(O.GitMerge,{size:14,strokeWidth:1.5}),type:i,disabled:r||0===h.length||a,tooltip:{content:{side:"bottom",text:0===e.length?"Create a branch first to start a merge request":0===h.length?"All branches currently have merge requests":void 0}},children:a?"Creating...":"New merge request"})}),(0,t.jsx)(V.PopoverContent_Shadcn_,{className:"p-0 w-80",side:"bottom",align:"end",children:(0,t.jsxs)(K.Command_Shadcn_,{children:[(0,t.jsx)($.CommandInput_Shadcn_,{placeholder:"Find branch to review..."}),(0,t.jsxs)(Q.CommandList_Shadcn_,{children:[(0,t.jsx)(U.CommandEmpty_Shadcn_,{children:"No available branches found"}),(0,t.jsx)(H.CommandGroup_Shadcn_,{children:(0,t.jsx)(Z.ScrollArea,{className:"max-h-[210px] overflow-y-auto",children:h.map(e=>(0,t.jsxs)(q.CommandItem_Shadcn_,{value:e.name.replaceAll('"',""),className:"cursor-pointer w-full flex items-center justify-between",onSelect:()=>{d(e),c(!1),s?.(e)},disabled:a,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_default&&(0,t.jsx)(z.Shield,{size:14,className:"text-amber-900"}),(0,t.jsx)("span",{className:"truncate",title:e.name,children:e.name})]}),o?.id===e.id&&(0,t.jsx)(F.Check,{size:14,strokeWidth:1.5,className:"text-brand"})]},e.id))})})]})]})})]})};e.s(["BranchSelector",0,X],737421);var J=e.i(513826),ee=e.i(10429);let et="flex items-center flex-col gap-0.5 justify-center w-full py-10 px-4";e.s(["PreviewBranchesEmptyState",0,({onSelectCreateBranch:e})=>(0,t.jsxs)("div",{className:et,children:[(0,t.jsx)("p",{children:"Create your first preview branch"}),(0,t.jsx)("p",{className:"text-foreground-lighter text-center text-balance mb-4",children:"Preview branches are short-lived environments that let you safely experiment with changes to your database schema without affecting your main database."}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(J.DocsButton,{href:`${ee.DOCS_URL}/guides/platform/branching`}),(0,t.jsx)(b.Button,{type:"primary",onClick:()=>e(),children:"Create branch"})]})]}),"PullRequestsEmptyState",0,({url:e,projectRef:s,branches:a,onBranchSelected:n,isUpdating:l,githubConnection:c,gitlessBranching:o=!1})=>(0,t.jsxs)("div",{className:et,children:[(0,t.jsx)("p",{children:"No merge requests"}),(0,t.jsx)("p",{className:"text-foreground-lighter text-center text-balance",children:"Create your first merge request to merge changes back to the main branch"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-4",children:[c?(0,t.jsx)(b.Button,{type:"outline",asChild:!0,icon:(0,t.jsx)(r.Github,{}),children:(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:"Create pull request"})}):(0,t.jsx)(b.Button,{asChild:!0,type:"outline",children:(0,t.jsx)(i.default,{href:`/project/${s}/settings/integrations`,children:"Connect to GitHub"})}),o&&(0,t.jsx)(X,{type:"outline",branches:a,onBranchSelected:n,isUpdating:l})]})]})],520980),e.i(128328);var es=e.i(158639),er=e.i(867637),ea=e.i(852315),en=e.i(624982),ei=e.i(994110),el=e.i(109),ec=e.i(148210),eo=e.i(265735),ed=e.i(635494),eh=e.i(71049);let eu=()=>{let{ref:e}=(0,es.useParams)(),{data:s}=(0,ed.useSelectedProjectQuery)(),{data:r}=(0,eo.useSelectedOrganizationQuery)(),a=s?.parent_project_ref||e,{data:n}=(0,ec.useGitHubConnectionsQuery)({organizationId:r?.id},{enabled:!!r?.id}),{data:l}=(0,el.useBranchesQuery)({projectRef:a},{enabled:!!a}),c=n?.find(e=>e.project.ref===a),o=l?.find(e=>e.is_default),d=!!c,h=!!o?.git_branch?.trim(),u=!!c?.new_branch_per_pr;return(0,t.jsxs)(eh.HoverCard,{openDelay:300,closeDelay:100,children:[(0,t.jsx)(eh.HoverCardTrigger,{asChild:!0,children:(0,t.jsxs)(i.default,{href:`/project/${a}/settings/integrations`,className:"block w-full transition truncate text-sm text-foreground-light hover:text-foreground",children:[(0,t.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm",children:"GitHub Integration"}),(0,t.jsx)(ea.ArrowUpRight,{strokeWidth:1,className:"h-4 w-4"})]}),(0,t.jsx)("p",{className:"mt-0.5 text-xs text-foreground-lighter flex items-center gap-2",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ei.default,{className:"dark:invert",src:`${ee.BASE_PATH}/img/icons/github-icon.svg`,width:16,height:16,alt:"GitHub"}),c?.repository.name]}):"Not connected"})]})}),(0,t.jsxs)(eh.HoverCardContent,{side:"right",align:"start",className:"w-80 p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(ei.default,{className:"dark:invert",src:`${ee.BASE_PATH}/img/icons/github-icon.svg`,width:20,height:20,alt:"GitHub"}),(0,t.jsx)("span",{className:"truncate",children:d?c?.repository.name:"Not connected"})]}),d?(0,t.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-foreground-light",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[h?(0,t.jsx)(en.CheckCircle2,{size:12,className:"text-brand-600"}):(0,t.jsx)(er.AlertCircle,{size:12,className:"text-warning"}),(0,t.jsx)("span",{children:h?`Syncing production (${o?.git_branch})`:"Production sync disabled"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[u?(0,t.jsx)(en.CheckCircle2,{size:12,className:"text-brand-600"}):(0,t.jsx)(er.AlertCircle,{size:12,className:"text-warning"}),(0,t.jsx)("span",{children:u?"Automatically creating branches":"Automatic branching disabled"})]})]}):(0,t.jsx)("p",{className:"text-xs text-foreground-light",children:"Not connected to any repository"})]})]})};var em=e.i(388147),ef=e.i(951138),ep=e.i(825713);let ex=()=>{let e=(0,a.useRouter)(),{ref:s="default"}=(0,es.useParams)(),r=e.pathname.split("/")[4]??"branches";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(em.ProductMenu,{page:r,menu:[{title:"Manage",items:[{name:"Branches",key:"branches",url:`/project/${s}/branches`,items:[]},{name:"Merge requests",key:"merge-requests",url:`/project/${s}/branches/merge-requests`,items:[]}]}]}),(0,t.jsxs)("div",{className:"px-6",children:[(0,t.jsx)("h3",{className:"text-sm font-mono text-foreground-lighter uppercase mb-3",children:"Configure"}),(0,t.jsx)(eu,{})]})]})},eg=(0,ef.withAuth)(({children:e})=>(0,t.jsx)(ep.ProjectLayout,{title:"Branching",product:"Branching",productMenu:(0,t.jsx)(ex,{}),isBlocking:!1,children:e}));e.s(["default",0,eg],676826)},263664,e=>{"use strict";var t=e.i(478902),s=e.i(902858),r=e.i(667852),a=e.i(469157),n=e.i(271226),i=e.i(389959),l=e.i(355901);e.i(128328);var c=e.i(158639),o=e.i(356003),d=e.i(613851),h=e.i(17203);let u=(0,e.i(388019).default)("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);var m=e.i(471998),f=e.i(105356),p=e.i(61187),x=e.i(857889),g=e.i(432946),j=e.i(210419),b=e.i(463333),v=e.i(423782),y=e.i(170149),N=e.i(242882),w=e.i(234745),_=e.i(10429),S=e.i(522525);async function C({branchRef:e},t){if(!e)throw Error("branchRef is required");let{data:s,error:r}=await (0,w.get)("/v1/branches/{branch_id_or_ref}",{params:{path:{branch_id_or_ref:e}},signal:t});return r&&(0,w.handleError)(r),s}var k=e.i(38429);async function P({branchRef:e}){let{data:t,error:s}=await (0,w.post)("/v1/branches/{branch_id_or_ref}/reset",{params:{path:{branch_id_or_ref:e}},body:{}});return s&&(0,w.handleError)(s),t}async function A({branchRef:e}){let{data:t,error:s}=await (0,w.post)("/v1/branches/{branch_id_or_ref}/restore",{params:{path:{branch_id_or_ref:e}}});return s&&(0,w.handleError)(s),t}var B=e.i(518723),E=e.i(280590),D=e.i(2579),I=e.i(265735),R=e.i(837710),T=e.i(874311),M=e.i(466472),L=e.i(286923),G=e.i(532728),F=e.i(202584),O=e.i(370410),z=e.i(398696),U=e.i(774803),H=e.i(994110),$=e.i(408891),q=e.i(531837),Q=e.i(937942),K=e.i(567558),V=e.i(109),Y=e.i(362784),W=e.i(148210),Z=e.i(635494),X=e.i(587433),J=e.i(253214),ee=e.i(24315),et=e.i(61863),es=e.i(428353),er=e.i(378277),ea=e.i(9679),en=e.i(843778),ei=e.i(538482),el=e.i(108151);let ec=({branch:e,visible:s,onClose:r})=>{let{ref:a}=(0,c.useParams)(),o=(0,n.useRouter)(),{data:d}=(0,Z.useSelectedProjectQuery)(),{data:h}=(0,I.useSelectedOrganizationQuery)(),u=(0,b.useIsBranching2Enabled)(),[m,f]=(0,i.useState)(!1),p=d?.parent_project_ref!==void 0,x=void 0!==d?p?d.parent_project_ref:a:void 0,{data:g,error:j,isPending:v,isSuccess:y,isError:N}=(0,W.useGitHubConnectionsQuery)({organizationId:h?.id}),{data:w}=(0,V.useBranchesQuery)({projectRef:x}),{mutate:S,isPending:C}=(0,Y.useCheckGithubBranchValidity)({onError:()=>{}}),{mutate:k,isPending:P}=(0,B.useBranchUpdateMutation)({onSuccess:e=>{l.toast.success(`Successfully updated branch "${e.name}"`),r()},onError:e=>{l.toast.error(`Failed to update branch: ${e.message}`)}}),A=g?.find(e=>e.project.ref===x),[E,D]=A?.repository.name.split("/")??[],T="edit-branch-form",M=q.object({branchName:q.string().min(1,"Branch name cannot be empty").refine(e=>/^[a-zA-Z0-9\-_]+$/.test(e),"Branch name can only contain alphanumeric characters, hyphens, and underscores.").refine(t=>t===e?.name||(w??[]).every(e=>e.name!==t),"A branch with this name already exists"),gitBranchName:q.string().refine(e=>u||!A||e&&e.length>0,"Git branch name is required when GitHub is connected")}),L=(0,$.useForm)({mode:"onChange",reValidateMode:"onChange",resolver:(0,G.zodResolver)(M),defaultValues:{branchName:"",gitBranchName:""}}),ec=(0,$.useWatch)({control:L.control,name:"gitBranchName"}),eo=(0,F.useDebounce)(ec,500),ed=L.formState.isValid&&(!ec||m)&&!P&&!C,eh=(0,i.useCallback)(e=>{if(!A)return console.error("[EditBranchModal > validateGitBranchName] GitHub Connection is missing");S({repositoryId:A.repository.id,branchName:e},{onSuccess:()=>{L.getValues("gitBranchName")===e&&(f(!0),L.clearErrors("gitBranchName"))},onError:t=>{L.getValues("gitBranchName")===e&&(f(!1),L.setError("gitBranchName",{...t,message:`Unable to find branch "${e}" in ${E}/${D}`}))}})},[A,L,S,E,D]);return(0,i.useEffect)(()=>{s&&e&&(f(!!e.git_branch||u),L.reset({branchName:e.name??"",gitBranchName:e.git_branch??""}))},[e,s,L,u]),(0,i.useEffect)(()=>{if(!A||!eo){f(u),L.clearErrors("gitBranchName");return}L.clearErrors("gitBranchName"),eh(eo)},[eo,eh,L,A,u]),(0,t.jsx)(J.Dialog,{open:s,onOpenChange:e=>!e&&r(),children:(0,t.jsxs)(J.DialogContent,{size:"large",hideClose:!0,children:[(0,t.jsx)(J.DialogHeader,{padding:"small",children:(0,t.jsxs)(J.DialogTitle,{children:['Edit branch "',e?.name,'"']})}),(0,t.jsx)(J.DialogSectionSeparator,{}),(0,t.jsx)(es.Form_Shadcn_,{...L,children:(0,t.jsxs)("form",{id:T,onSubmit:L.handleSubmit(t=>{if(!x)return console.error("Project ref is required");if(!e?.project_ref)return console.error("Branch ref is required");let s={branchRef:e.project_ref,projectRef:x,branchName:t.branchName};t.gitBranchName&&m&&(s.gitBranch=t.gitBranchName),k(s)}),children:[(0,t.jsxs)(J.DialogSection,{padding:"medium",className:"space-y-4",children:[(0,t.jsx)(et.FormField_Shadcn_,{control:L.control,name:"branchName",render:({field:e})=>(0,t.jsx)(ei.FormItemLayout,{label:"Preview branch name",children:(0,t.jsx)(ee.FormControl_Shadcn_,{children:(0,t.jsx)(er.Input_Shadcn_,{...e,placeholder:"e.g. staging, dev-feature-x",autoComplete:"off"})})})}),A&&(0,t.jsx)(et.FormField_Shadcn_,{control:L.control,name:"gitBranchName",render:({field:e})=>(0,t.jsx)(ei.FormItemLayout,{label:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full gap-4",children:[(0,t.jsxs)("span",{className:"flex-1",children:["Sync with Git branch ",u?"(optional)":""]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(H.default,{className:(0,en.cn)("dark:invert"),src:`${_.BASE_PATH}/img/icons/github-icon.svg`,width:16,height:16,alt:"GitHub icon"}),(0,t.jsxs)(Q.InlineLink,{href:`https://github.com/${E}/${D}`,children:[E,"/",D]})]})]}),description:u?"Automatically deploy changes on every commit":"If linked, migrations from this Git branch will be automatically deployed.",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(ee.FormControl_Shadcn_,{children:(0,t.jsx)(er.Input_Shadcn_,{...e,placeholder:"e.g. main, feat/some-feature",autoComplete:"off",onChange:t=>{e.onChange(t),f(!1)}})}),(0,t.jsx)("div",{className:"absolute top-2.5 right-3 flex items-center gap-2",children:e.value?C?(0,t.jsx)(U.Loader2,{size:14,className:"animate-spin"}):m?(0,t.jsx)(O.Check,{size:14,className:"text-brand",strokeWidth:2}):null:null})]})})}),v&&(0,t.jsx)(el.GenericSkeletonLoader,{}),N&&(0,t.jsx)(K.AlertError,{error:j,subject:"Failed to retrieve GitHub connection information"}),y&&!A&&(0,t.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ea.Label_Shadcn_,{children:"Sync with a GitHub branch"}),!u&&(0,t.jsx)(X.Badge,{variant:"warning",children:"Required"})]}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:u?"Optionally connect to a GitHub repository to manage migrations automatically for this branch.":"Keep this preview branch in sync with a chosen GitHub branch"})]}),(0,t.jsx)(R.Button,{type:"default",icon:(0,t.jsx)(z.Github,{}),onClick:()=>{r(),x&&o.push(`/project/${x}/settings/integrations`)},children:u?"Connect to GitHub":"Configure"})]})]}),(0,t.jsxs)(J.DialogFooter,{padding:"medium",children:[(0,t.jsx)(R.Button,{disabled:P,type:"default",onClick:r,children:"Cancel"}),(0,t.jsx)(R.Button,{form:T,disabled:!y||P||!ed||C||!u&&!A,loading:P,type:"primary",htmlType:"submit",children:"Update branch"})]})]})})]})})};var eo=e.i(520980);let ed=({isGithubConnected:e,isLoading:s,isSuccess:a,repo:n,mainBranch:i,previewBranches:l,onSelectCreateBranch:o,onSelectDeleteBranch:d,generateCreatePullRequestURL:h})=>{let[u,m]=(0,r.default)(l,e=>void 0!==e.deletion_scheduled_at),[f,p]=(0,r.default)(m,e=>e.persistent),{ref:g}=(0,c.useParams)(),{data:b}=(0,I.useSelectedOrganizationQuery)(),{hasAccess:v,isLoading:y}=(0,E.useCheckEntitlements)("branching_persistent");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(L.BranchManagementSection,{header:"Production branch",children:[s&&(0,t.jsx)(L.BranchRowLoader,{}),a&&void 0!==i&&(0,t.jsx)(L.BranchRow,{branch:i,isGithubConnected:e,label:(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(x.Shield,{size:14,strokeWidth:1.5,className:"text-warning"}),i.name]}),repo:n,rowActions:(0,t.jsx)(eu,{branch:i,repo:n})}),a&&void 0===i&&(0,t.jsx)("div",{className:"w-full flex items-center justify-between px-4 py-2.5 hover:bg-surface-100",children:(0,t.jsx)(j.default,{href:`/project/${g}`,className:"text-foreground block w-full",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,t.jsx)(x.Shield,{size:14,strokeWidth:1.5,className:"text-warning"}),"main"]})})})]}),(0,t.jsxs)(L.BranchManagementSection,{header:"Persistent branches",children:[(s||y)&&(0,t.jsx)(L.BranchLoader,{}),a&&!y&&!v&&_.IS_PLATFORM&&0===f.length&&(0,t.jsxs)("div",{className:"px-6 py-10 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("p",{className:"text-sm",children:"Upgrade to unlock persistent branches"}),(0,t.jsx)("p",{className:"text-sm text-foreground-lighter text-balance",children:"Persistent branches are long-lived, cannot be reset, and are ideal for staging environments."})]}),(0,t.jsx)(R.Button,{type:"primary",asChild:!0,children:(0,t.jsx)(j.default,{href:`/org/${b?.slug}/billing?panel=subscriptionPlan`,children:"Upgrade"})})]}),a&&!y&&v&&0===f.length&&(0,t.jsxs)("div",{className:"flex items-center flex-col gap-0.5 justify-center w-full py-10",children:[(0,t.jsx)("p",{children:"No persistent branches"}),(0,t.jsx)("p",{className:"text-foreground-lighter text-center text-balance",children:"Persistent branches are long-lived, cannot be reset, and are ideal for staging environments."})]}),a&&!y&&f.map(s=>(0,t.jsx)(L.BranchRow,{isGithubConnected:e,repo:n,branch:s,rowActions:(0,t.jsx)(eh,{branch:s,repo:n,onSelectDeleteBranch:()=>d(s),generateCreatePullRequestURL:h})},s.id))]}),(0,t.jsxs)(L.BranchManagementSection,{header:"Preview branches",children:[s&&(0,t.jsx)(L.BranchLoader,{}),a&&0===p.length&&(0,t.jsx)(eo.PreviewBranchesEmptyState,{onSelectCreateBranch:o}),a&&p.map(s=>(0,t.jsx)(L.BranchRow,{isGithubConnected:e,repo:n,branch:s,rowActions:(0,t.jsx)(eh,{branch:s,repo:n,onSelectDeleteBranch:()=>d(s),generateCreatePullRequestURL:h})},s.id))]}),(0,t.jsxs)(L.BranchManagementSection,{header:"Scheduled for deletion branches",children:[s&&(0,t.jsx)(L.BranchLoader,{}),a&&0===u.length&&(0,t.jsx)("div",{className:"flex items-center flex-col gap-0.5 justify-center w-full py-10",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"No branches scheduled for deletion"})}),a&&u.map(s=>(0,t.jsx)(L.BranchRow,{isGithubConnected:e,repo:n,branch:s,rowActions:(0,t.jsx)(eh,{branch:s,repo:n,onSelectDeleteBranch:()=>d(s),generateCreatePullRequestURL:h})},s.id))]})]})},eh=({branch:e,onSelectDeleteBranch:r,generateCreatePullRequestURL:a})=>{let n=(0,b.useIsBranching2Enabled)(),c=(0,o.useQueryClient)(),{project_ref:x,parent_project_ref:j}=e,{can:w}=(0,D.useAsyncCheckPermissions)(s.PermissionAction.DELETE,"preview_branches"),{can:I}=(0,D.useAsyncCheckPermissions)(s.PermissionAction.UPDATE,"preview_branches"),{data:L}=(({projectRef:e,branchRef:t},{enabled:s=!0,...r}={})=>(0,N.useQuery)({queryKey:S.branchKeys.detail(e,t),queryFn:({signal:e})=>C({branchRef:t},e),enabled:_.IS_PLATFORM&&s&&!!t,...r}))({projectRef:j,branchRef:x}),G=L?.status==="ACTIVE_HEALTHY",F=e.persistent,{hasAccess:O}=(0,E.useCheckEntitlements)("branching_persistent"),[z,U]=(0,i.useState)(!1),[H,$]=(0,i.useState)(!1),[q,Q]=(0,i.useState)(!1),[K,V]=(0,i.useState)(!1),{mutate:Y,isPending:W}=(({onSuccess:e,onError:t,...s}={})=>{let r=(0,o.useQueryClient)();return(0,k.useMutation)({mutationFn:e=>P(e),async onSuccess(t,s,a){let{projectRef:n}=s;await r.invalidateQueries({queryKey:S.branchKeys.list(n)}),await e?.(t,s,a)},async onError(e,s,r){void 0===t?l.toast.error(`Failed to reset branch: ${e.message}`):t(e,s,r)},...s})})({onSuccess(){l.toast.success("Success! Please allow a few seconds for the branch to reset."),U(!1)}}),{mutate:Z,isPending:X}=(0,B.useBranchUpdateMutation)({onSuccess(){l.toast.success("Successfully updated branch"),$(!1),j&&c.invalidateQueries({queryKey:S.branchKeys.list(j)})}}),{mutate:J}=(({onSuccess:e,onError:t,...s}={})=>{let r=(0,o.useQueryClient)();return(0,k.useMutation)({mutationFn:e=>A(e),async onSuccess(t,s,a){let{projectRef:n}=s;await r.invalidateQueries({queryKey:S.branchKeys.list(n)}),await e?.(t,s,a)},async onError(e,s,r){void 0===t?l.toast.error(`Failed to restore branch: ${e.message}`):t(e,s,r)},...s})})({onSuccess(){l.toast.success("Success! Please allow a few minutes for the branch to restore."),$(!1)}}),ee=()=>{J({branchRef:x,projectRef:j})},et=()=>{Z({branchRef:x,projectRef:j,persistent:!e.persistent})},es=e=>{F?Q(!0):(e.stopPropagation(),r())};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(T.DropdownMenu,{children:[(0,t.jsx)(T.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(R.Button,{type:"text",icon:(0,t.jsx)(m.MoreVertical,{}),className:"px-1",onClick:e=>e.stopPropagation()})}),(0,t.jsxs)(T.DropdownMenuContent,{className:"w-56",side:"bottom",align:"end",children:[n&&(0,t.jsxs)(v.DropdownMenuItemTooltip,{className:"gap-x-2",disabled:!I||!G||X,onSelect:e=>{e.stopPropagation(),V(!0)},onClick:e=>{e.stopPropagation(),V(!0)},tooltip:{content:{side:"left",text:I?G?void 0:"Branch is still initializing. Please wait for it to become healthy before editing.":"You need additional permissions to edit branches"}},children:[(0,t.jsx)(f.Pencil,{size:14})," Edit branch"]}),!e.deletion_scheduled_at&&(0,t.jsxs)(v.DropdownMenuItemTooltip,{className:"gap-x-2",disabled:W||!G,onSelect:e=>{e.stopPropagation(),U(!0)},onClick:e=>{e.stopPropagation(),U(!0)},tooltip:{content:{side:"left",text:G?void 0:"Branch is still initializing. Please wait for it to become healthy before resetting."}},children:[(0,t.jsx)(p.RefreshCw,{size:14})," Reset branch"]}),!e.deletion_scheduled_at&&(0,t.jsx)(v.DropdownMenuItemTooltip,{className:"gap-x-2",disabled:!G||!e.persistent&&!O,onSelect:e=>{e.stopPropagation(),$(!0)},onClick:e=>{e.stopPropagation(),$(!0)},tooltip:{content:{side:"left",text:G?e.persistent||O?void 0:"Upgrade your plan to access persistent branches":"Branch is still initializing. Please wait for it to become healthy before switching."}},children:e.persistent?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Clock,{size:14})," Switch to preview"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{size:14,className:"scale-110"})," Switch to persistent"]})}),e.git_branch&&void 0===e.pr_number&&(0,t.jsx)(T.DropdownMenuItem,{asChild:!0,className:"gap-x-2",children:(0,t.jsxs)("a",{target:"_blank",rel:"noreferrer",href:a(e.git_branch),onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(h.ExternalLink,{size:14})," Create pull request"]})}),e.deletion_scheduled_at&&(0,t.jsxs)(v.DropdownMenuItemTooltip,{className:"gap-x-2",disabled:!I||"INACTIVE"!==e.preview_project_status,onSelect:e=>{e.stopPropagation(),ee()},onClick:e=>{e.stopPropagation(),ee()},tooltip:{content:{side:"left",text:I?"INACTIVE"!==e.preview_project_status?"Preview project is not fully paused or already coming up. Please wait for it to become fully paused before restoring.":void 0:"You need additional permissions to restore branches"}},children:[(0,t.jsx)(d.Clock,{size:14})," Restore branch"]}),(0,t.jsx)(T.DropdownMenuSeparator,{}),(0,t.jsxs)(v.DropdownMenuItemTooltip,{className:"gap-x-2",disabled:!w,onSelect:es,onClick:es,tooltip:{content:{side:"left",text:w?void 0:"You need additional permissions to delete branches"}},children:[(0,t.jsx)(g.Trash2,{size:14})," Delete branch"]})]})]}),(0,t.jsx)(y.TextConfirmModal,{variant:"warning",visible:z,onCancel:()=>U(!1),onConfirm:()=>{Y({branchRef:x,projectRef:j})},loading:W,title:"Reset branch",confirmLabel:"Reset branch",confirmPlaceholder:"Type in name of branch",confirmString:e?.name??"",alert:{title:`Are you sure you want to reset the "${e.name}" branch? All data will be deleted.`}}),(0,t.jsx)(M.ConfirmationModal,{variant:"default",visible:H,confirmLabel:e.persistent?"Switch to preview":"Switch to persistent",title:"Confirm branch mode switch",loading:X,onCancel:()=>$(!1),onConfirm:et,children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:['Are you sure you want to switch the branch "',e.name,'" to'," ",e.persistent?"preview":"persistent","?"]})}),(0,t.jsx)(M.ConfirmationModal,{variant:"warning",visible:q,confirmLabel:"Switch to preview",title:"Branch must be switched to preview before deletion",loading:X,onCancel:()=>Q(!1),onConfirm:et,children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:['You must switch the branch "',e.name,'" to preview before deleting it.']})}),(0,t.jsx)(ec,{branch:e,visible:K,onClose:()=>V(!1)})]})},eu=({branch:e,repo:r})=>{let{ref:a}=(0,c.useParams)(),{can:n}=(0,D.useAsyncCheckPermissions)(s.PermissionAction.UPDATE,"preview_branches"),[l,o]=(0,i.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(T.DropdownMenu,{children:[(0,t.jsx)(T.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(R.Button,{type:"text",icon:(0,t.jsx)(m.MoreVertical,{}),className:"px-1"})}),(0,t.jsx)(T.DropdownMenuContent,{className:"w-56",side:"bottom",align:"end",children:r?(0,t.jsx)(j.default,{passHref:!0,href:`/project/${a}/settings/integrations`,children:(0,t.jsx)(T.DropdownMenuItem,{asChild:!0,className:"gap-x-2",children:(0,t.jsx)("a",{children:"Change production branch"})})}):(0,t.jsxs)(T.DropdownMenuItem,{className:"gap-x-2",disabled:!n,onSelect:()=>o(!0),onClick:()=>o(!0),children:[(0,t.jsx)(f.Pencil,{size:14})," Edit Branch"]})})]}),(0,t.jsx)(ec,{branch:e,visible:l,onClose:()=>o(!1)})]})};var em=e.i(676826),ef=e.i(448710),ep=e.i(79771),ex=e.i(167892),eg=e.i(215312),ej=e.i(513826),eb=e.i(693241),ev=e.i(859414),ey=e.i(162082),eN=e.i(876298);let ew=()=>{let e=(0,n.useRouter)(),{ref:a}=(0,c.useParams)(),o=(0,eN.useAppStateSnapshot)(),{data:d}=(0,Z.useSelectedProjectQuery)(),{data:h}=(0,I.useSelectedOrganizationQuery)(),[u,m]=(0,i.useState)(),{mutate:f}=(0,ey.useSendEventMutation)(),p=d?.parent_project_ref!==void 0,x=void 0!==d?p?d.parent_project_ref:a:void 0,{can:g,isSuccess:j}=(0,D.useAsyncCheckPermissions)(s.PermissionAction.READ,"preview_branches"),{data:b,error:v,isPending:N,isSuccess:w,isError:_}=(0,W.useGitHubConnectionsQuery)({organizationId:h?.id}),{data:S,error:C,isPending:k,isError:P,isSuccess:A}=(0,V.useBranchesQuery)({projectRef:x}),[[B],E]=(0,r.default)(S,e=>e.is_default),R=E.sort((e,t)=>new Date(e.updated_at)<new Date(t.updated_at)?1:-1),T=b?.find(e=>e.project.ref===x),M=T?.repository.name??"",L=_||P,G=void 0!==T,{mutate:F,isPending:O}=(0,ev.useBranchDeleteMutation)({onSuccess:()=>{l.toast.success("Successfully deleted branch"),m(void 0)}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ex.ScaffoldContainer,{children:(0,t.jsx)(ex.ScaffoldSection,{children:(0,t.jsx)("div",{className:"col-span-12",children:(0,t.jsx)("div",{className:"space-y-4",children:j&&!g?(0,t.jsx)(eb.NoPermission,{resourceText:"view this project's branches"}):(0,t.jsxs)(t.Fragment,{children:[_&&(0,t.jsx)(K.AlertError,{error:v,subject:"Failed to retrieve GitHub integration connection"}),P&&(0,t.jsx)(K.AlertError,{error:C,subject:"Failed to retrieve preview branches"}),!L&&(0,t.jsx)(ed,{isGithubConnected:G,isLoading:N||k,isSuccess:w&&A,repo:M,mainBranch:B,previewBranches:R,onSelectCreateBranch:()=>o.setShowCreateBranchModal(!0),onSelectDeleteBranch:m,generateCreatePullRequestURL:e=>void 0===T?"https://github.com":void 0!==e?`https://github.com/${T.repository.name}/compare/${B?.git_branch}...${e}`:`https://github.com/${T.repository.name}/compare`})]})})})})}),(0,t.jsx)(y.TextConfirmModal,{variant:"warning",visible:void 0!==u,onCancel:()=>m(void 0),onConfirm:()=>(()=>{if(void 0===u)return console.error("No branch selected");let{project_ref:t,parent_project_ref:s,persistent:r}=u;F({branchRef:t,projectRef:s},{onSuccess:()=>{t===a&&e.push(`/project/${s}/branches`),f({action:"branch_delete_button_clicked",properties:{branchType:r?"persistent":"preview",origin:"branches_page"},groups:{project:s??"Unknown",organization:h?.slug??"Unknown"}})}})})(),loading:O,title:"Delete branch",confirmLabel:"Delete branch",confirmPlaceholder:"Type in name of branch",confirmString:u?.name??"",alert:{title:"You cannot recover this branch once deleted"},text:(0,t.jsxs)(t.Fragment,{children:["This will delete your database preview branch"," ",(0,t.jsx)("span",{className:"text-bold text-foreground",children:u?.name}),"."]})})]})};ew.getLayout=e=>(0,t.jsx)(ef.DefaultLayout,{children:(0,t.jsx)(em.default,{children:(0,t.jsx)(()=>{let r=(0,eN.useAppStateSnapshot)(),{can:n}=(0,D.useAsyncCheckPermissions)(s.PermissionAction.CREATE,"preview_branches",{resource:{is_default:!1}}),i=(0,t.jsx)(eg.ButtonTooltip,{type:"primary",disabled:!n,onClick:()=>r.setShowCreateBranchModal(!0),tooltip:{content:{side:"bottom",text:n?void 0:"You need additional permissions to create branches"}},children:"Create branch"}),l=(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(R.Button,{asChild:!0,type:"text",icon:(0,t.jsx)(a.MessageCircle,{className:"text-muted",strokeWidth:1}),children:(0,t.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/orgs/supabase/discussions/18937",children:"Branching feedback"})}),(0,t.jsx)(ej.DocsButton,{href:`${_.DOCS_URL}/guides/platform/branching`})]});return(0,t.jsx)(ep.PageLayout,{title:"Branches",subtitle:"Manage your database preview branches and deployments",primaryActions:i,secondaryActions:l,children:e})},{})})}),e.s(["default",0,ew],263664)},455013,(e,t,s)=>{let r="/project/[ref]/branches";(window.__NEXT_P=window.__NEXT_P||[]).push([r,()=>e.r(263664)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([r])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0860ba34f07162db.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=23e8359e-a9cb-1bf3-3015-4583c7e4b81b
//# sourceMappingURL=d0dede1751cd215c.js.map