;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="ae88ecbb-d675-1dc2-f550-9cd2a7bab7f3")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),a=e.i(710483);let s=({resourceText:e,isFullPage:s=!1})=>{let r=()=>(0,t.jsx)(a.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return s?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(r,{})})}):(0,t.jsx)(r,{})};e.s(["NoPermission",0,s,"default",0,s])},532480,e=>{"use strict";let t=(0,e.i(388019).default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t])},833655,e=>{"use strict";var t=e.i(532480);e.s(["Info",()=>t.default])},330287,e=>{"use strict";var t=e.i(242882),a=e.i(234745),s=e.i(10429),r=e.i(346691);async function i({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:s,error:r}=await (0,a.get)("/platform/projects/{ref}/load-balancers",{params:{path:{ref:e}},signal:t});return r&&(0,a.handleError)(r),s}e.s(["useLoadBalancersQuery",0,({projectRef:e},{enabled:a=!0,...n}={})=>(0,t.useQuery)({queryKey:r.replicaKeys.loadBalancers(e),queryFn:({signal:t})=>i({projectRef:e},t),enabled:a&&void 0!==e&&s.IS_PLATFORM,...n})])},261348,e=>{"use strict";var t=e.i(370589);e.s(["format",()=>t.default])},388034,e=>{"use strict";let t=(0,e.i(388019).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["default",()=>t])},61187,e=>{"use strict";var t=e.i(388034);e.s(["RefreshCw",()=>t.default])},29750,(e,t,a)=>{"use strict";var s="function"==typeof Symbol&&Symbol.for,r=s?Symbol.for("react.element"):60103,i=s?Symbol.for("react.portal"):60106,n=s?Symbol.for("react.fragment"):60107,o=s?Symbol.for("react.strict_mode"):60108,l=s?Symbol.for("react.profiler"):60114,c=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,u=s?Symbol.for("react.async_mode"):60111,h=s?Symbol.for("react.concurrent_mode"):60111,p=s?Symbol.for("react.forward_ref"):60112,m=s?Symbol.for("react.suspense"):60113,f=s?Symbol.for("react.suspense_list"):60120,x=s?Symbol.for("react.memo"):60115,b=s?Symbol.for("react.lazy"):60116,g=s?Symbol.for("react.block"):60121,y=s?Symbol.for("react.fundamental"):60117,j=s?Symbol.for("react.responder"):60118,v=s?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case n:case l:case o:case m:return e;default:switch(e=e&&e.$$typeof){case d:case p:case b:case x:case c:return e;default:return t}}case i:return t}}}function w(e){return S(e)===h}a.AsyncMode=u,a.ConcurrentMode=h,a.ContextConsumer=d,a.ContextProvider=c,a.Element=r,a.ForwardRef=p,a.Fragment=n,a.Lazy=b,a.Memo=x,a.Portal=i,a.Profiler=l,a.StrictMode=o,a.Suspense=m,a.isAsyncMode=function(e){return w(e)||S(e)===u},a.isConcurrentMode=w,a.isContextConsumer=function(e){return S(e)===d},a.isContextProvider=function(e){return S(e)===c},a.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},a.isForwardRef=function(e){return S(e)===p},a.isFragment=function(e){return S(e)===n},a.isLazy=function(e){return S(e)===b},a.isMemo=function(e){return S(e)===x},a.isPortal=function(e){return S(e)===i},a.isProfiler=function(e){return S(e)===l},a.isStrictMode=function(e){return S(e)===o},a.isSuspense=function(e){return S(e)===m},a.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===h||e===l||e===o||e===m||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===x||e.$$typeof===c||e.$$typeof===d||e.$$typeof===p||e.$$typeof===y||e.$$typeof===j||e.$$typeof===v||e.$$typeof===g)},a.typeOf=S},213784,(e,t,a)=>{"use strict";t.exports=e.r(29750)},781979,(e,t,a)=>{"use strict";var s=e.r(213784),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(e){return s.isMemo(e)?n:o[e.$$typeof]||r}o[s.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[s.Memo]=n;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;t.exports=function e(t,a,s){if("string"!=typeof a){if(m){var r=p(a);r&&r!==m&&e(t,r,s)}var n=d(a);u&&(n=n.concat(u(a)));for(var o=l(t),f=l(a),x=0;x<n.length;++x){var b=n[x];if(!i[b]&&!(s&&s[b])&&!(f&&f[b])&&!(o&&o[b])){var g=h(a,b);try{c(t,b,g)}catch(e){}}}}return t}},95069,e=>{"use strict";let t=(0,e.i(388019).default)("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);e.s(["ChevronsDown",()=>t],95069)},498377,e=>{"use strict";var t=e.i(478902),a=e.i(416050),s=e.i(95069),r=e.i(774803),i=e.i(366652),n=e.i(210419),o=e.i(389959),l=e.i(843778),c=e.i(925282),d=e.i(774234),u=e.i(554855),h=e.i(874311),p=e.i(378277);e.i(903248);var m=e.i(613580),f=e.i(792459);e.i(108151);let x=(0,o.forwardRef)(({...e},a)=>(0,t.jsx)(c.Collapsible_Shadcn_,{ref:a,...e,className:(0,l.cn)("w-full px-2 group",e.className)})),b=(0,o.forwardRef)(({...e},s)=>(0,t.jsxs)(u.CollapsibleTrigger_Shadcn_,{ref:s,...e,className:(0,l.cn)("w-full flex gap-1 items-center group px-3 text-sm font-normal font-mono uppercase text-lighter tracking-wide",e.className),children:[(0,t.jsx)(a.ChevronRight,{className:"transition-all text-foreground-muted group-data-[state=open]:rotate-90",size:16,strokeWidth:1.5}),(0,t.jsx)("span",{className:"group-hover:not-disabled:text-foreground",children:e.title})]})),g=(0,o.forwardRef)(({...e},a)=>(0,t.jsx)(d.CollapsibleContent_Shadcn_,{ref:a,...e,className:(0,l.cn)("w-full flex flex-col gap-0",e.className)})),y=(0,o.forwardRef)((e,a)=>(0,t.jsx)("div",{ref:a,...e,className:(0,l.cn)("h-px bg-border-muted",e.className)})),j=(0,o.forwardRef)(({className:e,isActive:a,forceHoverState:s,...r},i)=>(0,t.jsx)(n.default,{ref:i,...r,"aria-current":a,className:(0,l.cn)("text-sm","h-7 pl-3 pr-2","flex items-center justify-between rounded-md group relative",a?"bg-selection":"hover:bg-surface-200",s&&"bg-surface-200",a?"text-foreground":"text-foreground-light hover:text-foreground",e)})),v=(0,o.forwardRef)(({isActive:e=!0,forceHoverState:a,isPreview:s,isOpened:r=!0,...i},o)=>(0,t.jsxs)(n.default,{ref:o,...i,"aria-current":e,className:(0,l.cn)((0,f.TreeViewItemVariant)({isSelected:e&&!s,isOpened:r&&!s,isPreview:s}),"px-4",i.className),children:[!s&&e&&(0,t.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),i.children]})),S=(0,o.forwardRef)((e,a)=>(0,t.jsx)("div",{ref:a,...e,className:(0,l.cn)("flex px-2 gap-2 items-center",e.className)})),w=(0,o.forwardRef)(({children:e,isLoading:a=!1,...s},n)=>(0,t.jsxs)("label",{htmlFor:s.name,className:"relative w-full",children:[(0,t.jsx)("span",{className:"sr-only",children:s["aria-labelledby"]}),(0,t.jsx)(p.Input_Shadcn_,{ref:n,type:"text",className:(0,l.cn)("h-[32px] md:h-[28px] w-full","text-base md:text-xs","pl-7","pr-7","w-full","rounded",s.className),...s}),e,a?(0,t.jsx)(r.Loader2,{className:"animate-spin absolute left-2 text-foreground-muted",style:{top:7},size:14,strokeWidth:1.5}):(0,t.jsx)(i.Search,{className:"absolute left-2 top-0 bottom-0 my-auto text-foreground-muted",size:14,strokeWidth:1.5})]})),k=(0,o.forwardRef)(({value:e,onValueChange:a,contentClassName:r,triggerClassName:i,...n},o)=>(0,t.jsxs)(h.DropdownMenu,{modal:!1,children:[(0,t.jsxs)(m.Tooltip,{delayDuration:0,children:[(0,t.jsx)(h.DropdownMenuTrigger,{asChild:!0,className:(0,l.cn)("absolute right-1 top-[.4rem] md:top-[.3rem]","text-foreground transition-colors hover:text-foreground data-[state=open]:text-foreground",i),children:(0,t.jsx)(m.TooltipTrigger,{children:(0,t.jsx)(s.ChevronsDown,{size:18,strokeWidth:1})})}),(0,t.jsx)(m.TooltipContent,{side:"bottom",children:"Sort By"})]}),(0,t.jsx)(h.DropdownMenuContent,{side:"bottom",align:"end",className:(0,l.cn)("w-48",r),children:(0,t.jsx)(h.DropdownMenuRadioGroup,{value:e,onValueChange:a,children:n.children})})]})),C=(0,o.forwardRef)((e,a)=>(0,t.jsx)(h.DropdownMenuRadioItem,{ref:a,...e})),_=(0,o.forwardRef)(({illustration:e,title:a,description:s,actions:r,...i},n)=>(0,t.jsx)("div",{ref:n,...i,className:(0,l.cn)("border border-muted bg-surface-100 dark:bg-surface-75 flex flex-col gap-y-3 items-center justify-center rounded-md px-5 py-4",i.className),children:(0,t.jsxs)("div",{className:"w-full flex flex-col gap-y-1 items-center",children:[e,a&&(0,t.jsx)("p",{className:"text-xs text-foreground-light",children:a}),s&&(0,t.jsx)("p",{className:"text-xs text-foreground-lighter text-center",children:s}),r&&(0,t.jsx)("div",{className:"mt-2",children:r}),i.children]})}));e.s(["InnerSideBarEmptyPanel",()=>_,"InnerSideBarFilterSearchInput",()=>w,"InnerSideBarFilterSortDropdown",()=>k,"InnerSideBarFilterSortDropdownItem",()=>C,"InnerSideBarFilters",()=>S,"InnerSideMenuCollapsible",()=>x,"InnerSideMenuCollapsibleContent",()=>g,"InnerSideMenuCollapsibleTrigger",()=>b,"InnerSideMenuDataItem",()=>v,"InnerSideMenuItem",()=>j,"InnerSideMenuSeparator",()=>y])},909410,e=>{"use strict";let t=(0,e.i(388019).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],909410)},300424,e=>{"use strict";var t=e.i(478902),a=e.i(902858),s=e.i(370410),r=e.i(365257),i=e.i(479232),n=e.i(389959),o=e.i(801834),l=e.i(2579),c=e.i(635494),d=e.i(206413),u=e.i(592360),h=e.i(178527),p=e.i(837710),m=e.i(703526),f=e.i(917007),x=e.i(920432),b=e.i(549815),g=e.i(911509),y=e.i(996960),j=e.i(866205),v=e.i(793912),S=e.i(135144),w=e.i(689805),k=e.i(396831),C=e.i(903248);let _=({className:e,disabled:_=!1,size:T="tiny",showError:N=!0,selectedSchemaName:D,supportSelectAll:P=!1,excludedSchemas:E=[],onSelectSchema:A,onSelectCreateSchema:M,align:I="start"})=>{let[R,L]=(0,n.useState)(!1),{can:$}=(0,l.useAsyncCheckPermissions)(a.PermissionAction.TENANT_SQL_ADMIN_WRITE,"schemas"),{data:q}=(0,c.useSelectedProjectQuery)(),{data:z,isPending:O,isSuccess:W,isError:B,error:F,refetch:K}=(0,o.useSchemasQuery)({projectRef:q?.ref,connectionString:q?.connectionString}),Q=(z||[]).filter(e=>!E.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)("div",{className:e,children:[O&&(0,t.jsx)(p.Button,{type:"default",className:"w-full [&>span]:w-full",size:T,disabled:!0,children:(0,t.jsx)(C.Skeleton,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),N&&B&&(0,t.jsxs)(h.Alert_Shadcn_,{variant:"warning",className:"!px-3 !py-3",children:[(0,t.jsx)(u.AlertTitle_Shadcn_,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,t.jsxs)(d.AlertDescription_Shadcn_,{className:"text-xs mb-2 break-words",children:["Error: ",F?.message]}),(0,t.jsx)(p.Button,{type:"default",size:"tiny",onClick:()=>K(),children:"Reload schemas"})]}),W&&(0,t.jsxs)(w.Popover_Shadcn_,{open:R,onOpenChange:L,modal:!1,children:[(0,t.jsx)(S.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(p.Button,{size:T,disabled:_,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,t.jsx)(r.ChevronsUpDown,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:D?(0,t.jsxs)("div",{className:"w-full flex gap-1",children:[(0,t.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,t.jsx)("p",{className:"text-foreground",children:"*"===D?"All schemas":D})]}):(0,t.jsx)("div",{className:"w-full flex gap-1",children:(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema..."})})})}),(0,t.jsx)(v.PopoverContent_Shadcn_,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:I,sameWidthAsTrigger:!0,children:(0,t.jsxs)(j.Command_Shadcn_,{children:[(0,t.jsx)(x.CommandInput_Shadcn_,{className:"text-xs",placeholder:"Find schema..."}),(0,t.jsxs)(g.CommandList_Shadcn_,{children:[(0,t.jsx)(m.CommandEmpty_Shadcn_,{children:"No schemas found"}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(k.ScrollArea,{className:(Q||[]).length>7?"h-[210px]":"",children:[P&&(0,t.jsxs)(b.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{A("*"),L(!1)},onClick:()=>{A("*"),L(!1)},children:[(0,t.jsx)("span",{children:"All schemas"}),"*"===D&&(0,t.jsx)(s.Check,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),Q?.map(e=>(0,t.jsxs)(b.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{A(e.name),L(!1)},onClick:()=>{A(e.name),L(!1)},children:[(0,t.jsx)("span",{children:e.name}),D===e.name&&(0,t.jsx)(s.Check,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==M&&$&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.CommandSeparator_Shadcn_,{}),(0,t.jsx)(f.CommandGroup_Shadcn_,{children:(0,t.jsxs)(b.CommandItem_Shadcn_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{M(),L(!1)},onClick:()=>{M(),L(!1)},children:[(0,t.jsx)(i.Plus,{size:12}),"Create a new schema"]})})]})]})]})})]})]})};e.s(["SchemaSelector",0,_,"default",0,_])},983783,e=>{"use strict";var t=e.i(533488),a=e.i(389959);e.i(128328);var s=e.i(947748),r=e.i(158639);e.s(["useQuerySchemaState",0,()=>{var e;let{ref:i}=(0,r.useParams)(),n=i&&i.length>0&&window.localStorage.getItem(s.LOCAL_STORAGE_KEYS.LAST_SELECTED_SCHEMA(i))||"public",[o,l]=(e=(0,a.useMemo)(()=>n,[i]),(0,t.useQueryState)("schema",t.parseAsString.withDefault(e).withOptions({clearOnDefault:!1})));return(0,a.useEffect)(()=>{i&&i.length>0&&window.localStorage.setItem(s.LOCAL_STORAGE_KEYS.LAST_SELECTED_SCHEMA(i),o)},[o,i]),{selectedSchema:o,setSelectedSchema:l}}])},892277,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(837710),r=e.i(253214),i=e.i(392491),n=e.i(710483);let o=({onClose:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DialogHeader,{children:(0,t.jsx)(r.DialogTitle,{children:"Schemas managed by Supabase"})}),(0,t.jsx)(r.DialogSectionSeparator,{}),(0,t.jsxs)(r.DialogSection,{className:"space-y-2 prose",children:[(0,t.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:i.INTERNAL_SCHEMAS.map(e=>(0,t.jsx)("code",{className:"text-xs",children:e},e))}),(0,t.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,t.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]}),(0,t.jsx)(r.DialogFooter,{children:(0,t.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,t.jsx)(s.Button,{type:"default",onClick:e,children:"Understood"})})})]});e.s(["ProtectedSchemaWarning",0,({size:e="md",schema:l,entity:c})=>{let[d,u]=(0,a.useState)(!1),{isSchemaLocked:h,reason:p,fdwType:m}=(0,i.useIsProtectedSchema)({schema:l});return h?(0,t.jsx)(n.Admonition,{showIcon:"sm"!==e,layout:"sm"===e?"vertical":"horizontal",type:"note",title:"sm"===e?"Viewing protected schema":`Viewing ${c} from a protected schema`,description:"fdw"===p&&"iceberg"===m?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:l})," schema is used by Supabase to connect to analytics buckets and is read-only through the dashboard."]}):"fdw"===p&&"s3_vectors"===m?(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:l})," schema is used by Supabase to connect to vector buckets and is read-only through the dashboard."]}):(0,t.jsxs)("p",{children:["The ",(0,t.jsx)("code",{className:"text-code-inline",children:l})," schema is managed by Supabase and is read-only through the dashboard."]}),actions:("fdw"!==p||"iceberg"!==m&&"s3_vectors"!==m)&&(0,t.jsxs)(r.Dialog,{open:d,onOpenChange:u,children:[(0,t.jsx)(r.DialogTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{type:"default",size:"tiny",onClick:()=>u(!0),children:"Learn more"})}),(0,t.jsx)(r.DialogContent,{children:(0,t.jsx)(o,{onClose:()=>u(!1)})})]})}):null}])},528462,e=>{"use strict";var t=e.i(478902),a=e.i(311827),s=e.i(543851),r=e.i(300906),i=e.i(219195),n=e.i(843778),o=e.i(792459);e.s(["EntityTypeIcon",0,({type:e,size:l=15,strokeWidth:c=1.5,isActive:d})=>"sql"===e?(0,t.jsx)(o.SQL_ICON,{size:l,className:(0,n.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-4 h-4","-ml-0.5"),strokeWidth:c}):e===a.ENTITY_TYPE.TABLE?(0,t.jsx)(i.Table2,{size:l,strokeWidth:c,className:(0,n.cn)("text-foreground-muted group-hover:text-foreground-lighter group-aria-selected:text-foreground",d&&"text-foreground-light","transition-colors")}):"schema"===e?(0,t.jsx)(r.GitBranch,{size:l,strokeWidth:c}):e===a.ENTITY_TYPE.VIEW?(0,t.jsx)(s.Eye,{size:l,strokeWidth:c,className:(0,n.cn)("text-foreground-muted group-hover:text-foreground-lighter",d&&"text-foreground-lighter","transition-colors")}):(0,t.jsx)("div",{className:(0,n.cn)("flex items-center justify-center text-xs h-4 w-4 rounded-[2px] font-bold",e===a.ENTITY_TYPE.FOREIGN_TABLE&&"text-warning-600/80 dark:text-yellow-900 bg-yellow-500",e===a.ENTITY_TYPE.MATERIALIZED_VIEW&&"text-purple-1100 bg-purple-500",e===a.ENTITY_TYPE.PARTITIONED_TABLE&&"text-foreground-light bg-surface-400 dark:bg-border-stronger"),children:Object.entries(a.ENTITY_TYPE).find(([,t])=>t===e)?.[0]?.[0]?.toUpperCase()})])},951684,e=>{"use strict";let t=(0,e.i(388019).default)("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);e.s(["default",()=>t])},300906,e=>{"use strict";var t=e.i(951684);e.s(["GitBranch",()=>t.default])},152285,e=>{"use strict";var t=e.i(478902),a=e.i(700856),s=e.i(389959),r=e.i(938933);let i=({defaultActiveId:e,activeId:i,type:n="pills",size:o="tiny",block:l,onChange:c,onClick:d,scrollable:u,wrappable:h,addOnBefore:p,addOnAfter:m,listClassNames:f,baseClassNames:x,refs:b,children:g})=>{let y=s.Children.toArray(g),[j,v]=(0,s.useState)(i??e??y?.[0]?.props?.id);(0,s.useMemo)(()=>{i&&i!==j&&v(i)},[i]);let S=(0,r.default)("tabs");function w(e){d?.(e),e!==j&&(c?.(e),v(e))}let k=[S[n].list];return u&&k.push(S.scrollable),h&&k.push(S.wrappable),f&&k.push(f),(0,t.jsxs)(a.Root,{value:j,className:[S.base,x].join(" "),ref:b?.base,children:[(0,t.jsxs)(a.List,{className:k.join(" "),ref:b?.list,children:[p,y.map(e=>{let s=j===e.props.id,r=[S[n].base,S.size[o]];return s?r.push(S[n].active):r.push(S[n].inactive),l&&r.push(S.block),(0,t.jsxs)(a.Trigger,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),w(e.props.id))},onClick:()=>w(e.props.id),value:e.props.id,className:r.join(" "),children:[e.props.icon,(0,t.jsx)("span",{children:e.props.label}),e.props.iconRight]},`${e.props.id}-tab-button`)}),m]}),y]})};i.Panel=({children:e,id:s,className:i})=>{let n=(0,r.default)("tabs");return(0,t.jsx)(a.Content,{value:s,className:[n.content,i].join(" "),children:e})},e.s(["default",0,i])},200409,e=>{"use strict";var t=e.i(152285);e.s(["Tabs",()=>t.default])},238944,e=>{"use strict";var t=e.i(323796),a=e.i(271226),s=e.i(389959);function r({replace:e=!0,arrayKeys:i=[]}={}){let n=JSON.stringify(i),o=(0,s.useMemo)(()=>new Set(i),[n]),l=(0,a.useRouter)(),c=(0,s.useMemo)(()=>Object.fromEntries(Object.entries(l.query).map(([e,t])=>o.has(e)?Array.isArray(t)?[e,t]:[e,[t]]:[e,t])),[o,l.query]),d=(0,t.default)(c);return[c,(0,s.useCallback)(t=>{let a=d.current,s="function"==typeof t?t(a):t,r=Object.fromEntries(Object.entries({...a,...s}).filter(([,e])=>!!e));(e?l.replace:l.push)({pathname:l.pathname,query:r},void 0,{shallow:!0,scroll:!1})},[l,e])]}e.s(["useUrlState",()=>r])},990510,e=>{"use strict";e.i(128328);var t=e.i(947748),a=e.i(158639),s=e.i(124416);let r={editor:void 0,sql:void 0};e.s(["useDashboardHistory",0,()=>{let{ref:e}=(0,a.useParams)(),[i,n,{isSuccess:o}]=(0,s.useLocalStorageQuery)(t.LOCAL_STORAGE_KEYS.DASHBOARD_HISTORY(e??""),r);return{history:i,setLastVisitedTable:e=>{n({...i,editor:e})},setLastVisitedSnippet:e=>{n({...i,sql:e})},isHistoryLoaded:o}}])},839360,e=>{"use strict";let t=(0,e.i(388019).default)("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);e.s(["PanelLeftClose",()=>t],839360)},249960,e=>{"use strict";let t=(0,e.i(388019).default)("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);e.s(["PanelLeftOpen",()=>t],249960)},569715,278889,e=>{"use strict";var t=e.i(478902),a=e.i(742251);e.i(128328);var s=e.i(158639),r=e.i(63519),i=e.i(843778),n=e.i(825713),o=e.i(839360),l=e.i(249960),c=e.i(876298),d=e.i(613580),u=e.i(232107);function h({hideTabs:e}){let{showSidebar:a,setShowSidebar:s,mobileMenuOpen:r,setMobileMenuOpen:n}=(0,c.useAppStateSnapshot)(),h=(0,u.useBreakpoint)("md");return(0,t.jsxs)(d.Tooltip,{children:[(0,t.jsx)(d.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:(0,i.cn)("hidden md:flex items-center justify-center w-10 h-10 hover:bg-surface-100 shrink-0",!e&&"border-b border-b-default"),onClick:()=>{h?n(!r):s(!a)},children:a?(0,t.jsx)(o.PanelLeftClose,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"}):(0,t.jsx)(l.PanelLeftOpen,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"})})}),(0,t.jsxs)(d.TooltipContent,{side:"bottom",children:[a?"Collapse":"Expand"," sidebar"]})]})}var p=e.i(731394),m=e.i(960547),f=e.i(809323),x=e.i(265100),b=e.i(479232),g=e.i(975924),y=e.i(271226),j=e.i(990510),v=e.i(62307),S=e.i(756441),w=e.i(917134),k=e.i(794965),C=e.i(500850),_=e.i(314805),T=e.i(408279),N=e.i(795826),D=e.i(84643),P=e.i(389959),E=e.i(528462),A=e.i(983783);let M=({tab:e,index:a,openTabs:s,onClose:n})=>{let o=(0,N.useEditorType)(),l=(0,r.useTabsStateSnapshot)(),{selectedSchema:c}=(0,A.useQuerySchemaState)(),{attributes:d,listeners:u,setNodeRef:h,transform:p,transition:b,isDragging:y}=(0,m.useSortable)({id:e.id}),j={transform:D.CSS.Transform.toString(p),transition:b,zIndex:+!!y},v=(0,P.useMemo)(()=>s.some(e=>"table"===o&&e.metadata?.schema!==c),[s,c,o]);return(0,t.jsxs)(x.motion.div,{ref:h,style:j,...d,layoutId:e.id,transition:{duration:.045},animate:{opacity:+!y},className:(0,i.cn)("flex items-center h-10 first-of-type:border-l"),children:[(0,t.jsxs)(T.TabsTrigger_Shadcn_,{value:e.id,onAuxClick:t=>{1===t.button&&(t.preventDefault(),n(e.id))},onDoubleClick:()=>l.makeTabPermanent(e.id),className:(0,i.cn)("flex items-center gap-2 pl-3 pr-2.5 text-xs","bg-dash-sidebar/50 dark:bg-surface-100/50","data-[state=active]:bg-dash-sidebar dark:data-[state=active]:bg-surface-100","border-b border-default","data-[state=active]:border-b-background-dash-sidebar dark:data-[state=active]:border-b-background-surface-100","relative group h-full","hover:bg-surface-300 dark:hover:bg-surface-100",e.isPreview&&"italic font-light"),...u,children:[(0,t.jsx)(E.EntityTypeIcon,{type:e.type}),(0,t.jsxs)("div",{className:"flex items-center gap-0",children:[(0,t.jsx)(f.AnimatePresence,{mode:"popLayout",initial:!0,children:v&&(0,t.jsxs)(x.motion.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.15},className:"text-foreground-muted group-data-[state=active]:text-foreground-lighter",children:[e?.metadata?.schema,"."]})}),(0,t.jsx)("span",{children:e.label||"Untitled"})]}),(0,t.jsx)("span",{role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"p-0.5 ml-1 opacity-0 group-hover:opacity-100 hover:bg-200 rounded-sm cursor-pointer",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerDown:t=>{t.preventDefault(),t.stopPropagation(),n(e.id)},children:(0,t.jsx)(g.X,{size:12,className:"text-foreground-light"})}),(0,t.jsx)("div",{className:"absolute w-full top-0 left-0 right-0 h-px bg-foreground opacity-0 group-data-[state=active]:opacity-100"})]}),a<s.length&&(0,t.jsx)("div",{role:"separator",className:"h-full w-px bg-border"},`separator-${e.id}`)]})},I=({tab:e})=>{let{ref:a}=(0,s.useParams)(),i=(0,r.useTabsStateSnapshot)().tabsMap[e];return i?(0,t.jsxs)(x.motion.div,{layoutId:e,transition:{duration:.045},animate:{opacity:.7},className:"flex relative items-center gap-2 px-3 text-xs bg-dash-sidebar dark:bg-surface-100 shadow-lg rounded-sm h-10",children:[(0,t.jsx)(E.EntityTypeIcon,{type:i.type}),(0,t.jsx)("span",{children:i.label||"Untitled"}),(0,t.jsx)("div",{className:"absolute w-full top-0 left-0 right-0 h-px bg-foreground-muted"})]}):null};var R=e.i(323796);function L(){let e=(0,r.useTabsStateSnapshot)(),t=(0,R.default)(e.tabsMap),a=(0,R.default)(e.recentItems),s=(0,R.default)(e.openTabs);return(0,P.useCallback)(({schemas:i,entities:n})=>{let o=n.map(e=>(0,r.createTabId)(e.type,{id:e.id})),l=[];for(let e of i)l.push(...a.current.filter(t=>t.metadata?.schema===e).map(e=>e.id));let c=[...l.filter(e=>!o.includes(e))];e.removeRecentItems(c);let d=[];for(let e of i)d.push(...s.current.filter(a=>{let s=t.current[a];return s?.metadata?.schema===e}));let u=[...d.filter(e=>!e.startsWith("sql")&&!e.startsWith("schema")&&!o.includes(e))];e.removeTabs(u),s.current.map(e=>t.current[e]).filter(e=>!!e&&r.editorEntityTypes.table?.includes(e.type)).forEach(t=>{let a=n?.find(e=>t.metadata?.tableId===e.id);a&&a.name!==t.label&&e.updateTab(t.id,{label:a.name})})},[])}function $(){let e=(0,r.useTabsStateSnapshot)(),t=(0,R.default)(e.tabsMap),a=(0,R.default)(e.openTabs);return(0,P.useCallback)(({snippets:s})=>{let i=[...s.filter(e=>"sql"===e.type).map(e=>(0,r.createTabId)("sql",{id:e.id})),"sql-templates","sql-quickstarts"],n=a.current.filter(e=>e.startsWith("sql")&&!i.includes(e));e.removeTabs(n);let o=e.getRecentItemsByType("sql");e.removeRecentItems(o?o.filter(e=>!i.includes(e.id)).map(e=>e.id):[]),a.current.map(e=>t.current[e]).filter(e=>!!e&&r.editorEntityTypes.sql?.includes(e.type)).forEach(t=>{let a=s?.find(e=>t.metadata?.sqlId===e.id);a&&a.name!==t.label&&e.updateTab(t.id,{label:a.name})})},[])}function q({activeTab:e,tabCount:t}){let a=(0,P.useRef)(null),s=(0,P.useRef)(t),r=(0,P.useRef)(!0);return(0,P.useEffect)(()=>{a.current&&(a.current.scrollLeft=a.current.scrollWidth)},[]),(0,P.useEffect)(()=>{if(r.current){r.current=!1;return}if(a.current){if(t>s.current)a.current.scrollLeft=a.current.scrollWidth;else if(e){let e=a.current.querySelector('[data-state="active"]');e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}s.current=t}},[e,t]),{tabsListRef:a}}e.s(["useSqlEditorTabsCleanup",()=>$,"useTableEditorTabsCleanUp",()=>L,"useTabsScroll",()=>q],278889);let z=()=>{let{ref:e,id:a}=(0,s.useParams)(),n=(0,y.useRouter)(),{setLastVisitedSnippet:o,setLastVisitedTable:l}=(0,j.useDashboardHistory)(),c=(0,N.useEditorType)(),d=(0,r.useTabsStateSnapshot)(),u=(0,p.useSensors)((0,p.useSensor)(p.PointerSensor,{activationConstraint:{distance:1}})),D=d.openTabs.map(e=>d.tabsMap[e]).filter(e=>void 0!==e),P=n.asPath.includes("/new"),E=c?D.filter(e=>r.editorEntityTypes[c]?.includes(e.type)):[],A=()=>{"table"===c?l(void 0):"sql"===c&&o(void 0)},R=e=>{d.handleTabClose({id:e,router:n,editor:c,onClearDashboardHistory:A})},L=()=>{if(c){let t="table"===c?d.openTabs.filter(e=>!e.startsWith("sql")):d.openTabs.filter(e=>e.startsWith("sql"));d.removeTabs(t),A(),n.push(`/project/${e}/${"table"===c?"editor":"sql"}`)}},{tabsListRef:$}=q({activeTab:d.activeTab,tabCount:E.length});return(0,t.jsxs)(p.DndContext,{sensors:u,onDragEnd:e=>{let{active:t,over:a}=e;if(!a||t.id===a.id)return;let s=d.openTabs.indexOf(t.id.toString()),r=d.openTabs.indexOf(a.id.toString());s!==r&&d.handleTabDragEnd(s,r,t.id.toString(),n)},children:[(0,t.jsxs)(C.Tabs_Shadcn_,{className:"w-full flex",value:P?"new":d.activeTab??void 0,onValueChange:e=>{d.handleTabNavigation(e,n)},children:[(0,t.jsx)(h,{hideTabs:!1}),(0,t.jsxs)(_.TabsList_Shadcn_,{ref:$,className:(0,i.cn)("rounded-b-none gap-0 h-10 flex items-center w-full z-[1]","bg-surface-200 dark:bg-alternative border-none overflow-clip overflow-x-auto"),children:[(0,t.jsx)(m.SortableContext,{items:E.map(e=>e.id),strategy:m.horizontalListSortingStrategy,children:E.map((s,r)=>(0,t.jsxs)(v.ContextMenu_Shadcn_,{children:[(0,t.jsx)(k.ContextMenuTrigger_Shadcn_,{children:(0,t.jsx)(M,{tab:s,index:r,openTabs:D,onClose:()=>R(s.id)},s.id)}),(0,t.jsxs)(S.ContextMenuContent_Shadcn_,{children:[(0,t.jsx)(w.ContextMenuItem_Shadcn_,{onClick:()=>R(s.id),children:"Close"}),(0,t.jsx)(w.ContextMenuItem_Shadcn_,{onClick:()=>(t=>{if(c){let s="table"===c?d.openTabs.filter(e=>!e.startsWith("sql")&&e!==t):d.openTabs.filter(e=>e.startsWith("sql")&&e!==t);d.removeTabs(s),A();let r="table"===c?t.split("-")[1]:t.split("sql-")[1];a!==r&&n.push(`/project/${e}/${"table"===c?"editor":"sql"}/${r}`)}})(s.id),children:"Close Others"}),(0,t.jsx)(w.ContextMenuItem_Shadcn_,{onClick:()=>(t=>{if(c){let a="table"===c?d.openTabs.filter(e=>!e.startsWith("sql")):d.openTabs.filter(e=>e.startsWith("sql")),s=a.indexOf(t),r=a.indexOf(d.activeTab),i=a.slice(s+1);if(d.removeTabs(i),s<r){let a="table"===c?t.split("-")[1]:t.split("sql-")[1];n.push(`/project/${e}/${"table"===c?"editor":"sql"}/${a}`)}}})(s.id),children:"Close to the Right"}),(0,t.jsx)(w.ContextMenuItem_Shadcn_,{onClick:L,children:"Close All"})]})]},s.id))}),P&&(0,t.jsxs)(T.TabsTrigger_Shadcn_,{value:"new",className:(0,i.cn)("flex items-center gap-2 px-3 text-xs","bg-dash-sidebar/50 dark:bg-surface-100/50","data-[state=active]:bg-dash-sidebar dark:data-[state=active]:bg-surface-100","relative group h-full border-t-2 !border-b-0","hover:bg-surface-300 dark:hover:bg-surface-100"),children:[(0,t.jsx)(b.Plus,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"}),(0,t.jsx)("div",{className:"flex items-center gap-0",children:(0,t.jsx)("span",{children:"New"})}),(0,t.jsx)("span",{role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation()},className:"ml-1 opacity-0 group-hover:opacity-100 hover:bg-200 rounded-sm cursor-pointer",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onPointerDown:e=>{e.preventDefault(),e.stopPropagation(),R("new")},children:(0,t.jsx)(g.X,{size:12,className:"text-foreground-light"})})," ",(0,t.jsx)("div",{className:"absolute w-full -bottom-[1px] left-0 right-0 h-px bg-dash-sidebar dark:bg-surface-100 opacity-0 group-data-[state=active]:opacity-100"})]}),(0,t.jsx)(f.AnimatePresence,{initial:!1,children:!P&&(0,t.jsx)(x.motion.button,{className:"flex items-center justify-center w-10 h-10 hover:bg-surface-100 shrink-0 border-b",onClick:()=>n.push(`/project/${n.query.ref}/${"table"===c?"editor":"sql"}/new?skip=true`),initial:{opacity:0,scale:.8,x:-10},animate:{opacity:1,scale:1,x:0},transition:{duration:.2},children:(0,t.jsx)(b.Plus,{size:16,strokeWidth:1.5,className:"text-foreground-lighter hover:text-foreground-light"})})}),(0,t.jsx)("div",{className:"grow h-full border-b pr-6"})]})]}),(0,t.jsx)(p.DragOverlay,{dropAnimation:null,children:d.activeTab?(0,t.jsx)(I,{tab:d.activeTab}):null})]})};e.s(["EditorBaseLayout",0,({children:e,title:o,product:l,productMenuClassName:c,productMenu:d})=>{let{ref:u}=(0,s.useParams)(),p=(0,a.usePathname)(),m=(0,N.useEditorType)(),f=(0,r.useTabsStateSnapshot)(),x="table"===m&&0===f.openTabs.filter(e=>!e.startsWith("sql")).length,b=p===`/project/${u}/editor`||p===`/project/${u}/sql`||x;return(0,t.jsx)(n.ProjectLayoutWithAuth,{resizableSidebar:!0,title:o,product:l,productMenuClassName:c,productMenu:d,children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:(0,i.cn)("h-10 flex items-center",b?"bg-surface-100":"bg-surface-200 dark:bg-alternative"),children:b?(0,t.jsx)(h,{hideTabs:b}):(0,t.jsx)(z,{})}),(0,t.jsx)("div",{className:"h-full",children:e})]})})}],569715)},556744,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(903248);let r=(0,a.memo)(function(){return(0,t.jsx)("div",{className:"px-4 flex flex-col gap-0",children:[{width:"w-40",opacity:"opacity-100"},{width:"w-32",opacity:"opacity-100"},{width:"w-20",opacity:"opacity-75"},{width:"w-40",opacity:"opacity-50"},{width:"w-20",opacity:"opacity-25"}].map((e,a)=>(0,t.jsxs)("div",{className:`flex flex-row h-6 items-center gap-3 ${e.opacity}`,children:[(0,t.jsx)(s.Skeleton,{className:"h-4 w-5"}),(0,t.jsx)(s.Skeleton,{className:`h-4 ${e.width}`})]},a))})});e.s(["default",0,r])},384706,e=>{"use strict";let t=(0,e.i(388019).default)("Pointer",[["path",{d:"M22 14a8 8 0 0 1-8 8",key:"56vcr3"}],["path",{d:"M18 11v-1a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1agjmk"}],["path",{d:"M14 10V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1",key:"wdbh2u"}],["path",{d:"M10 9.5V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v10",key:"1ibuk9"}],["path",{d:"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"g6ys72"}]]);e.s(["Pointer",()=>t],384706)},525070,e=>{"use strict";var t=e.i(478902);let a=(0,e.i(388019).default)("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]);e.i(128328);var s=e.i(158639),r=e.i(162082),i=e.i(265735),n=e.i(876298),o=e.i(215312);e.s(["APIDocsButton",0,({section:e,source:l})=>{let c=(0,n.useAppStateSnapshot)(),{ref:d}=(0,s.useParams)(),{data:u}=(0,i.useSelectedOrganizationQuery)(),{mutate:h}=(0,r.useSendEventMutation)();return(0,t.jsx)(o.ButtonTooltip,{size:"tiny",type:"default",onClick:()=>{e&&c.setActiveDocsSection(e),c.setShowProjectApiDocs(!0),h({action:"api_docs_opened",properties:{source:l},groups:{project:d??"Unknown",organization:u?.slug??"Unknown"}})},icon:(0,t.jsx)(a,{}),className:"h-7 w-7",tooltip:{content:{side:"bottom",text:"API Docs"}}})}],525070)},686415,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(837710),r=e.i(793912),i=e.i(135144),n=e.i(689805),o=e.i(843778),l=e.i(88816),c=e.i(659016),d=e.i(201461),u=e.i(883668),h=e.i(71011);let p=({user:e})=>{let a=(0,h.getAvatarUrl)(e),s=(0,h.getDisplayName)(e,e.email??e.phone??e.id??"Unknown");return(0,t.jsxs)("div",{className:"flex gap-1 items-center pl-0.5 pr-1.5 h-[21px] bg-surface-200 rounded-full overflow-hidden",children:[a?(0,t.jsx)("img",{className:"rounded-full w-[18px] h-[18px]",src:a,alt:s}):(0,t.jsx)("div",{className:"rounded-full w-[18px] h-[18px] bg-surface-100 border flex items-center justify-center text-light",children:(0,t.jsx)(c.User,{size:12,strokeWidth:2})}),(0,t.jsx)("span",{className:"truncate max-w-[84px]",children:s})]})},m=({sub:e})=>(0,t.jsxs)("div",{className:"flex gap-1 items-center pl-0.5 pr-1.5 h-[21px] bg-surface-200 rounded-full overflow-hidden",children:[(0,t.jsx)("div",{className:"rounded-full w-[18px] h-[18px] bg-surface-100 border flex items-center justify-center text-light",children:(0,t.jsx)(c.User,{size:12,strokeWidth:2})}),(0,t.jsx)("span",{className:"truncate max-w-[84px]",children:e})]});e.s(["RoleImpersonationPopover",0,({serviceRoleLabel:e,variant:c="regular",align:h="end",disallowAuthenticatedOption:f=!1})=>{let x=(0,d.useRoleImpersonationStateSnapshot)(),[b,g]=(0,a.useState)(!1),y=x.role?.role??e??"service role";return(0,t.jsxs)(n.Popover_Shadcn_,{open:b,onOpenChange:g,children:[(0,t.jsx)(i.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(s.Button,{size:"tiny",type:"default",className:(0,o.cn)("h-[26px] pr-3 gap-0","connected-on-right"===c&&"rounded-r-none border-r-0","connected-on-left"===c&&"rounded-l-none border-l-0","connected-on-both"===c&&"rounded-none border-x-0"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-foreground-muted",children:"Role"}),(0,t.jsx)("span",{children:y}),x.role?.type==="postgrest"&&"authenticated"===x.role.role&&(0,t.jsxs)(t.Fragment,{children:["native"===x.role.userType&&x.role.user?(0,t.jsx)(p,{user:x.role.user}):"external"===x.role.userType&&x.role.externalAuth?(0,t.jsx)(m,{sub:x.role.externalAuth.sub}):null,(0,t.jsx)("span",{className:"text-xs text-foreground-lighter font-light",children:"aal2"===x.role.aal?"AAL2":"AAL1"})]}),(0,t.jsx)(l.ChevronDown,{className:"text-muted",strokeWidth:1,size:12})]})})}),(0,t.jsx)(r.PopoverContent_Shadcn_,{className:"p-0 overflow-hidden w-min",side:"bottom",align:h,children:(0,t.jsx)(u.RoleImpersonationSelector,{serviceRoleLabel:e,disallowAuthenticatedOption:f})})]})}])},290623,e=>{"use strict";var t=e.i(478902),a=e.i(17203),s=e.i(210419),r=e.i(355901),i=e.i(632459),n=e.i(576117),o=e.i(38429),l=e.i(356003);e.i(967533);var c=e.i(721490),d=e.i(714403),u=e.i(908937),h=e.i(201461),p=e.i(790819),m=e.i(46974);async function f({projectRef:e,connectionString:t,table:a,filters:s,roleImpersonationState:r}){let i=(0,u.wrapWithRoleImpersonation)(function({table:e,filters:t}){let a=new c.Query().from(e.name,e.schema??void 0).delete();return t.filter(e=>e.value&&""!==e.value).forEach(t=>{let s=(0,m.formatFilterValue)(e,t);a=a.filter(t.column,t.operator,s)}),a.toSql()}({table:a,filters:s}),r),{result:n}=await (0,d.executeSql)({projectRef:e,connectionString:t,sql:i,isRoleImpersonationEnabled:(0,h.isRoleImpersonationEnabled)(r?.role)});return n}var x=e.i(152992);async function b({projectRef:e,connectionString:t,table:a}){let s=function({table:e}){return new c.Query().from(e.name,e.schema??void 0).truncate().toSql()}({table:a}),{result:r}=await (0,d.executeSql)({projectRef:e,connectionString:t,sql:s});return r}var g=e.i(755216),y=e.i(497761),j=e.i(938343),v=e.i(435916),S=e.i(138658);async function w({projectRef:e,connectionString:t,id:a,name:s,schema:r,cascade:i=!1}){let{sql:n}=g.default.tables.remove({name:s,schema:r},{cascade:i}),{result:o}=await (0,d.executeSql)({projectRef:e,connectionString:t,sql:n,queryKey:["table","delete",a]});return o}var k=e.i(635494),C=e.i(636047),_=e.i(206413),T=e.i(592360),N=e.i(178527),D=e.i(837710),P=e.i(815545),E=e.i(466472);e.s(["default",0,({selectedTable:e,onTableDeleted:c})=>{let{data:d}=(0,k.useSelectedProjectQuery)(),u=(0,C.useTableEditorStateSnapshot)(),{filters:m,onApplyFilters:g}=(0,i.useTableFilter)(),{mutate:A}=(0,n.useDatabaseColumnDeleteMutation)({onSuccess:()=>{if(u.confirmationDialog?.type!=="column")return;let e=u.confirmationDialog.column;(({columnName:e})=>{g(m.filter(t=>t.column!==e))})({columnName:e.name}),r.toast.success(`Successfully deleted column "${e.name}"`)},onError:e=>{if(u.confirmationDialog?.type!=="column")return;let t=u.confirmationDialog.column;r.toast.error(`Failed to delete ${t.name}: ${e.message}`)},onSettled:()=>{u.closeConfirmationDialog()}}),{mutate:M}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,l.useQueryClient)();return(0,o.useMutation)({mutationFn:e=>w(e),async onSuccess(t,a,r){let{id:i,projectRef:n,schema:o}=a;await Promise.all([s.invalidateQueries({queryKey:j.tableEditorKeys.tableEditor(n,i)}),s.invalidateQueries({queryKey:S.tableKeys.list(n,o)}),s.invalidateQueries({queryKey:y.entityTypeKeys.list(n)}),s.invalidateQueries({queryKey:v.viewKeys.listBySchema(n,o)})]),await e?.(t,a,r)},async onError(e,a,s){void 0===t?r.toast.error(`Failed to delete database table: ${e.message}`):t(e,a,s)},...a})})({onSuccess:async()=>{r.toast.success(`Successfully deleted table "${e?.name}"`),c?.()},onError:t=>{r.toast.error(`Failed to delete ${e?.name}: ${t.message}`)},onSettled:()=>{u.closeConfirmationDialog()}}),{mutate:I,isPending:R}=(0,x.useTableRowDeleteMutation)({onSuccess:()=>{u.confirmationDialog?.type==="row"&&u.confirmationDialog.callback?.(),r.toast.success("Successfully deleted selected row(s)")},onSettled:()=>{u.closeConfirmationDialog()}}),{mutate:L,isPending:$}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,l.useQueryClient)();return(0,o.useMutation)({mutationFn:e=>f(e),async onSuccess(t,a,r){let{projectRef:i,table:n}=a;await s.invalidateQueries({queryKey:p.tableRowKeys.tableRowsAndCount(i,n.id)}),await e?.(t,a,r)},async onError(e,a,s){void 0===t?r.toast.error(`Failed to delete all table rows: ${e.message}`):t(e,a,s)},...a})})({onSuccess:()=>{u.confirmationDialog?.type==="row"&&u.confirmationDialog.callback?.(),r.toast.success("Successfully deleted selected rows")},onError:e=>{r.toast.error(`Failed to delete rows: ${e.message}`)},onSettled:()=>{u.closeConfirmationDialog()}}),{mutate:q,isPending:z}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,l.useQueryClient)();return(0,o.useMutation)({mutationFn:e=>b(e),async onSuccess(t,a,r){let{projectRef:i,table:n}=a;await s.invalidateQueries({queryKey:p.tableRowKeys.tableRowsAndCount(i,n.id)}),await e?.(t,a,r)},async onError(e,a,s){void 0===t?r.toast.error(`Failed to truncate table row: ${e.message}`):t(e,a,s)},...a})})({onSuccess:()=>{u.confirmationDialog?.type==="row"&&u.confirmationDialog.callback?.(),r.toast.success("Successfully deleted all rows from table")},onError:e=>{r.toast.error(`Failed to delete rows: ${e.message}`)},onSettled:()=>{u.closeConfirmationDialog()}}),O=u.confirmationDialog?.type==="row"&&u.confirmationDialog.allRowsSelected,W=u.confirmationDialog?.type==="row"?u.confirmationDialog.allRowsSelected?u.confirmationDialog.numRows??0:u.confirmationDialog.rows.length:0,B=(u.confirmationDialog?.type==="column"||u.confirmationDialog?.type==="table")&&u.confirmationDialog.isDeleteWithCascade,F=async()=>{if(u.confirmationDialog?.type!=="column"||void 0===d)return;let e=u.confirmationDialog.column;void 0!==e&&A({column:e,cascade:B,projectRef:d.ref,connectionString:d?.connectionString})},K=async()=>{u.confirmationDialog?.type!=="table"||void 0!==e&&M({projectRef:d?.ref,connectionString:d?.connectionString,id:e.id,name:e.name,schema:e.schema,cascade:B})},Q=(0,h.useGetImpersonatedRoleState)(),U=async()=>{if(!d)return console.error("Project ref is required");if(!e)return console.error("Selected table required");if(u.confirmationDialog?.type!=="row")return;let t=u.confirmationDialog.rows;if(u.confirmationDialog.allRowsSelected)if(0===m.length){if(void 0!==Q().role)return u.closeConfirmationDialog(),r.toast.error("Table truncation is not supported when impersonating a role");q({projectRef:d.ref,connectionString:d.connectionString,table:e})}else L({projectRef:d.ref,connectionString:d.connectionString,table:e,filters:m,roleImpersonationState:Q()});else I({projectRef:d.ref,connectionString:d.connectionString,table:e,rows:t,roleImpersonationState:Q()})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.default,{variant:"destructive",size:"small",visible:u.confirmationDialog?.type==="column",title:`Confirm deletion of column "${u.confirmationDialog?.type==="column"&&u.confirmationDialog.column.name}"`,confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{u.closeConfirmationDialog()},onConfirm:F,children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected column? This action cannot be undone."}),(0,t.jsx)(P.Checkbox,{label:"Drop column with cascade?",description:"Deletes the column and its dependent objects",checked:B,onChange:()=>u.toggleConfirmationIsWithCascade()}),B&&(0,t.jsxs)(N.Alert_Shadcn_,{variant:"warning",title:"Warning: Dropping with cascade may result in unintended consequences",children:[(0,t.jsx)(T.AlertTitle_Shadcn_,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,t.jsx)(_.AlertDescription_Shadcn_,{children:(0,t.jsx)(D.Button,{asChild:!0,size:"tiny",type:"default",icon:(0,t.jsx)(a.ExternalLink,{}),children:(0,t.jsx)(s.default,{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,t.jsx)(E.default,{variant:"destructive",size:"small",visible:u.confirmationDialog?.type==="table",title:(0,t.jsx)("span",{className:"break-words",children:`Confirm deletion of table "${e?.name}"`}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{u.closeConfirmationDialog()},onConfirm:K,children:(0,t.jsxs)("div",{"data-testid":"confirm-delete-table-modal",className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected table? This action cannot be undone."}),(0,t.jsx)(P.Checkbox,{label:"Drop table with cascade?",description:"Deletes the table and its dependent objects",checked:B,onChange:()=>u.toggleConfirmationIsWithCascade(!B)}),B&&(0,t.jsxs)(N.Alert_Shadcn_,{variant:"warning",children:[(0,t.jsx)(T.AlertTitle_Shadcn_,{children:"Warning: Dropping with cascade may result in unintended consequences"}),(0,t.jsx)(_.AlertDescription_Shadcn_,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,t.jsx)(_.AlertDescription_Shadcn_,{className:"mt-4",children:(0,t.jsx)(D.Button,{asChild:!0,size:"tiny",type:"default",icon:(0,t.jsx)(a.ExternalLink,{}),children:(0,t.jsx)(s.default,{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,t.jsx)(E.default,{variant:"destructive",size:"small",visible:u.confirmationDialog?.type==="row",title:(0,t.jsxs)("p",{className:"break-words",children:[(0,t.jsx)("span",{children:"Confirm to delete the selected row"}),(0,t.jsx)("span",{children:W>1&&"s"})]}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>u.closeConfirmationDialog(),onConfirm:()=>U(),loading:z||R||$,children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,t.jsx)("span",{children:"Are you sure you want to delete "}),(0,t.jsxs)("span",{children:[O?"all":"the selected"," "]}),(0,t.jsx)("span",{children:W>1&&`${W} `}),(0,t.jsx)("span",{children:"row"}),(0,t.jsx)("span",{children:W>1&&"s"}),(0,t.jsx)("span",{children:"? This action cannot be undone."})]})})})]})}],290623)},526925,e=>{"use strict";e.s(["formatEstimatedCount",0,e=>{if(0===e)return"0";let t=Math.floor(Math.log(e)/Math.log(1e3)),a=t>4?"T":["","K","M","B","T"][t],s=e/Math.pow(1e3,t>4?4:t);return""===a?`${s}`:`${s.toFixed(1)}${a}`}])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},805303,e=>{"use strict";var t=e.i(478902),a=e.i(843778);e.s(["GridFooter",0,({children:e,className:s})=>(0,t.jsx)("div",{"aria-label":"Table grid footer",className:(0,a.cn)("flex min-h-9 h-9 overflow-hidden overflow-x-auto items-center px-2 w-full border-t",s),children:e})])},82394,e=>{"use strict";let t=(0,e.i(388019).default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);e.s(["PlusCircle",()=>t],82394)},731228,e=>{"use strict";let t=(0,e.i(388019).default)("MousePointer2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]);e.s(["MousePointer2",()=>t],731228)},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:s=3,redaction:r="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=t,o=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),l=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of l)t=t.replace(e,r);return t}function u(e){return o.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=s)return i;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let s=[];c.set(t,s);for(let r=0;r<t.length;r++)s[r]=e(t[r],a+1);return s}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let s={};for(let[i,n]of(c.set(t,s),Object.entries(t)))u(i)?s[i]=r:s[i]=e(n,a+1);return s}if(t instanceof Map){let s=[];for(let[i,n]of(c.set(t,s),t.entries())){let t=u(i)?r:e(i,a+1),o=u(i)?r:e(n,a+1);s.push([t,o])}return s}if(t instanceof Set){let s=[];for(let r of(c.set(t,s),t.values()))s.push(e(r,a+1));return s}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:i};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0860ba34f07162db.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=ae88ecbb-d675-1dc2-f550-9cd2a7bab7f3
//# sourceMappingURL=7b3dec425cd8efb2.js.map