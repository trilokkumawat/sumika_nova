;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0771a84e-a870-df6d-eb11-bdfd640f52b3")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),a=e.i(710483);let i=({resourceText:e,isFullPage:i=!1})=>{let s=()=>(0,t.jsx)(a.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return i?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(s,{})})}):(0,t.jsx)(s,{})};e.s(["NoPermission",0,i,"default",0,i])},547723,e=>{"use strict";var t=e.i(478902),a=e.i(389959),i=e.i(843778);let s=(0,a.forwardRef)((e,a)=>(0,t.jsx)("nav",{ref:a,dir:"ltr",...e,className:(0,i.cn)("border-b",e.className),children:(0,t.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),n=(0,a.forwardRef)(({children:e,className:a,active:s,...n},r)=>(0,t.jsx)("li",{ref:r,"aria-selected":s?"true":"false","data-state":s?"active":"inactive",className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",a),...n,children:e}));e.s(["NavMenu",0,s,"NavMenuItem",0,n])},3259,100387,e=>{"use strict";var t=e.i(478902),a=e.i(153545),i=e.i(933505);e.s(["ChevronRightIcon",()=>i.default],100387);var i=i,s=e.i(389959),n=e.i(843778);let r=s.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));r.displayName="Breadcrumb";let l=s.forwardRef(({className:e,...a},i)=>(0,t.jsx)("ol",{ref:i,className:(0,n.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...a}));l.displayName="BreadcrumbList";let o=s.forwardRef(({className:e,...a},i)=>(0,t.jsx)("li",{ref:i,className:(0,n.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...a}));o.displayName="BreadcrumbItem";let c=s.forwardRef(({asChild:e,className:i,...s},r)=>{let l=e?a.Slot:"a";return(0,t.jsx)(l,{ref:r,className:(0,n.cn)("transition-colors underline lg:no-underline hover:text-foreground",i),...s})});c.displayName="BreadcrumbLink";let d=s.forwardRef(({className:e,...a},i)=>(0,t.jsx)("span",{ref:i,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("no-underline text-foreground",e),...a}));d.displayName="BreadcrumbPage";let u=({children:e,className:a,...s})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5 text-foreground-muted",a),...s,children:e??(0,t.jsx)(i.default,{})});u.displayName="BreadcrumbSeparator";let m=({className:e,...a})=>(0,t.jsxs)("span",{className:(0,n.cn)("flex h-4 w-4 items-center justify-center",e),...a,children:[(0,t.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"sr-only",children:"More"})]});m.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>r,"BreadcrumbEllipsis",()=>m,"BreadcrumbItem",()=>o,"BreadcrumbLink",()=>c,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},744061,418638,e=>{"use strict";var t=e.i(478902),a=e.i(938933),i=e.i(843778);function s({children:e,className:a,tag:i="div",style:s}){let n=`${i}`;return(0,t.jsx)(n,{style:s,children:e})}s.Title=function({className:e,level:a=1,children:i,style:s}){let n=`h${a}`;return(0,t.jsx)(n,{style:s,children:i})},s.Text=function({className:e,children:a,style:i,type:s,disabled:n,mark:r,code:l,keyboard:o,underline:c,strikethrough:d,strong:u,small:m}){return l?(0,t.jsx)("code",{style:i,children:a}):r?(0,t.jsx)("mark",{style:i,children:a}):o?(0,t.jsx)("kbd",{style:i,children:a}):u?(0,t.jsx)("strong",{style:i,children:a}):(0,t.jsx)("span",{style:i,children:a})},s.Link=function({children:e,target:a="_blank",href:i,className:s,onClick:n,style:r}){return(0,t.jsx)("a",{onClick:n,href:i,target:a,rel:"noopener noreferrer",style:r,children:e})},e.s(["default",0,s],418638);var n=e.i(389959);let r=(0,n.createContext)({type:"text"}),l=e=>{let{type:a}=e;return(0,t.jsx)(r.Provider,{value:{type:a},children:e.children})},o=()=>{let e=(0,n.useContext)(r);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:a,ulClassName:i,style:s,type:n="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:s,children:(0,t.jsx)(l,{type:n,children:(0,t.jsx)("ul",{className:i,children:e})})})}c.Item=function({children:e,icon:s,active:n,rounded:r,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,a.default)("menu"),{type:f}=o(),h=[m.item.base];h.push(m.item.variants[f].base),n?h.push(m.item.variants[f].active):h.push(m.item.variants[f].normal);let p=[m.item.content.base];n?p.push(m.item.content.active):p.push(m.item.content.normal);let x=[m.item.icon.base];return n?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,i.cn)("outline-none",h),style:u,onClick:l,"aria-current":n?"page":void 0,children:[s&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:s}),(0,t.jsx)("span",{className:p.join(" "),children:e})]})},c.Group=function({children:e,icon:i,title:s}){let n=(0,a.default)("menu"),{type:r}=o();return(0,t.jsxs)("div",{className:[n.group.base,n.group.variants[r]].join(" "),children:[i&&(0,t.jsx)("span",{className:n.group.icon,children:i}),(0,t.jsx)("span",{className:n.group.content,children:s}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(s.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),a=e.i(587433),i=e.i(862326),s=e.i(210419),n=e.i(837710);let r=({item:e,isActive:r,target:l="_self",hoverText:o="",onClick:c})=>{let{name:d="",url:u="",icon:m,rightIcon:f,isExternal:h,label:p,disabled:x}=e,g=(0,t.jsx)(i.Menu.Item,{icon:m,active:r,onClick:c,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:o||("string"==typeof d?d:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:d}),void 0!==p&&(0,t.jsx)(a.Badge,{className:"flex-shrink-0",variant:"new"===p.toLowerCase()?"success":"warning",children:p})]}),f&&(0,t.jsx)("div",{children:f})]})});return x?(0,t.jsx)("div",{className:"opacity-50 pointer-events-none",children:g}):u?h?(0,t.jsx)(n.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:m,children:(0,t.jsx)(s.default,{href:u,target:"_blank",rel:"noreferrer",children:d})}):(0,t.jsx)(s.default,{href:u,className:"block",target:l,children:g}):g};e.s(["ProductMenuItem",0,r],799793),e.s(["ProductMenu",0,({page:e,menu:s})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(i.Menu,{type:"pills",children:s.map((n,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(i.Menu.Group,{title:n.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:n.title}),n.isPreview&&(0,t.jsx)(a.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:n.items.map(a=>{let i=a.pages?a.pages.includes(e??""):e===a.key;return(0,t.jsx)(r,{item:a,isActive:i,target:a.isExternal?"_blank":"_self"},a.key)})})]})}),l!==s.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},n.key||n.title))})})],388147)},127739,e=>{"use strict";var t=e.i(478902),a=e.i(709520),i=e.i(389959),s=e.i(843778);let n=(0,a.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),r=(0,i.forwardRef)(({className:e,size:a,...i},r)=>(0,t.jsx)("div",{ref:r,...i,className:(0,s.cn)(n({size:a}),e)}));r.displayName="PageContainer",e.s(["PageContainer",0,r])},456050,e=>{"use strict";var t=e.i(478902),a=e.i(709520),i=e.i(389959),s=e.i(843778),n=e.i(3259),r=e.i(127739);let l=(0,a.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),o=(0,i.createContext)({size:"default"}),c=()=>(0,i.useContext)(o),d=({className:e,size:a,children:i,...n})=>{let r=a??"default";return(0,t.jsx)(o.Provider,{value:{size:r},children:(0,t.jsx)("div",{"data-slot":"page-header","data-size":r,className:(0,s.cn)(l({size:r}),e),...n,children:i})})},u=({className:e,children:a,...i})=>{let{size:l}=c();return(0,t.jsx)(r.PageContainer,{size:l,children:(0,t.jsx)(n.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,s.cn)("flex items-center gap-4 [&_li]:text-xs",e),...i,children:a})})};u.displayName="PageHeaderBreadcrumb";let m=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-icon",className:(0,s.cn)("text-foreground-light",e),...a});m.displayName="PageHeaderIcon";let f=({className:e,children:a,...i})=>(0,t.jsx)("div",{"data-slot":"page-header-summary",className:(0,s.cn)("flex flex-col gap-1",e),...i,children:a});f.displayName="PageHeaderSummary";let h=({className:e,children:a,...i})=>(0,t.jsx)("h1",{"data-slot":"page-header-title",className:(0,s.cn)("heading-title",e),...i,children:a}),p=({className:e,children:a,...i})=>(0,t.jsx)("div",{"data-slot":"page-header-description",className:(0,s.cn)("heading-subSection text-foreground-light",e),...i,children:a}),x=({className:e,children:a,...i})=>{let{size:n}=c();return(0,t.jsx)(r.PageContainer,{size:n,children:(0,t.jsx)("div",{"data-slot":"page-header-meta",className:(0,s.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...i,children:a})})};x.displayName="PageHeaderMeta";let g=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-actions",className:(0,s.cn)("flex items-center gap-2 shrink-0",e),...a});g.displayName="PageHeaderAside";let j=({className:e,...a})=>{let{size:i}=c();return(0,t.jsx)(r.PageContainer,{size:i,className:(0,s.cn)("full"===i&&"border-b"),children:(0,t.jsx)("div",{"data-slot":"page-header-footer",className:(0,s.cn)("w-full [&>nav]:border-b-0","full"!==i&&"border-b",e),...a})})};j.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>g,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>p,"PageHeaderIcon",()=>m,"PageHeaderMeta",()=>x,"PageHeaderNavigationTabs",()=>j,"PageHeaderSummary",()=>f,"PageHeaderTitle",()=>h])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:i=3,redaction:s="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:r=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...r].map(e=>e.toLowerCase())),o=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of o)t=t.replace(e,s);return t}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=i)return n;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let i=[];c.set(t,i);for(let s=0;s<t.length;s++)i[s]=e(t[s],a+1);return i}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let i={};for(let[n,r]of(c.set(t,i),Object.entries(t)))u(n)?i[n]=s:i[n]=e(r,a+1);return i}if(t instanceof Map){let i=[];for(let[n,r]of(c.set(t,i),t.entries())){let t=u(n)?s:e(n,a+1),l=u(n)?s:e(r,a+1);i.push([t,l])}return i}if(t instanceof Set){let i=[];for(let s of(c.set(t,i),t.values()))i.push(e(s,a+1));return i}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:n};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},437746,e=>{"use strict";let t=(0,e.i(388019).default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);e.s(["File",()=>t],437746)},613983,e=>{"use strict";var t,a=e.i(478902),i=e.i(145797),s=e.i(809323),n=e.i(265100),r=e.i(53071),l=e.i(437746),o=e.i(479232),c=e.i(211570),d=e.i(389959),u=e.i(355901),m=e.i(837710),f=e.i(756441),h=e.i(917134),p=e.i(644131),x=e.i(794965),g=e.i(62307),j=e.i(613580),v=e.i(792459),b=e.i(843778),y=e.i(920748),N=((t={}).CREATE_NEW="CREATE_NEW",t.REPLACE_EXISTING="REPLACE_EXISTING",t.REPLACE_NEW="REPLACE_NEW",t),w=e.i(48189);e.i(204878);var k=e.i(339345),_=e.i(890996);e.i(392626);var _=_;let E=e=>["wasm","jpg","jpeg","png","gif","bmp","ico","svg","mp3","mp4","avi","mov","zip","rar","7z","tar","gz","bz2","pdf"].includes(e.split(".").pop()?.toLowerCase()||""),C=e=>"zip"===e.split(".").pop()?.toLowerCase(),P=async(e,t)=>{let a=new _.ZipReader(new k.BlobReader(e)),i=await a.getEntries(),s=[],n=[],r=[],l=[],o=0,c=i.filter(e=>!e.directory);for(let e=0;e<c.length;e++){let a=c[e],i=a.filename;if(t&&t(e+1,c.length),i.split("/").some(e=>e.startsWith(".")||"__MACOSX"===e)||".DS_Store"===i){n.push(i);continue}let d=a.uncompressedSize;if(void 0===d||Number.isNaN(d)){r.push(`${i} (unknown size - metadata unavailable)`);continue}if(d>0xa00000){r.push(`${i} (${(0,w.formatBytes)(d)})`);continue}if(o+d>0x3200000)throw Error(`Total extracted size would exceed ${(0,w.formatBytes)(0x3200000)}. Current: ${(0,w.formatBytes)(o)}, Attempted to add: ${(0,w.formatBytes)(d)}`);try{let e;if(a.directory||!a.getData){console.warn(`Entry ${i} is a directory or has no getData method, skipping`),l.push(i);continue}if(E(i)){let t=await a.getData(new k.BlobWriter),i=await t.arrayBuffer(),s=new Uint8Array(i);e=Array.from(s,e=>String.fromCharCode(e)).join("")}else e=await a.getData(new k.TextWriter);s.push({name:i,content:e,size:d}),o+=d}catch(e){console.error(`Failed to extract file ${i}:`,e),l.push(i)}}if(await a.close(),0===s.length){let e=[];throw n.length>0&&e.push(`${n.length} hidden/system files`),r.length>0&&e.push(`${r.length} oversized files`),l.length>0&&e.push(`${l.length} files failed to extract`),Error(`No valid files found in zip archive. ${e.length>0?"Skipped: "+e.join(", "):""}`)}return s},S=(e,t,a)=>{let i=t.findIndex(t=>t.name===e);if(-1!==i)return{action:N.REPLACE_EXISTING,index:i};let s=a.findIndex(t=>t.name===e);return -1!==s?{action:N.REPLACE_NEW,index:s}:{action:N.CREATE_NEW}},A=JSON.stringify({imports:{}},null,"	");e.s(["FileExplorerAndEditor",0,({files:e,onFilesChange:t,aiEndpoint:w,aiMetadata:k,selectedFileId:_,setSelectedFileId:z})=>{let[B,T]=(0,d.useState)(!1),[R,I]=(0,d.useState)(e[0]?.id),[M,L]=(0,d.useState)(null),D=_??R,F=z??I,$=e.find(e=>e.id===D),O=null!==M,[U,W]=(0,d.useState)({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:!1,originalId:e.id,state:e.state}}))}),H=async i=>{let s=[],n=e.map(e=>({...e,selected:!1})),r=[],l=0,o=0,c=!1;for(let e of i)if(C(e.name))try{L({current:0,total:0});let t=await P(e,(e,t)=>{L({current:e,total:t})});r.push(...t)}catch(t){u.toast.error((0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsxs)("p",{className:"text-foreground",children:["Failed to extract ",e.name]}),(0,a.jsx)("p",{className:"text-foreground-light",children:t instanceof Error?t.message:"Unknown error occurred"})]}),{duration:8e3})}finally{L(null)}else try{let t;if(E(e.name)){let a=await e.arrayBuffer(),i=new Uint8Array(a);t=Array.from(i,e=>String.fromCharCode(e)).join("")}else t=await e.text();r.push({name:e.name,size:e.size,content:t})}catch(t){u.toast.error(`Failed to read file: ${e.name}: ${t}`)}for(let t of r){let a=S(t.name,n,s);switch(a.action){case N.REPLACE_EXISTING:n[a.index]={...n[a.index],content:t.content},o++,c=!0;break;case N.REPLACE_NEW:s[a.index]={...s[a.index],content:t.content},o++;break;case N.CREATE_NEW:let i=Math.max(0,...e.map(e=>e.id),...n.map(e=>e.id),...s.map(e=>e.id))+1;s.push({id:i,name:t.name,content:t.content,state:"new"}),l++}}let d=[];l>0&&d.push(`Added ${l} new file${l>1?"s":""}`),o>0&&d.push(`Replaced ${o} existing file${o>1?"s":""}`);let m=l+o;m>0&&u.toast.success((0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsxs)("p",{className:"text-foreground",children:["Successfully added dropped file",m>1?"s":""]}),(0,a.jsxs)("p",{className:"text-foreground-light",children:[d.join(", "),"."]})]}),{duration:5e3}),s.length>0?(F(s[s.length-1].id),t([...n,...s])):c&&(F(n[0].id),t(n))},Z=t=>{W({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:e.id===t,originalId:e.id,state:e.state}}))})},G=()=>{W({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:!1,originalId:e.id,state:e.state}}))})},V=async e=>{e.preventDefault(),T(!1);let t=e.dataTransfer.files;t.length>0&&await H(t)};return(0,d.useEffect)(()=>{W({name:"",children:e.map(e=>({id:e.id.toString(),name:e.name,metadata:{isEditing:!1,originalId:e.id,state:e.state}}))}),!D&&e.length>0&&F(e[0].id)},[e]),(0,a.jsxs)("div",{className:`flex-1 overflow-hidden flex h-full relative ${B?"bg-blue-50":""}`,onDragOver:e=>{e.preventDefault(),T(!0)},onDragLeave:e=>{e.preventDefault(),T(!1)},onDrop:V,children:[(0,a.jsx)(s.AnimatePresence,{children:(B||O)&&(0,a.jsx)(n.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"absolute inset-0 bg bg-opacity-30 z-10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-96 py-20 bg bg-opacity-60 border-2 border-dashed border-muted flex items-center justify-center",children:O&&M?(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"text-base",children:"Extracting zip file..."}),(0,a.jsxs)("div",{className:"text-sm text-foreground-light",children:["Processing file ",M.current," of ",M.total]})]}):(0,a.jsx)("div",{className:"text-base",children:"Drop files here to add them"})})})}),(0,a.jsxs)("div",{className:"w-64 border-r bg-surface-200 flex flex-col",children:[(0,a.jsxs)("div",{className:"py-4 px-6 border-b flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-normal font-mono uppercase text-lighter tracking-wide",children:"Files"}),(0,a.jsx)(m.Button,{size:"tiny",type:"default",icon:(0,a.jsx)(o.Plus,{size:14}),onClick:()=>{let a=Math.max(0,...e.map(e=>e.id))+1,i=e.map(e=>({...e,selected:!1}));F(a),t([...i,{id:a,name:`file${a}.ts`,content:"",state:"new"}])},children:"Add File"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(v.TreeView,{data:(0,y.flattenTree)(U),"aria-label":"files tree",nodeRenderer:({element:i,isBranch:s,isExpanded:n,getNodeProps:o,level:d})=>{let m=o(),y="number"==typeof i.metadata?.originalId?i.metadata.originalId:null,N=i.metadata?.state,w=!!i.metadata?.isEditing;return(0,a.jsxs)(g.ContextMenu_Shadcn_,{modal:!1,children:[(0,a.jsx)(x.ContextMenuTrigger_Shadcn_,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(v.TreeViewItem,{...m,isExpanded:n,isBranch:s,isSelected:e.find(e=>e.id===y)?.id===D,level:d,xPadding:16,name:i.name,className:(0,b.cn)(w?"":"new"===N?"text-brand-600":"modified"===N?"text-code_block-2":""),icon:(0,a.jsx)(l.File,{size:14,className:"text-foreground-light shrink-0"}),isEditing:w,onEditSubmit:a=>{null!==y&&(a.trim()?e.some(e=>e.id!==y&&e.name===a)?(u.toast.error(`The name ${a} already exists in the current directory. Please use a different name.`),G()):t(e.map(e=>e.id===y?{...e,name:a,content:"deno.json"===a&&""===e.content?A:e.content}:e)):(u.toast.error("File name cannot be empty"),G()))},onClick:()=>{null===y||w||F(y)},onDoubleClick:()=>{null!==y&&Z(y)},actions:"unchanged"!==N&&(0,a.jsx)("div",{className:"flex items-center justify-center w-3",children:(0,a.jsxs)(j.Tooltip,{children:[(0,a.jsx)(j.TooltipTrigger,{className:"text-xs",children:"new"===N?"U":"M"}),(0,a.jsx)(j.TooltipContent,{side:"bottom",children:"new"===N?"Unsaved":"Modified"})]})})})})}),(0,a.jsxs)(f.ContextMenuContent_Shadcn_,{onCloseAutoFocus:e=>e.stopPropagation(),children:[(0,a.jsxs)(h.ContextMenuItem_Shadcn_,{className:"gap-x-2",onSelect:()=>{null!==y&&Z(y)},onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(r.Edit,{size:14}),"Rename file"]}),e.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.ContextMenuSeparator_Shadcn_,{}),(0,a.jsxs)(h.ContextMenuItem_Shadcn_,{className:"gap-x-2",onSelect:()=>{null!==y&&(a=>{if(e.length<=1)return;let i=e.find(e=>e.id===a),s=i?.id===D,n=e.filter(e=>e.id!==a);s&&n.length>0&&F(n[0].id),t(n)})(y)},onFocusCapture:e=>e.stopPropagation(),children:[(0,a.jsx)(c.Trash,{size:14}),"Delete file"]})]})]})]})}})})]}),(0,a.jsx)("div",{className:"flex-1 min-h-0 relative px-3 bg-surface-200",children:$&&E($.name)?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-foreground-light text-lg mb-2",children:"Cannot Edit Selected File"}),(0,a.jsxs)("div",{className:"text-foreground-lighter text-sm",children:["Binary files like .",$.name.split(".").pop()," cannot be edited in the text editor"]})]})}):(0,a.jsx)(i.AIEditor,{language:(e=>{switch(e.split(".").pop()?.toLowerCase()){case"ts":case"tsx":return"typescript";case"js":case"jsx":return"javascript";case"json":return"json";case"html":return"html";case"css":return"css";case"md":return"markdown";case"csv":return"csv";default:return"plaintext"}})($?.name||"index.ts"),value:$?.content,onChange:a=>{t(e.map(e=>e.id===D?{...e,content:a}:e))},aiEndpoint:w,aiMetadata:k,options:{tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!1,padding:{top:20,bottom:20},lineNumbersMinChars:3,fixedOverflowWidgets:!0}})})]})}],613983)},24137,e=>{"use strict";var t=e.i(478902),a=e.i(902858),i=e.i(822574),s=e.i(867637),n=e.i(136544),r=e.i(774803),l=e.i(389959),o=e.i(355901),c=e.i(753366),d=e.i(323796);e.i(128328);var u=e.i(158639),m=e.i(466472);let f=({visible:e,onCancel:a,onConfirm:i,isDeploying:s})=>(0,t.jsx)(m.default,{visible:e,size:"medium",title:"Confirm to deploy updates",confirmLabel:"Deploy updates",confirmLabelLoading:"Deploying updates",variant:"warning",loading:s,onCancel:a,onConfirm:i,children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Deploying will immediately update your live Edge Function for this project and cannot be rolled back automatically. Are you sure you want to deploy the changes?"})});var h=e.i(448710),p=e.i(780990),x=e.i(215312),g=e.i(613983),j=e.i(229914),v=e.i(445547),b=e.i(139415),y=e.i(162082),N=e.i(2579),w=e.i(265735),k=e.i(635494),_=e.i(10429),E=e.i(818843);let C=()=>{let{ref:e,functionSlug:m}=(0,u.useParams)(),{data:h}=(0,k.useSelectedProjectQuery)(),{data:p}=(0,w.useSelectedOrganizationQuery)(),{mutate:C}=(0,y.useSendEventMutation)(),[P,S]=(0,l.useState)(!1),{can:A}=(0,N.useAsyncCheckPermissions)(a.PermissionAction.FUNCTIONS_WRITE,"*"),{data:z}=(0,v.useEdgeFunctionQuery)({projectRef:e,slug:m}),{data:B,isPending:T,isError:R,isSuccess:I,error:M}=(0,j.useEdgeFunctionBodyQuery)({projectRef:e,slug:m},{retry:!1,retryOnMount:!1,refetchOnWindowFocus:!1,staleTime:1/0,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:!1,refetchIntervalInBackground:!1}),[L,D]=(0,l.useState)([]),F=(0,l.useMemo)(()=>B?(0,c.formatFunctionBodyToFiles)({functionBody:B,entrypointPath:z?.entrypoint_path}):[],[B,z?.entrypoint_path]),{mutate:$,isPending:O}=(0,b.useEdgeFunctionDeployMutation)({onSuccess:()=>{o.toast.success("Successfully updated edge function"),S(!1),D(e=>e.map(e=>({...e,state:"unchanged"})))}}),U=e=>!!e&&L.some(t=>t.name===e),W=async()=>{if(!O&&e&&m&&z&&0!==L.length)try{let t=B?.metadata?.deno2_entrypoint_path??z.entrypoint_path,a=t?.split("/").pop(),i=z.import_map_path?.split("/").pop(),s=U(a),n=U(i);$({projectRef:e,slug:z.slug,metadata:{name:z.name,verify_jwt:z.verify_jwt,...s&&{entrypoint_path:a},...n&&{import_map_path:i}},files:L.map(({name:e,content:t})=>({name:e,content:t}))})}catch(e){o.toast.error(`Failed to update function: ${e instanceof Error?e.message:"Unknown error"}`)}};(0,l.useEffect)(()=>{0!==F.length&&D(F)},[F]);let H=(0,d.useLatest)(L),Z=(0,d.useLatest)(F);return(0,l.useEffect)(()=>{let e=e=>{let t=e=>e.map(({id:e,name:t,content:a})=>({id:e,name:t,content:a}));(0,i.default)(t(Z.current),t(H.current))||(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[T&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full bg-surface-200",children:(0,t.jsx)(E.LogoLoader,{})}),R&&(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full bg-surface-200",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center gap-2 max-w-md",children:[(0,t.jsx)(s.AlertCircle,{size:24,strokeWidth:1.5,className:"text-amber-900"}),(0,t.jsx)("h3",{className:"text-md mt-4",children:"Failed to load function code"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:M?.message||"There was an error loading the function code. The format may be invalid or the function may be corrupted."})]})}),I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.FileExplorerAndEditor,{files:L,onFilesChange:e=>{D(e.map(e=>{let t=F.find(t=>t.id===e.id);return t?t.name!==e.name?{...e,state:"new"}:t.content!==e.content?{...e,state:"modified"}:{...e,state:"unchanged"}:e}))},aiEndpoint:`${_.BASE_PATH}/api/ai/code/complete`,aiMetadata:{projectRef:h?.ref,connectionString:h?.connectionString,orgSlug:p?.slug}}),(0,t.jsx)("div",{className:"flex items-center bg-background-muted justify-end p-4 border-t bg-surface-100 shrink-0",children:(0,t.jsx)(x.ButtonTooltip,{loading:O,size:"medium",disabled:!A||0===L.length||T,onClick:()=>{0===L.length||T||(S(!0),C({action:"edge_function_deploy_updates_button_clicked",groups:{project:e??"Unknown",organization:p?.slug??"Unknown"}}))},iconRight:O?(0,t.jsx)(r.Loader2,{className:"animate-spin",size:10,strokeWidth:1.5}):(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsx)(n.CornerDownLeft,{size:10,strokeWidth:1.5})}),tooltip:{content:{side:"top",text:A?void 0:"You need additional permissions to update edge functions"}},children:"Deploy updates"})})]}),(0,t.jsx)(f,{visible:P,onCancel:()=>S(!1),onConfirm:()=>{C({action:"edge_function_deploy_updates_confirm_clicked",groups:{project:e??"Unknown",organization:p?.slug??"Unknown"}}),W()},isDeploying:O})]})};C.getLayout=e=>(0,t.jsx)(h.DefaultLayout,{children:(0,t.jsx)(p.default,{children:e})}),e.s(["default",0,C],24137)},16258,(e,t,a)=>{let i="/project/[ref]/functions/[functionSlug]/code";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(24137)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([i])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0860ba34f07162db.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=0771a84e-a870-df6d-eb11-bdfd640f52b3
//# sourceMappingURL=2f723bf6a4d60ebd.js.map