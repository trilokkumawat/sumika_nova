;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b9dd6a1b-38fa-6e21-2a58-9806733c66e0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,961753,e=>{"use strict";e.i(10429);var i=e.i(837508);e.i(287509);var s=e.i(812532),a=e.i(819591);let t=e=>"object"==typeof e&&null!==e&&(!("supported_cloud_providers"in e)||!!Array.isArray(e.supported_cloud_providers))&&("cpu_cores"in e||"memory_gb"in e||"cpu_dedicated"in e||"baseline_disk_io_mbs"in e||"max_disk_io_mbs"in e||"connections_direct"in e||"connections_pooler"in e||"backup_duration_days"in e||"supported_cloud_providers"in e);function r(e,a){let r=e.find(e=>"compute_instance"===e.type),n=r?.variants.flatMap(e=>{let i=s.computeInstanceAddonVariantIdSchema.safeParse(e.identifier);return!i.success||a&&t(e.meta)&&!(!e.meta.supported_cloud_providers||e.meta.supported_cloud_providers.includes(a))?[]:[{...e,identifier:i.data,meta:t(e.meta)?e.meta:void 0}]})??[];return(r?.variants??[]).some(e=>"ci_micro"===e.identifier)||n.unshift({identifier:"ci_micro",name:"Micro",price_description:"$0.01344/hour (~$10/month)",price:.01344,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:i.INSTANCE_MICRO_SPECS.cpu_cores,cpu_dedicated:i.INSTANCE_MICRO_SPECS.cpu_dedicated,memory_gb:i.INSTANCE_MICRO_SPECS.memory_gb,baseline_disk_io_mbs:i.INSTANCE_MICRO_SPECS.baseline_disk_io_mbs,max_disk_io_mbs:i.INSTANCE_MICRO_SPECS.max_disk_io_mbs,connections_direct:i.INSTANCE_MICRO_SPECS.connections_direct,connections_pooler:i.INSTANCE_MICRO_SPECS.connections_pooler}}),n.unshift({identifier:"ci_nano",name:"Nano",price_description:"$0/hour (~$0/month)",price:0,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:i.INSTANCE_NANO_SPECS.cpu_cores,cpu_dedicated:i.INSTANCE_NANO_SPECS.cpu_dedicated,memory_gb:i.INSTANCE_NANO_SPECS.memory_gb,baseline_disk_io_mbs:i.INSTANCE_NANO_SPECS.baseline_disk_io_mbs,max_disk_io_mbs:i.INSTANCE_NANO_SPECS.max_disk_io_mbs,connections_direct:i.INSTANCE_NANO_SPECS.connections_direct,connections_pooler:i.INSTANCE_NANO_SPECS.connections_pooler}}),n}let n={pico:"ci_nano",nano:"ci_nano",micro:"ci_micro",small:"ci_small",medium:"ci_medium",large:"ci_large",xlarge:"ci_xlarge","2xlarge":"ci_2xlarge","4xlarge":"ci_4xlarge","8xlarge":"ci_8xlarge","12xlarge":"ci_12xlarge","16xlarge":"ci_16xlarge","24xlarge":"ci_24xlarge","24xlarge_optimized_memory":"ci_24xlarge_optimized_memory","24xlarge_optimized_cpu":"ci_24xlarge_optimized_cpu","24xlarge_high_memory":"ci_24xlarge_high_memory","48xlarge":"ci_48xlarge","48xlarge_optimized_memory":"ci_48xlarge_optimized_memory","48xlarge_optimized_cpu":"ci_48xlarge_optimized_cpu","48xlarge_high_memory":"ci_48xlarge_high_memory"},l={ci_nano:"Nano",ci_micro:"Micro",ci_small:"Small",ci_medium:"Medium",ci_large:"Large",ci_xlarge:"XL",ci_2xlarge:"2XL",ci_4xlarge:"4XL",ci_8xlarge:"8XL",ci_12xlarge:"12XL",ci_16xlarge:"16XL",ci_24xlarge:"24XL",ci_24xlarge_optimized_memory:"24XL - Optimized Memory",ci_24xlarge_optimized_cpu:"24XL - Optimized CPU",ci_24xlarge_high_memory:"24XL - High Memory",ci_48xlarge:"48XL",ci_48xlarge_optimized_memory:"48XL - Optimized Memory",ci_48xlarge_optimized_cpu:"48XL - Optimized CPU",ci_48xlarge_high_memory:"48XL - High Memory"};e.s(["calculateComputeSizePrice",0,({availableOptions:e,oldComputeSize:i,newComputeSize:s,plan:a})=>{let t=i;"free"!==a&&"ci_nano"===i&&(t="ci_micro");let r=e?.find(e=>e.identifier===t)?.price??0,n=e?.find(e=>e.identifier===s)?.price??0;return{oldPrice:(720*r).toFixed(2),newPrice:(720*n).toFixed(2)}},"calculateComputeSizeRequiredForIops",0,e=>{let i=Object.entries(s.COMPUTE_MAX_IOPS).map(e=>{let[i,a]=e,t=s.computeInstanceAddonVariantIdSchema.safeParse(i);if(t.success)return{size:t.data,maxIops:Number(a)}}).filter(e=>void 0!==e).sort((e,i)=>e.maxIops-i.maxIops);for(let{size:s,maxIops:a}of i)if(e<=a)return s;let a=i[i.length-1]?.size;if(a)return a},"calculateDiskSizePrice",0,({planId:e,oldSize:i,oldStorageType:s,newSize:t,newStorageType:r,numReplicas:n=0})=>{let l=a.DISK_PRICING[s]?.storage??0,o=a.DISK_PRICING[r]?.storage??0,{includedDiskGB:c}=a.PLAN_DETAILS?.[e],d=Math.max(i-c[s],0)*l,p=Math.max(t-c[r],0)*o;return{oldPrice:(d+1.25*i*l*n).toFixed(2),newPrice:(p+1.25*t*o*n).toFixed(2)}},"calculateDiskSizeRequiredForIopsWithGp3",0,e=>Math.max(1,Math.ceil(e/500)),"calculateDiskSizeRequiredForIopsWithIo2",0,e=>Math.max(4,Math.ceil(e/1e3)),"calculateIOPSPrice",0,({oldStorageType:e,oldProvisionedIOPS:i,newStorageType:s,newProvisionedIOPS:t,numReplicas:r=0})=>{if(s===a.DiskType.GP3){let n=Math.max(0,i-a.DISK_LIMITS[a.DiskType.GP3].includedIops),l=Math.max(0,t-a.DISK_LIMITS[a.DiskType.GP3].includedIops),o=n*(a.DISK_PRICING[e]?.iops??0),c=l*(a.DISK_PRICING[s]?.iops??0);return{oldPrice:(o*(1+r)).toFixed(2),newPrice:(c*(1+r)).toFixed(2)}}{let n="gp3"===e?(i-a.DISK_LIMITS[e].includedIops)*a.DISK_PRICING[e].iops:i*(a.DISK_PRICING[e]?.iops??0),l=t*(a.DISK_PRICING[s]?.iops??0);return{oldPrice:(n*(1+r)).toFixed(2),newPrice:(l*(1+r)).toFixed(2)}}},"calculateIopsRequiredForThroughput",0,e=>Math.max(125,Math.ceil(e/.256)),"calculateMaxIopsAllowedForDiskSizeWithGp3",0,e=>Math.min(3e3*e,16e3),"calculateMaxIopsAllowedForDiskSizeWithio2",0,e=>Math.min(500*e,256e3),"calculateMaxIopsForComputeSize",0,e=>{let i=s.computeInstanceAddonVariantIdSchema.safeParse(e);return i.success?s.COMPUTE_MAX_IOPS[i.data]??0:0},"calculateMaxThroughput",0,e=>Math.min(.256*e,1e3),"calculateThroughputPrice",0,({storageType:e,newThroughput:i,oldThroughput:s,numReplicas:t=0})=>{if(e===a.DiskType.GP3&&i){let e=Math.max(0,s-a.DISK_LIMITS[a.DiskType.GP3].includedThroughput),r=Math.max(0,i-a.DISK_LIMITS[a.DiskType.GP3].includedThroughput),n=e*a.DISK_PRICING[a.DiskType.GP3].throughput,l=r*a.DISK_PRICING[a.DiskType.GP3].throughput;return{oldPrice:(n*(1+t)).toFixed(2),newPrice:(l*(1+t)).toFixed(2)}}return{oldPrice:"0.00",newPrice:"0.00"}},"formatNumber",0,e=>e.toLocaleString("en-US"),"getAvailableComputeOptions",()=>r,"mapAddOnVariantIdToComputeSize",0,(e="ci_nano")=>{let i=s.computeInstanceAddonVariantIdSchema.safeParse(e);return i.success?l[i.data]:l.ci_nano},"mapComputeSizeNameToAddonVariantId",0,e=>{let i=e&&Object.prototype.hasOwnProperty.call(n,e)?e:void 0;return n[i??"nano"]}])},351895,e=>{"use strict";var i=e.i(38429),s=e.i(355901),a=e.i(234745);async function t({ref:e,identifier:i}){let s={};void 0!==i&&(s.database_identifier=i);let{data:t,error:r}=await (0,a.post)("/platform/projects/{ref}/restart",{params:{path:{ref:e}},body:s});return r&&(0,a.handleError)(r),t}e.s(["useProjectRestartMutation",0,({onSuccess:e,onError:a,...r}={})=>(0,i.useMutation)({mutationFn:e=>t(e),async onSuccess(i,s,a){await e?.(i,s,a)},async onError(e,i,t){void 0===a?s.toast.error(`Failed to restart project: ${e.message}`):a(e,i,t)},...r})])},10800,e=>{"use strict";var i,s=e.i(242882),a=e.i(234745),t=e.i(346691),r=((i={}).InProgress="in_progress",i.Completed="completed",i.Failed="failed",i);async function n({projectRef:e},i){if(!e)throw Error("Project ref is required");let{data:s,error:t}=await (0,a.get)("/platform/projects/{ref}/databases-statuses",{params:{path:{ref:e}},signal:i});return t&&(0,a.handleError)(t),s}e.s(["ReplicaInitializationStatus",()=>r,"useReadReplicasStatusesQuery",0,({projectRef:e},{enabled:i=!0,...a}={})=>(0,s.useQuery)({queryKey:t.replicaKeys.statuses(e),queryFn:({signal:i})=>n({projectRef:e},i),enabled:i&&void 0!==e,...a})])},555254,896394,e=>{"use strict";var i=e.i(478902),s=e.i(356003),a=e.i(355901),t=e.i(346691);e.i(128328);var r=e.i(158639),n=e.i(38429),l=e.i(234745);async function o({projectRef:e,identifier:i}){let{data:s,error:a}=await (0,l.post)("/v1/projects/{ref}/read-replicas/remove",{params:{path:{ref:e}},body:{database_identifier:i}});return a&&(0,l.handleError)(a),s}let c=({onSuccess:e,onError:i,...r}={})=>{let l=(0,s.useQueryClient)();return(0,n.useMutation)({mutationFn:e=>o(e),async onSuccess(i,s,a){let{projectRef:r,invalidateReplicaQueries:n}=s;n&&await Promise.all([l.invalidateQueries({queryKey:t.replicaKeys.list(r)}),l.invalidateQueries({queryKey:t.replicaKeys.loadBalancers(r)})]),await e?.(i,s,a)},async onError(e,s,t){void 0===i?a.toast.error(`Failed to remove read replica: ${e.message}`):i(e,s,t)},...r})};e.s(["useReadReplicaRemoveMutation",0,c],896394);var d=e.i(940009),p=e.i(466472),u=e.i(72187);e.s(["DropReplicaConfirmationModal",0,({selectedReplica:e,onSuccess:n,onCancel:l})=>{let{ref:o}=(0,r.useParams)(),m=(0,s.useQueryClient)(),h=(0,d.formatDatabaseID)(e?.identifier??""),{mutate:x,isPending:g}=c({onSuccess:()=>{a.toast.success(`Tearing down read replica (ID: ${h})`),m.setQueriesData({queryKey:t.replicaKeys.list(o)},i=>i?.map(i=>i.identifier===e?.identifier?{...i,status:u.REPLICA_STATUS.GOING_DOWN}:i)),n(),l()}}),_=async()=>o?void 0===e?a.toast.error("No replica selected"):void x({projectRef:o,identifier:e.identifier,invalidateReplicaQueries:!0}):console.error("Project is required");return(0,i.jsxs)(p.default,{variant:"destructive",size:"medium",loading:g,visible:void 0!==e,title:`Confirm to drop selected replica? (ID: ${h})`,confirmLabel:"Drop replica",confirmLabelLoading:"Dropping replica",onCancel:()=>l(),onConfirm:()=>_(),alert:{title:"This action cannot be undone",description:"You may still deploy a new replica in this region thereafter"},children:[(0,i.jsx)("p",{className:"text-sm",children:"Before deleting this replica, consider:"}),(0,i.jsx)("ul",{className:"text-sm text-foreground-light py-1 list-disc mx-4 space-y-1",children:(0,i.jsx)("li",{children:"Network traffic from this region may slow down, especially if you have no other replicas in this region"})})]})}],555254)},805501,e=>{"use strict";var i=e.i(242882),s=e.i(714403),a=e.i(346691);async function t({projectRef:e,connectionString:i,id:a},t){let r=`
select 
  case
    when (select count(*) from pg_stat_wal_receiver) = 1 and pg_last_wal_receive_lsn() = pg_last_wal_replay_lsn()
    then 0
    else coalesce(extract(epoch from now() - pg_last_xact_replay_timestamp()),0)
  end as physical_replica_lag_second
  `,{result:n}=await (0,s.executeSql)({projectRef:e,connectionString:i,sql:r,queryKey:["replica-lag",a]},t);return Number((n[0]??null)?.physical_replica_lag_second??0)}e.s(["useReplicationLagQuery",0,({projectRef:e,connectionString:s,id:r},{enabled:n=!0,...l}={})=>(0,i.useQuery)({queryKey:a.replicaKeys.replicaLag(e,r),queryFn:({signal:i})=>t({projectRef:e,connectionString:s,id:r},i),enabled:n&&void 0!==e&&void 0!==r,...l})])},128,e=>{"use strict";var i=e.i(478902),s=e.i(355901),a=e.i(356003);e.i(128328);var t=e.i(158639),r=e.i(351895),n=e.i(346691),l=e.i(940009),o=e.i(466472),c=e.i(72187);e.s(["RestartReplicaConfirmationModal",0,({selectedReplica:e,onSuccess:d,onCancel:p})=>{let{ref:u}=(0,t.useParams)(),m=(0,a.useQueryClient)(),h=(0,l.formatDatabaseID)(e?.identifier??""),{mutate:x,isPending:g}=(0,r.useProjectRestartMutation)({onSuccess:()=>{s.toast.success(`Restarting read replica (ID: ${h})`),m.setQueriesData({queryKey:n.replicaKeys.list(u)},i=>i.map(i=>i.identifier===e?.identifier?{...i,status:c.REPLICA_STATUS.RESTARTING}:i)),m.setQueriesData({queryKey:n.replicaKeys.statuses(u)},i=>i.map(i=>i.identifier===e?.identifier?{...i,status:c.REPLICA_STATUS.RESTARTING}:i)),d(),p()},onError:e=>{s.toast.error(`Failed to restart replica: ${e.message}`)}});return(0,i.jsxs)(o.default,{size:"medium",variant:"warning",loading:g,visible:void 0!==e,title:`Confirm to restart selected replica? (ID: ${h})`,confirmLabel:"Restart replica",confirmLabelLoading:"Restarting replica",onCancel:()=>p(),onConfirm:()=>u?void 0===e?s.toast.error("No replica selected"):void x({ref:u,identifier:e.identifier}):console.error("Project is required"),children:[(0,i.jsx)("p",{className:"text-sm",children:"Your replica will be offline for a few minutes while it is being restarted. Before restarting the replica, consider:"}),(0,i.jsx)("ul",{className:"text-sm text-foreground-light py-1 list-disc mx-4 space-y-1",children:(0,i.jsx)("li",{children:"Network traffic from this region may slow down while the replica is restarting, especially if you have no other replicas in this region"})}),(0,i.jsx)("p",{className:"text-sm mt-2",children:"Are you sure you want to restart this replica now?"})]})}])},491726,e=>{"use strict";var i=e.i(38429),s=e.i(355901),a=e.i(234745);async function t({ref:e}){let{data:i,error:s}=await (0,a.post)("/platform/database/{ref}/backups/enable-physical-backups",{params:{path:{ref:e}}});return s&&(0,a.handleError)(s),i}e.s(["useEnablePhysicalBackupsMutation",0,({onSuccess:e,onError:a,...r}={})=>(0,i.useMutation)({mutationFn:e=>t(e),async onSuccess(i,s,a){await e?.(i,s,a)},async onError(e,i,t){void 0===a?s.toast.error(`Failed to enable physical backups: ${e.message}`):a(e,i,t)},...r})])},579499,e=>{"use strict";var i=e.i(38429),s=e.i(356003),a=e.i(355901),t=e.i(234745),r=e.i(346691);async function n({projectRef:e,region:i}){let{data:s,error:a}=await (0,t.post)("/v1/projects/{ref}/read-replicas/setup",{params:{path:{ref:e}},body:{read_replica_region:i}});return a&&(0,t.handleError)(a),s}e.s(["useReadReplicaSetUpMutation",0,({onSuccess:e,onError:t,...l}={})=>{let o=(0,s.useQueryClient)();return(0,i.useMutation)({mutationFn:e=>n(e),async onSuccess(i,s,a){let{projectRef:t}=s;await o.invalidateQueries({queryKey:r.replicaKeys.list(t)}),await e?.(i,s,a)},async onError(e,i,s){void 0===t?a.toast.error(`Failed to set up read replica: ${e.message}`):t(e,i,s)},...l})}])},554056,e=>{"use strict";var i=e.i(478902),s=e.i(902858),a=e.i(667852),t=e.i(88816);let r=(0,e.i(388019).default)("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var n=e.i(774803),l=e.i(952786),o=e.i(896975),c=e.i(210419),d=e.i(389959),p=e.i(535487),u=e.i(351299),m=e.i(264903);e.i(128328);var h=e.i(158639),x=e.i(567558),g=e.i(215312),_=e.i(330287),f=e.i(150671),j=e.i(10800),y=e.i(2579),S=e.i(912793),b=e.i(635494),I=e.i(48189),A=e.i(837710),N=e.i(874311),C=e.i(843778);e.i(869176);var E=e.i(355901),R=e.i(961753),T=e.i(819591),v=e.i(196621),P=e.i(513826),w=e.i(605317),D=e.i(491726),L=e.i(390473),k=e.i(164045),M=e.i(579499),O=e.i(144676),B=e.i(280590),z=e.i(265735),$=e.i(10429),G=e.i(837508);e.i(287509);var U=e.i(434934),F=e.i(206413),H=e.i(592360),V=e.i(178527),W=e.i(774234),K=e.i(554855),Q=e.i(925282),Y=e.i(331077),q=e.i(539013),X=e.i(492418),Z=e.i(877555),J=e.i(72187);let ee=({visible:e,selectedDefaultRegion:a,onSuccess:r,onClose:n})=>{let{ref:l}=(0,h.useParams)(),{data:o}=(0,b.useSelectedProjectQuery)(),{data:p}=(0,z.useSelectedOrganizationQuery)(),{hasAccess:u}=(0,B.useCheckEntitlements)("instances.read_replicas"),{data:m}=(0,f.useReadReplicasQuery)({projectRef:l}),{data:x,isSuccess:g}=(0,O.useProjectAddonsQuery)({projectRef:l}),{data:_}=(0,w.useDiskAttributesQuery)({projectRef:l}),j=(0,d.useMemo)(()=>!["team","enterprise","platform"].includes(p?.plan.id??""),[p]),{data:y}=(0,L.useOverdueInvoicesQuery)({enabled:j}),S=(y??[]).filter(e=>e.organization_id===o?.organization_id).length>0&&j,N=(0,b.useIsAwsK8sCloudProvider)(),[ee]=Object.entries(U.AWS_REGIONS).find(([e,i])=>i===G.AWS_REGIONS_DEFAULT)??["ap-southeast-1"],ei=x?.selected_addons.find(e=>"compute_instance"===e.type)?.variant.identifier??"ci_micro",{size_gb:es,type:ea,throughput_mbps:et,iops:er}=_?.attributes??{},en=o?.cloud_provider==="AWS",el=(es??0)*1.25*(T.DISK_PRICING[ea]?.storage??0),eo=(0,R.calculateIOPSPrice)({oldStorageType:ea,newStorageType:ea,oldProvisionedIOPS:0,newProvisionedIOPS:er??0,numReplicas:0}).newPrice,ec="gp3"===ea?(0,R.calculateThroughputPrice)({storageType:ea,newThroughput:et??0,oldThroughput:0,numReplicas:0}).newPrice:0,[ed,ep]=(0,d.useState)(!1),[eu,em]=(0,d.useState)(ee),[eh,ex]=(0,d.useState)(ei),{data:eg,isSuccess:e_}=(0,k.useProjectDetailQuery)({ref:l},{refetchInterval:ed,refetchOnWindowFocus:!1});(0,d.useEffect)(()=>{e_&&eg.is_physical_backups_enabled&&ep(!1)},[eg?.is_physical_backups_enabled,e_]);let{mutate:ef,isPending:ej}=(0,D.useEnablePhysicalBackupsMutation)({onSuccess:()=>{E.toast.success("Physical backups are currently being enabled, please check back in a few minutes!"),ep(5e3)}}),{mutate:ey,isPending:eS}=(0,M.useReadReplicaSetUpMutation)({onSuccess:()=>{let e=J.AVAILABLE_REPLICA_REGIONS.find(e=>e.key===eu)?.name;E.toast.success(`Spinning up new replica in ${e??" Unknown"}...`),r(),n()}}),eb=Number((o?.dbVersion??"").split("supabase-postgres-")[1]?.split(".")[0]),eI=["ci_micro","ci_small","ci_medium","ci_large"].includes(eh)?f.MAX_REPLICAS_BELOW_XL:f.MAX_REPLICAS_ABOVE_XL,eA=(m??[]).filter(e=>e.identifier!==l).length>=eI,eN=o?.cloud_provider==="AWS",eC=o?.is_physical_backups_enabled,eE=x?.selected_addons.find(e=>"compute_instance"===e.type),eR=p?.plan.id==="pro"&&!p.usage_billing_enabled,eT=eE?.variant.identifier!==void 0&&eE?.variant.identifier!=="ci_micro",ev=!eA&&eb>=15&&eN&&u&&eC&&void 0!==eE&&!S&&!N&&!eR,eP=(x?.available_addons.find(e=>"compute_instance"===e.type)?.variants??[]).find(e=>e.identifier===eh),ew=Math.floor((eP?.price??0)*730),eD=J.AVAILABLE_REPLICA_REGIONS,eL=async()=>{let e=U.AWS_REGIONS[eu].code;if(!l)return console.error("Project is required");if(!e)return E.toast.error("Unable to deploy replica: Unsupported region selected");let i=m?.find(e=>e.identifier===l);ey({projectRef:l,region:e,size:i?.size??"t4g.small"})};return(0,d.useEffect)(()=>{e&&g&&(void 0!==a?em(a):ee&&em(ee),void 0!==ei&&ex(ei))},[e,g]),(0,i.jsx)(q.SidePanel,{visible:e,onCancel:n,loading:eS,disabled:!ev,className:(0,C.cn)(en?"max-w-[500px]":""),header:"Deploy a new read replica",onConfirm:()=>eL(),confirmText:"Deploy replica",children:(0,i.jsxs)(q.SidePanel.Content,{className:"flex flex-col py-4 gap-y-4",children:[S?(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:"Your organization has overdue invoices"}),(0,i.jsxs)(F.AlertDescription_Shadcn_,{children:[(0,i.jsx)("span",{children:"Please resolve all outstanding invoices first before deploying a new read replica"}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(A.Button,{asChild:!0,type:"default",children:(0,i.jsx)(c.default,{href:`/org/${p?.slug}/billing#invoices`,children:"View invoices"})})})]})]}):eN?N?(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:"Read replicas are not supported for AWS (Revamped) projects"}),(0,i.jsx)(F.AlertDescription_Shadcn_,{children:(0,i.jsx)("span",{children:"Projects provisioned by other cloud providers currently will not be able to use read replicas"})})]}):eb<15?(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:"Read replicas can only be deployed with projects on Postgres version 15 and above"}),(0,i.jsx)(F.AlertDescription_Shadcn_,{children:"If you'd like to use read replicas, please contact us via support"}),(0,i.jsx)(F.AlertDescription_Shadcn_,{className:"mt-2",children:(0,i.jsx)(A.Button,{type:"default",children:(0,i.jsx)(v.SupportLink,{queryParams:{projectRef:l,category:s.SupportCategories.SALES_ENQUIRY,subject:"Enquiry on read replicas",message:`Project DB version: ${o?.dbVersion}`},children:"Contact support"})})})]}):eT?eC?eR?(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:"Spend cap needs to be disabled to deploy replicas"}),(0,i.jsxs)(F.AlertDescription_Shadcn_,{children:[(0,i.jsx)("span",{children:"Launching a replica incurs additional disk size that will exceed the plan's quota. Disable the spend cap first to allow overages before launching a replica."}),(0,i.jsx)("div",{className:"flex items-center gap-x-2 mt-3",children:(0,i.jsx)(A.Button,{asChild:!0,type:"default",children:(0,i.jsx)(c.default,{href:`/org/${p?.slug}/billing?panel=costControl`,children:"Disable spend cap"})})})]})]}):eA?(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsxs)(H.AlertTitle_Shadcn_,{children:["You can only deploy up to ",eI," read replicas at once"]}),(0,i.jsx)(F.AlertDescription_Shadcn_,{children:"If you'd like to spin up another read replica, please drop an existing replica first."}),eI===f.MAX_REPLICAS_BELOW_XL&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(F.AlertDescription_Shadcn_,{children:[(0,i.jsxs)("span",{children:["Alternatively, you may deploy up to"," ",(0,i.jsx)("span",{className:"text-foreground",children:f.MAX_REPLICAS_ABOVE_XL})," replicas if your project is on an XL compute or higher."]}),(0,i.jsx)("div",{className:"flex items-center gap-x-2 mt-3",children:(0,i.jsx)(A.Button,{asChild:!0,type:"default",children:(0,i.jsx)(c.default,{href:u?`/project/${l}/settings/compute-and-disk`:`/org/${p?.slug}/billing?panel=subscriptionPlan&source=deployNewReplicaPanelMaxReplicas`,children:"Upgrade compute size"})})})]})})]}):null:(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:!1!==ed?"Physical backups are currently being enabled":"Physical backups are required to deploy replicas"}),!1===ed&&(0,i.jsx)(F.AlertDescription_Shadcn_,{className:"mb-2",children:"Physical backups are used under the hood to spin up read replicas for your project."}),(0,i.jsx)(F.AlertDescription_Shadcn_,{children:!1!==ed?"This warning will go away once physical backups have been enabled - check back in a few minutes!":"Enabling physical backups will take a few minutes, after which you will be able to deploy read replicas."}),!1!==ed?(0,i.jsx)(F.AlertDescription_Shadcn_,{className:"mt-2",children:"You may start deploying read replicas thereafter once this is completed."}):(0,i.jsxs)(F.AlertDescription_Shadcn_,{className:"flex items-center gap-x-2 mt-3",children:[(0,i.jsx)(A.Button,{type:"default",loading:ej,disabled:ej,onClick:()=>{l&&ef({ref:l})},children:"Enable physical backups"}),(0,i.jsx)(P.DocsButton,{abbrev:!1,href:`${$.DOCS_URL}/guides/platform/read-replicas#how-are-read-replicas-made`})]})]}):(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:"Project required to at least be on a Small compute"}),(0,i.jsxs)(F.AlertDescription_Shadcn_,{children:[(0,i.jsx)("span",{children:"This is to ensure that read replicas can keep up with the primary databases' activities."}),(0,i.jsxs)("div",{className:"flex items-center gap-x-2 mt-3",children:[(0,i.jsx)(A.Button,{asChild:!0,type:"default",children:(0,i.jsx)(c.default,{href:u?`/project/${l}/settings/compute-and-disk`:`/org/${p?.slug}/billing?panel=subscriptionPlan&source=deployNewReplicaPanelSmallCompute`,children:u?"Change compute size":"Upgrade to Pro"})}),(0,i.jsx)(P.DocsButton,{abbrev:!1,href:`${$.DOCS_URL}/guides/platform/read-replicas#prerequisites`})]})]})]}):(0,i.jsxs)(V.Alert_Shadcn_,{children:[(0,i.jsx)(Z.WarningIcon,{}),(0,i.jsx)(H.AlertTitle_Shadcn_,{children:"Read replicas are only supported for projects provisioned via AWS"}),(0,i.jsxs)(F.AlertDescription_Shadcn_,{children:[(0,i.jsx)("span",{children:"Projects provisioned by other cloud providers currently will not be able to use read replicas"}),(0,i.jsx)(P.DocsButton,{abbrev:!1,className:"mt-3",href:`${$.DOCS_URL}/guides/platform/read-replicas#prerequisites`})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-6 mt-2",children:[(0,i.jsx)(Y.Listbox,{size:"small",id:"region",name:"region",disabled:!ev,value:eu,onChange:em,label:"Select a region to deploy your read replica in",children:eD.map(e=>(0,i.jsx)(Y.Listbox.Option,{label:e.name,value:e.key,addOnBefore:()=>(0,i.jsx)("img",{alt:"region icon",className:"w-5 rounded-sm",src:`${$.BASE_PATH}/img/regions/${e.region}.svg`}),children:(0,i.jsxs)("p",{className:"flex items-center gap-x-2",children:[(0,i.jsx)("span",{children:e.name}),(0,i.jsx)("span",{className:"text-xs text-foreground-lighter font-mono",children:e.region})]})},e.key))}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-2",children:[en?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(Q.Collapsible_Shadcn_,{children:[(0,i.jsxs)(K.CollapsibleTrigger_Shadcn_,{className:"w-full flex items-center justify-between [&[data-state=open]>svg]:!-rotate-180",children:[(0,i.jsxs)("p",{className:"text-sm text-left",children:["New replica will cost an additional"," ",(0,i.jsxs)("span",{translate:"no",children:[(0,I.formatCurrency)(ew+el+Number(eo)+Number(ec)),"/month"]})]}),(0,i.jsx)(t.ChevronDown,{size:14,className:"transition"})]}),(0,i.jsxs)(W.CollapsibleContent_Shadcn_,{className:"flex flex-col gap-y-1 mt-1",children:[(0,i.jsx)("p",{className:"text-foreground-light text-sm",children:"Read replicas will match the compute size of your primary database and will include 25% more disk size than the primary database to accommodate WAL files."}),(0,i.jsx)("p",{className:"text-foreground-light text-sm",children:"The additional cost for the replica breaks down to:"}),(0,i.jsxs)(X.Table,{children:[(0,i.jsx)(X.TableHeader,{className:"font-mono uppercase text-xs [&_th]:h-auto [&_th]:pb-2 [&_th]:pt-4",children:(0,i.jsxs)(X.TableRow,{children:[(0,i.jsx)(X.TableHead,{className:"w-[140px] pl-0",children:"Item"}),(0,i.jsx)(X.TableHead,{children:"Description"}),(0,i.jsx)(X.TableHead,{className:"text-right pr-0",children:"Cost (/month)"})]})}),(0,i.jsxs)(X.TableBody,{className:"[&_td]:py-0 [&_tr]:h-[50px] [&_tr]:border-dotted",children:[(0,i.jsxs)(X.TableRow,{children:[(0,i.jsx)(X.TableCell,{className:"pl-0",children:"Compute size"}),(0,i.jsx)(X.TableCell,{children:eP?.name}),(0,i.jsx)(X.TableCell,{className:"text-right font-mono pr-0",translate:"no",children:(0,I.formatCurrency)(ew)})]}),(0,i.jsxs)(X.TableRow,{children:[(0,i.jsx)(X.TableCell,{className:"pl-0",children:"Disk size"}),(0,i.jsxs)(X.TableCell,{children:[((es??0)*1.25).toLocaleString()," GB (",ea,")"]}),(0,i.jsx)(X.TableCell,{className:"text-right font-mono pr-0",translate:"no",children:(0,I.formatCurrency)(el)})]}),(0,i.jsxs)(X.TableRow,{children:[(0,i.jsx)(X.TableCell,{className:"pl-0",children:"IOPS"}),(0,i.jsxs)(X.TableCell,{children:[er?.toLocaleString()," IOPS"]}),(0,i.jsx)(X.TableCell,{className:"text-right font-mono pr-0",translate:"no",children:(0,I.formatCurrency)(+eo)})]}),"gp3"===ea&&(0,i.jsxs)(X.TableRow,{children:[(0,i.jsx)(X.TableCell,{className:"pl-0",children:"Throughput"}),(0,i.jsxs)(X.TableCell,{children:[et?.toLocaleString()," MB/s"]}),(0,i.jsx)(X.TableCell,{className:"text-right font-mono pr-0",children:(0,I.formatCurrency)(+ec)})]})]})]})]})]})}):(0,i.jsxs)("p",{className:"text-foreground-light text-sm",children:["Read replicas will be on the same compute size as your primary database. Deploying a read replica on the"," ",(0,i.jsx)("span",{className:"text-foreground",children:eP?.name})," size incurs additional"," ",(0,i.jsx)("span",{className:"text-foreground",translate:"no",children:eP?.price_description}),"."]}),(0,i.jsxs)("p",{className:"text-foreground-light text-sm",children:["Read more about"," ",(0,i.jsx)(c.default,{href:`${$.DOCS_URL}/guides/platform/manage-your-usage/read-replicas`,target:"_blank",rel:"noreferrer",className:"underline hover:text-foreground transition",children:"billing"})," ","for read replicas."]})]})]})]})})};var ei=e.i(356003),es=e.i(346691),ea=e.i(896394),et=e.i(466472);let er=({visible:e,onSuccess:s,onCancel:a})=>{let{ref:t}=(0,h.useParams)(),r=(0,ei.useQueryClient)(),{data:n}=(0,f.useReadReplicasQuery)({projectRef:t}),{mutateAsync:l,isPending:o}=(0,ea.useReadReplicaRemoveMutation)(),c=async()=>{if(!t)return console.error("Project is required");if(void 0===n)return console.error("Unable to retrieve replicas");1===n.length&&(0,E.toast)("Your project has no read replicas");let e=n.filter(e=>e.identifier!==t);try{await Promise.all(e.map(e=>l({projectRef:t,identifier:e.identifier,invalidateReplicaQueries:!1}))),E.toast.success("Tearing down all read replicas"),await Promise.all([r.invalidateQueries({queryKey:es.replicaKeys.list(t)}),r.invalidateQueries({queryKey:es.replicaKeys.loadBalancers(t)})]),s(),a()}catch(e){E.toast.error("Failed to drop all replicas")}};return(0,i.jsxs)(et.default,{variant:"destructive",size:"medium",loading:o,visible:e,title:"Confirm to drop all read replicas?",confirmLabel:"Drop all replicas",confirmLabelLoading:"Dropping all replicas",onCancel:()=>a(),onConfirm:()=>c(),alert:{title:"This action cannot be undone",description:"You may still deploy new replicas in this region thereafter"},children:[(0,i.jsx)("p",{className:"text-sm",children:"Before deleting all replicas, consider:"}),(0,i.jsx)("ul",{className:"text-sm text-foreground-light list-disc pl-6",children:(0,i.jsx)("li",{children:"Network traffic from this region may slow down"})})]})};var en=e.i(555254),el=e.i(805501),eo=e.i(940009),ec=e.i(613580);let ed=({id:e,sourceX:s,sourceY:a,targetX:t,targetY:r,sourcePosition:l,targetPosition:o,style:c={},markerEnd:d,data:p})=>{let{ref:u}=(0,h.useParams)(),{status:x,identifier:g,connectionString:_}=p||{},f=(0,eo.formatDatabaseID)(g??""),[j,y,S]=(0,m.getSmoothStepPath)({sourceX:s,sourceY:a,sourcePosition:l,targetX:t,targetY:r,targetPosition:o}),{data:b,isPending:I,isError:A}=(0,el.useReplicationLagQuery)({id:g,projectRef:u,connectionString:_},{enabled:x===J.REPLICA_STATUS.ACTIVE_HEALTHY}),N=Number(b?.toFixed(2)??0).toLocaleString();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.BaseEdge,{path:j,markerEnd:d,style:c}),void 0!==p&&!A&&x===J.REPLICA_STATUS.ACTIVE_HEALTHY&&(0,i.jsx)(m.EdgeLabelRenderer,{children:(0,i.jsxs)(ec.Tooltip,{children:[(0,i.jsx)(ec.TooltipTrigger,{asChild:!0,children:(0,i.jsx)("div",{className:"bg-surface-100 px-1.5 py-0.5 rounded absolute nodrag nopan",style:{transform:`translate(-50%, -50%) translate(${y}px,${S}px)`,pointerEvents:"all"},children:I?(0,i.jsx)(n.Loader2,{size:12,className:"animate-spin"}):(0,i.jsxs)("p",{className:"font-mono text-xs",children:[N,"s"]})})}),(0,i.jsx)(ec.TooltipContent,{side:"bottom",align:"center",children:I?`Checking replication lag for replica ID: ${f}`:`Replication lag (seconds) for replica ID: ${f}`})]})})]})};var ep=e.i(971104),eu=e.i(492460);let em=e=>{let i=~~(e/3600),s=Math.floor(e%3600/60),a=Math.floor(e%60);return`${i>0?`${i}h`:""} ${s>0?`${s}m`:""} ${a>0?`${a}s`:""}`.trim()};var eh=e.i(55956),ex=e.i(667042),eg=e.i(471880),e_=e.i(382490),ef=e.i(471998),ej=e.i(533488),ey=e.i(423782),eS=e.i(101369),eb=e.i(276093),eI=e.i(189329),eA=e.i(587433);let eN=({data:e})=>{let{ref:s}=(0,h.useParams)(),{numDatabases:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex flex-col rounded bg-surface-100 border border-default",children:(0,i.jsxs)("div",{className:"flex items-start justify-between p-3 gap-x-4",style:{width:J.NODE_WIDTH/2-10},children:[(0,i.jsxs)("div",{className:"flex gap-x-3",children:[(0,i.jsx)("div",{className:"min-w-8 h-8 bg-blue-600 border border-blue-800 rounded-md flex items-center justify-center",children:(0,i.jsx)(ex.Database,{size:16})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,i.jsx)("p",{className:"text-sm",children:"API Load Balancer"}),(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Distributes incoming API requests across"," ",(0,i.jsxs)("span",{className:"text-foreground",children:[a," databases"]})]})]})]}),(0,i.jsxs)(N.DropdownMenu,{children:[(0,i.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,i.jsx)(A.Button,{type:"text",icon:(0,i.jsx)(ef.MoreVertical,{}),className:"px-1"})}),(0,i.jsx)(N.DropdownMenuContent,{className:"w-40",side:"bottom",align:"end",children:(0,i.jsx)(N.DropdownMenuItem,{asChild:!0,className:"gap-x-2",children:(0,i.jsx)(c.default,{href:`/project/${s}/settings/api?source=load-balancer`,children:"View API URL"})})})]})]})}),(0,i.jsx)(m.Handle,{type:"source",position:m.Position.Bottom,style:{background:"transparent"}})]})},eC=({data:e})=>{let{provider:s,region:a,computeSize:t,numReplicas:r,numRegions:n,hasLoadBalancer:l}=e,{projectHomepageShowInstanceSize:o}=(0,S.useIsFeatureEnabled)(["project_homepage:show_instance_size"]),{infraAwsNimbusLabel:c}=(0,eb.useCustomContent)(["infra:aws_nimbus_label"]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Handle,{type:"target",position:m.Position.Top,className:l?"":"opacity-0",style:{background:"transparent"}}),(0,i.jsxs)("div",{className:"flex flex-col rounded bg-surface-100 border border-default",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between p-3",style:{width:J.NODE_WIDTH/2-10},children:[(0,i.jsxs)("div",{className:"flex gap-x-3",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-brand-500 border border-brand-600 rounded-md flex items-center justify-center",children:(0,i.jsx)(ex.Database,{size:16})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,i.jsx)("p",{className:"text-sm",children:"Primary Database"}),(0,i.jsx)("p",{className:"flex items-center gap-x-1",children:(0,i.jsx)("span",{className:"text-sm text-foreground-light",children:a.name})}),(0,i.jsxs)("p",{className:"flex items-center gap-x-1",children:[(0,i.jsx)("span",{className:"text-sm text-foreground-light",children:"AWS_NIMBUS"===s?c:s}),o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-sm text-foreground-light",children:"•"}),(0,i.jsx)("span",{className:"text-sm text-foreground-light",children:t})]})]})]})]}),(0,i.jsx)("img",{alt:"region icon",className:"w-8 rounded-sm mt-0.5",src:`${$.BASE_PATH}/img/regions/${a.region}.svg`})]}),r>0&&(0,i.jsx)("div",{className:"border-t p-3 py-2",children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,i.jsxs)("span",{className:"text-foreground",children:[r," replica",r>1?"s":""]})," ","deployed across"," ",(0,i.jsxs)("span",{className:"text-foreground",children:[n," region",n>1?"s":""]})]})})]}),(0,i.jsx)(m.Handle,{type:"source",position:m.Position.Bottom,className:0===r?"opacity-0":"",style:{background:"transparent"}})]})},eE=({data:e})=>{let{id:a,provider:t,region:r,computeSize:l,status:o,inserted_at:d,onSelectRestartReplica:p,onSelectResizeReplica:u,onSelectDropReplica:x}=e,{ref:g}=(0,h.useParams)(),_=(0,eI.useDatabaseSelectorStateSnapshot)(),{can:f}=(0,y.useAsyncCheckPermissions)(s.PermissionAction.CREATE,"projects"),{projectHomepageShowInstanceSize:b}=(0,S.useIsFeatureEnabled)(["project_homepage:show_instance_size"]),[,I]=(0,ej.useQueryState)("showConnect",ej.parseAsBoolean.withDefault(!1)),{data:E}=(0,j.useReadReplicasStatusesQuery)({projectRef:g}),{replicaInitializationStatus:R}=(E??[]).find(e=>e.identifier===a)||{},{status:T,progress:v,estimations:P,error:w}=R??{status:void 0,progress:void 0,estimations:void 0,error:void 0},D=(0,eh.default)(d).format("DD MMM YYYY"),L=(void 0!==v?Number(v.split("_")[0]):0)/(Object.keys(J.INIT_PROGRESS).length-1),k=[J.REPLICA_STATUS.UNKNOWN,J.REPLICA_STATUS.COMING_UP,J.REPLICA_STATUS.GOING_DOWN,J.REPLICA_STATUS.RESTORING,J.REPLICA_STATUS.RESTARTING,J.REPLICA_STATUS.RESIZING,J.REPLICA_STATUS.INIT_READ_REPLICA].includes(o)||T===j.ReplicaInitializationStatus.InProgress,{infraAwsNimbusLabel:M}=(0,eb.useCustomContent)(["infra:aws_nimbus_label"]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Handle,{type:"target",position:m.Position.Top,style:{background:"transparent"}}),(0,i.jsxs)("div",{className:"flex justify-between items-start rounded bg-surface-100 border border-default p-3",style:{width:J.NODE_WIDTH/2-10},children:[(0,i.jsxs)("div",{className:"flex gap-x-3",children:[(0,i.jsx)("div",{className:(0,C.cn)("w-8 h-8 border rounded-md flex items-center justify-center",o===J.REPLICA_STATUS.ACTIVE_HEALTHY&&T===j.ReplicaInitializationStatus.Completed?"bg-brand-400 border-brand-500":"bg-surface-100 border-foreground/20"),children:k?(0,i.jsx)(n.Loader2,{className:"animate-spin",size:16}):(0,i.jsx)(eg.DatabaseBackup,{size:16})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,i.jsxs)("p",{className:"text-sm truncate",children:["Replica ",a.length>0&&`(ID: ${(0,eo.formatDatabaseID)(a)})`]}),T===j.ReplicaInitializationStatus.InProgress||o===J.REPLICA_STATUS.COMING_UP||o===J.REPLICA_STATUS.UNKNOWN||o===J.REPLICA_STATUS.INIT_READ_REPLICA?(0,i.jsx)(eA.Badge,{children:"Coming up"}):T===j.ReplicaInitializationStatus.Failed||o===J.REPLICA_STATUS.INIT_READ_REPLICA_FAILED?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eA.Badge,{variant:"destructive",children:"Init failed"}),(0,i.jsxs)(ec.Tooltip,{children:[(0,i.jsx)(ec.TooltipTrigger,{children:(0,i.jsx)(e_.HelpCircle,{size:16})}),(0,i.jsx)(ec.TooltipContent,{side:"bottom",align:"end",alignOffset:-70,className:"w-60 text-center",children:"Replica failed to initialize. Please drop this replica and spin up a new one."})]})]}):o===J.REPLICA_STATUS.GOING_DOWN?(0,i.jsx)(eA.Badge,{children:"Going down"}):o===J.REPLICA_STATUS.RESTARTING?(0,i.jsx)(eA.Badge,{children:"Restarting"}):o===J.REPLICA_STATUS.RESIZING?(0,i.jsx)(eA.Badge,{children:"Resizing"}):o===J.REPLICA_STATUS.ACTIVE_HEALTHY?(0,i.jsx)(eA.Badge,{variant:"success",children:"Healthy"}):(0,i.jsx)(eA.Badge,{variant:"warning",children:"Unhealthy"})]}),(0,i.jsxs)("div",{className:"my-0.5",children:[(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:r.name}),(0,i.jsxs)("p",{className:"flex text-sm text-foreground-light items-center gap-x-1",children:[(0,i.jsx)("span",{children:"AWS_NIMBUS"===t?M:t}),b&&!!l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"•"}),(0,i.jsx)("span",{children:l})]})]})]}),T===j.ReplicaInitializationStatus.InProgress&&void 0!==v?(0,i.jsxs)(ec.Tooltip,{children:[(0,i.jsx)(ec.TooltipTrigger,{asChild:!0,children:(0,i.jsx)("div",{className:"w-56",children:(0,i.jsx)(eS.default,{labelBottom:J.INIT_PROGRESS[v],labelBottomClass:"text-xs !normal-nums text-foreground-light",type:"horizontal",value:100*L,max:100,barClass:"bg-brand"})})}),void 0!==P&&(0,i.jsx)(ec.TooltipContent,{asChild:!0,side:"bottom",children:(0,i.jsxs)("div",{className:"w-56",children:[(0,i.jsx)("p",{className:"text-foreground-light mb-0.5",children:"Duration estimates:"}),void 0!==P.baseBackupDownloadEstimateSeconds&&(0,i.jsxs)("p",{children:["Base backup download:"," ",em(P.baseBackupDownloadEstimateSeconds)]}),void 0!==P.walArchiveReplayEstimateSeconds&&(0,i.jsxs)("p",{children:["WAL archive replay:"," ",em(P.walArchiveReplayEstimateSeconds)]})]})})]}):void 0!==w?(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Error: ",J.ERROR_STATES[w]]}):(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Created: ",D]})]})]}),(0,i.jsxs)(N.DropdownMenu,{children:[(0,i.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,i.jsx)(A.Button,{type:"text",icon:(0,i.jsx)(ef.MoreVertical,{}),className:"px-1"})}),(0,i.jsxs)(N.DropdownMenuContent,{className:"w-40",side:"bottom",align:"end",children:[(0,i.jsx)(N.DropdownMenuItem,{disabled:o!==J.REPLICA_STATUS.ACTIVE_HEALTHY,className:"gap-x-2",onClick:()=>{I(!0),_.setSelectedDatabaseId(a)},children:"View connection string"}),(0,i.jsx)(N.DropdownMenuItem,{className:"gap-x-2",disabled:o!==J.REPLICA_STATUS.ACTIVE_HEALTHY,children:(0,i.jsx)(c.default,{href:`/project/${g}/observability/database?db=${a}&chart=replication-lag`,children:"View replication lag"})}),(0,i.jsx)(N.DropdownMenuSeparator,{}),(0,i.jsx)(N.DropdownMenuItem,{className:"gap-x-2",onClick:()=>p(),disabled:o!==J.REPLICA_STATUS.ACTIVE_HEALTHY,children:"Restart replica"}),(0,i.jsx)(ey.DropdownMenuItemTooltip,{className:"gap-x-2 !pointer-events-auto",disabled:!f,onClick:()=>{f&&x()},tooltip:{content:{side:"left",text:"You need additional permissions to drop replicas"}},children:"Drop replica"})]})]})]})]})},eR=({data:e})=>{let{region:s,numReplicas:a}=e,t=20+(J.NODE_WIDTH/2-10)*a+(a-1)*(J.NODE_SEP+10);return(0,i.jsx)("div",{className:"relative flex justify-between rounded bg-black/10 border border-default border-white/10 border-2 p-3",style:{width:t,height:162},children:(0,i.jsxs)("div",{className:"absolute bottom-2 flex items-center justify-between gap-x-2",children:[(0,i.jsx)("img",{alt:"region icon",className:"w-5 rounded-sm",src:`${$.BASE_PATH}/img/regions/${s.region}.svg`}),(0,i.jsx)("p",{className:"text-sm",children:s.name})]})})};var eT=e.i(605031),ev=e.i(863805),eP=e.i(396831),ew=e.i(589285);let eD=({onSelectDeployNewReplica:e,onSelectRestartReplica:t,onSelectDropReplica:r})=>{let{ref:n}=(0,h.useParams)(),l=(0,eI.useDatabaseSelectorStateSnapshot)(),{projectHomepageShowInstanceSize:o}=(0,S.useIsFeatureEnabled)(["project_homepage:show_instance_size"]),[p,u]=(0,d.useState)(!1),[m,x]=(0,d.useState)(1.5),[_,j]=(0,d.useState)([14,7]),[b,I]=(0,d.useState)(),{can:C}=(0,y.useAsyncCheckPermissions)(s.PermissionAction.CREATE,"projects"),[,E]=(0,ej.useQueryState)("showConnect",ej.parseAsBoolean.withDefault(!1)),{data:R}=(0,f.useReadReplicasQuery)({projectRef:n}),T=R??[],[[v],P]=(0,a.default)(T,e=>e.identifier===n),w=J.AVAILABLE_REPLICA_REGIONS.find(e=>v.region.includes(e.region))?.coordinates??[0,0],D=(0,eT.default)(P,e=>J.AVAILABLE_REPLICA_REGIONS.find(i=>e.region.includes(i.region))?.key),L=J.AVAILABLE_REPLICA_REGIONS.find(e=>e.coordinates===_)?.region??"",k=J.AVAILABLE_REPLICA_REGIONS.find(e=>e.region===L),M=T.filter(e=>e.region.includes(L)).sort((e,i)=>+(e.inserted_at>i.inserted_at)).sort(e=>e.identifier===n?-1:0);return(0,d.useEffect)(()=>{setTimeout(()=>u(!0),100)},[]),(0,i.jsxs)("div",{className:"bg-studio h-[500px] relative",children:[(0,i.jsx)(ev.ComposableMap,{projectionConfig:{scale:155},className:"w-full h-full",children:(0,i.jsxs)(ev.ZoomableGroup,{className:p?"transition-all duration-300":"",center:_,zoom:m,minZoom:1.5,maxZoom:2,filterZoomEvent:({constructor:{name:e}})=>!["MouseEvent","WheelEvent"].includes(e),children:[(0,i.jsx)(ev.Geographies,{geography:ew.default,children:({geographies:e})=>e.map(e=>(0,i.jsx)(ev.Geography,{geography:e,strokeWidth:.3,pointerEvents:"none",className:"fill-gray-800 stroke-gray-900 dark:fill-gray-300 dark:stroke-gray-200"},e.rsmKey))}),D.map(e=>{let s=J.AVAILABLE_REPLICA_REGIONS.find(i=>e.region.includes(i.region))?.coordinates;return s!==w?(0,i.jsx)(ev.Line,{from:s,to:w,stroke:"white",strokeWidth:1,strokeLinecap:"round",strokeOpacity:.2,strokeDasharray:"3, 3",className:"map-path"},`line-${e.identifier}-${v.identifier}`):null}),J.AVAILABLE_REPLICA_REGIONS.map(e=>{let s=T.filter(i=>i.region.includes(e.region))??[],a=J.AVAILABLE_REPLICA_REGIONS.find(i=>i.region===e.region)?.coordinates,t=0===s.length,r=s.some(e=>e.identifier===n),l=s.filter(e=>e.identifier!==n)??[];return(0,i.jsxs)(ev.Marker,{coordinates:a,onMouseEnter:()=>{I({x:a[0],y:a[1],region:{key:e.key,country:e.name,region:e.region,name:t?void 0:r?`Primary Database${l.length>0?` + ${l.length} replica${l.length>1?"s":""} `:""}`:`${l.length} Read Replica${l.length>1?"s":""} deployed`}})},onMouseLeave:()=>I(void 0),onClick:()=>{a&&(j(a),x(2))},children:[L===e.region&&(0,i.jsx)("circle",{r:4,className:`animate-ping ${t?"fill-border-stronger":"fill-brand"}`}),(0,i.jsx)("circle",{r:4,className:`cursor-pointer ${t?"fill-background-surface-300 stroke-border-stronger":r?"fill-brand stroke-brand-500":"fill-brand-500 stroke-brand-400"}`})]},e.key)}),void 0!==b&&1.5===m&&(0,i.jsx)(ev.Marker,{coordinates:[b.x-47,b.y-5],children:(0,i.jsx)("foreignObject",{width:220,height:66.25,children:(0,i.jsx)("div",{className:"bg-studio/50 rounded border",children:(0,i.jsxs)("div",{className:"px-3 py-2 flex flex-col",children:[(0,i.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,i.jsx)("img",{alt:"region icon",className:"w-4 rounded-sm",src:`${$.BASE_PATH}/img/regions/${b.region.region}.svg`}),(0,i.jsx)("p",{className:"text-[10px]",children:b.region.country})]}),(0,i.jsx)("p",{className:`text-[10px] ${void 0===b.region.name?"text-foreground-light":""}`,children:b.region.name??"No databases deployed"})]})})})})]})}),2===m&&void 0!==L&&k&&(0,i.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col bg-studio/50 backdrop-blur-sm border rounded w-[400px]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between py-4 px-4 border-b",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-xs text-foreground-light",children:[M.length," database",M.length>1?"s":""," deployed in"]}),(0,i.jsx)("p",{className:"text-sm",children:k.name})]}),(0,i.jsx)("img",{alt:"region icon",className:"w-10 rounded-sm",src:`${$.BASE_PATH}/img/regions/${k.region}.svg`})]}),M.length>0&&(0,i.jsx)(eP.ScrollArea,{style:{height:M.length>2?"180px":"auto"},children:(0,i.jsx)("ul",{className:"flex flex-col divide-y",children:M.map(e=>{let s=(0,eh.default)(e.inserted_at).format("DD MMM YYYY, HH:mm:ss (ZZ)");return(0,i.jsxs)("li",{className:"text-sm px-4 py-2 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,i.jsxs)("p",{className:"flex items-center gap-x-2",children:[e.identifier===n?"Primary Database":`Read Replica ${e.identifier.length>0&&`(ID: ${(0,eo.formatDatabaseID)(e.identifier)})`}`,e.status===J.REPLICA_STATUS.ACTIVE_HEALTHY?(0,i.jsx)(eA.Badge,{variant:"success",children:"Healthy"}):e.status===J.REPLICA_STATUS.COMING_UP?(0,i.jsx)(eA.Badge,{children:"Coming up"}):e.status===J.REPLICA_STATUS.RESTARTING?(0,i.jsx)(eA.Badge,{children:"Restarting"}):e.status===J.REPLICA_STATUS.RESIZING?(0,i.jsx)(eA.Badge,{children:"Resizing"}):(0,i.jsx)(eA.Badge,{variant:"warning",children:"Unhealthy"})]}),(0,i.jsxs)("p",{className:"text-xs text-foreground-light",children:["AWS",o?` • ${e.size}`:""]}),e.identifier!==n&&(0,i.jsxs)("p",{className:"text-xs text-foreground-light",children:["Created on: ",s]})]}),e.identifier!==n&&(0,i.jsxs)(N.DropdownMenu,{children:[(0,i.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,i.jsx)(A.Button,{type:"text",icon:(0,i.jsx)(ef.MoreVertical,{}),className:"px-1"})}),(0,i.jsxs)(N.DropdownMenuContent,{className:"w-40",side:"bottom",align:"end",children:[(0,i.jsx)(N.DropdownMenuItem,{className:"gap-x-2",disabled:e.status!==J.REPLICA_STATUS.ACTIVE_HEALTHY,onClick:()=>{E(!0),l.setSelectedDatabaseId(e.identifier)},children:"View connection string"}),(0,i.jsx)(N.DropdownMenuItem,{className:"gap-x-2",disabled:e.status!==J.REPLICA_STATUS.ACTIVE_HEALTHY,children:(0,i.jsx)(c.default,{href:`/project/${n}/observability/database?db=${e.identifier}&chart=replication-lag`,children:"View replication lag"})}),(0,i.jsx)(N.DropdownMenuSeparator,{}),(0,i.jsx)(N.DropdownMenuItem,{className:"gap-x-2",onClick:()=>t(e),disabled:e.status!==J.REPLICA_STATUS.ACTIVE_HEALTHY,children:"Restart replica"}),(0,i.jsx)(ey.DropdownMenuItemTooltip,{className:"gap-x-2 !pointer-events-auto",disabled:!C,onClick:()=>r(e),tooltip:{content:{side:"left",text:"You need additional permissions to drop replicas"}},children:"Drop replica"})]})]})]},e.identifier)})})}),(0,i.jsxs)("div",{className:`flex items-center justify-end gap-x-2 px-4 py-4 ${M.length>0?"border-t":""}`,children:[(0,i.jsx)(g.ButtonTooltip,{type:"default",disabled:!C,onClick:()=>e(k.key),tooltip:{content:{side:"bottom",text:C?void 0:"You need additional permissions to deploy replicas"}},children:"Deploy new replica here"}),(0,i.jsx)(A.Button,{type:"default",onClick:()=>{j([14,7]),x(1.5)},children:"Close"})]})]})]})};var eL=e.i(128),ek=e.i(49589);let eM=({diagramOnly:e=!1})=>{let E=(0,m.useReactFlow)(),R=(0,b.useIsOrioleDb)(),{resolvedTheme:T}=(0,o.useTheme)(),{ref:v}=(0,h.useParams)(),{isPending:P}=(0,b.useSelectedProjectQuery)(),w=(0,b.useIsAwsCloudProvider)(),{infrastructureReadReplicas:D}=(0,S.useIsFeatureEnabled)(["infrastructure:read_replicas"]),[L,k]=(0,d.useState)("flow"),[M,O]=(0,d.useState)(!1),{showNewReplicaPanel:B,setShowNewReplicaPanel:z}=(0,ek.useShowNewReplicaPanel)(),[$,G]=(0,d.useState)(1e4),[F,H]=(0,d.useState)(),[V,W]=(0,d.useState)(),[K,Q]=(0,d.useState)(),{can:Y}=(0,y.useAsyncCheckPermissions)(s.PermissionAction.CREATE,"projects"),{data:q,refetch:X,isSuccess:Z}=(0,_.useLoadBalancersQuery)({projectRef:v}),{data:ei,error:es,refetch:ea,isPending:et,isError:el,isSuccess:eo}=(0,f.useReadReplicasQuery)({projectRef:v}),[[ec],em]=(0,d.useMemo)(()=>(0,a.default)(ei??[],e=>e.identifier===v),[ei,v]),{data:eh,isSuccess:ex}=(0,j.useReadReplicasStatusesQuery)({projectRef:v},{refetchInterval:$,refetchOnWindowFocus:!1}),eg=(0,d.useMemo)(()=>ei?.length??0,[ei]);(0,d.useEffect)(()=>{ex&&(async()=>{let e=[J.REPLICA_STATUS.ACTIVE_HEALTHY,J.REPLICA_STATUS.ACTIVE_UNHEALTHY,J.REPLICA_STATUS.INIT_READ_REPLICA_FAILED],i=eh.filter(i=>{let{status:s}=i.replicaInitializationStatus||{};return!e.includes(i.status)||s===j.ReplicaInitializationStatus.InProgress}).length>0;eh.length!==eg&&(await ea(),setTimeout(()=>X(),2e3)),i||G(!1)})()},[eg,ex,X,ea,eh]);let e_=(0,d.useMemo)(()=>eo&&Z&&void 0!==ec?(({primary:e,replicas:i,loadBalancers:s,onSelectRestartReplica:a,onSelectDropReplica:t})=>{let r={x:0,y:0},n=(0,eu.default)(i,e=>{let i=J.AVAILABLE_REPLICA_REGIONS.find(i=>e.region.includes(i.region));return i?.key}),l=s.find(i=>i.databases.some(i=>i.identifier===e.identifier)),o=void 0!==l?{position:r,id:"load-balancer",type:"LOAD_BALANCER",data:{numDatabases:l.databases.length}}:void 0,c=Object.keys(U.AWS_REGIONS).map(e=>({key:e,name:U.AWS_REGIONS?.[e].displayName,region:U.AWS_REGIONS?.[e].code,coordinates:J.AWS_REGIONS_COORDINATES[e]})).find(i=>e.region.includes(i.region));return[...void 0!==o?[o]:[],{position:r,id:e.identifier,type:"PRIMARY",data:{id:e.identifier,region:"FLY"===e.cloud_provider?{name:"Singapore (sin)",key:"SOUTHEAST_ASIA"}:c??{name:e.region},provider:e.cloud_provider,inserted_at:e.inserted_at,computeSize:e.size,status:e.status,numReplicas:i.length,numRegions:Object.keys(n).length,hasLoadBalancer:void 0!==l}},...i.sort((e,i)=>e.region>i.region?1:-1).map(e=>{let i=J.AVAILABLE_REPLICA_REGIONS.find(i=>e.region.includes(i.region));return{position:r,id:e.identifier,type:"READ_REPLICA",data:{id:e.identifier,region:i,provider:e.cloud_provider,inserted_at:e.inserted_at,computeSize:e.size,status:e.status,onSelectRestartReplica:()=>a(e),onSelectDropReplica:()=>t(e)}}})]})({primary:ec,replicas:em,loadBalancers:q??[],onSelectRestartReplica:Q,onSelectDropReplica:W}):[],[eo,Z,ec,em,q]),ef=(0,d.useMemo)(()=>eo&&Z?[...(q??[]).length>0?[{id:`load-balancer-${ec.identifier}`,source:"load-balancer",target:ec.identifier,type:"smoothstep",animated:!0,className:"!cursor-default"}]:[],...em.map(e=>({id:`${ec.identifier}-${e.identifier}`,source:ec.identifier,target:e.identifier,type:"smoothstep",animated:!0,className:"!cursor-default",data:{status:e.status,identifier:e.identifier,connectionString:e.connectionString}}))]:[],[Z,eo,q,ec?.identifier,em]),ej=(0,d.useMemo)(()=>({PRIMARY:eC,READ_REPLICA:eE,REGION:eR,LOAD_BALANCER:eN}),[]),ey=(0,d.useMemo)(()=>({smoothstep:ed}),[]),eS=async()=>{var e,i;let s,a,t,r=((s=new ep.default.graphlib.Graph).setDefaultEdgeLabel(()=>({})),s.setGraph({rankdir:"TB",ranksep:160,nodesep:J.NODE_SEP}),e_.forEach(e=>{s.setNode(e.id,{width:J.NODE_WIDTH/2,height:"load-balancer"===e.id?-70:J.NODE_ROW_HEIGHT/2})}),ef.forEach(e=>s.setEdge(e.source,e.target)),ep.default.layout(s),e_.forEach(e=>{let i=s.node(e.id);return e.targetPosition=m.Position.Top,e.sourcePosition=m.Position.Bottom,e.position={x:i.x-i.width/2,y:i.y-i.height/2},e}),{nodes:e_,edges:ef}),{nodes:n}=(e=r.nodes,i=r.edges,a=[],t=e.filter(e=>"READ_REPLICA"===e.type),Object.entries((0,eu.default)(t,e=>e.data.region.key)).map(([e,i])=>{let s=J.AVAILABLE_REPLICA_REGIONS.find(i=>i.key===e),t=i.map(e=>e.position.x),r=i.map(e=>e.position.y),n=Math.min(...t),l={id:e,position:{x:n-10,y:Math.max(...r)-10},width:Math.max(...t)-n+J.NODE_WIDTH/2,type:"REGION",data:{region:s,numReplicas:i.length}};a.push(l)}),{nodes:[...a,...e],edges:i});E.setNodes(n),E.setEdges(r.edges),await (0,I.timeout)(1),E.fitView({maxZoom:.9,minZoom:.9})};return(0,d.useEffect)(()=>{eo&&Z&&e_.length>0&&"flow"===L&&eS()},[eo,Z,e_,ef,L]),(0,i.jsxs)("div",{className:(0,C.cn)("nowheel",e?"h-full":"border-y"),children:[(0,i.jsxs)("div",{className:`${e?"h-full":"h-[500px]"} w-full relative ${eo&&!P?"":"flex items-center justify-center px-28"}`,children:[(et||P)&&(0,i.jsx)(n.Loader2,{className:"animate-spin text-foreground-light"}),el&&(0,i.jsx)(x.default,{error:es,subject:"Failed to retrieve replicas"}),eo&&!P&&(0,i.jsxs)(i.Fragment,{children:[!e&&D&&(0,i.jsxs)("div",{className:"z-10 absolute top-4 right-4 flex items-center justify-center gap-x-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)(g.ButtonTooltip,{type:"default",disabled:!Y||R,className:(0,C.cn)(em.length>0?"rounded-r-none":""),onClick:()=>z(!0),tooltip:{content:{side:"bottom",text:Y?R?"Read replicas are not supported with OrioleDB":void 0:"You need additional permissions to deploy replicas"}},children:"Deploy a new replica"}),em.length>0&&(0,i.jsxs)(N.DropdownMenu,{children:[(0,i.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,i.jsx)(A.Button,{type:"default",icon:(0,i.jsx)(t.ChevronDown,{size:16}),className:"px-1 rounded-l-none border-l-0"})}),(0,i.jsxs)(N.DropdownMenuContent,{align:"end",className:"w-52 *:space-x-2",children:[(0,i.jsx)(N.DropdownMenuItem,{asChild:!0,children:(0,i.jsx)(c.default,{href:`/project/${v}/settings/compute-and-disk`,children:"Resize databases"})}),(0,i.jsx)(N.DropdownMenuSeparator,{}),(0,i.jsx)(N.DropdownMenuItem,{onClick:()=>O(!0),children:(0,i.jsx)("div",{children:"Remove all replicas"})})]})]})]}),w&&(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)(A.Button,{type:"default",icon:(0,i.jsx)(l.Network,{size:15}),className:`rounded-r-none transition ${"flow"===L?"opacity-100":"opacity-50"}`,onClick:()=>k("flow")}),(0,i.jsx)(A.Button,{type:"default",icon:(0,i.jsx)(r,{size:15}),className:`rounded-l-none transition ${"map"===L?"opacity-100":"opacity-50"}`,onClick:()=>k("map")})]})]}),"flow"===L?(0,i.jsx)(p.default,{fitView:!0,fitViewOptions:{minZoom:.9,maxZoom:.9},className:"instance-configuration",zoomOnPinch:!1,zoomOnScroll:!1,nodesDraggable:!1,nodesConnectable:!1,zoomOnDoubleClick:!1,edgesFocusable:!1,edgesUpdatable:!1,defaultNodes:[],defaultEdges:[],nodeTypes:ej,edgeTypes:ey,proOptions:{hideAttribution:!0},children:(0,i.jsx)(u.Background,{color:"dark"===T?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.4)"})}):(0,i.jsx)(eD,{onSelectDeployNewReplica:e=>{H(e),z(!0)},onSelectRestartReplica:Q,onSelectDropReplica:W})]})]}),!e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ee,{visible:B,selectedDefaultRegion:F,onSuccess:()=>G(5e3),onClose:()=>{H(void 0),z(!1)}}),(0,i.jsx)(en.DropReplicaConfirmationModal,{selectedReplica:V,onSuccess:()=>G(5e3),onCancel:()=>W(void 0)}),(0,i.jsx)(er,{visible:M,onSuccess:()=>G(5e3),onCancel:()=>O(!1)}),(0,i.jsx)(eL.RestartReplicaConfirmationModal,{selectedReplica:K,onSuccess:()=>G(5e3),onCancel:()=>Q(void 0)})]})]})};e.s(["InstanceConfiguration",0,({diagramOnly:e=!1})=>(0,i.jsx)(m.ReactFlowProvider,{children:(0,i.jsx)(eM,{diagramOnly:e})})],554056)}]);

//# debugId=b9dd6a1b-38fa-6e21-2a58-9806733c66e0
//# sourceMappingURL=408acc48d02a9204.js.map