;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4fafd2a2-cf73-055e-cb0b-103223356984")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,421778,e=>{"use strict";var t=e.i(478902);e.i(128328);var s=e.i(86086),a=e.i(55956),r=e.i(210419),i=e.i(389959),l=e.i(158639),o=e.i(787845),n=e.i(17203),c=e.i(857889),d=e.i(775114),u=e.i(296003),h=e.i(494031),m=e.i(215618),x=e.i(215312),p=e.i(438824),f=e.i(230052),g=e.i(317040),j=e.i(441081),b=e.i(602089),y=e.i(627069),v=e.i(492418),N=e.i(500850),_=e.i(283606),S=e.i(314805),w=e.i(408279),C=e.i(108151);let k=()=>{let e,{ref:s}=(0,l.useParams)(),[a,k]=(0,i.useState)("security"),{data:A,isPending:T}=(0,p.useProjectLintsQuery)({projectRef:s}),{data:E,isLoading:I}=(0,h.useQueryPerformanceQuery)({preset:"slowestExecutionTime"}),L=(0,g.useAiAssistantStateSnapshot)(),{openSidebar:R}=(0,j.useSidebarManagerSnapshot)(),{setSelectedItem:P}=(0,f.useAdvisorStateSnapshot)(),D=(0,i.useMemo)(()=>(A??[]).filter(e=>e.categories.includes("SECURITY")),[A]),U=(0,i.useMemo)(()=>(A??[]).filter(e=>e.categories.includes("PERFORMANCE")),[A]),O=D.filter(e=>e.level===d.LINTER_LEVELS.ERROR).length,z=D.filter(e=>e.level===d.LINTER_LEVELS.WARN).length,M=U.filter(e=>e.level===d.LINTER_LEVELS.ERROR).length,$=U.filter(e=>e.level===d.LINTER_LEVELS.WARN).length,H=(0,i.useMemo)(()=>(E??[]).slice(0,5),[E]),B=(0,i.useCallback)(e=>{P(e.cache_key,"lint"),R(m.SIDEBAR_KEYS.ADVISOR_PANEL)},[P,R]),F=O+z+M+$,q=O>0||M>0,Q=z>0||$>0;if(0===F)e=(0,t.jsx)("h2",{children:"No issues available"});else{let s=1===F?"issue":"issues",a=F.toString(),r="";q?r="text-destructive":Q&&(r="text-warning"),e=(0,t.jsxs)("h2",{children:[a," ",s," need",1===F?"s":""," ",(0,t.jsx)("span",{className:r,children:"attention"})]})}let W=(e,s,a,r,i)=>{let l=s.filter(e=>e.level===d.LINTER_LEVELS.ERROR||e.level===d.LINTER_LEVELS.WARN).sort((e,t)=>e.level===d.LINTER_LEVELS.ERROR?-1:1);return(0,t.jsxs)("div",{className:"h-full",children:[i&&(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,t.jsx)(C.ShimmeringLoader,{}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-1/2"})]}),!i&&(a>0||r>0)&&(0,t.jsx)("ul",{children:l.map(e=>{let s=e.detail?e.detail:e.title;return(0,t.jsx)("li",{className:"text-sm w-full border-b my-0 last:border-b-0 group px-4 ",children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full group",children:[(0,t.jsxs)("button",{onClick:()=>B(e),className:"flex items-center gap-2 transition truncate flex-1 min-w-0 py-3 text-left",children:[(0,t.jsx)(u.EntityTypeIcon,{type:e.metadata?.type}),(0,t.jsx)("p",{className:"flex-1 font-mono text-xs leading-6 text-xs text-foreground-light group-hover:text-foreground truncate",children:s.replace(/\\`/g,"`")})]}),(0,t.jsx)(x.ButtonTooltip,{type:"text",className:"px-1 opacity-0 group-hover:opacity-100 w-7",icon:(0,t.jsx)(b.AiIconAnimation,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),R(m.SIDEBAR_KEYS.AI_ASSISTANT),L.newChat({name:"Summarize lint",initialInput:(0,u.createLintSummaryPrompt)(e)})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]})},e.cache_key)})}),!i&&0===a&&0===r&&(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,t.jsx)(c.Shield,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["No ",e.toLowerCase()," issues found"]})]})]})};return(0,t.jsxs)("div",{className:"@container",children:[T?(0,t.jsx)(C.ShimmeringLoader,{className:"w-96 mb-6"}):(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:e}),(0,t.jsxs)("div",{className:"grid grid-cols-1 @xl:grid-cols-2 gap-4",children:[(0,t.jsx)(y.Card,{className:"h-80",children:(0,t.jsxs)(N.Tabs_Shadcn_,{value:a,className:"h-full flex flex-col",children:[(0,t.jsxs)(y.CardHeader,{className:"h-10 py-0 pl-4 pr-2 flex flex-row items-center justify-between flex-0",children:[(0,t.jsxs)(S.TabsList_Shadcn_,{className:"flex justify-start rounded-none gap-x-4 border-b-0 !mt-0 pt-0",children:[(0,t.jsxs)(w.TabsTrigger_Shadcn_,{value:"security",onClick:()=>k("security"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase",children:["Security"," ",O+z>0&&(0,t.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:O+z})]}),(0,t.jsxs)(w.TabsTrigger_Shadcn_,{value:"performance",onClick:()=>k("performance"),className:"flex items-center gap-2 text-xs py-3 border-b-[1px] font-mono uppercase",children:["Performance"," ",M+$>0&&(0,t.jsx)("div",{className:"rounded bg-warning text-warning-100 px-1",children:M+$})]})]}),(0,t.jsx)(x.ButtonTooltip,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,t.jsx)(n.ExternalLink,{}),tooltip:{content:{side:"bottom",text:`Open ${a} Advisor`,className:"capitalize"}},children:(0,t.jsx)(r.default,{href:`/project/${s}/advisors/${a}`})})]}),(0,t.jsxs)(y.CardContent,{className:"!p-0 mt-0 flex-1 overflow-y-auto",children:[(0,t.jsx)(_.TabsContent_Shadcn_,{value:"security",className:"p-0 mt-0 h-full",children:W("Security",D,O,z,T)}),(0,t.jsx)(_.TabsContent_Shadcn_,{value:"performance",className:"p-0 mt-0 h-full",children:W("Performance",U,M,$,T)})]})]})}),(0,t.jsxs)(y.Card,{className:"h-80 flex flex-col",children:[(0,t.jsxs)(y.CardHeader,{className:"h-10 flex-row items-center justify-between py-0 pl-4 pr-2",children:[(0,t.jsx)(y.CardTitle,{children:"Slow Queries"}),(0,t.jsx)(x.ButtonTooltip,{asChild:!0,type:"text",className:"!mt-0 w-7",icon:(0,t.jsx)(n.ExternalLink,{}),tooltip:{content:{side:"bottom",text:"Open Query Performance Advisor"}},children:(0,t.jsx)(r.default,{href:`/project/${s}/reports/query-performance`})})]}),(0,t.jsx)(y.CardContent,{className:"!p-0 flex-1 overflow-y-auto",children:I?(0,t.jsxs)("div",{className:"space-y-2 p-4",children:[(0,t.jsx)(C.ShimmeringLoader,{}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-1/2"}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-1/2"})]}):0===H.length?(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full items-center justify-center gap-2",children:[(0,t.jsx)(o.Activity,{strokeWidth:1.5,size:20,className:"text-foreground-muted"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No slow queries found in the selected period"})]}):(0,t.jsxs)(v.Table,{className:"text-xs font-mono max-w-full",children:[(0,t.jsx)(v.TableHeader,{children:(0,t.jsxs)(v.TableRow,{children:[(0,t.jsx)(v.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Query"}),(0,t.jsx)(v.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Avg time"}),(0,t.jsx)(v.TableHead,{className:"text-foreground-lighter truncate py-2 h-auto",children:"Calls"})]})}),(0,t.jsx)(v.TableBody,{children:H.map((e,s)=>(0,t.jsxs)(v.TableRow,{className:"py-2",children:[(0,t.jsx)(v.TableCell,{className:"font-mono truncate max-w-xs",children:e.query}),(0,t.jsx)(v.TableCell,{className:"font-mono truncate max-w-xs",children:"number"==typeof e.mean_time?`${(e.mean_time/1e3).toFixed(2)}s`:"N/A"}),(0,t.jsx)(v.TableCell,{className:"font-mono truncate max-w-xs",children:e.calls})]},s))})]})})]})]})]})};var A=e.i(346600),T=e.i(236610),E=e.i(707820),I=e.i(655605),L=e.i(513826),R=e.i(937942),P=e.i(368315),D=e.i(92332),U=e.i(912793);e.i(481541);var O=e.i(755191),z=e.i(114970),M=e.i(41941),$=e.i(171137),H=e.i(499536),B=e.i(71981),F=e.i(10429),q=e.i(837710),Q=e.i(405374),W=e.i(843778);let G=()=>(0,t.jsx)("div",{className:"w-[10%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("div",{className:"w-3 h-3 rounded border border-control"})}),Y=({className:e,col1:s,col2:a,col3:r})=>(0,t.jsxs)("div",{className:(0,W.cn)("h-[30px] flex items-center bg-studio border-b border-default",e),children:[(0,t.jsx)(G,{}),(0,t.jsx)("div",{className:"w-[15%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("p",{className:"text-xs",children:s})}),(0,t.jsx)("div",{className:"w-[45%] h-full flex items-center border-r border-default px-2",children:(0,t.jsx)("p",{className:"text-xs",children:a})}),(0,t.jsx)("div",{className:"w-[30%] h-full flex items-center px-2",children:(0,t.jsx)("p",{className:"text-xs",children:r})})]}),V=()=>(0,t.jsxs)("div",{className:"w-full max-w-[500px] h-full pb-10 lg:pb-0 relative pointer-events-none",children:[(0,t.jsxs)("div",{className:(0,W.cn)("w-[290px] lg:w-[400px] h-[180px] bg-alternative border border-default","rounded-t px-4 py-3 space-y-1 overflow-hidden"),children:[(0,t.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"1"}),(0,t.jsxs)("p",{className:"text-blue-900",children:["create table ",(0,t.jsxs)("span",{className:"text-foreground",children:["todos ","("]})]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"2"}),(0,t.jsxs)("p",{className:"text-foreground",children:["id ",(0,t.jsx)("span",{className:"text-blue-900",children:"bigint generated by default"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"3"}),(0,t.jsxs)("p",{className:"text-foreground",children:["task ",(0,t.jsx)("span",{className:"text-blue-900",children:"text"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"4"}),(0,t.jsxs)("p",{className:"text-foreground",children:["status ",(0,t.jsx)("span",{className:"text-blue-900",children:"status default 'Not Started'"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"5"}),(0,t.jsxs)("p",{className:"text-foreground",children:["user_id ",(0,t.jsx)("span",{className:"text-blue-900",children:"uuid references auth.users not null"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"6"}),(0,t.jsxs)("p",{className:"text-foreground",children:["inserted_at ",(0,t.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-8 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"7"}),(0,t.jsxs)("p",{className:"text-foreground",children:["updated_at ",(0,t.jsx)("span",{className:"text-blue-900",children:"timestamp with time zone"}),","]})]}),(0,t.jsxs)("div",{className:"text-xs font-mono space-x-4 flex items-center",children:[(0,t.jsx)("span",{className:"text-foreground-light",children:"8"}),(0,t.jsx)("p",{className:"text-blue-900",children:");"})]})]}),(0,t.jsxs)("div",{className:(0,W.cn)("w-[260px] lg:w-[320px] h-[160px] lg:h-[220px] bg-surface-100 border border-default","absolute right-0 top-[50px] lg:-top-[40px] rounded-t overflow-y-hidden"),children:[(0,t.jsx)(Y,{col1:"id",col2:"task",col3:"status",className:"h-[24px] bg-surface-100"}),(0,t.jsx)(Y,{col1:"1",col2:"Create a project",col3:"Complete"}),(0,t.jsx)(Y,{col1:"2",col2:"Read documentation",col3:"Complete"}),(0,t.jsx)(Y,{col1:"3",col2:"Build application",col3:"In progress"}),(0,t.jsx)(Y,{col1:"4",col2:"Connect Supabase",col3:"In progress"}),(0,t.jsx)(Y,{col1:"5",col2:"Deploy project",col3:"Not started"}),(0,t.jsx)(Y,{col1:"6",col2:"Get users",col3:"Not started"}),(0,t.jsx)(Y,{col1:"7",col2:"Upgrade to Pro",col3:"Not started"})]})]}),K=()=>{let{ref:e}=(0,l.useParams)(),{projectAuthAll:s,projectEdgeFunctionAll:a,projectStorageAll:i}=(0,U.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","project_storage:all"]);return(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4 lg:gap-20",children:[(0,t.jsx)("div",{className:"col-span-12",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-12 md:space-y-20",children:[(0,t.jsx)("div",{className:"flex h-full flex-col justify-between",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Welcome to your new project"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Your project has been deployed on its own instance, with its own API all set up and ready to use."})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-12 flex flex-col justify-center space-y-8 lg:col-span-7",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Build out your database"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Start building your app by creating tables and inserting data. Our Table Editor makes Postgres as easy to use as a spreadsheet, but there's also our SQL Editor if you need something more."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(q.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(B.TableEditor,{strokeWidth:1.5}),children:(0,t.jsx)(D.EditorIndexPageLink,{projectRef:e,children:"Table Editor"})}),(0,t.jsx)(q.Button,{asChild:!0,type:"default",icon:(0,t.jsx)($.SqlEditor,{strokeWidth:1.5}),children:(0,t.jsx)(r.default,{href:`/project/${e}/sql/new`,children:"SQL Editor"})}),(0,t.jsx)(q.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(n.ExternalLink,{}),children:(0,t.jsx)(r.default,{href:`${F.DOCS_URL}/guides/database`,target:"_blank",rel:"noreferrer",children:"About Database"})})]})]}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,t.jsx)(V,{})})]}),s&&a&&i&&(0,t.jsxs)("div",{className:"flex h-full flex-col justify-between space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-2xl space-y-2",children:[(0,t.jsx)("h2",{children:"Explore our other products"}),(0,t.jsx)("p",{className:"text-base text-foreground-light",children:"Supabase provides all the backend features you need to build a product. You can use it completely, or just the features you need."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 md:gap-y-0 xl:grid-cols-4",children:[(0,t.jsx)(P.default,{children:(0,t.jsxs)(P.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(O.Auth,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Authentication"})]}),(0,t.jsx)("div",{className:"flex flex-grow md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"A complete user management system that works without any additional tools."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(q.Button,{type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`/project/${e}/auth/users`,children:"Explore Auth"})}),(0,t.jsx)(q.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`${F.DOCS_URL}/guides/auth`,target:"_blank",rel:"noreferrer",children:"About Auth"})})]})]})}),(0,t.jsx)(P.default,{children:(0,t.jsxs)(P.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(H.Storage,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Storage"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Store, organize, and serve any file types of any size from multiple buckets."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(q.Button,{type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`/project/${e}/storage/buckets`,children:"Explore Storage"})}),(0,t.jsx)(q.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`${F.DOCS_URL}/guides/storage`,target:"_blank",rel:"noreferrer",children:"About Storage"})})]})]})}),(0,t.jsx)(P.default,{children:(0,t.jsxs)(P.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(z.EdgeFunctions,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Edge Functions"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Write custom code without deploying or scaling servers, with fast deploy times and low latency."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(q.Button,{type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`/project/${e}/functions`,children:"Explore Functions"})}),(0,t.jsx)(q.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`${F.DOCS_URL}/guides/functions`,target:"_blank",rel:"noreferrer",children:"About Functions"})})]})]})}),(0,t.jsx)(P.default,{children:(0,t.jsxs)(P.default.Content,{className:"flex flex-col space-y-4 md:px-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(M.Realtime,{size:16,strokeWidth:1.5})}),(0,t.jsx)("h5",{children:"Realtime"})]}),(0,t.jsx)("div",{className:"flex md:min-h-[50px] xl:min-h-[75px]",children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Listen to your PostgreSQL database in realtime via websockets."})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(q.Button,{type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`/project/${e}/realtime/inspector`,children:"Explore Realtime"})}),(0,t.jsx)(q.Button,{className:"translate-y-[1px]",icon:(0,t.jsx)(n.ExternalLink,{}),type:"default",asChild:!0,children:(0,t.jsx)(r.default,{href:`${F.DOCS_URL}/guides/realtime`,target:"_blank",rel:"noreferrer",children:"About Realtime"})})]})]})})]})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{children:"Connect to your project"}),(0,t.jsxs)("p",{className:"text-base text-foreground-light text-balance",children:["Interact with your database through the"," ",(0,t.jsx)(R.InlineLink,{href:`${F.DOCS_URL}/reference`,children:"Supabase client libraries"})," and your API keys."]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(q.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(I.Settings,{size:16,strokeWidth:1.5}),children:(0,t.jsx)(r.default,{href:`/project/${e}/settings/api`,children:"API settings"})}),(0,t.jsx)(L.DocsButton,{href:`${F.DOCS_URL}/guides/database/api`})]})]})}),(0,t.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,t.jsx)(Q.APIKeys,{})})]})};var J=e.i(867637),X=e.i(655876),Z=e.i(102703),ee=e.i(242882),et=e.i(234745),es=e.i(510334);async function ea({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,et.get)("/platform/projects/{ref}/analytics/endpoints/usage.api-requests-count",{params:{path:{ref:e}},signal:t});return a&&(0,et.handleError)(a),s}async function er({projectRef:e,interval:t},s){if(!e)throw Error("projectRef is required");if(!t)throw Error("interval is required");let{data:a,error:r}=await (0,et.get)("/platform/projects/{ref}/analytics/endpoints/usage.api-counts",{params:{path:{ref:e},query:{interval:t}},signal:s});return r&&(0,et.handleError)(r),a}let ei=({projectRef:e,interval:t},{enabled:s=!0,...a}={})=>(0,ee.useQuery)({queryKey:es.analyticsKeys.usageApiCounts(e,t),queryFn:({signal:s})=>er({projectRef:e,interval:t},s),enabled:s&&void 0!==e&&void 0!==t,...a});var el=e.i(635494),eo=e.i(886554),en=e.i(629847),ec=e.i(158005),ed=e.i(520124),eu=e.i(25123),eh=e.i(265735),em=e.i(733957),ex=e.i(586030),ep=e.i(271226),ef=e.i(787902);let eg=()=>{let e=(0,ep.useRouter)(),{ref:s}=(0,l.useParams)(),{data:r}=(0,eh.useSelectedOrganizationQuery)(),{projectAuthAll:o,projectStorageAll:n}=(0,U.useIsFeatureEnabled)(["project_auth:all","project_storage:all"]),{plan:c}=(0,eu.useCurrentOrgPlan)(),d=c?.id==="free"?"1hr":"1day",[u,h]=(0,i.useState)(d),{data:m,isPending:x}=ei({projectRef:s,interval:u}),p=ec.CHART_INTERVALS.find(e=>e.key===u)||ec.CHART_INTERVALS[1],f=(0,a.default)().subtract(p.startValue,p.startUnit),g=(0,a.default)(),{data:j}=(0,ed.useFillTimeseriesSorted)({data:m?.result??[],timestampKey:"timestamp",valueKey:["total_auth_requests","total_rest_requests","total_storage_requests","total_realtime_requests"],defaultValue:0,startDate:f.toISOString(),endDate:g.toISOString(),minPointsToFill:5}),b=p.format||"MMM D, ha",y=(t,r)=>{let i=p.startUnit,l=(0,a.default)(t?.timestamp),o=l.add(1,i);"rest"===r?e.push(`/project/${s}/logs/edge-logs?its=${l.toISOString()}&ite=${o.toISOString()}`):e.push(`/project/${s}/logs/edge-logs?its=${l.toISOString()}&ite=${o.toISOString()}&f=${JSON.stringify({product:{[r]:!0}})}`)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,t.jsx)(en.ChartIntervalDropdown,{value:u||"1day",onChange:e=>h(e),planId:c?.id,planName:c?.name,organizationSlug:r?.slug,dropdownAlign:"start",tooltipSide:"right"}),(0,t.jsxs)("span",{className:"text-xs text-foreground-light",children:["Statistics for ",p.label.toLowerCase()]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-4 @2xl:grid-cols-4",children:[(0,t.jsx)(P.default,{className:"mb-0",children:(0,t.jsxs)(P.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ej,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(em.Database,{strokeWidth:1.5,size:16})}),title:"Database",href:`/project/${s}/editor`}),(0,t.jsx)(ef.Loading,{active:x,children:(0,t.jsx)(eo.default,{title:"REST Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_rest_requests",onBarClick:e=>y(e,"rest"),customDateFormat:b,highlightedValue:(0,ex.default)(j,"total_rest_requests")})})]})}),o&&(0,t.jsx)(P.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(P.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ej,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(O.Auth,{strokeWidth:1.5,size:16})}),title:"Auth",href:`/project/${s}/auth/users`}),(0,t.jsx)(ef.Loading,{active:x,children:(0,t.jsx)(eo.default,{title:"Auth Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_auth_requests",onBarClick:e=>y(e,"auth"),customDateFormat:b,highlightedValue:(0,ex.default)(j||[],"total_auth_requests")})})]})}),n&&(0,t.jsx)(P.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(P.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ej,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(H.Storage,{strokeWidth:1.5,size:16})}),title:"Storage",href:`/project/${s}/storage/buckets`}),(0,t.jsx)(ef.Loading,{active:x,children:(0,t.jsx)(eo.default,{title:"Storage Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_storage_requests",onBarClick:e=>y(e,"storage"),customDateFormat:b,highlightedValue:(0,ex.default)(j,"total_storage_requests")})})]})}),(0,t.jsx)(P.default,{className:"mb-0 md:mb-0",children:(0,t.jsxs)(P.default.Content,{className:"space-y-4",children:[(0,t.jsx)(ej,{icon:(0,t.jsx)("div",{className:"rounded bg-surface-300 p-1.5 text-foreground-light shadow-sm",children:(0,t.jsx)(M.Realtime,{strokeWidth:1.5,size:16})}),title:"Realtime"}),(0,t.jsx)(ef.Loading,{active:x,children:(0,t.jsx)(eo.default,{title:"Realtime Requests",data:j,xAxisKey:"timestamp",yAxisKey:"total_realtime_requests",onBarClick:e=>y(e,"realtime"),customDateFormat:b,highlightedValue:(0,ex.default)(j,"total_realtime_requests")})})]})})]})]})},ej=e=>{let s=e?.href?r.default:"div";return(0,t.jsx)(s,{href:e.href,children:(0,t.jsxs)("div",{className:"flex items-center space-x-3 opacity-80 transition "+(e.href?"cursor-pointer hover:text-gray-1200 hover:opacity-100":""),children:[(0,t.jsx)("div",{children:e.icon}),(0,t.jsx)("span",{className:"flex items-center space-x-1",children:(0,t.jsx)("h4",{className:"mb-0 text-lg",children:e.title})})]})})},eb=()=>{let{data:e}=(0,el.useSelectedProjectQuery)(),{error:s,isPending:a}=(({projectRef:e},{enabled:t=!0,...s}={})=>(0,ee.useQuery)({queryKey:es.analyticsKeys.usageApiRequestsCount(e),queryFn:({signal:t})=>ea({projectRef:e},t),enabled:t&&void 0!==e,...s}))({projectRef:e?.ref}),{isPending:r}=ei({projectRef:e?.ref,interval:"1hr"});return a||r?(0,t.jsx)(X.ProjectUsageLoadingState,{}):s?(0,t.jsx)(Z.default,{hideCollapse:!0,defaultVisibility:!0,icon:(0,t.jsx)(J.AlertCircle,{size:18,strokeWidth:2}),title:"There was an issue loading the usage details of your project"}):(0,t.jsx)(eg,{})};var ey=e.i(217444),ev=e.i(624982),eN=e.i(416050),e_=e.i(774803),eS=e.i(109);async function ew(e){try{let t=await fetch("https://obuldanrptloktxcffvn.supabase.co/functions/v1/health-check",{method:"GET",signal:e});return await t.json()}catch(e){return{healthy:!1}}}let eC=({projectRef:e},{enabled:t=!0,...s}={})=>(0,ee.useQuery)({queryKey:["projects",e,"service-status","edge-functions"],queryFn:({signal:e})=>ew(e),enabled:t&&void 0!==e,...s});async function ek({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,et.get)("/v1/projects/{ref}/health",{params:{path:{ref:e},query:{services:["auth","realtime","rest","storage","db"]}},signal:t});return a&&(0,et.handleError)(a),s}let eA=({projectRef:e},{enabled:t=!0,...s}={})=>(0,ee.useQuery)({queryKey:["projects",e,"service-status"],queryFn:({signal:t})=>ek({projectRef:e},t),enabled:t&&void 0!==e,...s});var eT=e.i(877555),eE=e.i(793912),eI=e.i(135144),eL=e.i(689805);let eR=({status:e,isLoading:t,isProjectNew:s})=>t?"Checking status":"DISABLED"===e?"Disabled":"UNHEALTHY"===e?"Unhealthy":"COMING_UP"===e?"Coming up...":"ACTIVE_HEALTHY"===e?"Healthy":s?"Coming up...":e||"Unable to connect",eP={size:18,strokeWidth:1.5},eD=()=>(0,t.jsx)(e_.Loader2,{...eP,className:"animate-spin"}),eU=()=>(0,t.jsx)(ey.AlertTriangle,{...eP}),eO=()=>(0,t.jsx)(ev.CheckCircle2,{...eP,className:"text-brand"}),ez=({isLoading:e,isProjectNew:s,projectStatus:a})=>"ACTIVE_HEALTHY"===a?(0,t.jsx)(eO,{}):"DISABLED"===a?(0,t.jsx)(eU,{}):"COMING_UP"===a||e||s?(0,t.jsx)(eD,{}):(0,t.jsx)(eU,{}),eM=e=>{if(e?.info&&"db_schema"in e.info)return e.info.db_schema},e$=()=>{let{ref:e}=(0,l.useParams)(),{data:s}=(0,el.useSelectedProjectQuery)(),[o,n]=(0,i.useState)(!1),{projectAuthAll:c,projectEdgeFunctionAll:d,realtimeAll:u,projectStorageAll:h}=(0,U.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),m=s?.parentRef!==s?.ref,{data:x,isPending:p}=(0,eS.useBranchesQuery)({projectRef:m?s?.parentRef:void 0},{enabled:m,refetchInterval:t=>{let s=t.state.data;if(!s)return!1;let a=s.find(t=>t.project_ref===e);return!["FUNCTIONS_DEPLOYED","MIGRATIONS_FAILED","FUNCTIONS_FAILED"].includes(a?.status||"")&&5e3}}),f=m?x?.find(t=>t.project_ref===e):void 0,{data:g,isPending:j,refetch:b}=eA({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!!t?.some(e=>("rest"!==e.name||""!==eM(e))&&"ACTIVE_HEALTHY"!==e.status)&&5e3}}),{data:y,refetch:v}=eC({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!t?.healthy&&5e3}}),N=g?.find(e=>"auth"===e.name),_=g?.find(e=>"rest"===e.name),S=g?.find(e=>"realtime"===e.name),w=g?.find(e=>"storage"===e.name),C=g?.find(e=>"db"===e.name),k=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:j,status:C?.status??"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:_?.error,docsUrl:void 0,isLoading:j,status:""===eM(_)?"DISABLED":_?.status??"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...c?[{name:"Auth",error:N?.error,docsUrl:void 0,isLoading:j,status:N?.status??"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...u?[{name:"Realtime",error:S?.error,docsUrl:void 0,isLoading:j,status:S?.status??"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...h?[{name:"Storage",error:w?.error,docsUrl:void 0,isLoading:j,status:w?.status??"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...d?[{name:"Edge Functions",error:void 0,docsUrl:`${F.DOCS_URL}/guides/functions/troubleshooting`,isLoading:j,status:y?.healthy?"ACTIVE_HEALTHY":j?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...m?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:p,status:f?.status==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":f?.status==="FUNCTIONS_FAILED"||f?.status==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP",logsUrl:"/branches"}]:[]],A=p||f?.status==="CREATING_PROJECT"||f?.status==="RUNNING_MIGRATIONS",T=k.some(e=>e.isLoading),E=k.every(e=>"ACTIVE_HEALTHY"===e.status||"DISABLED"===e.status),I=5>a.default.utc().diff(a.default.utc(s?.inserted_at),"minute")||s?.status==="COMING_UP";return(0,i.useEffect)(()=>{let e;return I&&(e=setTimeout(()=>{b(),v()},1e3*(300-a.default.utc().diff(a.default.utc(s?.inserted_at),"seconds")))),()=>{clearTimeout(e)}},[I]),(0,t.jsxs)(eL.Popover_Shadcn_,{modal:!1,open:o,onOpenChange:n,children:[(0,t.jsx)(eI.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsxs)(q.Button,{type:"default",icon:T||!E&&I&&A?(0,t.jsx)(eD,{}):(0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${E?"bg-brand":"bg-warning"}`}),children:[m?"Branch":"Project"," Status"]})}),(0,t.jsxs)(eE.PopoverContent_Shadcn_,{className:"p-0 w-56",side:"bottom",align:"center",children:[k.map(s=>(0,t.jsxs)(r.default,{href:`/project/${e}${s.logsUrl}`,className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsx)(ez,{isLoading:s.isLoading,isProjectNew:I,projectStatus:s.status}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{children:s.name}),(0,t.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,t.jsx)(eR,{isLoading:s.isLoading,isProjectNew:I,status:s.status})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,t.jsx)(eN.ChevronRight,{size:14,className:"text-foreground"})]})]},s.name)),!E&&(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(eT.InfoIcon,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{children:[I?"New":"Recently restored"," projects can take up to"," ",5," minutes to become fully operational."]}),(0,t.jsxs)("p",{children:["If services stay unhealthy, refer to our"," ",(0,t.jsx)(R.InlineLink,{href:`${F.DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`,children:"docs"})," ","for more information."]})]})]})]})]})};var eH=e.i(800556),eB=e.i(297306),eF=e.i(711789),eq=e.i(975924),eQ=e.i(902858),eW=e.i(196621),eG=e.i(838055),eY=e.i(93472);let eV=()=>{let{ref:e}=(0,l.useParams)(),{data:s}=(0,eG.useProjectUpgradingStatusQuery)({projectRef:e},{enabled:F.IS_PLATFORM}),{status:r,initiated_at:o,latest_status_at:n,error:c}=s?.databaseUpgradeStatus??{},d=`supabase-upgrade-${e}-${o}`,[u,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{h(localStorage?.getItem(d)==="true")},[d]);let m=r===eF.DatabaseUpgradeStatus.Failed,x=a.default.utc(o??0).tz(a.default.tz.guess()).format("DD MMM YYYY HH:mm:ss"),p=`Upgrade information:%0A• Initiated at: ${o}%0A• Error: ${c}`,f=encodeURIComponent(a.default.utc(o??0).format("YYYY-MM-DDTHH:mm:ss")),g=encodeURIComponent(a.default.utc(n??0).utcOffset(0).format("YYYY-MM-DDTHH:mm:ss")),j=`its=${f}&ite=${g}`;return!m||u?null:(0,t.jsx)("div",{className:"max-w-7xl",children:(0,t.jsxs)(eY.Alert,{withIcon:!0,variant:"warning",title:`Postgres version upgrade was not successful (Initiated at ${x})`,actions:(0,t.jsxs)("div",{className:"flex items-center h-full space-x-4",children:[(0,t.jsx)(q.Button,{asChild:!0,type:"default",children:(0,t.jsx)(eW.SupportLink,{queryParams:{category:eQ.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:e,subject:"Upgrade%20failed%20for%20project",message:p},children:"Contact support"})}),(0,t.jsx)(q.Button,{type:"text",className:"px-1",icon:(0,t.jsx)(eq.X,{size:16,strokeWidth:1.5}),onClick:()=>void(h(!0),localStorage.setItem(d,"true"))})]}),children:[(0,t.jsx)("div",{children:"Your project and its data are not affected. Please reach out to us via our support form for assistance with the upgrade."}),(0,t.jsxs)("div",{children:["You may also view logs related to the failed upgrade in your"," ",(0,t.jsx)(R.InlineLink,{href:`/project/${e}/logs/pg-upgrade-logs?${j}`,children:"project's logs"}),"."]})]})})};var eK=e.i(240788),eJ=e.i(164045),eX=e.i(150671),eZ=e.i(738196),e0=e.i(276093),e1=e.i(837508),e2=e.i(876298),e4=e.i(587433),e5=e.i(613580);let e3=()=>{let{data:e}=(0,el.useSelectedProjectQuery)(),{data:s}=(0,eh.useSelectedOrganizationQuery)(),{data:o}=(0,eJ.useProjectDetailQuery)({ref:e?.parent_project_ref}),n=(0,el.useIsOrioleDb)(),c=(0,e2.useAppStateSnapshot)(),{ref:d,enableBranching:u}=(0,l.useParams)(),{projectHomepageExampleProjects:h,projectHomepageClientLibraries:m}=(0,e0.useCustomContent)(["project_homepage:example_projects","project_homepage:client_libraries"]),{projectHomepageShowInstanceSize:x,projectHomepageShowExamples:p}=(0,U.useIsFeatureEnabled)(["project_homepage:show_instance_size","project_homepage:show_examples"]),f=(0,i.useRef)(!1),g=e?.status===e1.PROJECT_STATUS.INACTIVE,j=(0,a.default)(e?.inserted_at).isAfter((0,a.default)().subtract(2,"day"));(0,i.useEffect)(()=>{u&&!f.current&&(f.current=!0,c.setShowCreateBranchModal(!0))},[u]);let{data:b,isPending:y}=(0,eZ.useTablesQuery)({projectRef:e?.ref,connectionString:e?.connectionString,schema:"public"}),{data:v,isPending:I}=(0,eK.useEdgeFunctionsQuery)({projectRef:e?.ref}),{data:L,isPending:P}=(0,eX.useReadReplicasQuery)({projectRef:e?.ref}),{data:D}=(0,eS.useBranchesQuery)({projectRef:e?.parent_project_ref??e?.ref}),O=D?.find(e=>e.is_default),z=D?.find(t=>t.project_ref===e?.ref),M=z?.name===O?.name,$="Welcome to your project";z&&!M?$=z?.name:e?.name&&($=e?.name);let H=Math.max(0,b?.length??0),B=Math.max(0,v?.length??0),q=Math.max(0,(L?.length??1)-1);return g?(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(eH.ProjectPausedState,{})}):(0,t.jsxs)("div",{className:"w-full px-4",children:[(0,t.jsx)("div",{className:(0,W.cn)("py-16 ",!g&&"border-b border-muted "),children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-6 justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-3 w-full",children:[(0,t.jsxs)("div",{children:[!M&&(0,t.jsx)(r.default,{href:`/project/${o?.ref}`,className:"text-sm text-foreground-light",children:o?.name}),(0,t.jsx)("h1",{className:"text-3xl",children:$})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2 mb-1",children:[n&&(0,t.jsxs)(e5.Tooltip,{children:[(0,t.jsx)(e5.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(e4.Badge,{variant:"warning",children:"OrioleDB"})}),(0,t.jsxs)(e5.TooltipContent,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,t.jsx)(R.InlineLink,{href:`${F.DOCS_URL}/guides/database/orioledb`,children:"documentation"})," ","for all limitations."]})]}),x&&(0,t.jsx)(eB.ComputeBadgeWrapper,{projectRef:e?.ref,slug:s?.slug,cloudProvider:e?.cloud_provider,computeSize:e?.infra_compute_size})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[e?.status===e1.PROJECT_STATUS.ACTIVE_HEALTHY&&(0,t.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(r.default,{href:`/project/${d}/editor`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Tables"}),y?(0,t.jsx)(C.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:H})]}),F.IS_PLATFORM&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(r.default,{href:`/project/${d}/functions`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Functions"}),I?(0,t.jsx)(C.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:B})]}),F.IS_PLATFORM&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)(r.default,{href:`/project/${d}/settings/infrastructure`,className:"transition text-foreground-light hover:text-foreground text-sm",children:"Replicas"}),P?(0,t.jsx)(C.ShimmeringLoader,{className:"w-full h-[32px] w-6 p-0"}):(0,t.jsx)("p",{className:"text-2xl tabular-nums",children:q})]})]}),F.IS_PLATFORM&&e?.status===e1.PROJECT_STATUS.ACTIVE_HEALTHY&&(0,t.jsx)("div",{className:"ml-6 border-l flex items-center w-[145px] justify-end",children:(0,t.jsx)(e$,{})})]})]}),(0,t.jsx)(eV,{})]})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"py-16 border-b border-muted",children:(0,t.jsxs)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:[F.IS_PLATFORM&&e?.status!==e1.PROJECT_STATUS.INACTIVE&&(0,t.jsx)(t.Fragment,{children:j?(0,t.jsx)(K,{}):(0,t.jsx)(eb,{})}),!j&&e?.status!==e1.PROJECT_STATUS.INACTIVE&&(0,t.jsx)(k,{})]})}),(0,t.jsx)("div",{className:"bg-surface-100/5 py-16",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl space-y-16 @container",children:e?.status!==e1.PROJECT_STATUS.INACTIVE&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("h2",{className:"text-lg",children:"Client libraries"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-8 md:gap-12 mb-12 md:grid-cols-3",children:m.map(e=>(0,t.jsx)(A.ClientLibrary,{...e},e.language))})]}),p&&(0,t.jsxs)("div",{className:"flex flex-col gap-y-8",children:[(0,t.jsx)("h4",{className:"text-lg",children:"Example projects"}),h?(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:h.sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(T.ExampleProject,{...e},e.url))}):(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)(N.Tabs_Shadcn_,{defaultValue:"app",className:"w-full",children:[(0,t.jsxs)(S.TabsList_Shadcn_,{className:"flex gap-4 mb-8",children:[(0,t.jsx)(w.TabsTrigger_Shadcn_,{value:"app",children:"App Frameworks"}),(0,t.jsx)(w.TabsTrigger_Shadcn_,{value:"mobile",children:"Mobile Frameworks"})]}),(0,t.jsx)(_.TabsContent_Shadcn_,{value:"app",children:(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:E.EXAMPLE_PROJECTS.filter(e=>"app"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(T.ExampleProject,{...e},e.url))})}),(0,t.jsx)(_.TabsContent_Shadcn_,{value:"mobile",children:(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:E.EXAMPLE_PROJECTS.filter(e=>"mobile"===e.type).sort((e,t)=>e.title.localeCompare(t.title)).map(e=>(0,t.jsx)(T.ExampleProject,{...e},e.url))})})]})})]})]})})})]})]})};var e6=e.i(731394),e8=e.i(960547),e7=e.i(657588),e9=e.i(525882);let te=({id:e,children:s})=>{let{attributes:a,listeners:r,setNodeRef:i,transform:l,transition:o,isDragging:n}=(0,e8.useSortable)({id:e}),c={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:o};return(0,t.jsxs)("div",{ref:i,style:c,className:"relative will-change-transform",children:[(0,t.jsx)("button",{"aria-label":"Drag to reorder section",className:"absolute -left-6 top-2 text-foreground-muted hover:text-foreground focus:outline-none cursor-grab active:cursor-grabbing",...a,...r,children:(0,t.jsx)(e9.GripVertical,{size:14})}),(0,t.jsx)("div",{className:(0,W.cn)(n&&"opacity-70"),children:s})]})};var tt=e.i(162082);let ts=({icon:e,label:s,value:a,className:i,href:l,onClick:o,trackingProperties:n})=>{let{mutate:c}=(0,tt.useSendEventMutation)(),{data:d}=(0,el.useSelectedProjectQuery)(),{data:u}=(0,eh.useSelectedOrganizationQuery)(),h=(0,t.jsxs)("div",{className:(0,W.cn)("group flex items-center gap-4 p-0 text-base justify-start",i),children:[(0,t.jsx)("div",{className:"min-w-16 w-16 h-16 rounded-md bg-surface-75 group-hover:bg-muted border flex items-center justify-center",children:e}),(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("div",{className:"text-left heading-meta text-foreground-light",children:s}),(0,t.jsx)("div",{className:"text-foreground truncate h-[34px] flex items-center capitalize-sentence",children:a})]})]});return l?(0,t.jsx)(r.default,{className:"group block",href:l,onClick:()=>{n&&d?.ref&&u?.slug&&c({action:"home_activity_stat_clicked",properties:n,groups:{project:d.ref,organization:u.slug}})},children:h}):o?(0,t.jsx)("button",{className:"group",onClick:o,children:h}):h};var ta=e.i(685509),tr=e.i(993720),ti=e.i(745457),tl=e.i(421549),to=e.i(667042),tn=e.i(300906),tc=e.i(903248),td=e.i(955909);let tu=()=>{let{ref:e}=(0,l.useParams)(),{data:s}=(0,el.useSelectedProjectQuery)(),{projectAuthAll:i,projectEdgeFunctionAll:o,realtimeAll:n,projectStorageAll:c}=(0,U.useIsFeatureEnabled)(["project_auth:all","project_edge_function:all","realtime:all","project_storage:all"]),d=s?.parentRef!==s?.ref,{data:u,isPending:h}=(0,eS.useBranchesQuery)({projectRef:d?s?.parentRef:void 0},{enabled:d}),m=d?u?.find(t=>t.project_ref===e):void 0,{data:x,isPending:p}=eA({projectRef:e},{refetchInterval:e=>{let t=e.state.data;return!!t?.some(e=>("rest"!==e.name||""!==eM(e))&&"ACTIVE_HEALTHY"!==e.status)&&5e3}}),{data:f}=eC({projectRef:e},{refetchInterval:e=>!e.state.data?.healthy&&5e3}),g=x?.find(e=>"auth"===e.name),j=x?.find(e=>"rest"===e.name),b=x?.find(e=>"realtime"===e.name),y=x?.find(e=>"storage"===e.name),v=x?.find(e=>"db"===e.name),N=s?.status==="COMING_UP"||d&&(h||m?.status==="CREATING_PROJECT"||m?.status==="RUNNING_MIGRATIONS"),_=[{name:"Database",error:void 0,docsUrl:void 0,isLoading:p,status:v?.status??"UNHEALTHY",logsUrl:"/logs/postgres-logs"},{name:"PostgREST",error:j?.error,docsUrl:void 0,isLoading:p,status:""===eM(j)?"DISABLED":j?.status??"UNHEALTHY",logsUrl:"/logs/postgrest-logs"},...i?[{name:"Auth",error:g?.error,docsUrl:void 0,isLoading:p,status:g?.status??"UNHEALTHY",logsUrl:"/logs/auth-logs"}]:[],...n?[{name:"Realtime",error:b?.error,docsUrl:void 0,isLoading:p,status:b?.status??"UNHEALTHY",logsUrl:"/logs/realtime-logs"}]:[],...c?[{name:"Storage",error:y?.error,docsUrl:void 0,isLoading:p,status:y?.status??"UNHEALTHY",logsUrl:"/logs/storage-logs"}]:[],...o?[{name:"Edge Functions",error:void 0,docsUrl:`${F.DOCS_URL}/guides/functions/troubleshooting`,isLoading:p,status:f?.healthy?"ACTIVE_HEALTHY":p?"COMING_UP":"UNHEALTHY",logsUrl:"/logs/edge-functions-logs"}]:[],...d?[{name:"Migrations",error:void 0,docsUrl:void 0,isLoading:h,status:d?m?.status==="FUNCTIONS_DEPLOYED"?"ACTIVE_HEALTHY":m?.status==="FUNCTIONS_FAILED"||m?.status==="MIGRATIONS_FAILED"?"UNHEALTHY":"COMING_UP":N?"COMING_UP":"ACTIVE_HEALTHY",logsUrl:d?"/branches":"/logs/database-logs"}]:[]],S=_.some(e=>e.isLoading),w=_.every(e=>"ACTIVE_HEALTHY"===e.status||"DISABLED"===e.status),C=5>a.default.utc().diff(a.default.utc(s?.inserted_at),"minute")||s?.status==="COMING_UP"||d&&(m?.status==="CREATING_PROJECT"||m?.status==="RUNNING_MIGRATIONS"||N),k=_.some(e=>"UNHEALTHY"===e.status),A=_.some(e=>"COMING_UP"===e.status),T=s?.status==="COMING_UP";return(0,t.jsxs)(eL.Popover_Shadcn_,{children:[(0,t.jsx)(eI.PopoverTrigger_Shadcn_,{children:(0,t.jsx)(ts,{icon:T?(0,t.jsx)(e_.Loader2,{className:"animate-spin",size:18}):(0,t.jsx)("div",{className:"grid grid-cols-3 gap-1",children:_.map((e,s)=>(0,t.jsx)("div",{className:(0,W.cn)("w-1.5 h-1.5 rounded-full",e.isLoading||"COMING_UP"===e.status||C&&"ACTIVE_HEALTHY"!==e.status?"bg-foreground-lighter animate-pulse":"ACTIVE_HEALTHY"===e.status?"bg-brand":"bg-selection")},`${e.name}-${s}`))}),label:(0,t.jsx)("span",{children:"Status"}),value:(0,t.jsx)("span",{children:S?"Checking...":A?"Coming up...":k?"Unhealthy":"Healthy"})})}),(0,t.jsxs)(eE.PopoverContent_Shadcn_,{className:"p-0 w-60",side:"bottom",align:"start",children:[_.map(s=>(0,t.jsxs)(r.default,{href:`/project/${e}${s.logsUrl}`,className:"transition px-3 py-2 text-xs flex items-center justify-between border-b last:border-none group relative hover:bg-surface-300",children:[(0,t.jsxs)("div",{className:"flex gap-x-2",children:[(0,t.jsx)(ez,{isLoading:s.isLoading,isProjectNew:C,projectStatus:s.status}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{children:s.name}),(0,t.jsx)("p",{className:"text-foreground-light flex items-center gap-1",children:(0,t.jsx)(eR,{isLoading:s.isLoading,isProjectNew:C,status:s.status})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1 transition opacity-0 group-hover:opacity-100",children:[(0,t.jsx)("span",{className:"text-xs text-foreground",children:"View logs"}),(0,t.jsx)(eN.ChevronRight,{size:14,className:"text-foreground"})]})]},s.name)),!w&&(0,t.jsxs)("div",{className:"flex gap-2 text-xs text-foreground-light px-3 py-2",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(eT.InfoIcon,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{children:[C?"New":"Recently restored"," projects can take up to"," ",5," minutes to become fully operational."]}),(0,t.jsxs)("p",{children:["If services stay unhealthy, refer to our"," ",(0,t.jsx)(R.InlineLink,{href:`${F.DOCS_URL}/guides/troubleshooting/project-status-reports-unhealthy-services`,children:"docs"})," ","for more information."]})]})]})]})]})},th=()=>{let{ref:e}=(0,l.useParams)(),{data:s}=(0,el.useSelectedProjectQuery)(),{data:r,isPending:o}=(0,eS.useBranchesQuery)({projectRef:s?.parent_project_ref??s?.ref}),n=s?.parent_project_ref===void 0,c=(0,i.useMemo)(()=>(r??[]).find(t=>t.project_ref===e),[r,e]),d=(0,i.useMemo)(()=>{let e=(r??[]).filter(e=>!e.is_default);if(0!==e.length)return e.slice().sort((e,t)=>new Date(t.created_at??t.updated_at).valueOf()-new Date(e.created_at??e.updated_at).valueOf())[0]},[r]),{data:u,isPending:h}=(0,tr.useMigrationsQuery)({projectRef:s?.ref,connectionString:s?.connectionString}),m=(0,i.useMemo)(()=>(u??[])[0],[u]),{data:x,isPending:p}=(0,ta.useBackupsQuery)({projectRef:s?.ref}),f=(0,i.useMemo)(()=>{let e=x?.backups??[];if(0!==e.length)return e.slice().sort((e,t)=>new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf())[0]},[x]),[g,j]=(0,i.useMemo)(()=>{let e=m?.version,t=(0,ti.parseMigrationVersion)(e);return t?[t.fromNow(),t.toISOString()]:[void 0,void 0]},[m]),b=g&&j,y=u&&u.length>0?"Unknown":"No migrations";return(0,t.jsx)("div",{className:"@container",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 @md:grid-cols-2 gap-2 @md:gap-6 flex-wrap",children:[(0,t.jsx)(tu,{}),(0,t.jsx)(ts,{href:`/project/${e}/database/migrations`,icon:(0,t.jsx)(to.Database,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:"Last migration"}),trackingProperties:{stat_type:"migrations",stat_value:u?.length??0},value:h?(0,t.jsx)(tc.Skeleton,{className:"h-6 w-24"}):b?(0,t.jsx)(td.TimestampInfo,{className:"text-base",label:g,utcTimestamp:j}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:y})}),(0,t.jsx)(ts,{href:`/project/${e}/database/backups/scheduled`,icon:(0,t.jsx)(tl.Archive,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:"Last backup"}),trackingProperties:{stat_type:"backups",stat_value:x?.backups?.length??0},value:p?(0,t.jsx)(tc.Skeleton,{className:"h-6 w-24"}):x?.pitr_enabled?(0,t.jsx)("p",{children:"PITR enabled"}):f?(0,t.jsx)(td.TimestampInfo,{className:"text-base",displayAs:"utc",label:(0,a.default)(f.inserted_at).fromNow(),utcTimestamp:f.inserted_at}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:"No backups"})}),(0,t.jsx)(ts,{href:`/project/${e}/branches`,icon:(0,t.jsx)(tn.GitBranch,{size:18,strokeWidth:1.5,className:"text-foreground"}),label:(0,t.jsx)("span",{children:n?"Recent branch":"Branch Created"}),trackingProperties:{stat_type:"branches",stat_value:r?.length??0},value:o?(0,t.jsx)(tc.Skeleton,{className:"h-6 w-24"}):n?(0,t.jsx)("p",{className:(0,W.cn)("truncate",!d&&"text-foreground-lighter truncate"),title:d?.name??"No branches",children:d?.name??"No branches"}):c?.created_at?(0,t.jsx)(td.TimestampInfo,{className:"text-base",label:(0,a.default)(c.created_at).fromNow(),utcTimestamp:c.created_at}):(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Unknown"})})]})})};var tm=e.i(737018),tx=e.i(188698),tp=e.i(108892),tf=e.i(377451),tg=e.i(2579),tj=e.i(48189),tb=e.i(980283),ty=e.i(533488),tv=e.i(71049),tN=e.i(746301);let t_=["db_host","db_name","db_port","db_user"],tS={db_user:"",db_host:"",db_port:"",db_name:""},tw=({label:e,children:s})=>(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(tm.Label,{children:e}),s]}),tC=({projectRef:e})=>{let[s,a]=(0,i.useState)(!1),[r,l]=(0,ty.useQueryState)("showConnect",ty.parseAsBoolean.withDefault(!1)),{data:o,isPending:n}=(0,tf.useProjectSettingsV2Query)({projectRef:e},{enabled:!!e}),c=o?.app_config?.protocol??"https",d=o?.app_config?.endpoint,u=d?`${c}://${d}`:void 0,{isLoading:h,can:m}=(0,tg.useAsyncCheckPermissions)(eQ.PermissionAction.READ,"service_api_keys"),{data:x,isLoading:p}=(0,tp.useAPIKeysQuery)({projectRef:e},{enabled:s&&m}),{publishableKey:f}=m?(0,tp.getKeys)(x):{publishableKey:null},{data:g,isLoading:j}=(0,eX.useReadReplicasQuery)({projectRef:e},{enabled:s&&!!e}),b=g?.find(t=>t.identifier===e),y=(0,i.useMemo)(()=>{if(!b?.db_host||!b?.db_name||!b?.db_user||!b?.db_port)return"";let t=(0,tj.pluckObjectFields)(b,[...t_]);return(0,tx.getConnectionStrings)({connectionInfo:{...tS,...t},metadata:{projectRef:e}}).direct.uri},[b,e]),v=u??(n?"Loading project URL...":"Project URL unavailable");return(0,t.jsxs)(tv.HoverCard,{openDelay:250,closeDelay:100,open:s,onOpenChange:a,children:[(0,t.jsx)(tv.HoverCardTrigger,{asChild:!0,children:(0,t.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-4 mt-3 group",children:[(0,t.jsx)("div",{className:" transition w-8 h-8 rounded-md bg-surface-75 group-hover:bg-muted border flex items-center justify-center",children:(0,t.jsx)(tb.Plug,{strokeWidth:1.5,size:16,className:"text-foreground-light rotate-90"})}),(0,t.jsx)("span",{className:"transition text-foreground-light group-hover:text-foreground underline decoration-dotted decoration-foreground-muted underline-offset-4 max-w-[320px] text-left",children:v})]})}),(0,t.jsxs)(tv.HoverCardContent,{side:"bottom",align:"start",className:"w-[420px] p-0",children:[(0,t.jsxs)("div",{className:"p-4 border-b space-y-4",children:[(0,t.jsx)("h3",{className:"heading-meta text-foreground-light",children:"Data API"}),(0,t.jsx)(tw,{label:"Project URL",children:(0,t.jsx)(tN.Input,{copy:!0,readOnly:!0,className:"font-mono text-xs",value:u??"",placeholder:"Project URL unavailable"})}),(0,t.jsx)(tw,{label:"Publishable Key",children:h||p?(0,t.jsx)("div",{className:"text-xs text-foreground-lighter",children:"Loading publishable key..."}):m?(0,t.jsx)(tN.Input,{copy:!0,readOnly:!0,className:"font-mono text-xs",value:f?.api_key??"",placeholder:"Publishable key unavailable"}):(0,t.jsx)("div",{className:"text-xs text-foreground-lighter",children:"You don't have permission to view API keys."})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-4 border-b",children:[(0,t.jsx)("h3",{className:"heading-meta text-foreground-light",children:" Database "}),(0,t.jsx)(tw,{label:"Direct connection string",children:j?(0,t.jsx)("div",{className:"text-xs text-foreground-lighter",children:"Loading connection string..."}):(0,t.jsx)(tN.Input,{copy:!0,readOnly:!0,className:"font-mono text-xs",value:y,placeholder:"Connection string unavailable"})})]}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(q.Button,{icon:(0,t.jsx)(tb.Plug,{className:"rotate-90"}),type:"default",size:"medium",className:"w-full",onClick:()=>l(!0),children:"Get connected"})})]})]})};var tk=e.i(264903),tA=e.i(554056);let tT=()=>{let e=(0,el.useIsOrioleDb)(),{data:s}=(0,el.useSelectedProjectQuery)(),{data:a}=(0,eh.useSelectedOrganizationQuery)(),{data:i}=(0,eJ.useProjectDetailQuery)({ref:s?.parent_project_ref}),{data:l}=(0,eS.useBranchesQuery)({projectRef:s?.parent_project_ref??s?.ref}),o=l?.find(e=>e.is_default),n=l?.find(e=>e.project_ref===s?.ref),c=n?.name===o?.name,d=s?.status===e1.PROJECT_STATUS.INACTIVE,u=n&&!c?n.name:s?.name?s.name:"Welcome to your project";return d?(0,t.jsx)(eH.ProjectPausedState,{}):(0,t.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 py-0 w-full items-center",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex flex-row flex-wrap items-center gap-4 w-full",children:(0,t.jsxs)("div",{children:[!c&&(0,t.jsx)(r.default,{href:`/project/${i?.ref}`,className:"text-sm text-foreground-light",children:i?.name}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("h1",{className:"text-3xl",children:u}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[e&&(0,t.jsxs)(e5.Tooltip,{children:[(0,t.jsx)(e5.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(e4.Badge,{variant:"warning",children:"OrioleDB"})}),(0,t.jsxs)(e5.TooltipContent,{side:"bottom",align:"start",className:"max-w-80 text-center",children:["This project is using Postgres with OrioleDB which is currently in preview and not suitable for production workloads. View our"," ",(0,t.jsx)(R.InlineLink,{href:`${F.DOCS_URL}/guides/database/orioledb`,children:"documentation"})," ","for all limitations."]})]}),(0,t.jsx)(eB.ComputeBadgeWrapper,{projectRef:s?.ref,slug:a?.slug,cloudProvider:s?.cloud_provider,computeSize:s?.infra_compute_size})]})]}),(0,t.jsx)(tC,{projectRef:s?.ref})]})}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsx)(th,{})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:(0,W.cn)("w-full h-[400px] md:h-[500px] border border-muted rounded-md overflow-hidden flex flex-col relative"),children:(0,t.jsx)(tk.ReactFlowProvider,{children:(0,t.jsx)(tA.InstanceConfiguration,{diagramOnly:!0})})})})]}),(0,t.jsx)(eV,{})]})};var tE=e.i(167892),tI=e.i(124416),tL=e.i(78023),tR=e.i(967052),tP=e.i(954676);let tD=(0,i.forwardRef)(function({columns:e,children:s,className:a,gap:r=16,showArrows:l=!0,scrollBehavior:o="smooth",...n},c){let d=(0,i.useRef)(null),u=(0,i.useMemo)(()=>Array.isArray(s)?s:[s],[s]),[h,m]=(0,i.useState)(0),x=(e=>{let[t,s]=(0,i.useState)(null);return(0,i.useLayoutEffect)(()=>{let t=e.current;if(!t)return;let a=t.getBoundingClientRect().width;if(s(e=>e===a?e:a),"undefined"!=typeof ResizeObserver){let e=0,a=new ResizeObserver(t=>{let a=t[0]?.contentRect.width??0;e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{s(e=>e===a?e:a)})});return a.observe(t),()=>{e&&cancelAnimationFrame(e),a.disconnect()}}{let e=()=>{let e=t.getBoundingClientRect().width;s(t=>t===e?t:e)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[e]),t})(d),p=(0,i.useMemo)(()=>(t=>{if(!Array.isArray(e))return e;let[s,a,r]=e;return t>=1024?s:t>=768?a:r})(x??0),[x,e]),f=e=>{let t=d.current;if(!t)return;let s=((x??t.getBoundingClientRect().width)-(p-1)*r)/p+r;m(t=>{let a=Math.max(0,Math.min(b,t+e*s));return a===t?t:a})},g=()=>f(-1),j=()=>f(1),b=(0,i.useMemo)(()=>{if(null==x)return -1;let e=(x-(p-1)*r)/p;return Math.max(0,u.length*e+(u.length-1)*r-x)},[x,p,u.length,r]),y=h>0,v=h<b,N=u.length>p,_=(0,i.useRef)(0),S=(0,i.useRef)(0);return(0,i.useEffect)(()=>{m(e=>{let t=Math.min(e,b);return t===e?e:t})},[b]),(0,t.jsxs)("div",{ref:c,className:(0,W.cn)("relative w-full",a),...n,children:[l&&y&&(0,t.jsx)(q.Button,{type:"default",onClick:g,className:"absolute w-8 h-8 left-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll left",children:(0,t.jsx)(tP.ChevronLeft,{className:"w-4 h-4"})}),l&&v&&N&&(0,t.jsx)(q.Button,{type:"default",onClick:j,className:"absolute w-8 h-8 right-0 top-1/2 -translate-y-1/2 z-10 rounded-full p-2","aria-label":"Scroll right",children:(0,t.jsx)(eN.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsx)("div",{ref:d,className:"w-full overflow-visible focus:outline-none",tabIndex:0,role:"region","aria-roledescription":"carousel","aria-label":"Horizontally scrollable content",style:{overscrollBehaviorX:"contain"},onWheel:e=>{if(0===e.deltaX)return;let t=2*Math.abs(e.deltaX)*(e.deltaX>0?1:-1);S.current+=t,_.current||(_.current=requestAnimationFrame(()=>{_.current=0;let e=S.current;S.current=0,m(t=>{let s=Math.max(0,Math.min(b,t+e));return s===t?t:s})}))},onKeyDown:e=>{"ArrowLeft"===e.key&&y?(e.preventDefault(),g()):"ArrowRight"===e.key&&v&&(e.preventDefault(),j())},children:(0,t.jsx)("div",{className:"flex items-stretch min-w-full transition-transform duration-300 ease-out",style:{gap:`${r}px`,"--column-width":`calc((100% - ${(p-1)*r}px) / ${p})`,transform:`translateX(-${h}px)`,willChange:"transform"},children:u.map((e,s)=>(0,t.jsx)("div",{className:"flex-shrink-0",style:{width:"var(--column-width)"},children:e},s))})})]})});tD.displayName="Row";var tU=e.i(592383);let tO=({showEmptyState:e=!1})=>{let{ref:s}=(0,l.useParams)(),{data:a,isPending:r}=(0,p.useProjectLintsQuery)({projectRef:s},{enabled:!e}),o=(0,tR.useTrack)(),n=(0,g.useAiAssistantStateSnapshot)(),{openSidebar:h}=(0,j.useSidebarManagerSnapshot)(),{setSelectedItem:v}=(0,f.useAdvisorStateSnapshot)(),N=(0,i.useMemo)(()=>a?.filter(e=>e.level===d.LINTER_LEVELS.ERROR)??[],[a]),_=N.length,S=(0,i.useMemo)(()=>{if(0===_)return(0,t.jsx)("h2",{children:"Advisor found no issues"});let e=1===_?"issue":"issues",s=_.toString();return(0,t.jsxs)("h2",{children:["Advisor found ",s," ",e]})},[_]),w=(0,i.useCallback)(()=>{h(m.SIDEBAR_KEYS.AI_ASSISTANT),o("advisor_assistant_button_clicked",{origin:"homepage",issuesCount:_})},[o,h,_]),k=(0,i.useCallback)(e=>{v(e.cache_key,"lint"),h(m.SIDEBAR_KEYS.ADVISOR_PANEL),o("advisor_detail_opened",{origin:"homepage",advisorSource:"lint",advisorCategory:e.categories[0],advisorType:e.name,advisorLevel:e.level})},[o,v,h]);return e?(0,t.jsx)(tz,{}):(0,t.jsxs)("div",{children:[r?(0,t.jsx)(C.ShimmeringLoader,{className:"w-96 mb-6"}):(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[S,(0,t.jsx)(q.Button,{type:"default",icon:(0,t.jsx)(b.AiIconAnimation,{}),onClick:w,children:"Ask Assistant"})]}),r?(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,t.jsx)(C.ShimmeringLoader,{}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-3/4"}),(0,t.jsx)(C.ShimmeringLoader,{className:"w-1/2"})]}):N.length>0?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(tD,{columns:[3,2,1],children:N.map(e=>(0,t.jsxs)(y.Card,{className:"min-h-full flex flex-col items-stretch cursor-pointer h-64",onClick:()=>{k(e)},children:[(0,t.jsxs)(y.CardHeader,{className:"border-b-0 shrink-0 flex flex-row gap-2 space-y-0 justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3",children:["SECURITY"===e.categories[0]?(0,t.jsx)(c.Shield,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}):(0,t.jsx)(tL.BarChart,{size:16,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsx)(y.CardTitle,{className:"text-foreground-light",children:e.categories[0]})]}),(0,t.jsx)(x.ButtonTooltip,{type:"text",className:"w-7 h-7",icon:(0,t.jsx)(b.AiIconAnimation,{size:16}),onClick:t=>{t.stopPropagation(),t.preventDefault(),h(m.SIDEBAR_KEYS.AI_ASSISTANT),n.newChat({name:"Summarize lint",initialInput:(0,u.createLintSummaryPrompt)(e)}),o("advisor_assistant_button_clicked",{origin:"homepage",advisorCategory:e.categories[0],advisorType:e.name,advisorLevel:e.level})},tooltip:{content:{side:"bottom",text:"Help me fix this issue"}}})]}),(0,t.jsxs)(y.CardContent,{className:"p-6 pt-16 flex flex-col justify-end flex-1 overflow-auto",children:[(0,t.jsx)("h3",{className:"mb-1",children:e.title}),(0,t.jsx)(tU.Markdown,{className:"leading-6 text-sm text-foreground-light",children:e.detail&&e.detail.replace(/\\`/g,"`")})]})]},e.cache_key))})}):(0,t.jsx)(tz,{})]})};function tz(){return(0,t.jsx)(y.Card,{className:"bg-transparent h-64",children:(0,t.jsxs)(y.CardContent,{className:"flex flex-col items-center justify-center gap-2 p-16 h-full",children:[(0,t.jsx)(c.Shield,{size:20,strokeWidth:1.5,className:"text-foreground-muted"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"No security or performance errors found"})]})})}var tM=e.i(479232),t$=e.i(61187),tH=e.i(355901),tB=e.i(202584),tF=e.i(201844),tq=e.i(669653),tQ=e.i(364850),tW=e.i(866205),tG=e.i(917007),tY=e.i(920432),tV=e.i(549815),tK=e.i(911509),tJ=e.i(874311),tX=e.i(396831);let tZ=({projectRef:e,trigger:s,side:a="bottom",align:l="end",className:o,autoFocus:n=!1,onSelect:c})=>{let d=(0,ep.useRouter)(),u=(0,i.useRef)(null),[h,m]=(0,i.useState)(!1),[x,p]=(0,i.useState)(""),f=(0,tB.useDebounce)(x,500),{data:g,isPending:j,hasNextPage:b,fetchNextPage:y,isFetchingNextPage:v}=(0,tq.useContentInfiniteQuery)({projectRef:e,type:"sql",limit:tQ.SNIPPET_PAGE_LIMIT,name:0===x.length?x:f},{placeholderData:tF.keepPreviousData}),N=(0,i.useMemo)(()=>g?.pages.flatMap(e=>e.content)??[],[g?.pages]),[_,S]=(0,tB.useIntersectionObserver)({root:u.current,threshold:0,rootMargin:"0px"});return(0,i.useEffect)(()=>{S?.isIntersecting&&b&&!v&&!j&&y()},[S?.isIntersecting,b,v,j,y]),(0,t.jsxs)(tJ.DropdownMenu,{open:h,onOpenChange:m,children:[(0,t.jsx)(tJ.DropdownMenuTrigger,{asChild:!0,children:s}),(0,t.jsx)(tJ.DropdownMenuContent,{side:a,align:l,className:["w-80 p-0",o].filter(Boolean).join(" "),children:(0,t.jsxs)(tW.Command_Shadcn_,{shouldFilter:!1,children:[(0,t.jsx)(tY.CommandInput_Shadcn_,{showResetIcon:!0,autoFocus:n,placeholder:"Search snippets...",value:x,onValueChange:p,handleReset:()=>p("")}),(0,t.jsxs)(tK.CommandList_Shadcn_,{ref:u,children:[j?(0,t.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"Loading..."}):x.length>0&&0===N.length?(0,t.jsx)("p",{className:"text-xs text-center text-foreground-lighter py-3",children:"No snippets found"}):(0,t.jsx)(tG.CommandGroup_Shadcn_,{children:(0,t.jsxs)(tX.ScrollArea,{className:N.length>7?"h-[210px]":"",children:[N.map(e=>(0,t.jsx)(tV.CommandItem_Shadcn_,{value:e.id,onSelect:()=>c({id:e.id,name:e.name}),children:e.name},e.id)),(0,t.jsx)("div",{ref:_,className:"h-1 -mt-1"}),b&&(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(C.ShimmeringLoader,{className:"py-2"})})]})}),(0,t.jsx)("div",{className:"h-px bg-border-overlay -mx-1"}),(0,t.jsx)(tG.CommandGroup_Shadcn_,{children:(0,t.jsx)(tV.CommandItem_Shadcn_,{className:"cursor-pointer w-full",onSelect:()=>{m(!1),d.push(`/project/${e}/sql/new`)},onClick:()=>m(!1),children:(0,t.jsxs)(r.default,{href:`/project/${e}/sql/new`,onClick:()=>{m(!1)},className:"w-full flex items-center gap-2",children:[(0,t.jsx)(tM.Plus,{size:14,strokeWidth:1.5}),(0,t.jsx)("p",{children:"Create a report block with SQL"})]})})})]})]})})]})};var t0=e.i(238411),t1=e.i(888738),t2=e.i(344616),t4=e.i(356003),t5=e.i(420985),t3=e.i(432478),t6=e.i(189329);function t8(){let e,s=(0,a.default)().subtract(7,"day").toISOString(),r=(0,a.default)().toISOString(),{ref:o}=(0,l.useParams)(),{profile:n}=(0,t3.useProfile)(),c=(0,t6.useDatabaseSelectorStateSnapshot)(),{data:d}=(0,eh.useSelectedOrganizationQuery)(),{mutate:u}=(0,tt.useSendEventMutation)(),{invalidateInfraMonitoringQuery:h}=(e=(0,t4.useQueryClient)(),{invalidateInfraMonitoringQuery:(t,{attribute:s,startDate:a,endDate:r,interval:i,databaseIdentifier:l})=>{e.invalidateQueries({queryKey:es.analyticsKeys.infraMonitoring(t,{attribute:s,startDate:a,endDate:r,interval:i,databaseIdentifier:l})})}}),{data:m}=(0,el.useSelectedProjectQuery)(),[p,f]=(0,i.useState)(!1),{data:g}=(0,tq.useContentInfiniteQuery)({projectRef:o,type:"report",name:"Home",limit:1},{placeholderData:tF.keepPreviousData}),j=g?.pages?.[0]?.content?.[0],b=j?.content,[y,v]=(0,i.useState)(b),[N,_]=(0,i.useState)(!1),{can:S}=(0,tg.useAsyncCheckPermissions)(eQ.PermissionAction.CREATE,"user_content",{resource:{type:"report",owner_id:n?.id},subject:{id:n?.id}}),{can:w}=(0,tg.useAsyncCheckPermissions)(eQ.PermissionAction.UPDATE,"user_content",{resource:{type:"report",visibility:j?.visibility,owner_id:j?.owner_id},subject:{id:n?.id}}),{mutate:C}=(0,t5.useContentUpsertMutation)(),k=(0,i.useCallback)(e=>{o&&j&&C({projectRef:o,payload:{...j,content:e}})},[j,o,C]),A=(0,e6.useSensors)((0,e6.useSensor)(e6.PointerSensor,{activationConstraint:{distance:8}})),T=(0,i.useCallback)(e=>e.map((e,t)=>({...e,x:t%2,y:Math.floor(t/2),w:1,h:1})),[]),E=(0,i.useCallback)(e=>{let{active:t,over:s}=e;if(!y||!t||!s||t.id===s.id)return;let a=y.layout.map(e=>String(e.id)),r=a.indexOf(String(t.id)),i=a.indexOf(String(s.id));if(-1===r||-1===i)return;let l=T((0,e8.arrayMove)(y.layout,r,i)),o={...y,layout:l};v(o),k(o)},[y,k,T]),I=(0,i.useCallback)(e=>{let t=new Set(e.map(e=>`${e.y}-${e.x}`)),s=0;for(;;s++){let e=t.has(`${s}-0`),a=t.has(`${s}-1`);if(!e||!a)return{x:+!!e,y:s}}},[]),L=(0,i.useCallback)((e,t)=>({x:t.x,y:t.y,w:1,h:1,id:e.id,label:e.name,attribute:`snippet_${e.id}`,provider:"daily-stats",chart_type:"bar",chartConfig:t2.DEFAULT_CHART_CONFIG}),[]),R=(0,i.useCallback)(e=>{if(y?.layout?.some(t=>String(t.id)===String(e.id)||String(t.attribute)===`snippet_${e.id}`))return void(0,tH.toast)("This block is already in your report");if(!y||!j){if(!o||!n)return;let t={schema_version:1,period_start:{time_period:"7d",date:""},period_end:{time_period:"today",date:""},interval:"1d",layout:[L(e,{x:0,y:0})]};v(t),C({projectRef:o,payload:{id:(0,tj.uuidv4)(),type:"report",name:"Home",description:"",visibility:"project",owner_id:n.id,content:t}}),o&&d?.slug&&u({action:"home_custom_report_block_added",properties:{block_id:e.id,position:0},groups:{project:o,organization:d.slug}});return}let t=[...y.layout],{x:s,y:a}=I(t);t.push(L(e,{x:s,y:a}));let r={...y,layout:t};v(r),k(r),o&&d?.slug&&u({action:"home_custom_report_block_added",properties:{block_id:e.id,position:t.length-1},groups:{project:o,organization:d.slug}})},[y,j,o,n,C,d,u,I,L,k]),P=({metric:e})=>{if(!y)return;let t=y.layout.find(t=>t.attribute===e.key),s=y.layout.filter(t=>t.attribute!==e.key),a={...y,layout:s};v(a),k(a),o&&d?.slug&&t&&u({action:"home_custom_report_block_removed",properties:{block_id:String(t.id)},groups:{project:o,organization:d.slug}})},D=(0,i.useCallback)(async e=>{if(e.preventDefault(),_(!1),!o||!n||!m)return;let t=e.dataTransfer.getData("application/json");if(!t)return;let{label:s,sql:a}=JSON.parse(t);if(!s||!a)return;let r=tH.toast.loading(`Creating new query: ${s}`),i=(0,t1.createSqlSnippetSkeletonV2)({name:s,sql:a,owner_id:n.id,project_id:m.id});C({projectRef:o,payload:i}),tH.toast.success(`Successfully created new query: ${s}`,{id:r}),R({id:i.id,name:s}),u({action:"custom_report_assistant_sql_block_added",groups:{project:o,organization:d?.slug??"Unknown"}})},[o,n,m,C,R,u,d]),U=e=>{_(!0),e.preventDefault()},O=()=>{_(!1)},z=(0,i.useMemo)(()=>y?.layout??[],[y]);return(0,i.useEffect)(()=>{b&&v(b)},[b]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"heading-section",children:"Reports"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[z.length>0&&(0,t.jsx)(x.ButtonTooltip,{type:"default",icon:(0,t.jsx)(t$.RefreshCw,{className:p?"animate-spin":""}),className:"w-7",disabled:p,tooltip:{content:{side:"bottom",text:"Refresh report"}},onClick:()=>{if(!o)return;f(!0);let e=y?.layout.filter(e=>"infra-monitoring"===e.provider||"daily-stats"===e.provider);e?.forEach(e=>{h(o,{attribute:e.attribute,startDate:s,endDate:r,interval:y?.interval||"1d",databaseIdentifier:c.selectedDatabaseId})}),setTimeout(()=>f(!1),1e3)}}),w||S?(0,t.jsx)(tZ,{projectRef:o,onSelect:R,trigger:(0,t.jsx)(q.Button,{type:"default",icon:(0,t.jsx)(tM.Plus,{}),children:"Add block"}),side:"bottom",align:"end",autoFocus:!0}):null]})]}),(0,t.jsxs)("div",{className:"relative",children:[N&&(0,t.jsx)("div",{className:"absolute inset-0 rounded bg-brand/10 pointer-events-none z-10"}),0===z.length?(0,t.jsxs)("div",{className:"h-64 flex flex-col items-center justify-center rounded border-2 border-dashed p-16 transition-colors",onDrop:D,onDragOver:U,onDragLeave:O,children:[(0,t.jsx)("h4",{children:"Build a custom report"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light mb-4",children:"Keep track of your most important metrics"}),w||S?(0,t.jsx)(tZ,{projectRef:o,onSelect:R,trigger:(0,t.jsx)(q.Button,{type:"default",iconRight:(0,t.jsx)(tM.Plus,{size:14}),children:"Add your first block"}),side:"bottom",align:"center",autoFocus:!0}):(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"No charts set up yet in report"})]}):(0,t.jsx)(e6.DndContext,{sensors:A,collisionDetection:e6.closestCenter,onDragStart:()=>{},onDragEnd:E,children:(0,t.jsx)(e8.SortableContext,{items:(y?.layout??[]).map(e=>String(e.id)),strategy:e8.rectSortingStrategy,children:(0,t.jsx)(tD,{columns:[3,2,1],onDrop:D,onDragOver:U,onDragLeave:O,children:z.map(e=>(0,t.jsx)(t7,{id:String(e.id),children:(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(t0.ReportBlock,{item:e,startDate:s,endDate:r,interval:y?.interval??"1d",disableUpdate:!1,isRefreshing:p,onRemoveChart:P,onUpdateChart:t=>((e,{chart:t,chartConfig:s})=>{if(!y)return;let a=y.layout.find(t=>t.id===e);if(!a)return;let r={...a,...t??{}};s&&(r.chartConfig={...a.chartConfig??{},...s});let i=y.layout.map(t=>t.id===e?r:t),l={...y,layout:i};v(l),k(l)})(e.id,t)},e.id)})},e.id))})})})]})]})}function t7({id:e,children:s}){let{attributes:a,listeners:r,setNodeRef:i,transform:l,transition:o,isDragging:n}=(0,e8.useSortable)({id:e}),c={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:o};return(0,t.jsx)("div",{ref:i,style:c,className:n?"opacity-70 will-change-transform":"will-change-transform",...a,...r??{},children:s})}var t9=e.i(454370),se=e.i(219195),st=e.i(666555),ss=e.i(370410),sa=e.i(994110),sr=e.i(795019);function si({steps:e,onStepClick:s}){let a=e.length>0&&e.every(e=>"complete"===e.status),[l,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{if(0===e.length)return void o(null);if(!(l&&e.some(e=>e.key===l)))if(a)o(null);else{let t=e.find(e=>"complete"!==e.status);o(t?.key??e[0]?.key??null)}},[e,a,l]);let n=l?e.find(e=>e.key===l):null,c=n?e.findIndex(e=>e.key===n.key):-1,d=c>0?e[c-1]:null,u=c>-1&&c<e.length-1?e[c+1]:null,h=a&&!n;return(0,t.jsx)(y.Card,{className:"overflow-hidden @container",children:(0,t.jsxs)("div",{className:"flex flex-col @2xl:flex-row",children:[(0,t.jsx)("aside",{className:"hidden border-r @2xl:block @2xl:w-[calc(1/3*100%-16px)]",children:(0,t.jsx)("ol",{children:e.map((e,s)=>{let a=!!n&&e.key===n.key,r="complete"===e.status;return(0,t.jsx)("li",{className:"border-b last:border-b-0 truncate",children:(0,t.jsx)(q.Button,{type:"text",onClick:()=>o(e.key),className:(0,W.cn)("pl-1 block justify-start w-full rounded-none h-auto text-left text-foreground-light",a&&"bg-muted text-foreground"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm w-full",children:[(0,t.jsx)("span",{className:(0,W.cn)("text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md"),children:r?(0,t.jsx)(ss.Check,{size:16,strokeWidth:1.5,className:"text-brand-link"}):s+1}),(0,t.jsx)("span",{className:(0,W.cn)("flex-1 block truncate",a?"text-foreground":"group-hover:text-foreground",r&&"line-through"),children:e.title}),(0,t.jsx)(eN.ChevronRight,{size:16,strokeWidth:1.5,className:"text-foreground-lighter"})]})})},e.key)})})}),(0,t.jsx)(y.CardContent,{className:"flex flex-1 flex-col gap-0 p-0 overflow-y-auto border-b-0",children:h?(0,t.jsx)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden bg-200 flex flex-col justify-end",children:(0,t.jsxs)("div",{className:"p-10",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-md bg-brand/15 flex items-center justify-center shrink-0 mb-4",children:(0,t.jsx)(ss.Check,{size:16,strokeWidth:1.5,className:"text-brand-link"})}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-4 mb-1",children:(0,t.jsx)("h3",{children:"All steps complete"})}),(0,t.jsx)("p",{className:"text-foreground-light max-w-prose mb-4 text-balance",children:"Drop into our Discord community to share your progress and learn from fellow developers."}),(0,t.jsx)(q.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(sr.IconDiscord,{size:14}),className:"text-foreground-light hover:text-foreground",children:(0,t.jsx)(r.default,{href:"https://discord.supabase.com/",target:"_blank",children:"Join our Discord"})})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 border-b px-2 py-2 @2xl:hidden",children:[(0,t.jsx)("span",{className:"text-xs shrink-0 font-mono text-foreground-light w-7 h-7 bg border flex items-center justify-center rounded-md",children:c+1}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(q.Button,{type:"outline",onClick:()=>{d&&o(d.key)},disabled:!d,className:"gap-2","aria-label":"Previous step",children:(0,t.jsx)(tP.ChevronLeft,{size:16,strokeWidth:1.5})}),(0,t.jsx)(q.Button,{type:"outline",onClick:()=>{u&&o(u.key)},disabled:!u,className:"gap-2","aria-label":"Next step",children:(0,t.jsx)(eN.ChevronRight,{size:16,strokeWidth:1.5})})]})]}),(0,t.jsxs)("div",{className:"relative w-full flex-1 min-h-[100px] shrink-0 overflow-hidden",children:[n?.image?(0,t.jsx)(sa.default,{className:"w-full select-none invert dark:invert-0",src:n.image,fill:!0,objectFit:"cover",objectPosition:"top",alt:n.title}):(0,t.jsxs)("div",{className:"absolute top-0 left-0 right-0 overflow-hidden",children:[(0,t.jsx)("img",{src:`${F.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block user-select-none"}),(0,t.jsx)("img",{src:`${F.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden user-select-none"})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-background-surface-100 to-transparent"})]}),(0,t.jsx)("div",{className:"p-10",children:n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4 mb-1",children:[(0,t.jsx)("h3",{children:n.title}),(0,t.jsx)(e4.Badge,{variant:"complete"===n.status?"success":"default",className:"capitalize hidden @2xl:inline-flex",children:n.status})]}),(0,t.jsx)("p",{className:"text-foreground-light max-w-prose mb-4 text-balance",children:n.description}),(0,t.jsx)("div",{className:"mt-auto flex flex-wrap gap-2 pt-2",children:n.actions.map((e,a)=>{if(e.component)return(0,t.jsx)("div",{children:e.component},`${n.key}-action-${a}`);let i=e.label?.toLowerCase().includes("do it for me")||e.label?.toLowerCase().includes("generate")||e.label?.toLowerCase().includes("create policies for me")?"ai_assist":e.href&&!e.href.startsWith("/project/")?"external_link":"primary";return e.href?(0,t.jsx)(q.Button,{asChild:!0,type:e.variant??"default",icon:e.icon,className:"text-foreground-light hover:text-foreground",children:(0,t.jsx)(r.default,{href:e.href,onClick:()=>{s({stepIndex:c,stepTitle:n.title,actionType:i,wasCompleted:"complete"===n.status})},children:e.label})},`${n.key}-action-${a}`):(0,t.jsx)(q.Button,{type:e.variant??"default",icon:e.icon,onClick:()=>{e.onClick?.(),s({stepIndex:c,stepTitle:n.title,actionType:i,wasCompleted:"complete"===n.status})},className:"text-foreground-light hover:text-foreground",children:e.label},`${n.key}-action-${a}`)})})]})})]})})]})})}let sl=(0,e.i(388019).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var so=e.i(495486),sn=e.i(194213),sc=e.i(432639),sd=e.i(672044),su=e.i(14703),sh=e.i(360608),sm=e.i(302372),sx=e.i(148210),sp=e.i(908319);function sf({value:e,onChange:a}){let{ref:r}=(0,l.useParams)(),o=(0,tR.useTrack)(),n=(0,g.useAiAssistantStateSnapshot)(),{openSidebar:d}=(0,j.useSidebarManagerSnapshot)(),u="code"===e||"no-code"===e?e:null,[h,x]=(0,i.useState)(null),p=(()=>{let{data:e}=(0,el.useSelectedProjectQuery)(),{data:t}=(0,eh.useSelectedOrganizationQuery)(),s=e?.ref,a=e?.connectionString,r=e?.status===e1.PROJECT_STATUS.ACTIVE_HEALTHY,{data:l}=(0,eZ.useTablesQuery)({projectRef:s,connectionString:a,schema:"public"},{enabled:!!s&&r}),{data:o}=(0,eZ.useTablesQuery)({projectRef:s,connectionString:a,schema:"storage"},{enabled:!!s&&r}),{data:n}=(0,sm.useDatabasePoliciesQuery)({projectRef:s,connectionString:a,schema:"public"},{enabled:!!s&&!!a&&r}),{data:c}=(0,su.useAuthConfigQuery)({projectRef:s},{enabled:!!s&&r}),{data:d}=(0,sh.useUsersCountQuery)({projectRef:s,connectionString:a},{enabled:!!s&&!!a&&r}),{data:u}=(0,eK.useEdgeFunctionsQuery)({projectRef:s},{enabled:!!s&&r}),{data:h}=(0,tq.useContentInfiniteQuery)({projectRef:s,type:"report",limit:1},{enabled:!!s&&r}),{data:m}=(0,tr.useMigrationsQuery)({projectRef:s,connectionString:a},{enabled:!!s&&!!a&&r}),{data:x}=ei({projectRef:s,interval:"1day"},{enabled:!!s&&r}),{data:p}=(0,sx.useGitHubConnectionsQuery)({organizationId:t?.id},{enabled:!!s&&!!t?.id});return(0,i.useMemo)(()=>{let e=(l?.length??0)>0,t=(m?.length??0)>0,a=(l??[]).some(e=>Number(e?.live_rows_estimate??0)>0),r=(n?.length??0)>0;c&&c.DISABLE_SIGNUP,c?.EXTERNAL_EMAIL_ENABLED;let i=!!d&&!d.is_estimate&&d.count>0,f=(o??[]).some(e=>"objects"===e.name&&Number(e?.live_rows_estimate??0)>0),g=(u?.length??0)>0,j=(h?.pages?.[0]?.content?.length??0)>0,b=p?.some(e=>e.project.ref===s)??!1;return{hasTables:e,hasCliSetup:t,hasSampleData:a,hasRlsPolicies:r,hasAppConnected:x?.result?.some(e=>[e.total_auth_requests,e.total_storage_requests,e.total_rest_requests,e.total_realtime_requests].some(e=>(e??0)>0))??!1,hasFirstUser:i,hasStorageObjects:f,hasEdgeFunctions:g,hasReports:j,hasGitHubConnection:b}},[c,u,p,m,n,h,o,l,x,d,s])})(),f=(0,i.useCallback)((e,t)=>{d(m.SIDEBAR_KEYS.AI_ASSISTANT),n.newChat({name:e,initialInput:t})},[n,d]),v=(0,i.useMemo)(()=>[{label:"Connect",component:(0,t.jsx)(sp.ConnectButton,{buttonType:"primary"})}],[]),N=(0,i.useMemo)(()=>(({ref:e,openAiChat:s,connectActions:a,statuses:r})=>{let{hasTables:i,hasCliSetup:l,hasSampleData:o,hasRlsPolicies:n,hasAppConnected:d,hasFirstUser:u,hasStorageObjects:h,hasEdgeFunctions:m,hasReports:x,hasGitHubConnection:p}=r;return[{key:"install-cli",status:l?"complete":"incomplete",title:"Install the Supabase CLI",icon:(0,t.jsx)(t9.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To get started, install the Supabase CLI—our command-line toolkit for managing projects locally, handling migrations, and seeding data—using the npm command below to add it to your workspace.",actions:[{label:"Install via npm",component:(0,t.jsx)(sd.CodeBlock,{className:"w-full text-xs p-3 !bg",language:"bash",children:"npm install supabase --save-dev"})}]},{key:"design-db",status:i?"complete":"incomplete",title:"Design your database schema",icon:(0,t.jsx)(to.Database,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, create a schema file that defines the structure of your database, either following our declarative schema guide or asking the AI assistant to generate one for you.",actions:[{label:"Create schema file",href:`${F.DOCS_URL}/guides/local-development/declarative-database-schemas`,variant:"default"},{label:"Generate it",variant:"default",icon:(0,t.jsx)(b.AiIconAnimation,{size:14}),onClick:()=>s("Design my database","Help me create a schema file for my database. We will be using Supabase declarative schemas which you can learn about by searching docs for declarative schema.")}]},{key:"add-data",status:o?"complete":"incomplete",title:"Seed your database with data",icon:(0,t.jsx)(so.Table,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now, create a seed file to populate your database with initial data, using the docs for guidance or letting the AI assistant draft realistic inserts.",actions:[{label:"Create a seed file",href:`${F.DOCS_URL}/guides/local-development/seeding-your-database`,variant:"default"},{label:"Generate data",variant:"default",icon:(0,t.jsx)(b.AiIconAnimation,{size:14}),onClick:()=>s("Generate seed data","Generate SQL INSERT statements for realistic seed data that I can run via the Supabase CLI.")}]},{key:"add-rls-policies",status:n?"complete":"incomplete",title:"Secure your data with RLS policies",icon:(0,t.jsx)(c.Shield,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's secure your data by enabling Row Level Security (per-row access rules that decide who can read or write specific records) and defining policies in a migration file, either configuring them manually or letting the AI assistant draft policies for your tables.",actions:[{label:"Create a migration file",href:`/project/${e}/auth/policies`,variant:"default"},{label:"Create policies for me",variant:"default",icon:(0,t.jsx)(b.AiIconAnimation,{size:14}),onClick:()=>s("Generate RLS policies","Generate RLS policies for my existing tables in the public schema and guide me through the process of adding them as migration files to my codebase ")}]},{key:"connect-app",status:d?"complete":"incomplete",title:"Connect your application",icon:(0,t.jsx)(t9.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; open the Connect sheet to grab connection details and setup guidance.",actions:a},{key:"signup-first-user",status:u?"complete":"incomplete",title:"Sign up your first user",icon:(0,t.jsx)(sc.UserPlus,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication setup by creating the first user account, following the docs if you need a step-by-step walkthrough.",actions:[{label:"Read docs",href:`${F.DOCS_URL}/guides/auth`,variant:"default"}]},{key:"upload-file",status:h?"complete":"incomplete",title:"Upload a file",icon:(0,t.jsx)(sn.Upload,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Integrate file storage by creating a bucket via SQL and uploading a file using our client libraries.",actions:[{label:"Create a bucket via SQL",href:`${F.DOCS_URL}/guides/storage/buckets/creating-buckets?queryGroups=language&language=sql`,variant:"default"},{label:"Upload a file",href:`${F.DOCS_URL}/guides/storage/uploads/standard-uploads`,variant:"default"}]},{key:"create-edge-function",status:m?"complete":"incomplete",title:"Deploy an Edge Function",icon:(0,t.jsx)(t9.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Add server-side logic by creating and deploying your first Edge Function—a lightweight TypeScript or JavaScript function that runs close to your users—then revisit the list to monitor and iterate on it.",actions:[{label:"Create and deploy via CLI",href:`${F.DOCS_URL}/guides/functions/quickstart`,variant:"default"},{label:"View functions",href:`/project/${e}/functions`,variant:"default"}]},{key:"monitor-progress",status:x?"complete":"incomplete",title:"Monitor your project's usage",icon:(0,t.jsx)(sl,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Track your project's activity by creating custom reports for API, database, and auth events right from the reports dashboard.",actions:[{label:"Reports",href:`/project/${e}/reports`,variant:"default"}]},{key:"connect-github",status:p?"complete":"incomplete",title:"Connect to GitHub",icon:(0,t.jsx)(tn.GitBranch,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Link this project to a GitHub repository to keep production in sync and spin up preview branches from pull requests.",actions:[{label:"Connect to GitHub",href:`/project/${e}/settings/integrations`,variant:"default"}]}]})({ref:r,openAiChat:f,connectActions:v,statuses:p}),[v,f,r,p]),_=(0,i.useMemo)(()=>(({ref:e,openAiChat:s,connectActions:a,statuses:r})=>{let{hasTables:i,hasSampleData:l,hasRlsPolicies:o,hasAppConnected:n,hasFirstUser:d,hasStorageObjects:u,hasEdgeFunctions:h,hasReports:m,hasGitHubConnection:x}=r;return[{key:"design-db",status:i?"complete":"incomplete",title:"Create your first table",icon:(0,t.jsx)(to.Database,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"To kick off your new project, let's start by creating your very first database table using either the table editor or the AI assistant to shape the structure for you.",actions:[{label:"Create a table",href:`/project/${e}/editor`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(b.AiIconAnimation,{size:14}),onClick:()=>s("Design my database","I want to design my database schema. Please propose tables, relationships, and SQL to create them for my app. Ask clarifying questions if needed.")}]},{key:"add-data",status:l?"complete":"incomplete",title:"Add sample data",icon:(0,t.jsx)(so.Table,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Next, let's add some sample data that you can play with once you connect your app, either by inserting rows yourself or letting the AI assistant craft realistic examples.",actions:[{label:"Add data",href:`/project/${e}/editor`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(b.AiIconAnimation,{size:14}),onClick:()=>s("Generate sample data","Generate SQL INSERT statements to add realistic sample data to my existing tables. Use safe defaults and avoid overwriting data.")}]},{key:"add-rls-policies",status:o?"complete":"incomplete",title:"Secure your data with Row Level Security",icon:(0,t.jsx)(c.Shield,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Now that you have some data, let's secure it by enabling Row Level Security (row-specific access rules that control who can view or modify records) and creating policies yourself or with help from the AI assistant.",actions:[{label:"Create a policy",href:`/project/${e}/auth/policies`,variant:"default"},{label:"Do it for me",variant:"default",icon:(0,t.jsx)(b.AiIconAnimation,{size:14}),onClick:()=>s("Generate RLS policies","Generate RLS policies for my existing tables in the public schema. ")}]},{key:"connect-app",status:n?"complete":"incomplete",title:"Connect your application",icon:(0,t.jsx)(t9.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Your project is ready; open the Connect sheet to grab connection details and setup guidance.",actions:a},{key:"signup-first-user",status:d?"complete":"incomplete",title:"Sign up your first user",icon:(0,t.jsx)(sc.UserPlus,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Test your authentication by signing up your first user, referencing the docs if you need sample flows or troubleshooting tips.",actions:[{label:"Read docs",href:`${F.DOCS_URL}/guides/auth`,variant:"default"}]},{key:"upload-file",status:u?"complete":"incomplete",title:"Upload a file",icon:(0,t.jsx)(sn.Upload,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Let's add file storage to your app by creating a bucket and uploading your first file from the buckets dashboard.",actions:[{label:"Buckets",href:`/project/${e}/storage/files`,variant:"default"}]},{key:"create-edge-function",status:h?"complete":"incomplete",title:"Add server-side logic",icon:(0,t.jsx)(t9.Code,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Extend your app's functionality by creating an Edge Function—a lightweight serverless function that executes close to your users—for server-side logic directly from the functions page.",actions:[{label:"Create a function",href:`/project/${e}/functions/new`,variant:"default"}]},{key:"monitor-progress",status:m?"complete":"incomplete",title:"Monitor your project's health",icon:(0,t.jsx)(sl,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Keep an eye on your project's performance and usage by setting up custom reports from the reports dashboard.",actions:[{label:"Create a report",href:`/project/${e}/reports`,variant:"default"}]},{key:"connect-github",status:x?"complete":"incomplete",title:"Connect to GitHub",icon:(0,t.jsx)(tn.GitBranch,{strokeWidth:1,className:"text-foreground-muted",size:16}),description:"Connect your project to GitHub to automatically create preview branches and sync production changes.",actions:[{label:"Connect to GitHub",href:`/project/${e}/settings/integrations`,variant:"default"}]}]})({ref:r,openAiChat:f,connectActions:v,statuses:p}),[v,f,r,p]),S="code"===u?N:"no-code"===u?_:[],w=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{!s.IS_PLATFORM||w.current||(w.current=!0,o("home_getting_started_section_exposed",{workflow:"no-code"===u?"no_code":"code"===u?"code":null}))},[u,o]),(0,t.jsxs)("section",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"heading-section",children:"Getting started"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(st.ToggleGroup,{type:"single",value:u??void 0,onValueChange:e=>{e&&(x(u),a(e),o("home_getting_started_workflow_clicked",{workflow:"no-code"===e?"no_code":"code",is_switch:null!==h}))},children:[(0,t.jsxs)(st.ToggleGroupItem,{value:"no-code","aria-label":"No-code workflow",size:"sm",className:"text-xs gap-2 h-auto",children:[(0,t.jsx)(se.Table2,{size:16,strokeWidth:1.5}),"No-code"]}),(0,t.jsxs)(st.ToggleGroupItem,{value:"code",size:"sm","aria-label":"Code workflow",className:"text-xs gap-2 h-auto",children:[(0,t.jsx)(t9.Code,{size:16,strokeWidth:1.5}),"Code"]})]}),(0,t.jsx)(q.Button,{size:"tiny",type:"outline",onClick:()=>{if(a("hidden"),u){let e=("code"===u?N:_).filter(e=>"complete"===e.status).length,t=("code"===u?N:_).length;o("home_getting_started_closed",{workflow:"no-code"===u?"no_code":"code",steps_completed:e,total_steps:t})}},children:"Dismiss"})]})]}),0===S.length?(0,t.jsxs)(y.Card,{className:"bg-background/25 border-dashed relative",children:[(0,t.jsxs)("div",{className:"absolute -inset-16 z-0 opacity-50",children:[(0,t.jsx)("img",{src:`${F.BASE_PATH}/img/reports/bg-grafana-dark.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right hidden dark:block"}),(0,t.jsx)("img",{src:`${F.BASE_PATH}/img/reports/bg-grafana-light.svg`,alt:"Supabase Grafana",className:"w-full h-full object-cover object-right dark:hidden"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-background-alternative to-transparent"})]}),(0,t.jsxs)(y.CardContent,{className:"relative z-10 p-8 md:p-12 grid lg:grid-cols-2 gap-16 items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"heading-subSection mb-0 heading-meta text-foreground-light mb-4",children:"Choose a preferred workflow"}),(0,t.jsx)("p",{className:"text-foreground",children:"With Supabase, you have the flexibility to adopt a workflow that works for you. You can do everything via the dashboard, or manage your entire project within your own codebase."})]}),(0,t.jsxs)("div",{className:"flex items-stretch gap-4",children:[(0,t.jsxs)(q.Button,{size:"medium",type:"outline",onClick:()=>{x(u),a("no-code"),o("home_getting_started_workflow_clicked",{workflow:"no_code",is_switch:null!==h})},className:"block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start bg-background ",children:[(0,t.jsx)(se.Table2,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{children:"No-code"}),(0,t.jsx)("div",{className:"text-foreground-light w-full whitespace-normal",children:"Ideal for prototyping or getting your project up and running"})]})]}),(0,t.jsxs)(q.Button,{size:"medium",type:"outline",onClick:()=>{x(u),a("code"),o("home_getting_started_workflow_clicked",{workflow:"code",is_switch:null!==h})},className:"bg-background block gap-2 h-auto p-4 md:p-8 max-w-80 text-left justify-start",children:[(0,t.jsx)(t9.Code,{size:20,strokeWidth:1.5,className:"text-brand"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{children:"Code"}),(0,t.jsx)("div",{className:"text-foreground-light whitespace-normal",children:"Ideal for teams that want full control of their project"})]})]})]})]})]}):(0,t.jsx)(si,{steps:S,onStepClick:({stepIndex:e,stepTitle:t,actionType:s,wasCompleted:a})=>{u&&o("home_getting_started_step_clicked",{workflow:"no-code"===u?"no_code":"code",step_number:e+1,step_title:t,action_type:s,was_completed:a})}})]})}var sg=e.i(414833),sj=e.i(238921);let sb=()=>{let e=(0,ep.useRouter)(),{ref:s}=(0,l.useParams)(),{data:o}=(0,eh.useSelectedOrganizationQuery)(),{mutate:n}=(0,tt.useSendEventMutation)(),{projectAuthAll:c,projectStorageAll:d}=(0,U.useIsFeatureEnabled)(["project_auth:all","project_storage:all"]),{plan:u}=(0,eu.useCurrentOrgPlan)(),h=u?.id==="free"?"1hr":"1day",[m,x]=(0,i.useState)(h),p=ec.CHART_INTERVALS.find(e=>e.key===m)||ec.CHART_INTERVALS[1],{datetimeFormat:f}=(0,i.useMemo)(()=>({datetimeFormat:p.format||"MMM D, ha"}),[p]),{data:g,isPending:j}=ei({projectRef:s,interval:m}),b=(0,a.default)().subtract(p.startValue,p.startUnit),v=(0,a.default)(),{data:N}=(0,ed.useFillTimeseriesSorted)({data:g?.result??[],timestampKey:"timestamp",valueKey:["total_auth_requests","total_rest_requests","total_storage_requests","total_realtime_requests"],defaultValue:0,startDate:b.toISOString(),endDate:v.toISOString(),minPointsToFill:5}),_=(0,i.useMemo)(()=>[{key:"db",title:"Database requests",href:`/project/${s}/editor`,route:"/logs/postgres-logs",enabled:!0},{key:"auth",title:"Auth requests",href:`/project/${s}/auth/users`,route:"/logs/auth-logs",enabled:c},{key:"storage",title:"Storage requests",href:`/project/${s}/storage/buckets`,route:"/logs/storage-logs",enabled:d},{key:"realtime",title:"Realtime requests",route:"/logs/realtime-logs",enabled:!0}],[s,c,d]),S=(0,i.useMemo)(()=>_.map(e=>{let t={db:"total_rest_requests",auth:"total_auth_requests",storage:"total_storage_requests",realtime:"total_realtime_requests"}[e.key],s=(N||[]).map(e=>({timestamp:e.timestamp,error_count:0,warning_count:0,ok_count:Number(e[t])||0})),a=s.reduce((e,t)=>e+t.ok_count,0);return{...e,data:s,total:a,isLoading:j,error:null}}),[_,N,j]).filter(e=>e.enabled),w=S.reduce((e,t)=>e+(t.total||0),0);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center gap-x-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 heading-section text-foreground-light",children:[(0,t.jsx)("span",{className:"text-foreground",children:w.toLocaleString()}),(0,t.jsx)("span",{children:"Total Requests"})]}),(0,t.jsx)(en.ChartIntervalDropdown,{value:m,onChange:e=>x(e),planId:u?.id,planName:u?.name,organizationSlug:o?.slug,dropdownAlign:"end",tooltipSide:"left"})]}),(0,t.jsx)(tD,{columns:[3,2,1],children:S.map(i=>{let l,c;return(0,t.jsxs)(y.Card,{className:"mb-0 md:mb-0 h-full flex flex-col h-64",children:[(0,t.jsx)(y.CardHeader,{className:"flex flex-row items-end justify-between gap-2 space-y-0 pb-0 border-b-0",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(y.CardTitle,{className:"text-xs font-mono uppercase text-foreground-light",children:i.href?(0,t.jsx)(r.default,{href:i.href,onClick:()=>{s&&o?.slug&&n({action:"home_project_usage_service_clicked",properties:{service_type:i.key,total_requests:i.total||0},groups:{project:s,organization:o.slug}})},children:i.title}):i.title}),(0,t.jsx)("span",{className:"text-foreground text-xl",children:(i.total||0).toLocaleString()})]})})}),(0,t.jsx)(y.CardContent,{className:"p-6 pt-4 flex-1 h-full overflow-hidden",children:(0,t.jsx)(ef.Loading,{isFullHeight:!0,active:j,children:(0,t.jsx)(sj.LogsBarChart,{isFullHeight:!0,data:i.data,DateTimeFormat:f,onBarClick:(l=i.route,c=i.key,t=>{if(!t?.timestamp)return;let r=(0,a.default)(t.timestamp).toISOString(),i=new URLSearchParams({iso_timestamp_start:(0,a.default)(r).subtract(1,"minute").toISOString(),iso_timestamp_end:(0,a.default)(r).add(1,"minute").toISOString()});e.push(`/project/${s}${l}?${i.toString()}`),s&&o?.slug&&n({action:"home_project_usage_chart_clicked",properties:{service_type:c,bar_timestamp:t.timestamp},groups:{project:s,organization:o.slug}})}),hideZeroValues:!0,chartConfig:{error_count:{label:"Errors"},warning_count:{label:"Warnings"},ok_count:{label:"Requests"}},EmptyState:(0,t.jsx)(sg.default,{size:"small",message:"No data for selected period",isFullHeight:!0})})})})]},i.key)})})]})},sy=()=>{let{enableBranching:e}=(0,l.useParams)(),r=(0,e2.useAppStateSnapshot)(),{data:o}=(0,el.useSelectedProjectQuery)(),{data:n}=(0,eh.useSelectedOrganizationQuery)(),{mutate:c}=(0,tt.useSendEventMutation)(),d=(0,e7.useFlag)("newHomepageUsageV2"),u=(0,a.default)(o?.inserted_at).isBefore((0,a.default)().subtract(10,"day")),h=(0,i.useRef)(!1),m=o?.status===e1.PROJECT_STATUS.INACTIVE,x=o?.status===e1.PROJECT_STATUS.COMING_UP,[p,f]=(0,tI.useLocalStorage)(`home-section-order-${o?.ref||"default"}`,["getting-started","usage","advisor","custom-report"]),[g,j]=(0,tI.useLocalStorage)(`home-getting-started-${o?.ref||"default"}`,"empty"),b=d?sb:eb,y=(0,e6.useSensors)((0,e6.useSensor)(e6.PointerSensor,{activationConstraint:{distance:8}}));return(0,i.useEffect)(()=>{e&&!h.current&&(h.current=!0,r.setShowCreateBranchModal(!0))},[e,r]),(0,t.jsxs)("div",{className:"w-full h-full",children:[(0,t.jsx)(tE.ScaffoldContainer,{size:"large",className:(0,W.cn)(m&&"h-full"),children:(0,t.jsx)(tE.ScaffoldSection,{isFullWidth:!0,className:(0,W.cn)(m?"h-full flex justify-center !p-0":"pt-16 pb-0"),children:(0,t.jsx)(tT,{})})}),!m&&(0,t.jsx)(tE.ScaffoldContainer,{size:"large",children:(0,t.jsx)(tE.ScaffoldSection,{isFullWidth:!0,className:"gap-16 pb-32",children:(0,t.jsx)(e6.DndContext,{sensors:y,onDragEnd:e=>{let{active:t,over:s}=e;s&&t.id!==s.id&&f(e=>{let a=e.indexOf(String(t.id)),r=e.indexOf(String(s.id));return -1===a||-1===r?e:(o?.ref&&n?.slug&&c({action:"home_section_rows_moved",properties:{section_moved:String(t.id),old_position:a,new_position:r},groups:{project:o.ref,organization:n.slug}}),(0,e8.arrayMove)(e,a,r))})},children:(0,t.jsx)(e8.SortableContext,{items:p.filter(e=>"getting-started"!==e||"hidden"!==g),strategy:e8.verticalListSortingStrategy,children:p.map(e=>s.IS_PLATFORM&&"usage"===e?(0,t.jsx)("div",{className:(0,W.cn)(x&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(te,{id:e,children:(0,t.jsx)(b,{})})},e):"getting-started"===e&&!u&&o&&"hidden"!==g?(0,t.jsx)(te,{id:e,children:(0,t.jsx)(sf,{value:g,onChange:j})},e):"advisor"===e?(0,t.jsx)("div",{className:(0,W.cn)(x&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(te,{id:e,children:(0,t.jsx)(tO,{showEmptyState:x})})},e):"custom-report"===e?(0,t.jsx)("div",{className:(0,W.cn)(x&&"opacity-60 pointer-events-none"),children:(0,t.jsx)(te,{id:e,children:(0,t.jsx)(t8,{})})},e):void 0)})})})})]})};var sv=e.i(448710),sN=e.i(825713),s_=e.i(125509),sS=e.i(761755);let sw=()=>{let e=(0,sS.usePHFlag)("homeNew"),a="new-home"===e;return((0,s_.useTrackExperimentExposure)("home_new",s.IS_PLATFORM?e:void 0),a)?(0,t.jsx)(sy,{}):(0,t.jsx)(e3,{})};sw.getLayout=e=>(0,t.jsx)(sv.default,{children:(0,t.jsx)(sN.ProjectLayoutWithAuth,{children:e})}),e.s(["default",0,sw],421778)},451283,(e,t,s)=>{let a="/project/[ref]";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(421778)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})}]);

//# debugId=4fafd2a2-cf73-055e-cb0b-103223356984
//# sourceMappingURL=a165453a9c8ee8fd.js.map