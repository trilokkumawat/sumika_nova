;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="27691f0d-f8c7-cb06-4bab-6f3a198d96b3")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,500691,(e,t,n)=>{"use strict";var r=e.r(389959),o=e.r(605988),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,l=r.useRef,s=r.useEffect,d=r.useMemo,u=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var c=l(null);if(null===c.current){var h={hasValue:!1,value:null};c.current=h}else h=c.current;var f=i(e,(c=d(function(){function e(e){if(!s){if(s=!0,i=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return l=t}return l=e}if(t=l,a(i,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(i=e,l=n)}var i,l,s=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,n,r,o]))[0],c[1]);return s(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},260152,(e,t,n)=>{"use strict";t.exports=e.r(500691)},535487,699797,112304,264903,351299,e=>{"use strict";e.i(869176);var t,n,r,o,a,i,l,s,d,u,c,h,f,g,p=e.i(389959);function m(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=m(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}e.s(["default",()=>m],699797);var y=e.i(260152);let v={get url(){return`file://${e.P("node_modules/.pnpm/zustand@4.4.7_@types+react@18.3.3_immer@10.1.1_react@18.3.1/node_modules/zustand/esm/vanilla.mjs")}`}},b=e=>{let t,n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,a={setState:r,getState:o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(v.env?v.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,o,a),a},{useDebugValue:w}=p.default,{useSyncExternalStoreWithSelector:E}=y.default;function x(e,t=e.getState,n){let r=E(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return w(r),r}let S=(e,t)=>{let n=e?b(e):b,r=(e,r=t)=>x(n,e,r);return Object.assign(r,n),r};function k(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}e.s(["shallow",()=>k],112304),e.i(93591);var M=e.i(990275),N=e.i(241603),C=e.i(30834),O=e.i(711147),P=e.i(673603),_=e.i(471852),A=e.i(706459);let R=e=>()=>e;function L(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:l,dx:s,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}function D(e){return!e.ctrlKey&&!e.button}function I(){return this.parentNode}function $(e,t){return null==t?{x:e.x,y:e.y}:t}function z(){return navigator.maxTouchPoints||"ontouchstart"in this}L.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var B=e.i(971131);let T=(0,p.createContext)(null),j=T.Provider,H="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function F(e,t){let n=(0,p.useContext)(T);if(null===n)throw Error(H);return x(n,e,t)}let V=()=>{let e=(0,p.useContext)(T);if(null===e)throw Error(H);return(0,p.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},K=e=>e.userSelectionActive?"none":"all";function G({position:e,children:t,className:n,style:r,...o}){let a=F(K),i=`${e}`.split("-");return p.default.createElement("div",{className:m(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o},t)}function U({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:p.default.createElement(G,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},p.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var W=(0,p.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:s,className:d,...u})=>{let c=(0,p.useRef)(null),[h,f]=(0,p.useState)({x:0,y:0,width:0,height:0}),g=m(["react-flow__edge-textwrapper",d]);return((0,p.useEffect)(()=>{if(c.current){let e=c.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),void 0!==n&&n)?p.default.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...u},o&&p.default.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),p.default.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:c,style:r},n),s):null});let X=e=>({width:e.offsetWidth,height:e.offsetHeight}),Y=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Z=(e={x:0,y:0},t)=>({x:Y(e.x,t[0][0],t[1][0]),y:Y(e.y,t[0][1],t[1][1])}),q=(e,t,n)=>e<t?Y(Math.abs(e-t),1,50)/50:e>n?-Y(Math.abs(e-n),1,50)/50:0,Q=(e,t)=>[20*q(e.x,35,t.width-35),20*q(e.y,35,t.height-35)],J=e=>e.getRootNode?.()||window?.document,ee=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),et=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),en=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),er=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),eo=(e,t)=>en(ee(et(e),et(t))),ea=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),ei=e=>!isNaN(e)&&isFinite(e),el=Symbol.for("internals"),es=["Enter"," ","Escape"],ed=(e,t)=>{};function eu(e){let t="nativeEvent"in e?e.nativeEvent:e,n=t.composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}let ec=(e,t)=>{let n="clientX"in e,r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},eh=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,ef=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:d,style:u,markerEnd:c,markerStart:h,interactionWidth:f=20})=>p.default.createElement(p.default.Fragment,null,p.default.createElement("path",{id:e,style:u,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:c,markerStart:h}),f&&p.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),o&&ei(n)&&ei(r)?p.default.createElement(W,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:d}):null);function eg(e,t,n){return void 0===n?n:r=>{let o=t().edges.find(t=>t.id===e);o&&n(r,{...o})}}function ep({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,a=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+a:r-a,o,a]}function em({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:l}){let s=.125*e+.375*o+.375*i+.125*n,d=.125*t+.375*a+.375*l+.125*r,u=Math.abs(s-e),c=Math.abs(d-t);return[s,d,u,c]}function ey({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===f.Left||e===f.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function ev({sourceX:e,sourceY:t,sourcePosition:n=f.Bottom,targetX:r,targetY:o,targetPosition:a=f.Top}){let[i,l]=ey({pos:n,x1:e,y1:t,x2:r,y2:o}),[s,d]=ey({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,c,h,g]=em({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:l,targetControlX:s,targetControlY:d});return[`M${e},${t} C${i},${l} ${s},${d} ${r},${o}`,u,c,h,g]}ef.displayName="BaseEdge",(t=s||(s={})).Strict="strict",t.Loose="loose",(n=d||(d={})).Free="free",n.Vertical="vertical",n.Horizontal="horizontal",(r=u||(u={})).Partial="partial",r.Full="full",(o=c||(c={})).Bezier="default",o.Straight="straight",o.Step="step",o.SmoothStep="smoothstep",o.SimpleBezier="simplebezier",(a=h||(h={})).Arrow="arrow",a.ArrowClosed="arrowclosed",(i=f||(f={})).Left="left",i.Top="top",i.Right="right",i.Bottom="bottom";let eb=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=f.Bottom,targetPosition:a=f.Top,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:g,markerStart:m,interactionWidth:y})=>{let[v,b,w]=ev({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:a});return p.default.createElement(ef,{path:v,labelX:b,labelY:w,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:g,markerStart:m,interactionWidth:y})});eb.displayName="SimpleBezierEdge";let ew={[f.Left]:{x:-1,y:0},[f.Right]:{x:1,y:0},[f.Top]:{x:0,y:-1},[f.Bottom]:{x:0,y:1}},eE=({source:e,sourcePosition:t=f.Bottom,target:n})=>t===f.Left||t===f.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ex=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eS({sourceX:e,sourceY:t,sourcePosition:n=f.Bottom,targetX:r,targetY:o,targetPosition:a=f.Top,borderRadius:i=5,centerX:l,centerY:s,offset:d=20}){let[u,c,h,g,p]=function({source:e,sourcePosition:t=f.Bottom,target:n,targetPosition:r=f.Top,center:o,offset:a}){let i,l,s=ew[t],d=ew[r],u={x:e.x+s.x*a,y:e.y+s.y*a},c={x:n.x+d.x*a,y:n.y+d.y*a},h=eE({source:u,sourcePosition:t,target:c}),g=0!==h.x?"x":"y",p=h[g],m=[],y={x:0,y:0},v={x:0,y:0},[b,w,E,x]=ep({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[g]*d[g]==-1){i=o.x||b,l=o.y||w;let e=[{x:i,y:u.y},{x:i,y:c.y}],t=[{x:u.x,y:l},{x:c.x,y:l}];m=s[g]===p?"x"===g?e:t:"x"===g?t:e}else{let o=[{x:u.x,y:c.y}],h=[{x:c.x,y:u.y}];if(m="x"===g?s.x===p?h:o:s.y===p?o:h,t===r){let t=Math.abs(e[g]-n[g]);if(t<=a){let r=Math.min(a-1,a-t);s[g]===p?y[g]=(u[g]>e[g]?-1:1)*r:v[g]=(c[g]>n[g]?-1:1)*r}}if(t!==r){let e="x"===g?"y":"x",t=s[g]===d[e],n=u[e]>c[e],r=u[e]<c[e];(1===s[g]&&(!t&&n||t&&r)||1!==s[g]&&(!t&&r||t&&n))&&(m="x"===g?o:h)}let f={x:u.x+y.x,y:u.y+y.y},b={x:c.x+v.x,y:c.y+v.y};Math.max(Math.abs(f.x-m[0].x),Math.abs(b.x-m[0].x))>=Math.max(Math.abs(f.y-m[0].y),Math.abs(b.y-m[0].y))?(i=(f.x+b.x)/2,l=m[0].y):(i=m[0].x,l=(f.y+b.y)/2)}return[[e,{x:u.x+y.x,y:u.y+y.y},...m,{x:c.x+v.x,y:c.y+v.y},n],i,l,E,x]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:l,y:s},offset:d});return[u.reduce((e,t,n)=>e+(n>0&&n<u.length-1?function(e,t,n,r){let o=Math.min(ex(e,t)/2,ex(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+o*t},${i}Q ${a},${i} ${a},${i+o*r}`}let l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${a},${i+o*s}Q ${a},${i} ${a+o*l},${i}`}(u[n-1],t,u[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`),""),c,h,g,p]}let ek=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:d,style:u,sourcePosition:c=f.Bottom,targetPosition:h=f.Top,markerEnd:g,markerStart:m,pathOptions:y,interactionWidth:v})=>{let[b,w,E]=eS({sourceX:e,sourceY:t,sourcePosition:c,targetX:n,targetY:r,targetPosition:h,borderRadius:y?.borderRadius,offset:y?.offset});return p.default.createElement(ef,{path:b,labelX:w,labelY:E,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:d,style:u,markerEnd:g,markerStart:m,interactionWidth:v})});ek.displayName="SmoothStepEdge";let eM=(0,p.memo)(e=>p.default.createElement(ek,{...e,pathOptions:(0,p.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));eM.displayName="StepEdge";let eN=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:d,style:u,markerEnd:c,markerStart:h,interactionWidth:f})=>{let[g,m,y]=function({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,a,i,l]=ep({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,l]}({sourceX:e,sourceY:t,targetX:n,targetY:r});return p.default.createElement(ef,{path:g,labelX:m,labelY:y,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:d,style:u,markerEnd:c,markerStart:h,interactionWidth:f})});function eC(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function eO({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case f.Left:return[t-eC(t-r,a),n];case f.Right:return[t+eC(r-t,a),n];case f.Top:return[t,n-eC(n-o,a)];case f.Bottom:return[t,n+eC(o-n,a)]}}function eP({sourceX:e,sourceY:t,sourcePosition:n=f.Bottom,targetX:r,targetY:o,targetPosition:a=f.Top,curvature:i=.25}){let[l,s]=eO({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[d,u]=eO({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[c,h,g,p]=em({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:s,targetControlX:d,targetControlY:u});return[`M${e},${t} C${l},${s} ${d},${u} ${r},${o}`,c,h,g,p]}eN.displayName="StraightEdge";let e_=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=f.Bottom,targetPosition:a=f.Top,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:g,markerStart:m,pathOptions:y,interactionWidth:v})=>{let[b,w,E]=eP({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:a,curvature:y?.curvature});return p.default.createElement(ef,{path:b,labelX:w,labelY:E,label:i,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:h,markerEnd:g,markerStart:m,interactionWidth:v})});e_.displayName="BezierEdge";let eA=(0,p.createContext)(null),eR=eA.Provider;eA.Consumer;let eL=(e,t)=>{if(void 0===e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`},eD=({x:e,y:t},[n,r,o],a,[i,l])=>{let s={x:(e-n)/o,y:(t-r)/o};return a?{x:i*Math.round(s.x/i),y:l*Math.round(s.y/l)}:s},eI=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),e$=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},ez=(e,t=[0,0])=>0===e.length?{x:0,y:0,width:0,height:0}:en(e.reduce((e,n)=>{let{x:r,y:o}=e$(n,t).positionAbsolute;return ee(e,et({x:r,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),eB=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1,l=[0,0])=>{let s={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},d=[];return e.forEach(e=>{let{width:t,height:n,selectable:r=!0,hidden:o=!1}=e;if(i&&!r||o)return!1;let{positionAbsolute:u}=e$(e,l),c=ea(s,{x:u.x,y:u.y,width:t||0,height:n||0}),h=void 0===t||void 0===n||null===t||null===n,f=(t||0)*(n||0);(h||a&&c>0||c>=f||e.dragging)&&d.push(e)}),d},eT=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},ej=(e,t,n,r,o,a=.1)=>{let i=Y(Math.min(t/(e.width*(1+a)),n/(e.height*(1+a))),r,o);return{x:t/2-(e.x+e.width/2)*i,y:n/2-(e.y+e.height/2)*i,zoom:i}},eH=(e,t=0)=>e.transition().duration(t);function eF(e,t,n,r){return(t[n]||[]).reduce((t,o)=>(`${e.id}-${o.id}-${n}`!==r&&t.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),t),[])}let eV={source:null,target:null,sourceHandle:null,targetHandle:null},eK=()=>({handleDomNode:null,isValid:!1,connection:eV,endHandle:null});function eG(e,t,n,r,o,a,i){let l="target"===o,d=i.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...eK(),handleDomNode:d};if(d){let e=eU(void 0,d),o=d.getAttribute("data-nodeid"),i=d.getAttribute("data-handleid"),c=d.classList.contains("connectable"),h=d.classList.contains("connectableend"),f={source:l?o:n,sourceHandle:l?i:r,target:l?n:o,targetHandle:l?r:i};u.connection=f,c&&h&&(t===s.Strict?l&&"source"===e||!l&&"target"===e:o!==n||i!==r)&&(u.endHandle={nodeId:o,handleId:i,type:e},u.isValid=a(f))}return u}function eU(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}function eW(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function eX({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:a,setState:i,isValidConnection:l,edgeUpdaterType:s,onEdgeUpdateEnd:d}){let u,c,h=J(e.target),{connectionMode:f,domNode:g,autoPanOnConnect:p,connectionRadius:m,onConnectStart:y,panBy:v,getNodes:b,cancelConnection:w}=a(),E=0,{x,y:S}=ec(e),k=eU(s,h?.elementFromPoint(x,S)),M=g?.getBoundingClientRect();if(!M||!k)return;let N=ec(e,M),C=!1,O=null,P=!1,_=null,A=function({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,o)=>{if(o[el]){let{handleBounds:a}=o[el],i=[],l=[];a&&(i=eF(o,a,"source",`${t}-${n}-${r}`),l=eF(o,a,"target",`${t}-${n}-${r}`)),e.push(...i,...l)}return e},[])}({nodes:b(),nodeId:n,handleId:t,handleType:k}),R=()=>{if(!p)return;let[e,t]=Q(N,M);v({x:e,y:t}),E=requestAnimationFrame(R)};function L(e){var r,s;let d,{transform:g}=a();N=ec(e,M);let{handle:p,validHandleResult:y}=function(e,t,n,r,o,a){let{x:i,y:l}=ec(e),s=t.elementsFromPoint(i,l).find(e=>e.classList.contains("react-flow__handle"));if(s){let e=s.getAttribute("data-nodeid");if(e){let t=eU(void 0,s),r=s.getAttribute("data-handleid"),i=a({nodeId:e,id:r,type:t});if(i){let a=o.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:a?.x||n.x,y:a?.y||n.y},validHandleResult:i}}}}let d=[],u=1/0;if(o.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){let n=a(e);t<=u&&(t<u?d=[{handle:e,validHandleResult:n}]:t===u&&d.push({handle:e,validHandleResult:n}),u=t)}}),!d.length)return{handle:null,validHandleResult:eK()};if(1===d.length)return d[0];let c=d.some(({validHandleResult:e})=>e.isValid),h=d.some(({handle:e})=>"target"===e.type);return d.find(({handle:e,validHandleResult:t})=>h?"target"===e.type:!c||t.isValid)||d[0]}(e,h,eD(N,g,!1,[1,1]),m,A,e=>eG(e,f,n,t,o?"target":"source",l,h));if(u=p,C||(R(),C=!0),_=y.handleDomNode,O=y.connection,P=y.isValid,i({connectionPosition:u&&P?eI({x:u.x,y:u.y},g):N,connectionStatus:(r=!!u,d=null,(s=P)?d="valid":r&&!s&&(d="invalid"),d),connectionEndHandle:y.endHandle}),!u&&!P&&!_)return eW(c);O.source!==O.target&&_&&(eW(c),c=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",P),_.classList.toggle("react-flow__handle-valid",P))}function D(e){(u||_)&&O&&P&&r?.(O),a().onConnectEnd?.(e),s&&d?.(e),eW(c),w(),cancelAnimationFrame(E),C=!1,P=!1,O=null,_=null,h.removeEventListener("mousemove",L),h.removeEventListener("mouseup",D),h.removeEventListener("touchmove",L),h.removeEventListener("touchend",D)}i({connectionPosition:N,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:n,handleId:t,type:k},connectionEndHandle:null}),y?.(e,{nodeId:n,handleId:t,handleType:k}),h.addEventListener("mousemove",L),h.addEventListener("mouseup",D),h.addEventListener("touchmove",L),h.addEventListener("touchend",D)}let eY=()=>!0,eZ=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),eq=(0,p.forwardRef)(({type:e="source",position:t=f.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:l,children:s,className:d,onMouseDown:u,onTouchStart:c,...h},g)=>{let y=i||null,v="target"===e,b=V(),w=(0,p.useContext)(eA),{connectOnClick:E,noPanClassName:x}=F(eZ,k),{connecting:S,clickConnecting:M}=F(t=>{let{connectionStartHandle:n,connectionEndHandle:r,connectionClickStartHandle:o}=t;return{connecting:n?.nodeId===w&&n?.handleId===y&&n?.type===e||r?.nodeId===w&&r?.handleId===y&&r?.type===e,clickConnecting:o?.nodeId===w&&o?.handleId===y&&o?.type===e}},k);w||b.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let N=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=b.getState(),o={...t,...e};if(r){let{edges:e,setEdges:t}=b.getState();t(((e,t)=>{let n,r;return e.source&&e.target?(r=n="id"in e&&"source"in e&&"target"in e?{...e}:{...e,id:(({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`)(e)},t.some(e=>e.source===r.source&&e.target===r.target&&(e.sourceHandle===r.sourceHandle||!e.sourceHandle&&!r.sourceHandle)&&(e.targetHandle===r.targetHandle||!e.targetHandle&&!r.targetHandle)))?t:t.concat(n):(ed("006","Can't create edge. An edge needs a source and a target."),t)})(o,e))}n?.(o),l?.(o)},C=e=>{if(!w)return;let t="clientX"in e;o&&(t&&0===e.button||!t)&&eX({event:e,handleId:y,nodeId:w,onConnect:N,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||eY}),t?u?.(e):c?.(e)};return p.default.createElement("div",{"data-handleid":y,"data-nodeid":w,"data-handlepos":t,"data-id":`${w}-${y}-${e}`,className:m(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,d,{source:!v,target:v,connectable:r,connectablestart:o,connectableend:a,connecting:M,connectionindicator:r&&(o&&!S||a&&S)}]),onMouseDown:C,onTouchStart:C,onClick:E?t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:i,connectionMode:l,isValidConnection:s}=b.getState();if(!w||!i&&!o)return;if(!i){r?.(t,{nodeId:w,handleId:y,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:w,type:e,handleId:y}});return}let d=J(t.target),u=n||s||eY,{connection:c,isValid:h}=eG({nodeId:w,id:y,type:e},l,i.nodeId,i.handleId||null,i.type,u,d);h&&N(c),a?.(t),b.setState({connectionClickStartHandle:null})}:void 0,ref:g,...h},s)});eq.displayName="Handle";var eQ=(0,p.memo)(eq);let eJ=({data:e,isConnectable:t,targetPosition:n=f.Top,sourcePosition:r=f.Bottom})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(eQ,{type:"target",position:n,isConnectable:t}),e?.label,p.default.createElement(eQ,{type:"source",position:r,isConnectable:t}));eJ.displayName="DefaultNode";var e0=(0,p.memo)(eJ);let e1=({data:e,isConnectable:t,sourcePosition:n=f.Bottom})=>p.default.createElement(p.default.Fragment,null,e?.label,p.default.createElement(eQ,{type:"source",position:n,isConnectable:t}));e1.displayName="InputNode";var e2=(0,p.memo)(e1);let e8=({data:e,isConnectable:t,targetPosition:n=f.Top})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(eQ,{type:"target",position:n,isConnectable:t}),e?.label);e8.displayName="OutputNode";var e3=(0,p.memo)(e8);let e4=()=>null;e4.displayName="GroupNode";let e5=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected)}),e6=e=>e.id;function e9(e,t){return k(e.selectedNodes.map(e6),t.selectedNodes.map(e6))&&k(e.selectedEdges.map(e6),t.selectedEdges.map(e6))}let e7=(0,p.memo)(({onSelectionChange:e})=>{let t=V(),{selectedNodes:n,selectedEdges:r}=F(e5,e9);return(0,p.useEffect)(()=>{let o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChange.forEach(e=>e(o))},[n,r,e]),null});e7.displayName="SelectionListener";let te=e=>!!e.onSelectionChange;function tt({onSelectionChange:e}){let t=F(te);return e||t?p.default.createElement(e7,{onSelectionChange:e}):null}let tn=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function tr(e,t){(0,p.useEffect)(()=>{void 0!==e&&t(e)},[e])}function to(e,t,n){(0,p.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}let ta=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:a,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:s,nodesDraggable:d,nodesConnectable:u,nodesFocusable:c,edgesFocusable:h,edgesUpdatable:f,elevateNodesOnSelect:g,minZoom:m,maxZoom:y,nodeExtent:v,onNodesChange:b,onEdgesChange:w,elementsSelectable:E,connectionMode:x,snapGrid:S,snapToGrid:M,translateExtent:N,connectOnClick:C,defaultEdgeOptions:O,fitView:P,fitViewOptions:_,onNodesDelete:A,onEdgesDelete:R,onNodeDrag:L,onNodeDragStart:D,onNodeDragStop:I,onSelectionDrag:$,onSelectionDragStart:z,onSelectionDragStop:B,noPanClassName:T,nodeOrigin:j,rfId:H,autoPanOnConnect:K,autoPanOnNodeDrag:G,onError:U,connectionRadius:W,isValidConnection:X,nodeDragThreshold:Y})=>{let{setNodes:Z,setEdges:q,setDefaultNodesAndEdges:Q,setMinZoom:J,setMaxZoom:ee,setTranslateExtent:et,setNodeExtent:en,reset:er}=F(tn,k),eo=V();return(0,p.useEffect)(()=>(Q(n,r?.map(e=>({...e,...O}))),()=>{er()}),[]),to("defaultEdgeOptions",O,eo.setState),to("connectionMode",x,eo.setState),to("onConnect",o,eo.setState),to("onConnectStart",a,eo.setState),to("onConnectEnd",i,eo.setState),to("onClickConnectStart",l,eo.setState),to("onClickConnectEnd",s,eo.setState),to("nodesDraggable",d,eo.setState),to("nodesConnectable",u,eo.setState),to("nodesFocusable",c,eo.setState),to("edgesFocusable",h,eo.setState),to("edgesUpdatable",f,eo.setState),to("elementsSelectable",E,eo.setState),to("elevateNodesOnSelect",g,eo.setState),to("snapToGrid",M,eo.setState),to("snapGrid",S,eo.setState),to("onNodesChange",b,eo.setState),to("onEdgesChange",w,eo.setState),to("connectOnClick",C,eo.setState),to("fitViewOnInit",P,eo.setState),to("fitViewOnInitOptions",_,eo.setState),to("onNodesDelete",A,eo.setState),to("onEdgesDelete",R,eo.setState),to("onNodeDrag",L,eo.setState),to("onNodeDragStart",D,eo.setState),to("onNodeDragStop",I,eo.setState),to("onSelectionDrag",$,eo.setState),to("onSelectionDragStart",z,eo.setState),to("onSelectionDragStop",B,eo.setState),to("noPanClassName",T,eo.setState),to("nodeOrigin",j,eo.setState),to("rfId",H,eo.setState),to("autoPanOnConnect",K,eo.setState),to("autoPanOnNodeDrag",G,eo.setState),to("onError",U,eo.setState),to("connectionRadius",W,eo.setState),to("isValidConnection",X,eo.setState),to("nodeDragThreshold",Y,eo.setState),tr(e,Z),tr(t,q),tr(m,J),tr(y,ee),tr(N,et),tr(v,en),null},ti={display:"none"},tl={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ts="react-flow__node-desc",td="react-flow__edge-desc",tu=e=>e.ariaLiveMessage;function tc({rfId:e}){let t=F(tu);return p.default.createElement("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:tl},t)}function th({rfId:e,disableKeyboardA11y:t}){return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{id:`${ts}-${e}`,style:ti},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),p.default.createElement("div",{id:`${td}-${e}`,style:ti},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&p.default.createElement(tc,{rfId:e}))}var tf=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,p.useState)(!1),o=(0,p.useRef)(!1),a=(0,p.useRef)(new Set([])),[i,l]=(0,p.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,p.useEffect)(()=>{let n="undefined"!=typeof document?document:null,s=t?.target||n;if(null!==e){let e=e=>{if(o.current=e.ctrlKey||e.metaKey||e.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&eu(e))return!1;let n=tp(e.code,l);a.current.add(e[n]),tg(i,a.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&eu(e))return!1;let n=tp(e.code,l);tg(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[n]),"Meta"===e.key&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return s?.addEventListener("keydown",e),s?.addEventListener("keyup",n),window.addEventListener("blur",d),()=>{s?.removeEventListener("keydown",e),s?.removeEventListener("keyup",n),window.removeEventListener("blur",d)}}},[e,r]),n};function tg(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function tp(e,t){return t.includes(e)?"code":"key"}function tm(e,t,n){e.forEach(r=>{if(r.parentNode&&!e.has(r.parentNode))throw Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n?.[r.id]){let{x:o,y:a,z:i}=function e(t,n,r,o){if(!t.parentNode)return r;let a=n.get(t.parentNode),i=e$(a,o);return e(a,n,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(a[el]?.z??0)>(r.z??0)?a[el]?.z??0:r.z??0},o)}(r,e,{...r.position,z:r[el]?.z??0},t);r.positionAbsolute={x:o,y:a},r[el].z=i,n?.[r.id]&&(r[el].isParent=!0)}})}function ty(e,t,n,r){let o=new Map,a={},i=1e3*!!r;return e.forEach(e=>{let n=(ei(e.zIndex)?e.zIndex:0)+(e.selected?i:0),r=t.get(e.id),l={width:r?.width,height:r?.height,...e,positionAbsolute:{x:e.position.x,y:e.position.y}};e.parentNode&&(l.parentNode=e.parentNode,a[e.parentNode]=!0),Object.defineProperty(l,el,{enumerable:!1,value:{handleBounds:r?.[el]?.handleBounds,z:n}}),o.set(e.id,l)}),tm(o,n,a),o}function tv(e,t={}){let{getNodes:n,width:r,height:o,minZoom:a,maxZoom:i,d3Zoom:l,d3Selection:s,fitViewOnInitDone:d,fitViewOnInit:u,nodeOrigin:c}=e(),h=t.initial&&!d&&u;if(l&&s&&(h||!t.initial)){let e=n().filter(e=>{let n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),d=e.every(e=>e.width&&e.height);if(e.length>0&&d){let{x:n,y:d,zoom:u}=ej(ez(e,c),r,o,t.minZoom??a,t.maxZoom??i,t.padding??.1),h=M.zoomIdentity.translate(n,d).scale(u);return"number"==typeof t.duration&&t.duration>0?l.transform(eH(s,t.duration),h):l.transform(s,h),!0}}return!1}function tb({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:o,edges:a,onNodesChange:i,onEdgesChange:l,hasDefaultNodes:s,hasDefaultEdges:d}=n();e?.length&&(s&&r({nodeInternals:(e.forEach(e=>{let t=o.get(e.id);t&&o.set(t.id,{...t,[el]:t[el],selected:e.selected})}),new Map(o))}),i?.(e)),t?.length&&(d&&r({edges:a.map(e=>{let n=t.find(t=>t.id===e.id);return n&&(e.selected=n.selected),e})}),l?.(t))}let tw=()=>{},tE={zoomIn:tw,zoomOut:tw,zoomTo:tw,getZoom:()=>1,setViewport:tw,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:tw,fitBounds:tw,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},tx=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function tS(){let e=(()=>{let e=V(),{d3Zoom:t,d3Selection:n}=F(tx,k);return(0,p.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(eH(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(eH(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(eH(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{let[a,i,l]=e.getState().transform,s=M.zoomIdentity.translate(r.x??a,r.y??i).scale(r.zoom??l);t.transform(eH(n,o?.duration),s)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>tv(e.getState,t),setCenter:(r,o,a)=>{let{width:i,height:l,maxZoom:s}=e.getState(),d=void 0!==a?.zoom?a.zoom:s,u=i/2-r*d,c=l/2-o*d,h=M.zoomIdentity.translate(u,c).scale(d);t.transform(eH(n,a?.duration),h)},fitBounds:(r,o)=>{let{width:a,height:i,minZoom:l,maxZoom:s}=e.getState(),{x:d,y:u,zoom:c}=ej(r,a,i,l,s,o?.padding??.1),h=M.zoomIdentity.translate(d,u).scale(c);t.transform(eH(n,o?.duration),h)},project:t=>{let{transform:n,snapToGrid:r,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),eD(t,n,r,o)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;let{x:i,y:l}=a.getBoundingClientRect();return eD({x:t.x-i,y:t.y-l},n,r,o)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:o,y:a}=r.getBoundingClientRect(),i=eI(t,n);return{x:i.x+o,y:i.y+a}},viewportInitialized:!0}:tE,[t,n])})(),t=V(),n=(0,p.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),r=(0,p.useCallback)(e=>t.getState().nodeInternals.get(e),[]),o=(0,p.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),a=(0,p.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),i=(0,p.useCallback)(e=>{let{getNodes:n,setNodes:r,hasDefaultNodes:o,onNodesChange:a}=t.getState(),i=n(),l="function"==typeof e?e(i):e;o?r(l):a&&a(0===l.length?i.map(e=>({type:"remove",id:e.id})):l.map(e=>({item:e,type:"reset"})))},[]),l=(0,p.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:a}=t.getState(),i="function"==typeof e?e(n):e;o?r(i):a&&a(0===i.length?n.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))},[]),s=(0,p.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:o,hasDefaultNodes:a,onNodesChange:i}=t.getState();a?o([...r(),...n]):i&&i(n.map(e=>({item:e,type:"add"})))},[]),d=(0,p.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:o,hasDefaultEdges:a,onEdgesChange:i}=t.getState();a?o([...r,...n]):i&&i(n.map(e=>({item:e,type:"add"})))},[]),u=(0,p.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:r}=t.getState(),[o,a,i]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:a,zoom:i}}},[]),c=(0,p.useCallback)(({nodes:e,edges:n})=>{let{nodeInternals:r,getNodes:o,edges:a,hasDefaultNodes:i,hasDefaultEdges:l,onNodesDelete:s,onEdgesDelete:d,onNodesChange:u,onEdgesChange:c}=t.getState(),h=(e||[]).map(e=>e.id),f=(n||[]).map(e=>e.id),g=o().reduce((e,t)=>{let n=!h.includes(t.id)&&t.parentNode&&e.find(e=>e.id===t.parentNode);return("boolean"!=typeof t.deletable||t.deletable)&&(h.includes(t.id)||n)&&e.push(t),e},[]),p=a.filter(e=>"boolean"!=typeof e.deletable||e.deletable),m=p.filter(e=>f.includes(e.id));if(g||m){let e=[...m,...eT(g,p)],n=e.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(l||i)&&(l&&t.setState({edges:a.filter(e=>!n.includes(e.id))}),i&&(g.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),n.length>0&&(d?.(e),c&&c(n.map(e=>({id:e,type:"remove"})))),g.length>0&&(s?.(g),u&&u(g.map(e=>({id:e.id,type:"remove"}))))}},[]),h=(0,p.useCallback)(e=>{let n=ei(e.width)&&ei(e.height)&&ei(e.x)&&ei(e.y),r=n?null:t.getState().nodeInternals.get(e.id);return[n?e:er(r),r,n]},[]),f=(0,p.useCallback)((e,n=!0,r)=>{let[o,a,i]=h(e);return o?(r||t.getState().getNodes()).filter(e=>{if(!i&&(e.id===a.id||!e.positionAbsolute))return!1;let t=ea(er(e),o);return n&&t>0||t>=o.width*o.height}):[]},[]),g=(0,p.useCallback)((e,t,n=!0)=>{let[r]=h(e);if(!r)return!1;let o=ea(r,t);return n&&o>0||o>=r.width*r.height},[]);return(0,p.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:a,setNodes:i,setEdges:l,addNodes:s,addEdges:d,toObject:u,deleteElements:c,getIntersectingNodes:f,isNodeIntersecting:g}),[e,n,r,o,a,i,l,s,d,u,c,f,g])}let tk={actInsideInputWithModifier:!1},tM={position:"absolute",width:"100%",height:"100%",top:0,left:0},tN=e=>({x:e.x,y:e.y,zoom:e.k}),tC=(e,t)=>e.target.closest(`.${t}`),tO=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),tP=e=>{let t=e.ctrlKey&&eh()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},t_=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),tA=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:s=d.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:h=!0,defaultViewport:f,translateExtent:g,minZoom:m,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:b=!0,children:w,noWheelClassName:E,noPanClassName:x})=>{let S,P=(0,p.useRef)(),_=V(),A=(0,p.useRef)(!1),R=(0,p.useRef)(!1),L=(0,p.useRef)(null),D=(0,p.useRef)({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:$,d3ZoomHandler:z,userSelectionActive:B}=F(t_,k),T=tf(v),j=(0,p.useRef)(0),H=(0,p.useRef)(!1),K=(0,p.useRef)();return S=V(),(0,p.useEffect)(()=>{let e,t=()=>{if(!L.current)return;let e=X(L.current);(0===e.height||0===e.width)&&S.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),S.setState({width:e.width||500,height:e.height||500})};return t(),window.addEventListener("resize",t),L.current&&(e=new ResizeObserver(()=>t())).observe(L.current),()=>{window.removeEventListener("resize",t),e&&L.current&&e.unobserve(L.current)}},[]),(0,p.useEffect)(()=>{if(L.current){let e=L.current.getBoundingClientRect(),t=(0,N.zoom)().scaleExtent([m,y]).translateExtent(g),n=(0,C.select)(L.current).call(t),r=M.zoomIdentity.translate(f.x,f.y).scale(Y(f.zoom,m,y)),o=[[0,0],[e.width,e.height]],a=t.constrain()(r,o,g);t.transform(n,a),t.wheelDelta(tP),_.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[a.x,a.y,a.k],domNode:L.current.closest(".react-flow")})}},[]),(0,p.useEffect)(()=>{$&&I&&(!i||T||B?void 0!==z&&$.on("wheel.zoom",function(e,t){if(!b||tC(e,E))return null;e.preventDefault(),z.call(this,e,t)},{passive:!1}):$.on("wheel.zoom",r=>{if(tC(r,E))return!1;r.preventDefault(),r.stopImmediatePropagation();let o=$.property("__zoom").k||1,i=eh();if(r.ctrlKey&&a&&i){let e=(0,O.pointer)(r),t=o*Math.pow(2,tP(r));I.scaleTo($,t,e,r);return}let u=1===r.deltaMode?20:1,c=s===d.Vertical?0:r.deltaX*u,h=s===d.Horizontal?0:r.deltaY*u;!i&&r.shiftKey&&s!==d.Vertical&&(c=r.deltaY*u,h=0),I.translateBy($,-(c/o)*l,-(h/o)*l,{internal:!0});let f=tN($.property("__zoom")),{onViewportChangeStart:g,onViewportChange:p,onViewportChangeEnd:m}=_.getState();clearTimeout(K.current),H.current||(H.current=!0,t?.(r,f),g?.(f)),H.current&&(e?.(r,f),p?.(f),K.current=setTimeout(()=>{n?.(r,f),m?.(f),H.current=!1},150))},{passive:!1}))},[B,i,s,$,I,z,T,a,b,E,t,e,n]),(0,p.useEffect)(()=>{I&&I.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;j.current=e.sourceEvent?.button;let{onViewportChangeStart:n}=_.getState(),r=tN(e.transform);A.current=!0,D.current=r,e.sourceEvent?.type==="mousedown"&&_.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[I,t]),(0,p.useEffect)(()=>{I&&(B&&!A.current?I.on("zoom",null):B||I.on("zoom",t=>{let{onViewportChange:n}=_.getState();if(_.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),R.current=!!(r&&tO(h,j.current??0)),(e||n)&&!t.sourceEvent?.internal){let r=tN(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[B,I,e,h,r]),(0,p.useEffect)(()=>{I&&I.on("end",e=>{let t,o;if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:a}=_.getState();if(A.current=!1,_.setState({paneDragging:!1}),r&&tO(h,j.current??0)&&!R.current&&r(e.sourceEvent),R.current=!1,(n||a)&&(t=D.current,o=e.transform,t.x!==o.x||t.y!==o.y||t.zoom!==o.k)){let t=tN(e.transform);D.current=t,clearTimeout(P.current),P.current=setTimeout(()=>{a?.(t),n?.(e.sourceEvent,t)},150*!!i)}})},[I,i,h,n,r]),(0,p.useEffect)(()=>{I&&I.filter(e=>{let t=T||o,n=a&&e.ctrlKey;if((!0===h||Array.isArray(h)&&h.includes(1))&&1===e.button&&"mousedown"===e.type&&(tC(e,"react-flow__node")||tC(e,"react-flow__edge")))return!0;if(!h&&!t&&!i&&!u&&!a||B||!u&&"dblclick"===e.type||tC(e,E)&&"wheel"===e.type||tC(e,x)&&("wheel"!==e.type||i&&"wheel"===e.type&&!T)||!a&&e.ctrlKey&&"wheel"===e.type||!t&&!i&&!n&&"wheel"===e.type||!h&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(h)&&!h.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;let r=Array.isArray(h)&&h.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[B,I,o,a,i,u,h,c,T]),p.default.createElement("div",{className:"react-flow__renderer",ref:L,style:tM},w)},tR=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function tL(){let{userSelectionActive:e,userSelectionRect:t}=F(tR,k);return e&&t?p.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function tD(e,t){let n=e.find(e=>e.id===t.parentNode);if(n){let e=t.position.x+t.width-n.width,r=t.position.y+t.height-n.height;if(e>0||r>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,e>0&&(n.style.width+=e),r>0&&(n.style.height+=r),t.position.x<0){let e=Math.abs(t.position.x);n.position.x=n.position.x-e,n.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);n.position.y=n.position.y-e,n.style.height+=e,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function tI(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);let n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{let r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;let o={...n};for(let e of r)if(e)switch(e.type){case"select":o.selected=e.selected;break;case"position":void 0!==e.position&&(o.position=e.position),void 0!==e.positionAbsolute&&(o.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(o.dragging=e.dragging),o.expandParent&&tD(t,o);break;case"dimensions":void 0!==e.dimensions&&(o.width=e.dimensions.width,o.height=e.dimensions.height),void 0!==e.updateStyle&&(o.style={...o.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(o.resizing=e.resizing),o.expandParent&&tD(t,o);break;case"remove":return t}return t.push(o),t},n)}function t$(e,t){return tI(e,t)}let tz=(e,t)=>({id:e,type:"select",selected:t});function tB(e,t){return e.reduce((e,n)=>{let r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(tz(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(tz(n.id,!1))),e},[])}let tT=(e,t)=>n=>{n.target===t.current&&e?.(n)},tj=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),tH=(0,p.memo)(({isSelecting:e,selectionMode:t=u.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:s,onPaneMouseMove:d,onPaneMouseLeave:c,children:h})=>{let f=(0,p.useRef)(null),g=V(),y=(0,p.useRef)(0),v=(0,p.useRef)(0),b=(0,p.useRef)(),{userSelectionActive:w,elementsSelectable:E,dragging:x}=F(tj,k),S=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),y.current=0,v.current=0},M=e=>{a?.(e),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},N=E&&(e||w);return p.default.createElement("div",{className:m(["react-flow__pane",{dragging:x,selection:e}]),onClick:N?void 0:tT(M,f),onContextMenu:tT(e=>{Array.isArray(n)&&n?.includes(2)?e.preventDefault():i?.(e)},f),onWheel:tT(l?e=>l(e):void 0,f),onMouseEnter:N?void 0:s,onMouseDown:N?t=>{let{resetSelectedElements:n,domNode:o}=g.getState();if(b.current=o?.getBoundingClientRect(),!E||!e||0!==t.button||t.target!==f.current||!b.current)return;let{x:a,y:i}=ec(t,b.current);n(),g.setState({userSelectionRect:{width:0,height:0,startX:a,startY:i,x:a,y:i}}),r?.(t)}:void 0,onMouseMove:N?n=>{let{userSelectionRect:r,nodeInternals:o,edges:a,transform:i,onNodesChange:l,onEdgesChange:s,nodeOrigin:d,getNodes:c}=g.getState();if(!e||!b.current||!r)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});let h=ec(n,b.current),f=r.startX??0,p=r.startY??0,m={...r,x:h.x<f?h.x:f,y:h.y<p?h.y:p,width:Math.abs(h.x-f),height:Math.abs(h.y-p)},w=c(),E=eB(o,m,i,t===u.Partial,!0,d),x=eT(E,a).map(e=>e.id),S=E.map(e=>e.id);if(y.current!==S.length){y.current=S.length;let e=tB(w,S);e.length&&l?.(e)}if(v.current!==x.length){v.current=x.length;let e=tB(a,x);e.length&&s?.(e)}g.setState({userSelectionRect:m})}:d,onMouseUp:N?e=>{if(0!==e.button)return;let{userSelectionRect:t}=g.getState();!w&&t&&e.target===f.current&&M?.(e),g.setState({nodesSelectionActive:y.current>0}),S(),o?.(e)}:void 0,onMouseLeave:N?e=>{w&&(g.setState({nodesSelectionActive:y.current>0}),o?.(e)),S()}:c,ref:f,style:tM},h,p.default.createElement(tL,null))});function tF(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)break;r=r.parentElement}while(r)return!1}function tV(e,t,n,r,o=[0,0],a){var i;let l=(i=e.extent||r)&&"parent"!==i?[i[0],[i[1][0]-(e.width||0),i[1][1]-(e.height||0)]]:i,s=l;if("parent"!==e.extent||e.expandParent){if(e.extent&&e.parentNode&&"parent"!==e.extent){let{x:t,y:r}=e$(n.get(e.parentNode),o).positionAbsolute;s=[[e.extent[0][0]+t,e.extent[0][1]+r],[e.extent[1][0]+t,e.extent[1][1]+r]]}}else if(e.parentNode&&e.width&&e.height){let t=n.get(e.parentNode),{x:r,y:a}=e$(t,o).positionAbsolute;s=t&&ei(r)&&ei(a)&&ei(t.width)&&ei(t.height)?[[r+e.width*o[0],a+e.height*o[1]],[r+t.width-e.width+e.width*o[0],a+t.height-e.height+e.height*o[1]]]:s}else a?.("005","Only child nodes can use a parent extent."),s=l;let d={x:0,y:0};e.parentNode&&(d=e$(n.get(e.parentNode),o).positionAbsolute);let u=s&&"parent"!==s?Z(t,s):t;return{position:{x:u.x-d.x,y:u.y-d.y},positionAbsolute:u}}function tK({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}tH.displayName="Pane";let tG=(e,t,n,r)=>{let o=t.querySelectorAll(e);if(!o||!o.length)return null;let a=Array.from(o),i=t.getBoundingClientRect(),l={x:i.width*r[0],y:i.height*r[1]};return a.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-l.x)/n,y:(t.top-i.top-l.y)/n,...X(e)}})};function tU(e,t,n){return void 0===n?n:r=>{let o=t().nodeInternals.get(e);o&&n(r,{...o})}}function tW({id:e,store:t,unselect:n=!1,nodeRef:r}){let o,{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:l,nodeInternals:s,onError:d}=t.getState(),u=s.get(e);u?(t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&l)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])):d?.("012",(o=e,`Node with id "${o}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function tX(e){return(t,n,r)=>e?.(t,r)}function tY({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,selectNodesOnDrag:i}){let l,s=V(),[d,u]=(0,p.useState)(!1),c=(0,p.useRef)([]),h=(0,p.useRef)({x:null,y:null}),f=(0,p.useRef)(0),g=(0,p.useRef)(null),m=(0,p.useRef)({x:0,y:0}),y=(0,p.useRef)(null),v=(0,p.useRef)(!1),b=(0,p.useRef)(!1),w=(l=V(),(0,p.useCallback)(({sourceEvent:e})=>{let{transform:t,snapGrid:n,snapToGrid:r}=l.getState(),o=e.touches?e.touches[0].clientX:e.clientX,a=e.touches?e.touches[0].clientY:e.clientY,i={x:(o-t[0])/t[2],y:(a-t[1])/t[2]};return{xSnapped:r?n[0]*Math.round(i.x/n[0]):i.x,ySnapped:r?n[1]*Math.round(i.y/n[1]):i.y,...i}},[]));return(0,p.useEffect)(()=>{if(e?.current){let l=(0,C.select)(e.current),d=({x:e,y:t})=>{let{nodeInternals:n,onNodeDrag:r,onSelectionDrag:a,updateNodePositions:i,nodeExtent:l,snapGrid:d,snapToGrid:f,nodeOrigin:g,onError:p}=s.getState();h.current={x:e,y:t};let m=!1,v={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&l&&(v=et(ez(c.current,g))),c.current=c.current.map(r=>{let o={x:e-r.distance.x,y:t-r.distance.y};f&&(o.x=d[0]*Math.round(o.x/d[0]),o.y=d[1]*Math.round(o.y/d[1]));let a=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];c.current.length>1&&l&&!r.extent&&(a[0][0]=r.positionAbsolute.x-v.x+l[0][0],a[1][0]=r.positionAbsolute.x+(r.width??0)-v.x2+l[1][0],a[0][1]=r.positionAbsolute.y-v.y+l[0][1],a[1][1]=r.positionAbsolute.y+(r.height??0)-v.y2+l[1][1]);let i=tV(r,o,n,a,g,p);return m=m||r.position.x!==i.position.x||r.position.y!==i.position.y,r.position=i.position,r.positionAbsolute=i.positionAbsolute,r}),!m)return;i(c.current,!0,!0),u(!0);let b=o?r:tX(a);if(b&&y.current){let[e,t]=tK({nodeId:o,dragItems:c.current,nodeInternals:n});b(y.current,e,t)}},p=()=>{if(!g.current)return;let[e,t]=Q(m.current,g.current);if(0!==e||0!==t){let{transform:n,panBy:r}=s.getState();h.current.x=(h.current.x??0)-e/n[2],h.current.y=(h.current.y??0)-t/n[2],r({x:e,y:t})&&d(h.current)}f.current=requestAnimationFrame(p)},E=t=>{let{nodeInternals:n,multiSelectionActive:r,nodesDraggable:l,unselectNodesAndEdges:d,onNodeDragStart:u,onSelectionDragStart:f}=s.getState();b.current=!0;let g=o?u:tX(f);i&&a||r||!o||n.get(o)?.selected||d(),o&&a&&i&&tW({id:o,store:s,nodeRef:e});let p=w(t);if(h.current=p,c.current=Array.from(n.values()).filter(e=>(e.selected||e.id===o)&&(!e.parentNode||!function e(t,n){if(!t.parentNode)return!1;let r=n.get(t.parentNode);return!!r&&(!!r.selected||e(r,n))}(e,n))&&(e.draggable||l&&void 0===e.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:p.x-(e.positionAbsolute?.x??0),y:p.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode,width:e.width,height:e.height,expandParent:e.expandParent})),g&&c.current){let[e,r]=tK({nodeId:o,dragItems:c.current,nodeInternals:n});g(t.sourceEvent,e,r)}};if(t)l.on(".drag",null);else{let t=(function(){var e,t,n,r,o=D,a=I,i=$,l=z,s={},d=(0,P.dispatch)("start","drag","end"),u=0,c=0;function h(e){e.on("mousedown.drag",f).filter(l).on("touchstart.drag",m).on("touchmove.drag",y,A.nonpassive).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(i,l){if(!r&&o.call(this,i,l)){var s=b(this,a.call(this,i,l),i,l,"mouse");s&&((0,C.select)(i.view).on("mousemove.drag",g,A.nonpassivecapture).on("mouseup.drag",p,A.nonpassivecapture),(0,_.default)(i.view),(0,A.nopropagation)(i),n=!1,e=i.clientX,t=i.clientY,s("start",i))}}function g(r){if((0,A.default)(r),!n){var o=r.clientX-e,a=r.clientY-t;n=o*o+a*a>c}s.mouse("drag",r)}function p(e){(0,C.select)(e.view).on("mousemove.drag mouseup.drag",null),(0,_.yesdrag)(e.view,n),(0,A.default)(e),s.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,i=e.changedTouches,l=a.call(this,e,t),s=i.length;for(n=0;n<s;++n)(r=b(this,l,e,t,i[n].identifier,i[n]))&&((0,A.nopropagation)(e),r("start",e,i[n]))}}function y(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=s[r[t].identifier])&&((0,A.default)(e),n("drag",e,r[t]))}function v(e){var t,n,o=e.changedTouches,a=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=s[o[t].identifier])&&((0,A.nopropagation)(e),n("end",e,o[t]))}function b(e,t,n,r,o,a){var l,c,f,g=d.copy(),p=(0,O.pointer)(a||n,t);if(null!=(f=i.call(e,new L("beforestart",{sourceEvent:n,target:h,identifier:o,active:u,x:p[0],y:p[1],dx:0,dy:0,dispatch:g}),r)))return l=f.x-p[0]||0,c=f.y-p[1]||0,function n(a,i,d){var m,y=p;switch(a){case"start":s[o]=n,m=u++;break;case"end":delete s[o],--u;case"drag":p=(0,O.pointer)(d||i,t),m=u}g.call(a,e,new L(a,{sourceEvent:i,subject:f,target:h,identifier:o,active:m,x:p[0]+l,y:p[1]+c,dx:p[0]-y[0],dy:p[1]-y[1],dispatch:g}),r)}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:R(!!e),h):o},h.container=function(e){return arguments.length?(a="function"==typeof e?e:R(e),h):a},h.subject=function(e){return arguments.length?(i="function"==typeof e?e:R(e),h):i},h.touchable=function(e){return arguments.length?(l="function"==typeof e?e:R(!!e),h):l},h.on=function(){var e=d.on.apply(d,arguments);return e===d?h:e},h.clickDistance=function(e){return arguments.length?(c=(e*=1)*e,h):Math.sqrt(c)},h})().on("start",e=>{let{domNode:t,nodeDragThreshold:n}=s.getState();0===n&&E(e),h.current=w(e),g.current=t?.getBoundingClientRect()||null,m.current=ec(e.sourceEvent,g.current)}).on("drag",e=>{let t=w(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=s.getState();if(!v.current&&b.current&&n&&(v.current=!0,p()),!b.current){let n=t.xSnapped-(h?.current?.x??0),o=t.ySnapped-(h?.current?.y??0);Math.sqrt(n*n+o*o)>r&&E(e)}(h.current.x!==t.xSnapped||h.current.y!==t.ySnapped)&&c.current&&b.current&&(y.current=e.sourceEvent,m.current=ec(e.sourceEvent,g.current),d(t))}).on("end",e=>{if(b.current&&(u(!1),v.current=!1,b.current=!1,cancelAnimationFrame(f.current),c.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:a}=s.getState(),i=o?r:tX(a);if(t(c.current,!1,!1),i){let[t,r]=tK({nodeId:o,dragItems:c.current,nodeInternals:n});i(e.sourceEvent,t,r)}}}).filter(t=>{let o=t.target;return!t.button&&(!n||!tF(o,`.${n}`,e))&&(!r||tF(o,r,e))});return l.call(t),()=>{l.on(".drag",null)}}}},[e,t,n,r,a,s,o,i,w]),d}function tZ(){let e=V();return(0,p.useCallback)(t=>{let{nodeInternals:n,nodeExtent:r,updateNodePositions:o,getNodes:a,snapToGrid:i,snapGrid:l,onError:s,nodesDraggable:d}=e.getState(),u=a().filter(e=>e.selected&&(e.draggable||d&&void 0===e.draggable)),c=i?l[0]:5,h=i?l[1]:5,f=t.isShiftPressed?4:1,g=t.x*c*f,p=t.y*h*f;o(u.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+g,y:e.positionAbsolute.y+p};i&&(t.x=l[0]*Math.round(t.x/l[0]),t.y=l[1]*Math.round(t.y/l[1]));let{positionAbsolute:o,position:a}=tV(e,t,n,r,void 0,s);e.position=a,e.positionAbsolute=o}return e}),!0,!1)},[])}let tq={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var tQ=e=>{let t=({id:t,type:n,data:r,xPos:o,yPos:a,xPosOrigin:i,yPosOrigin:l,selected:s,onClick:d,onMouseEnter:u,onMouseMove:c,onMouseLeave:h,onContextMenu:f,onDoubleClick:g,style:y,className:v,isDraggable:b,isSelectable:w,isConnectable:E,isFocusable:x,selectNodesOnDrag:S,sourcePosition:k,targetPosition:M,hidden:N,resizeObserver:C,dragHandle:O,zIndex:P,isParent:_,noDragClassName:A,noPanClassName:R,initialized:L,disableKeyboardA11y:D,ariaLabel:I,rfId:$})=>{let z=V(),B=(0,p.useRef)(null),T=(0,p.useRef)(k),j=(0,p.useRef)(M),H=(0,p.useRef)(n),F=w||b||d||u||c||h,K=tZ(),G=tU(t,z.getState,u),U=tU(t,z.getState,c),W=tU(t,z.getState,h),X=tU(t,z.getState,f),Y=tU(t,z.getState,g);(0,p.useEffect)(()=>{if(B.current&&!N){let e=B.current;return C?.observe(e),()=>C?.unobserve(e)}},[N]),(0,p.useEffect)(()=>{let e=H.current!==n,r=T.current!==k,o=j.current!==M;B.current&&(e||r||o)&&(e&&(H.current=n),r&&(T.current=k),o&&(j.current=M),z.getState().updateNodeDimensions([{id:t,nodeElement:B.current,forceUpdate:!0}]))},[t,n,k,M]);let Z=tY({nodeRef:B,disabled:N||!b,noDragClassName:A,handleSelector:O,nodeId:t,isSelectable:w,selectNodesOnDrag:S});return N?null:p.default.createElement("div",{className:m(["react-flow__node",`react-flow__node-${n}`,{[R]:b},v,{selected:s,selectable:w,parent:_,dragging:Z}]),ref:B,style:{zIndex:P,transform:`translate(${i}px,${l}px)`,pointerEvents:F?"all":"none",visibility:L?"visible":"hidden",...y},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:G,onMouseMove:U,onMouseLeave:W,onContextMenu:X,onClick:e=>{let{nodeDragThreshold:n}=z.getState();if(w&&(!S||!b||n>0)&&tW({id:t,store:z,nodeRef:B}),d){let n=z.getState().nodeInternals.get(t);n&&d(e,{...n})}},onDoubleClick:Y,onKeyDown:x?e=>{!eu(e)&&(es.includes(e.key)&&w?tW({id:t,store:z,unselect:"Escape"===e.key,nodeRef:B}):!D&&b&&s&&Object.prototype.hasOwnProperty.call(tq,e.key)&&(z.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`}),K({x:tq[e.key].x,y:tq[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:x?0:void 0,role:x?"button":void 0,"aria-describedby":D?void 0:`${ts}-${$}`,"aria-label":I},p.default.createElement(eR,{value:t},p.default.createElement(e,{id:t,data:r,type:n,xPos:o,yPos:a,selected:s,isConnectable:E,sourcePosition:k,targetPosition:M,dragging:Z,dragHandle:O,zIndex:P})))};return t.displayName="NodeWrapper",(0,p.memo)(t)};let tJ=e=>({...ez(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive});var t0=(0,p.memo)(function({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=V(),{width:o,height:a,x:i,y:l,transformString:s,userSelectionActive:d}=F(tJ,k),u=tZ(),c=(0,p.useRef)(null);if((0,p.useEffect)(()=>{n||c.current?.focus({preventScroll:!0})},[n]),tY({nodeRef:c}),d||!o||!a)return null;let h=e?t=>{e(t,r.getState().getNodes().filter(e=>e.selected))}:void 0;return p.default.createElement("div",{className:m(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s}},p.default.createElement("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(tq,e.key)&&u({x:tq[e.key].x,y:tq[e.key].y,isShiftPressed:e.shiftKey})},style:{width:o,height:a,top:l,left:i}}))});let t1=e=>e.nodesSelectionActive,t2=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:l,onMove:s,onMoveStart:d,onMoveEnd:u,selectionKeyCode:c,selectionOnDrag:h,selectionMode:f,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:b,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:x,panOnScroll:S,panOnScrollSpeed:k,panOnScrollMode:M,zoomOnDoubleClick:N,panOnDrag:C,defaultViewport:O,translateExtent:P,minZoom:_,maxZoom:A,preventScrolling:R,onSelectionContextMenu:L,noWheelClassName:D,noPanClassName:I,disableKeyboardA11y:$})=>{let z=F(t1),B=tf(c),T=tf(v),j=T||C,H=T||S,K=B||h&&!0!==j;return(({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=V(),{deleteElements:r}=tS(),o=tf(e,tk),a=tf(t);(0,p.useEffect)(()=>{if(o){let{edges:e,getNodes:t}=n.getState();r({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,p.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])})({deleteKeyCode:l,multiSelectionKeyCode:y}),p.default.createElement(tA,{onMove:s,onMoveStart:d,onMoveEnd:u,onPaneContextMenu:a,elementsSelectable:w,zoomOnScroll:E,zoomOnPinch:x,panOnScroll:H,panOnScrollSpeed:k,panOnScrollMode:M,zoomOnDoubleClick:N,panOnDrag:!B&&j,defaultViewport:O,translateExtent:P,minZoom:_,maxZoom:A,zoomActivationKeyCode:b,preventScrolling:R,noWheelClassName:D,noPanClassName:I},p.default.createElement(tH,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:j,isSelecting:!!K,selectionMode:f},e,z&&p.default.createElement(t0,{onSelectionContextMenu:L,noPanClassName:I,disableKeyboardA11y:$})))};t2.displayName="FlowRenderer";var t8=(0,p.memo)(t2);function t3(e){let t={input:tQ(e.input||e2),default:tQ(e.default||e0),output:tQ(e.output||e3),group:tQ(e.group||e4)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=tQ(e[n]||e0),t),{});return{...t,...n}}let t4=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),t5=e=>{var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,updateNodeDimensions:i,onError:l}=F(t4,k),s=(t=e.onlyRenderVisibleElements,F((0,p.useCallback)(e=>t?eB(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[t]))),d=(0,p.useRef)(),u=(0,p.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let e=new ResizeObserver(e=>{i(e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})))});return d.current=e,e},[]);return(0,p.useEffect)(()=>()=>{d?.current?.disconnect()},[]),p.default.createElement("div",{className:"react-flow__nodes",style:tM},s.map(t=>{let i,s=t.type||"default";e.nodeTypes[s]||(l?.("003",(i=s,`Node type "${i}" not found. Using fallback type "default".`)),s="default");let d=e.nodeTypes[s]||e.nodeTypes.default,c=!!(t.draggable||n&&void 0===t.draggable),h=!!(t.selectable||a&&void 0===t.selectable),g=!!(t.connectable||r&&void 0===t.connectable),m=!!(t.focusable||o&&void 0===t.focusable),y=e.nodeExtent?Z(t.positionAbsolute,e.nodeExtent):t.positionAbsolute,v=y?.x??0,b=y?.y??0,w=(({x:e,y:t,width:n,height:r,origin:o})=>!n||!r||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]})({x:v,y:b,width:t.width??0,height:t.height??0,origin:e.nodeOrigin});return p.default.createElement(d,{key:t.id,id:t.id,className:t.className,style:t.style,type:s,data:t.data,sourcePosition:t.sourcePosition||f.Bottom,targetPosition:t.targetPosition||f.Top,hidden:t.hidden,xPos:v,yPos:b,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!t.selected,isDraggable:c,isSelectable:h,isConnectable:g,isFocusable:m,resizeObserver:u,dragHandle:t.dragHandle,zIndex:t[el]?.z??0,isParent:!!t[el]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!t.width&&!!t.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:t.ariaLabel})}))};t5.displayName="NodeRenderer";var t6=(0,p.memo)(t5);let t9="react-flow__edgeupdater",t7=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:l})=>p.default.createElement("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:m([t9,`${t9}-${l}`]),cx:e===f.Left?t-r:e===f.Right?t+r:t,cy:e===f.Top?n-r:e===f.Bottom?n+r:n,r:r,stroke:"transparent",fill:"transparent"}),ne=()=>!0;var nt=e=>{let t=({id:t,className:n,type:r,data:o,onClick:a,onEdgeDoubleClick:i,selected:l,animated:s,label:d,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:g,style:y,source:v,target:b,sourceX:w,sourceY:E,targetX:x,targetY:S,sourcePosition:k,targetPosition:M,elementsSelectable:N,hidden:C,sourceHandleId:O,targetHandleId:P,onContextMenu:_,onMouseEnter:A,onMouseMove:R,onMouseLeave:L,edgeUpdaterRadius:D,onEdgeUpdate:I,onEdgeUpdateStart:$,onEdgeUpdateEnd:z,markerEnd:B,markerStart:T,rfId:j,ariaLabel:H,isFocusable:F,isUpdatable:K,pathOptions:G,interactionWidth:U})=>{let W=(0,p.useRef)(null),[X,Y]=(0,p.useState)(!1),[Z,q]=(0,p.useState)(!1),Q=V(),J=(0,p.useMemo)(()=>`url(#${eL(T,j)})`,[T,j]),ee=(0,p.useMemo)(()=>`url(#${eL(B,j)})`,[B,j]);if(C)return null;let et=eg(t,Q.getState,i),en=eg(t,Q.getState,_),er=eg(t,Q.getState,A),eo=eg(t,Q.getState,R),ea=eg(t,Q.getState,L),ei=(e,n)=>{if(0!==e.button)return;let{edges:r,isValidConnection:o}=Q.getState(),a=n?b:v,i=(n?P:O)||null,l=n?"target":"source",s=r.find(e=>e.id===t);q(!0),$?.(e,s,l),eX({event:e,handleId:i,nodeId:a,onConnect:e=>I?.(s,e),isTarget:n,getState:Q.getState,setState:Q.setState,isValidConnection:o||ne,edgeUpdaterType:l,onEdgeUpdateEnd:e=>{q(!1),z?.(e,s,l)}})},el=()=>Y(!0),ed=()=>Y(!1);return p.default.createElement("g",{className:m(["react-flow__edge",`react-flow__edge-${r}`,n,{selected:l,animated:s,inactive:!N&&!a,updating:X}]),onClick:e=>{let{edges:n,addSelectedEdges:r,unselectNodesAndEdges:o,multiSelectionActive:i}=Q.getState(),l=n.find(e=>e.id===t);l&&(N&&(Q.setState({nodesSelectionActive:!1}),l.selected&&i?(o({nodes:[],edges:[l]}),W.current?.blur()):r([t])),a&&a(e,l))},onDoubleClick:et,onContextMenu:en,onMouseEnter:er,onMouseMove:eo,onMouseLeave:ea,onKeyDown:F?e=>{if(es.includes(e.key)&&N){let{unselectNodesAndEdges:n,addSelectedEdges:r,edges:o}=Q.getState();"Escape"===e.key?(W.current?.blur(),n({edges:[o.find(e=>e.id===t)]})):r([t])}}:void 0,tabIndex:F?0:void 0,role:F?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===H?void 0:H||`Edge from ${v} to ${b}`,"aria-describedby":F?`${td}-${j}`:void 0,ref:W},!Z&&p.default.createElement(e,{id:t,source:v,target:b,selected:l,animated:s,label:d,labelStyle:u,labelShowBg:c,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:g,data:o,style:y,sourceX:w,sourceY:E,targetX:x,targetY:S,sourcePosition:k,targetPosition:M,sourceHandleId:O,targetHandleId:P,markerStart:J,markerEnd:ee,pathOptions:G,interactionWidth:U}),K&&p.default.createElement(p.default.Fragment,null,("source"===K||!0===K)&&p.default.createElement(t7,{position:k,centerX:w,centerY:E,radius:D,onMouseDown:e=>ei(e,!0),onMouseEnter:el,onMouseOut:ed,type:"source"}),("target"===K||!0===K)&&p.default.createElement(t7,{position:M,centerX:x,centerY:S,radius:D,onMouseDown:e=>ei(e,!1),onMouseEnter:el,onMouseOut:ed,type:"target"})))};return t.displayName="EdgeWrapper",(0,p.memo)(t)};function nn(e){let t={default:nt(e.default||e_),straight:nt(e.bezier||eN),step:nt(e.step||eM),smoothstep:nt(e.step||ek),simplebezier:nt(e.simplebezier||eb)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=nt(e[n]||e_),t),{});return{...t,...n}}function nr(e,t,n=null){let r=(n?.x||0)+t.x,o=(n?.y||0)+t.y,a=n?.width||t.width,i=n?.height||t.height;switch(e){case f.Top:return{x:r+a/2,y:o};case f.Right:return{x:r+a,y:o+i/2};case f.Bottom:return{x:r+a/2,y:o+i};case f.Left:return{x:r,y:o+i/2}}}function no(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function na(e){let t=e?.[el]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}let ni=[{level:0,isMaxLevel:!0,edges:[]}],nl={[h.Arrow]:({color:e="none",strokeWidth:t=1})=>p.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[h.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>p.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ns=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{let s,d=(s=V(),(0,p.useMemo)(()=>{let e;return Object.prototype.hasOwnProperty.call(nl,t)?nl[t]:(s.getState().onError?.("009",(e=t,`Marker type "${e}" doesn't exist.`)),null)},[t]));return d?p.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},p.default.createElement(d,{color:n,strokeWidth:i})):null},nd=({defaultColor:e,rfId:t})=>{let n=F((0,p.useCallback)((({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((n,o)=>([o.markerStart,o.markerEnd].forEach(o=>{if(o&&"object"==typeof o){let a=eL(o,t);r.includes(a)||(n.push({id:a,color:o.color||e,...o}),r.push(a))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))})({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return p.default.createElement("defs",null,n.map(e=>p.default.createElement(ns,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};nd.displayName="MarkerDefinitions";var nu=(0,p.memo)(nd);let nc=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),nh=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:a,onEdgeUpdate:i,onEdgeContextMenu:l,onEdgeMouseEnter:d,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:h,edgeUpdaterRadius:g,onEdgeDoubleClick:y,onEdgeUpdateStart:v,onEdgeUpdateEnd:b,children:w})=>{let{edgesFocusable:E,edgesUpdatable:x,elementsSelectable:S,width:M,height:N,connectionMode:C,nodeInternals:O,onError:P}=F(nc,k),_=function(e,t,n=!1){let r=-1,o=Object.entries(e.reduce((e,o)=>{let a=ei(o.zIndex),i=a?o.zIndex:0;if(n){let e=t.get(o.target),n=t.get(o.source),r=o.selected||e?.selected||n?.selected,l=Math.max(n?.[el]?.z||0,e?.[el]?.z||0,1e3);i=(a?o.zIndex:0)+(r?l:0)}return e[i]?e[i].push(o):e[i]=[o],r=i>r?i:r,e},{})).map(([e,t])=>{let n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return 0===o.length?ni:o}(F((0,p.useCallback)(e=>t?e.edges.filter(t=>{let n=O.get(t.source),r=O.get(t.target);return n?.width&&n?.height&&r?.width&&r?.height&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:a,width:i,height:l,transform:s}){let d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+a)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);let u=et({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:i/s[2],height:l/s[2]});return Math.ceil(Math.max(0,Math.min(u.x2,d.x2)-Math.max(u.x,d.x))*Math.max(0,Math.min(u.y2,d.y2)-Math.max(u.y,d.y)))>0}({sourcePos:n.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:n.width,sourceHeight:n.height,targetWidth:r.width,targetHeight:r.height,width:e.width,height:e.height,transform:e.transform})}):e.edges,[t,O])),O,n);return M?p.default.createElement(p.default.Fragment,null,_.map(({level:t,edges:n,isMaxLevel:w})=>p.default.createElement("svg",{key:t,style:{zIndex:t},width:M,height:N,className:"react-flow__edges react-flow__container"},w&&p.default.createElement(nu,{defaultColor:e,rfId:r}),p.default.createElement("g",null,n.map(e=>{let t,n,w,[k,M,N]=na(O.get(e.source)),[_,A,R]=na(O.get(e.target));if(!N||!R)return null;let L=e.type||"default";o[L]||(P?.("011",(t=L,`Edge type "${t}" not found. Using fallback type "default".`)),L="default");let D=o[L]||o.default,I=C===s.Strict?A.target:(A.target??[]).concat(A.source??[]),$=no(M.source,e.sourceHandle),z=no(I,e.targetHandle),B=$?.position||f.Bottom,T=z?.position||f.Top,j=!!(e.focusable||E&&void 0===e.focusable),H=void 0!==i&&(e.updatable||x&&void 0===e.updatable);if(!$||!z){let t,n;return P?.("008",(t=$,n=e,`Couldn't create edge for ${!t?"source":"target"} handle id: "${!t?n.sourceHandle:n.targetHandle}", edge id: ${n.id}.`)),null}let{sourceX:F,sourceY:V,targetX:K,targetY:G}=(n=nr(B,k,$),w=nr(T,_,z),{sourceX:n.x,sourceY:n.y,targetX:w.x,targetY:w.y});return p.default.createElement(D,{key:e.id,id:e.id,className:m([e.className,a]),type:L,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:F,sourceY:V,targetX:K,targetY:G,sourcePosition:B,targetPosition:T,elementsSelectable:S,onEdgeUpdate:i,onContextMenu:l,onMouseEnter:d,onMouseMove:u,onMouseLeave:c,onClick:h,edgeUpdaterRadius:g,onEdgeDoubleClick:y,onEdgeUpdateStart:v,onEdgeUpdateEnd:b,rfId:r,ariaLabel:e.ariaLabel,isFocusable:j,isUpdatable:H,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth})})))),w):null};nh.displayName="EdgeRenderer";var nf=(0,p.memo)(nh);let ng=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function np({children:e}){let t=F(ng);return p.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}let nm={[f.Left]:f.Right,[f.Right]:f.Left,[f.Top]:f.Bottom,[f.Bottom]:f.Top},ny=({nodeId:e,handleType:t,style:n,type:r=c.Bezier,CustomComponent:o,connectionStatus:a})=>{let{fromNode:i,handleId:l,toX:d,toY:u,connectionMode:h}=F((0,p.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),k),f=i?.[el]?.handleBounds,g=f?.[t];if(h===s.Loose&&(g=g||f?.["source"===t?"target":"source"]),!i||!g)return null;let m=l?g.find(e=>e.id===l):g[0],y=m?m.x+m.width/2:(i.width??0)/2,v=m?m.y+m.height/2:i.height??0,b=(i.positionAbsolute?.x??0)+y,w=(i.positionAbsolute?.y??0)+v,E=m?.position,x=E?nm[E]:null;if(!E||!x)return null;if(o)return p.default.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:m,fromX:b,fromY:w,toX:d,toY:u,fromPosition:E,toPosition:x,connectionStatus:a});let S="",M={sourceX:b,sourceY:w,sourcePosition:E,targetX:d,targetY:u,targetPosition:x};return r===c.Bezier?[S]=eP(M):r===c.Step?[S]=eS({...M,borderRadius:0}):r===c.SmoothStep?[S]=eS(M):r===c.SimpleBezier?[S]=ev(M):S=`M${b},${w} ${d},${u}`,p.default.createElement("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};ny.displayName="ConnectionLine";let nv=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function nb({containerStyle:e,style:t,type:n,component:r}){let{nodeId:o,handleType:a,nodesConnectable:i,width:l,height:s,connectionStatus:d}=F(nv,k);return o&&a&&l&&i?p.default.createElement("svg",{style:e,width:l,height:s,className:"react-flow__edges react-flow__connectionline react-flow__container"},p.default.createElement("g",{className:m(["react-flow__connection",d])},p.default.createElement(ny,{nodeId:o,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:d}))):null}function nw(e,t){return(0,p.useRef)(null),V(),(0,p.useMemo)(()=>t(e),[e])}let nE=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:a,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:s,onEdgeDoubleClick:d,onNodeMouseEnter:u,onNodeMouseMove:c,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:g,onSelectionStart:m,onSelectionEnd:y,connectionLineType:v,connectionLineStyle:b,connectionLineComponent:w,connectionLineContainerStyle:E,selectionKeyCode:x,selectionOnDrag:S,selectionMode:k,multiSelectionKeyCode:M,panActivationKeyCode:N,zoomActivationKeyCode:C,deleteKeyCode:O,onlyRenderVisibleElements:P,elementsSelectable:_,selectNodesOnDrag:A,defaultViewport:R,translateExtent:L,minZoom:D,maxZoom:I,preventScrolling:$,defaultMarkerColor:z,zoomOnScroll:B,zoomOnPinch:T,panOnScroll:j,panOnScrollSpeed:H,panOnScrollMode:F,zoomOnDoubleClick:V,panOnDrag:K,onPaneClick:G,onPaneMouseEnter:U,onPaneMouseMove:W,onPaneMouseLeave:X,onPaneScroll:Y,onPaneContextMenu:Z,onEdgeUpdate:q,onEdgeContextMenu:Q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:et,edgeUpdaterRadius:en,onEdgeUpdateStart:er,onEdgeUpdateEnd:eo,noDragClassName:ea,noWheelClassName:ei,noPanClassName:el,elevateEdgesOnSelect:es,disableKeyboardA11y:ed,nodeOrigin:eu,nodeExtent:ec,rfId:eh})=>{let ef,eg,ep=nw(e,t3),em=nw(t,nn);return ef=tS(),eg=(0,p.useRef)(!1),(0,p.useEffect)(()=>{!eg.current&&ef.viewportInitialized&&a&&(setTimeout(()=>a(ef),1),eg.current=!0)},[a,ef.viewportInitialized]),p.default.createElement(t8,{onPaneClick:G,onPaneMouseEnter:U,onPaneMouseMove:W,onPaneMouseLeave:X,onPaneContextMenu:Z,onPaneScroll:Y,deleteKeyCode:O,selectionKeyCode:x,selectionOnDrag:S,selectionMode:k,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:M,panActivationKeyCode:N,zoomActivationKeyCode:C,elementsSelectable:_,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:B,zoomOnPinch:T,zoomOnDoubleClick:V,panOnScroll:j,panOnScrollSpeed:H,panOnScrollMode:F,panOnDrag:K,defaultViewport:R,translateExtent:L,minZoom:D,maxZoom:I,onSelectionContextMenu:g,preventScrolling:$,noDragClassName:ea,noWheelClassName:ei,noPanClassName:el,disableKeyboardA11y:ed},p.default.createElement(np,null,p.default.createElement(nf,{edgeTypes:em,onEdgeClick:l,onEdgeDoubleClick:d,onEdgeUpdate:q,onlyRenderVisibleElements:P,onEdgeContextMenu:Q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:et,onEdgeUpdateStart:er,onEdgeUpdateEnd:eo,edgeUpdaterRadius:en,defaultMarkerColor:z,noPanClassName:el,elevateEdgesOnSelect:!!es,disableKeyboardA11y:ed,rfId:eh},p.default.createElement(nb,{style:b,type:v,component:w,containerStyle:E})),p.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),p.default.createElement(t6,{nodeTypes:ep,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:u,onNodeMouseMove:c,onNodeMouseLeave:h,onNodeContextMenu:f,selectNodesOnDrag:A,onlyRenderVisibleElements:P,noPanClassName:el,noDragClassName:ea,disableKeyboardA11y:ed,nodeOrigin:eu,nodeExtent:ec,rfId:eh})))};nE.displayName="GraphView";var nx=(0,p.memo)(nE);let nS=[[-1/0,-1/0],[1/0,1/0]],nk={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:nS,nodeExtent:nS,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:s.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ed,isValidConnection:void 0},nM=({children:e})=>{let t,n,r=(0,p.useRef)(null);return r.current||(t=(e,t)=>({...nk,setNodes:n=>{let{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:a}=t();e({nodeInternals:ty(n,r,o,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{let o=void 0!==n,a=void 0!==r;e({nodeInternals:o?ty(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:a?r:[],hasDefaultNodes:o,hasDefaultEdges:a})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:o,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:l,domNode:s,nodeOrigin:d}=t(),u=s?.querySelector(".react-flow__viewport");if(!u)return;let c=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(c.transform),f=n.reduce((e,t)=>{let n=o.get(t.id);if(n){let r=X(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(o.set(n.id,{...n,[el]:{...n[el],handleBounds:{source:tG(".source",t.nodeElement,h,d),target:tG(".target",t.nodeElement,h,d)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);tm(o,d);let g=i||a&&!i&&tv(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:g}),f?.length>0&&r?.(f)},updateNodePositions:(e,n=!0,r=!1)=>{let{triggerNodeChanges:o}=t();o(e.map(e=>{let t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:o,hasDefaultNodes:a,nodeOrigin:i,getNodes:l,elevateNodesOnSelect:s}=t();n?.length&&(a&&e({nodeInternals:ty(t$(n,l()),o,i,s)}),r?.(n))},addSelectedNodes:n=>{let r,{multiSelectionActive:o,edges:a,getNodes:i}=t(),l=null;o?r=n.map(e=>tz(e,!0)):(r=tB(i(),n),l=tB(a,[])),tb({changedNodes:r,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{let r,{multiSelectionActive:o,edges:a,getNodes:i}=t(),l=null;o?r=n.map(e=>tz(e,!0)):(r=tB(a,n),l=tB(i(),[])),tb({changedNodes:l,changedEdges:r,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:o,getNodes:a}=t();tb({changedNodes:(n||a()).map(e=>(e.selected=!1,tz(e.id,!1))),changedEdges:(r||o).map(e=>tz(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:o}=t();r?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:o}=t();r?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t();tb({changedNodes:r().filter(e=>e.selected).map(e=>tz(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>tz(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=Z(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{let{transform:n,width:r,height:o,d3Zoom:a,d3Selection:i,translateExtent:l}=t();if(!a||!i||!e.x&&!e.y)return!1;let s=M.zoomIdentity.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),d=a?.constrain()(s,[[0,0],[r,o]],l);return a.transform(i,d),n[0]!==d.x||n[1]!==d.y||n[2]!==d.k},cancelConnection:()=>e({connectionNodeId:nk.connectionNodeId,connectionHandleId:nk.connectionHandleId,connectionHandleType:nk.connectionHandleType,connectionStatus:nk.connectionStatus,connectionStartHandle:nk.connectionStartHandle,connectionEndHandle:nk.connectionEndHandle}),reset:()=>e({...nk})}),n=Object.is,r.current=t?S(t,n):S),p.default.createElement(j,{value:r.current},e)};nM.displayName="ReactFlowProvider";let nN=({children:e})=>(0,p.useContext)(T)?p.default.createElement(p.default.Fragment,null,e):p.default.createElement(nM,null,e);nN.displayName="ReactFlowWrapper";let nC={input:e2,default:e0,output:e3,group:e4},nO={default:e_,straight:eN,step:eM,smoothstep:ek,simplebezier:eb},nP=[0,0],n_=[15,15],nA={x:0,y:0,zoom:1},nR={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},nL=(0,p.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a=nC,edgeTypes:i=nO,onNodeClick:l,onEdgeClick:h,onInit:f,onMove:g,onMoveStart:y,onMoveEnd:v,onConnect:b,onConnectStart:w,onConnectEnd:E,onClickConnectStart:x,onClickConnectEnd:S,onNodeMouseEnter:k,onNodeMouseMove:M,onNodeMouseLeave:N,onNodeContextMenu:C,onNodeDoubleClick:O,onNodeDragStart:P,onNodeDrag:_,onNodeDragStop:A,onNodesDelete:R,onEdgesDelete:L,onSelectionChange:D,onSelectionDragStart:I,onSelectionDrag:$,onSelectionDragStop:z,onSelectionContextMenu:B,onSelectionStart:T,onSelectionEnd:j,connectionMode:H=s.Strict,connectionLineType:F=c.Bezier,connectionLineStyle:V,connectionLineComponent:K,connectionLineContainerStyle:G,deleteKeyCode:W="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Y=!1,selectionMode:Z=u.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:Q=eh()?"Meta":"Control",zoomActivationKeyCode:J=eh()?"Meta":"Control",snapToGrid:ee=!1,snapGrid:et=n_,onlyRenderVisibleElements:en=!1,selectNodesOnDrag:er=!0,nodesDraggable:eo,nodesConnectable:ea,nodesFocusable:ei,nodeOrigin:el=nP,edgesFocusable:es,edgesUpdatable:ed,elementsSelectable:eu,defaultViewport:ec=nA,minZoom:ef=.5,maxZoom:eg=2,translateExtent:ep=nS,preventScrolling:em=!0,nodeExtent:ey,defaultMarkerColor:ev="#b1b1b7",zoomOnScroll:eb=!0,zoomOnPinch:ew=!0,panOnScroll:eE=!1,panOnScrollSpeed:ex=.5,panOnScrollMode:eS=d.Free,zoomOnDoubleClick:ek=!0,panOnDrag:eM=!0,onPaneClick:eN,onPaneMouseEnter:eC,onPaneMouseMove:eO,onPaneMouseLeave:eP,onPaneScroll:e_,onPaneContextMenu:eA,children:eR,onEdgeUpdate:eL,onEdgeContextMenu:eD,onEdgeDoubleClick:eI,onEdgeMouseEnter:e$,onEdgeMouseMove:ez,onEdgeMouseLeave:eB,onEdgeUpdateStart:eT,onEdgeUpdateEnd:ej,edgeUpdaterRadius:eH=10,onNodesChange:eF,onEdgesChange:eV,noDragClassName:eK="nodrag",noWheelClassName:eG="nowheel",noPanClassName:eU="nopan",fitView:eW=!1,fitViewOptions:eX,connectOnClick:eY=!0,attributionPosition:eZ,proOptions:eq,defaultEdgeOptions:eQ,elevateNodesOnSelect:eJ=!0,elevateEdgesOnSelect:e0=!1,disableKeyboardA11y:e1=!1,autoPanOnConnect:e2=!0,autoPanOnNodeDrag:e8=!0,connectionRadius:e3=20,isValidConnection:e4,onError:e5,style:e6,id:e9,nodeDragThreshold:e7,...te},tn)=>{let tr=e9||"1";return p.default.createElement("div",{...te,style:{...e6,...nR},ref:tn,className:m(["react-flow",o]),"data-testid":"rf__wrapper",id:e9},p.default.createElement(nN,null,p.default.createElement(nx,{onInit:f,onMove:g,onMoveStart:y,onMoveEnd:v,onNodeClick:l,onEdgeClick:h,onNodeMouseEnter:k,onNodeMouseMove:M,onNodeMouseLeave:N,onNodeContextMenu:C,onNodeDoubleClick:O,nodeTypes:a,edgeTypes:i,connectionLineType:F,connectionLineStyle:V,connectionLineComponent:K,connectionLineContainerStyle:G,selectionKeyCode:X,selectionOnDrag:Y,selectionMode:Z,deleteKeyCode:W,multiSelectionKeyCode:Q,panActivationKeyCode:q,zoomActivationKeyCode:J,onlyRenderVisibleElements:en,selectNodesOnDrag:er,defaultViewport:ec,translateExtent:ep,minZoom:ef,maxZoom:eg,preventScrolling:em,zoomOnScroll:eb,zoomOnPinch:ew,zoomOnDoubleClick:ek,panOnScroll:eE,panOnScrollSpeed:ex,panOnScrollMode:eS,panOnDrag:eM,onPaneClick:eN,onPaneMouseEnter:eC,onPaneMouseMove:eO,onPaneMouseLeave:eP,onPaneScroll:e_,onPaneContextMenu:eA,onSelectionContextMenu:B,onSelectionStart:T,onSelectionEnd:j,onEdgeUpdate:eL,onEdgeContextMenu:eD,onEdgeDoubleClick:eI,onEdgeMouseEnter:e$,onEdgeMouseMove:ez,onEdgeMouseLeave:eB,onEdgeUpdateStart:eT,onEdgeUpdateEnd:ej,edgeUpdaterRadius:eH,defaultMarkerColor:ev,noDragClassName:eK,noWheelClassName:eG,noPanClassName:eU,elevateEdgesOnSelect:e0,rfId:tr,disableKeyboardA11y:e1,nodeOrigin:el,nodeExtent:ey}),p.default.createElement(ta,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:w,onConnectEnd:E,onClickConnectStart:x,onClickConnectEnd:S,nodesDraggable:eo,nodesConnectable:ea,nodesFocusable:ei,edgesFocusable:es,edgesUpdatable:ed,elementsSelectable:eu,elevateNodesOnSelect:eJ,minZoom:ef,maxZoom:eg,nodeExtent:ey,onNodesChange:eF,onEdgesChange:eV,snapToGrid:ee,snapGrid:et,connectionMode:H,translateExtent:ep,connectOnClick:eY,defaultEdgeOptions:eQ,fitView:eW,fitViewOptions:eX,onNodesDelete:R,onEdgesDelete:L,onNodeDragStart:P,onNodeDrag:_,onNodeDragStop:A,onSelectionDrag:$,onSelectionDragStart:I,onSelectionDragStop:z,noPanClassName:eU,nodeOrigin:el,rfId:tr,autoPanOnConnect:e2,autoPanOnNodeDrag:e8,onError:e5,connectionRadius:e3,isValidConnection:e4,nodeDragThreshold:e7}),p.default.createElement(tt,{onSelectionChange:D}),eR,p.default.createElement(U,{proOptions:eq,position:eZ}),p.default.createElement(th,{rfId:tr,disableKeyboardA11y:e1})))});nL.displayName="ReactFlow";let nD=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function nI({children:e}){let t=F(nD);return t?(0,B.createPortal)(e,t):null}function n$(e){return t=>{let[n,r]=(0,p.useState)(t),o=(0,p.useCallback)(t=>r(n=>e(t,n)),[]);return[n,r,o]}}function nz({color:e,dimensions:t,lineWidth:n}){return p.default.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function nB({color:e,radius:t}){return p.default.createElement("circle",{cx:t,cy:t,r:t,fill:e})}n$(t$),n$(function(e,t){return tI(e,t)}),e.s(["BaseEdge",()=>ef,"EdgeLabelRenderer",()=>nI,"Handle",()=>eQ,"Panel",()=>G,"Position",()=>f,"ReactFlow",()=>nL,"ReactFlowProvider",()=>nM,"getBoundsOfRects",()=>eo,"getNodePositionWithOrigin",()=>e$,"getNodesBounds",()=>ez,"getSmoothStepPath",()=>eS,"useReactFlow",()=>tS,"useStore",()=>F,"useStoreApi",()=>V],264903),e.s(["default",()=>nL],535487),(l=g||(g={})).Lines="lines",l.Dots="dots",l.Cross="cross";let nT={[g.Dots]:"#91919a",[g.Lines]:"#eee",[g.Cross]:"#e2e2e2"},nj={[g.Dots]:1,[g.Lines]:1,[g.Cross]:6},nH=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function nF({id:e,variant:t=g.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=2,color:i,style:l,className:s}){let d=(0,p.useRef)(null),{transform:u,patternId:c}=F(nH,k),h=i||nT[t],f=r||nj[t],y=t===g.Dots,v=t===g.Cross,b=Array.isArray(n)?n:[n,n],w=[b[0]*u[2]||1,b[1]*u[2]||1],E=f*u[2],x=v?[E,E]:w,S=y?[E/a,E/a]:[x[0]/a,x[1]/a];return p.default.createElement("svg",{className:m(["react-flow__background",s]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},p.default.createElement("pattern",{id:c+e,x:u[0]%w[0],y:u[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${S[0]},-${S[1]})`},y?p.default.createElement(nB,{color:h,radius:E/a}):p.default.createElement(nz,{dimensions:x,color:h,lineWidth:o})),p.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${c+e})`}))}nF.displayName="Background";var nV=(0,p.memo)(nF);e.s(["Background",()=>nV,"BackgroundVariant",()=>g],351299)},604591,(e,t,n)=>{"use strict";function r(e,t){e[t]?e[t]++:e[t]=1}function o(e,t){--e[t]||delete e[t]}function a(e,t,n,r){var o=""+t,a=""+n;if(!e&&o>a){var i=o;o=a,a=i}return o+"\x01"+a+"\x01"+(void 0===r?"\0":r)}function i(e,t){return a(e,t.v,t.w,t.name)}t.exports=class{#e=!0;#t=!1;#n=!1;#r;#o=()=>void 0;#a=()=>void 0;#i={};#l={};#s={};#d={};#u={};#c={};#h={};#f=0;#g=0;#p;#m;constructor(e){e&&(this.#e=!e.hasOwnProperty("directed")||e.directed,this.#t=!!e.hasOwnProperty("multigraph")&&e.multigraph,this.#n=!!e.hasOwnProperty("compound")&&e.compound),this.#n&&(this.#p={},this.#m={},this.#m["\0"]={})}isDirected(){return this.#e}isMultigraph(){return this.#t}isCompound(){return this.#n}setGraph(e){return this.#r=e,this}graph(){return this.#r}setDefaultNodeLabel(e){return this.#o=e,"function"!=typeof e&&(this.#o=()=>e),this}nodeCount(){return this.#f}nodes(){return Object.keys(this.#i)}sources(){var e=this;return this.nodes().filter(t=>0===Object.keys(e.#l[t]).length)}sinks(){var e=this;return this.nodes().filter(t=>0===Object.keys(e.#d[t]).length)}setNodes(e,t){var n=arguments,r=this;return e.forEach(function(e){n.length>1?r.setNode(e,t):r.setNode(e)}),this}setNode(e,t){return this.#i.hasOwnProperty(e)?arguments.length>1&&(this.#i[e]=t):(this.#i[e]=arguments.length>1?t:this.#o(e),this.#n&&(this.#p[e]="\0",this.#m[e]={},this.#m["\0"][e]=!0),this.#l[e]={},this.#s[e]={},this.#d[e]={},this.#u[e]={},++this.#f),this}node(e){return this.#i[e]}hasNode(e){return this.#i.hasOwnProperty(e)}removeNode(e){var t=this;if(this.#i.hasOwnProperty(e)){var n=e=>t.removeEdge(t.#c[e]);delete this.#i[e],this.#n&&(this.#y(e),delete this.#p[e],this.children(e).forEach(function(e){t.setParent(e)}),delete this.#m[e]),Object.keys(this.#l[e]).forEach(n),delete this.#l[e],delete this.#s[e],Object.keys(this.#d[e]).forEach(n),delete this.#d[e],delete this.#u[e],--this.#f}return this}setParent(e,t){if(!this.#n)throw Error("Cannot set parent in a non-compound graph");if(void 0===t)t="\0";else{t+="";for(var n=t;void 0!==n;n=this.parent(n))if(n===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this.#y(e),this.#p[e]=t,this.#m[t][e]=!0,this}#y(e){delete this.#m[this.#p[e]][e]}parent(e){if(this.#n){var t=this.#p[e];if("\0"!==t)return t}}children(e="\0"){if(this.#n){var t=this.#m[e];if(t)return Object.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]}predecessors(e){var t=this.#s[e];if(t)return Object.keys(t)}successors(e){var t=this.#u[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){let r=new Set(t);for(var n of this.successors(e))r.add(n);return Array.from(r.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this.#e,multigraph:this.#t,compound:this.#n});t.setGraph(this.graph());var n=this;Object.entries(this.#i).forEach(function([n,r]){e(n)&&t.setNode(n,r)}),Object.values(this.#c).forEach(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var r={};return this.#n&&t.nodes().forEach(e=>t.setParent(e,function e(o){var a=n.parent(o);return void 0===a||t.hasNode(a)?(r[o]=a,a):a in r?r[a]:e(a)}(e))),t}setDefaultEdgeLabel(e){return this.#a=e,"function"!=typeof e&&(this.#a=()=>e),this}edgeCount(){return this.#g}edges(){return Object.values(this.#c)}setPath(e,t){var n=this,r=arguments;return e.reduce(function(e,o){return r.length>1?n.setEdge(e,o,t):n.setEdge(e,o),o}),this}setEdge(){var e,t,n,o,i=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,n=l.name,2==arguments.length&&(o=arguments[1],i=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),e=""+e,t=""+t,void 0!==n&&(n=""+n);var s=a(this.#e,e,t,n);if(this.#h.hasOwnProperty(s))return i&&(this.#h[s]=o),this;if(void 0!==n&&!this.#t)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this.#h[s]=i?o:this.#a(e,t,n);var d=function(e,t,n,r){var o=""+t,a=""+n;if(!e&&o>a){var i=o;o=a,a=i}var l={v:o,w:a};return r&&(l.name=r),l}(this.#e,e,t,n);return e=d.v,t=d.w,Object.freeze(d),this.#c[s]=d,r(this.#s[t],e),r(this.#u[e],t),this.#l[t][s]=d,this.#d[e][s]=d,this.#g++,this}edge(e,t,n){var r=1==arguments.length?i(this.#e,arguments[0]):a(this.#e,e,t,n);return this.#h[r]}edgeAsObj(){let e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,n){var r=1==arguments.length?i(this.#e,arguments[0]):a(this.#e,e,t,n);return this.#h.hasOwnProperty(r)}removeEdge(e,t,n){var r=1==arguments.length?i(this.#e,arguments[0]):a(this.#e,e,t,n),l=this.#c[r];return l&&(e=l.v,t=l.w,delete this.#h[r],delete this.#c[r],o(this.#s[t],e),o(this.#u[e],t),delete this.#l[t][r],delete this.#d[e][r],this.#g--),this}inEdges(e,t){var n=this.#l[e];if(n){var r=Object.values(n);return t?r.filter(e=>e.v===t):r}}outEdges(e,t){var n=this.#d[e];if(n){var r=Object.values(n);return t?r.filter(e=>e.w===t):r}}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}}},560633,(e,t,n)=>{t.exports="2.1.13"},399604,(e,t,n)=>{t.exports={Graph:e.r(604591),version:e.r(560633)}},232208,(e,t,n)=>{var r=e.r(604591);t.exports={write:function(e){var t,n,r={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e).nodes().map(function(e){var n=t.node(e),r=t.parent(e),o={v:e};return void 0!==n&&(o.value=n),void 0!==r&&(o.parent=r),o}),edges:(n=e).edges().map(function(e){var t=n.edge(e),r={v:e.v,w:e.w};return void 0!==e.name&&(r.name=e.name),void 0!==t&&(r.value=t),r})};return void 0!==e.graph()&&(r.value=structuredClone(e.graph())),r},read:function(e){var t=new r(e.options).setGraph(e.value);return e.nodes.forEach(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),e.edges.forEach(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},145377,(e,t,n)=>{t.exports=function(e){var t,n={},r=[];return e.nodes().forEach(function(o){t=[],function r(o){n.hasOwnProperty(o)||(n[o]=!0,t.push(o),e.successors(o).forEach(r),e.predecessors(o).forEach(r))}(o),t.length&&r.push(t)}),r}},205379,(e,t,n)=>{t.exports=class{#v=[];#b={};size(){return this.#v.length}keys(){return this.#v.map(function(e){return e.key})}has(e){return this.#b.hasOwnProperty(e)}priority(e){var t=this.#b[e];if(void 0!==t)return this.#v[t].priority}min(){if(0===this.size())throw Error("Queue underflow");return this.#v[0].key}add(e,t){var n=this.#b;if(e=String(e),!n.hasOwnProperty(e)){var r=this.#v,o=r.length;return n[e]=o,r.push({key:e,priority:t}),this.#w(o),!0}return!1}removeMin(){this.#E(0,this.#v.length-1);var e=this.#v.pop();return delete this.#b[e.key],this.#x(0),e.key}decrease(e,t){var n=this.#b[e];if(t>this.#v[n].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this.#v[n].priority+" New: "+t);this.#v[n].priority=t,this.#w(n)}#x(e){var t=this.#v,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this.#E(e,o),this.#x(o)))}#w(e){for(var t,n=this.#v,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this.#E(e,t),e=t}#E(e,t){var n=this.#v,r=this.#b,o=n[e],a=n[t];n[e]=a,n[t]=o,r[a.key]=e,r[o.key]=t}}},869533,(e,t,n)=>{var r=e.r(205379);t.exports=function(e,t,n,a){return function(e,t,n,o){var a,i,l={},s=new r,d=function(e){var t=e.v!==a?e.v:e.w,r=l[t],o=n(e),d=i.distance+o;if(o<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);d<r.distance&&(r.distance=d,r.predecessor=a,s.decrease(t,d))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;l[e]={distance:n},s.add(e,n)});s.size()>0&&(i=l[a=s.removeMin()]).distance!==1/0;)o(a).forEach(d);return l}(e,String(t),n||o,a||function(t){return e.outEdges(t)})};var o=()=>1},94765,(e,t,n)=>{var r=e.r(869533);t.exports=function(e,t,n){return e.nodes().reduce(function(o,a){return o[a]=r(e,a,t,n),o},{})}},932918,(e,t,n)=>{t.exports=function(e){var t=0,n=[],r={},o=[];return e.nodes().forEach(function(a){r.hasOwnProperty(a)||function a(i){var l=r[i]={onStack:!0,lowlink:t,index:t++};if(n.push(i),e.successors(i).forEach(function(e){r.hasOwnProperty(e)?r[e].onStack&&(l.lowlink=Math.min(l.lowlink,r[e].index)):(a(e),l.lowlink=Math.min(l.lowlink,r[e].lowlink))}),l.lowlink===l.index){var s,d=[];do r[s=n.pop()].onStack=!1,d.push(s);while(i!==s)o.push(d)}}(a)}),o}},233476,(e,t,n)=>{var r=e.r(932918);t.exports=function(e){return r(e).filter(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},372335,(e,t,n)=>{t.exports=function(e,t,n){var o,a,i,l,s;return o=e,a=t||r,i=n||function(t){return e.outEdges(t)},l={},(s=o.nodes()).forEach(function(e){l[e]={},l[e][e]={distance:0},s.forEach(function(t){e!==t&&(l[e][t]={distance:1/0})}),i(e).forEach(function(t){var n=t.v===e?t.w:t.v,r=a(t);l[e][n]={distance:r,predecessor:e}})}),s.forEach(function(e){var t=l[e];s.forEach(function(n){var r=l[n];s.forEach(function(n){var o=r[e],a=t[n],i=r[n],l=o.distance+a.distance;l<i.distance&&(i.distance=l,i.predecessor=a.predecessor)})})}),l};var r=()=>1},980718,(e,t,n)=>{function r(e){var t={},n={},r=[];if(e.sinks().forEach(function a(i){if(n.hasOwnProperty(i))throw new o;t.hasOwnProperty(i)||(n[i]=!0,t[i]=!0,e.predecessors(i).forEach(a),delete n[i],r.push(i))}),Object.keys(t).length!==e.nodeCount())throw new o;return r}class o extends Error{constructor(){super(...arguments)}}t.exports=r,r.CycleException=o},46821,(e,t,n)=>{var r=e.r(980718);t.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},508187,(e,t,n)=>{function r(e,t,n,r){for(var o=[[e,!1]];o.length>0;){var i=o.pop();i[1]?r.push(i[0]):n.hasOwnProperty(i[0])||(n[i[0]]=!0,o.push([i[0],!0]),a(t(i[0]),e=>o.push([e,!1])))}}function o(e,t,n,r){for(var o=[e];o.length>0;){var i=o.pop();n.hasOwnProperty(i)||(n[i]=!0,r.push(i),a(t(i),e=>o.push(e)))}}function a(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}t.exports=function(e,t,n){Array.isArray(t)||(t=[t]);var a=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),i="post"===n?r:o,l=[],s={};return t.forEach(t=>{if(!e.hasNode(t))throw Error("Graph does not have node: "+t);i(t,a,s,l)}),l}},332641,(e,t,n)=>{var r=e.r(508187);t.exports=function(e,t){return r(e,t,"post")}},12086,(e,t,n)=>{var r=e.r(508187);t.exports=function(e,t){return r(e,t,"pre")}},121580,(e,t,n)=>{var r=e.r(604591),o=e.r(205379);t.exports=function(e,t){var n,a=new r,i={},l=new o;function s(e){var r=e.v===n?e.w:e.v,o=l.priority(r);if(void 0!==o){var a=t(e);a<o&&(i[r]=n,l.decrease(r,a))}}if(0===e.nodeCount())return a;e.nodes().forEach(function(e){l.add(e,1/0),a.setNode(e)}),l.decrease(e.nodes()[0],0);for(var d=!1;l.size()>0;){if(n=l.removeMin(),i.hasOwnProperty(n))a.setEdge(n,i[n]);else if(d)throw Error("Input graph is not connected: "+e);else d=!0;e.nodeEdges(n).forEach(s)}return a}},982797,(e,t,n)=>{t.exports={components:e.r(145377),dijkstra:e.r(869533),dijkstraAll:e.r(94765),findCycles:e.r(233476),floydWarshall:e.r(372335),isAcyclic:e.r(46821),postorder:e.r(332641),preorder:e.r(12086),prim:e.r(121580),tarjan:e.r(932918),topsort:e.r(980718)}},321008,(e,t,n)=>{var r=e.r(399604);t.exports={Graph:r.Graph,json:e.r(232208),alg:e.r(982797),version:r.version}},132883,(e,t,n)=>{function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return r(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,n=t._prev;for(;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}}},944168,(e,t,n)=>{let r=e.r(321008).Graph,o=e.r(132883);t.exports=function(e,t){var n,s;let d,u,c,h,f;if(1>=e.nodeCount())return[];let g=(n=e,s=t||a,d=new r,u=0,c=0,n.nodes().forEach(e=>{d.setNode(e,{v:e,in:0,out:0})}),n.edges().forEach(e=>{let t=d.edge(e.v,e.w)||0,n=s(e);d.setEdge(e.v,e.w,t+n),c=Math.max(c,d.node(e.v).out+=n),u=Math.max(u,d.node(e.w).in+=n)}),h=(function(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t})(c+u+3).map(()=>new o),f=u+1,d.nodes().forEach(e=>{l(h,f,d.node(e))}),{graph:d,buckets:h,zeroIdx:f});return(function(e,t,n){let r,o=[],a=t[t.length-1],l=t[0];for(;e.nodeCount();){for(;r=l.dequeue();)i(e,t,n,r);for(;r=a.dequeue();)i(e,t,n,r);if(e.nodeCount()){for(let a=t.length-2;a>0;--a)if(r=t[a].dequeue()){o=o.concat(i(e,t,n,r,!0));break}}}return o})(g.graph,g.buckets,g.zeroIdx).flatMap(t=>e.outEdges(t.v,t.w))};let a=()=>1;function i(e,t,n,r,o){let a=o?[]:void 0;return e.inEdges(r.v).forEach(r=>{let i=e.edge(r),s=e.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,l(t,n,s)}),e.outEdges(r.v).forEach(r=>{let o=e.edge(r),a=r.w,i=e.node(a);i.in-=o,l(t,n,i)}),e.removeNode(r.v),a}function l(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},486448,(e,t,n)=>{"use strict";let r=e.r(321008).Graph;function o(e,t,n,r){let o;do o=l(r);while(e.hasNode(o))return n.dummy=t,e.setNode(o,n),o}function a(e){return Math.max(...e.nodes().map(t=>{let n=e.node(t).rank;return void 0===n?5e-324:n}))}t.exports={addBorderNode:function(e,t,n,r){let a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=r),o(e,"border",a,t)},addDummyNode:o,asNonCompoundGraph:function(e){let t=new r({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t},buildLayerMatrix:function(e){let t=s(a(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),o=r.rank;void 0!==o&&(t[o][r.order]=n)}),t},intersectRect:function(e,t){let n,r,o=e.x,a=e.y,i=t.x-o,l=t.y-a,s=e.width/2,d=e.height/2;if(!i&&!l)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(l)*s>Math.abs(i)*d?(l<0&&(d=-d),n=d*i/l,r=d):(i<0&&(s=-s),n=s,r=s*l/i),{x:o+n,y:a+r}},mapValues:function(e,t){let n=t;return"string"==typeof t&&(n=e=>e[t]),Object.entries(e).reduce((e,[t,r])=>(e[t]=n(r,t),e),{})},maxRank:a,normalizeRanks:function(e){let t=Math.min(...e.nodes().map(t=>{let n=e.node(t).rank;return void 0===n?Number.MAX_VALUE:n}));e.nodes().forEach(n=>{let r=e.node(n);r.hasOwnProperty("rank")&&(r.rank-=t)})},notime:function(e,t){return t()},partition:function(e,t){let n={lhs:[],rhs:[]};return e.forEach(e=>{t(e)?n.lhs.push(e):n.rhs.push(e)}),n},pick:function(e,t){let n={};for(let r of t)void 0!==e[r]&&(n[r]=e[r]);return n},predecessorWeights:function(e){let t=e.nodes().map(t=>{let n={};return e.inEdges(t).forEach(t=>{n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return d(e.nodes(),t)},range:s,removeEmptyRanks:function(e){let t=Math.min(...e.nodes().map(t=>e.node(t).rank)),n=[];e.nodes().forEach(r=>{let o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)});let r=0,o=e.graph().nodeRankFactor;Array.from(n).forEach((t,n)=>{void 0===t&&n%o!=0?--r:void 0!==t&&r&&t.forEach(t=>e.node(t).rank+=r)})},simplify:function(e){let t=new r().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},successorWeights:function(e){let t=e.nodes().map(t=>{let n={};return e.outEdges(t).forEach(t=>{n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return d(e.nodes(),t)},time:function(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}},uniqueId:l,zipObject:d};let i=0;function l(e){var t=++i;return toString(e)+t}function s(e,t,n=1){null==t&&(t=e,e=0);let r=e=>e<t;n<0&&(r=e=>t<e);let o=[];for(let t=e;r(t);t+=n)o.push(t);return o}function d(e,t){return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}},840825,(e,t,n)=>{"use strict";let r=e.r(944168),o=e.r(486448).uniqueId;t.exports={run:function(e){var t,n;let a,i,l;("greedy"===e.graph().acyclicer?r(e,(t=e,e=>t.edge(e).weight)):(a=[],i={},l={},(n=e).nodes().forEach(function e(t){l.hasOwnProperty(t)||(l[t]=!0,i[t]=!0,n.outEdges(t).forEach(t=>{i.hasOwnProperty(t.w)?a.push(t):e(t.w)}),delete i[t])}),a)).forEach(t=>{let n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,o("rev"))})},undo:function(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}}},538232,(e,t,n)=>{"use strict";let r=e.r(486448);t.exports={run:function(e){e.graph().dummyChains=[],e.edges().forEach(t=>(function(e,t){let n,o,a,i=t.v,l=e.node(i).rank,s=t.w,d=e.node(s).rank,u=t.name,c=e.edge(t),h=c.labelRank;if(d!==l+1){for(e.removeEdge(t),a=0,++l;l<d;++a,++l)c.points=[],o={width:0,height:0,edgeLabel:c,edgeObj:t,rank:l},n=r.addDummyNode(e,"edge",o,"_d"),l===h&&(o.width=c.width,o.height=c.height,o.dummy="edge-label",o.labelpos=c.labelpos),e.setEdge(i,n,{weight:c.weight},u),0===a&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,s,{weight:c.weight},u)}})(e,t))},undo:function(e){e.graph().dummyChains.forEach(t=>{let n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}}},981865,(e,t,n)=>{"use strict";t.exports={longestPath:function(e){var t={};e.sources().forEach(function n(r){var o=e.node(r);if(t.hasOwnProperty(r))return o.rank;t[r]=!0;var a=Math.min(...e.outEdges(r).map(t=>null==t?1/0:n(t.w)-e.edge(t).minlen));return a===1/0&&(a=0),o.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},583771,(e,t,n)=>{"use strict";var r=e.r(321008).Graph,o=e.r(981865).slack;t.exports=function(e){var t,n,a,i,l=new r({directed:!1}),s=e.nodes()[0],d=e.nodeCount();for(l.setNode(s,{});t=l,n=e,t.nodes().forEach(function e(r){n.nodeEdges(r).forEach(a=>{var i=a.v,l=r===i?a.w:i;t.hasNode(l)||o(n,a)||(t.setNode(l,{}),t.setEdge(r,l,{}),e(l))})}),t.nodeCount()<d;)a=function(e,t){return t.edges().reduce((n,r)=>{let a=1/0;return(e.hasNode(r.v)!==e.hasNode(r.w)&&(a=o(t,r)),a<n[0])?[a,r]:n},[1/0,null])[1]}(l,e),i=l.hasNode(a.v)?o(e,a):-o(e,a),function(e,t,n){e.nodes().forEach(e=>t.node(e).rank+=n)}(l,e,i);return l}},428757,(e,t,n)=>{"use strict";var r=e.r(583771),o=e.r(981865).slack,a=e.r(981865).longestPath,i=e.r(321008).alg.preorder,l=e.r(321008).alg.postorder,s=e.r(486448).simplify;function d(e){a(e=s(e));var t,n,o=r(e);for(h(o),u(o,e);t=f(o);)n=g(o,e,t),p(o,e,t,n)}function u(e,t){var n=l(e,e.nodes());(n=n.slice(0,n.length-1)).forEach(n=>{var r,o,a,i;return r=e,o=t,a=n,i=r.node(a).parent,void(r.edge(a,i).cutvalue=c(r,o,a))})}function c(e,t,n){var r=e.node(n).parent,o=!0,a=t.edge(n,r),i=0;return a||(o=!1,a=t.edge(r,n)),i=a.weight,t.nodeEdges(n).forEach(a=>{var l=a.v===n,s=l?a.w:a.v;if(s!==r){var d,u,c,h=l===o,f=t.edge(a).weight;if(i+=h?f:-f,d=e,u=n,c=s,d.hasEdge(u,c)){var g=e.edge(n,s).cutvalue;i+=h?-g:g}}}),i}function h(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,n,r,o,a){var i=r,l=t.node(o);return n[o]=!0,t.neighbors(o).forEach(a=>{n.hasOwnProperty(a)||(r=e(t,n,r,a,o))}),l.low=i,l.lim=r++,a?l.parent=a:delete l.parent,r}(e,{},1,t)}function f(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function g(e,t,n){var r=n.v,a=n.w;t.hasEdge(r,a)||(r=n.w,a=n.v);var i=e.node(r),l=e.node(a),s=i,d=!1;return i.lim>l.lim&&(s=l,d=!0),t.edges().filter(t=>d===m(e,e.node(t.v),s)&&d!==m(e,e.node(t.w),s)).reduce((e,n)=>o(t,n)<o(t,e)?n:e)}function p(e,t,n,r){var o,a,l,s,d=n.v,c=n.w;e.removeEdge(d,c),e.setEdge(r.v,r.w,{}),h(e),u(e,t),o=e,a=t,l=o.nodes().find(e=>!a.node(e).parent),(s=(s=i(o,l)).slice(1)).forEach(e=>{var t=o.node(e).parent,n=a.edge(e,t),r=!1;n||(n=a.edge(t,e),r=!0),a.node(e).rank=a.node(t).rank+(r?n.minlen:-n.minlen)})}function m(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}t.exports=d,d.initLowLimValues=h,d.initCutValues=u,d.calcCutValue=c,d.leaveEdge=f,d.enterEdge=g,d.exchangeEdges=p},843512,(e,t,n)=>{"use strict";var r=e.r(981865).longestPath,o=e.r(583771),a=e.r(428757);t.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:a(e);break;case"tight-tree":var t;r(t=e),o(t);break;case"longest-path":i(e)}};var i=r},126422,(e,t,n)=>{t.exports=function(e){var t;let n,r,o=(n={},r=0,(t=e).children().forEach(function e(o){let a=r;t.children(o).forEach(e),n[o]={low:a,lim:r++}}),n);e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeObj,a=function(e,t,n,r){let o,a,i=[],l=[],s=Math.min(t[n].low,t[r].low),d=Math.max(t[n].lim,t[r].lim);o=n;do i.push(o=e.parent(o));while(o&&(t[o].low>s||d>t[o].lim))for(a=o,o=r;(o=e.parent(o))!==a;)l.push(o);return{path:i.concat(l.reverse()),lca:a}}(e,o,r.v,r.w),i=a.path,l=a.lca,s=0,d=i[0],u=!0;for(;t!==r.w;){if(n=e.node(t),u){for(;(d=i[s])!==l&&e.node(d).maxRank<n.rank;)s++;d===l&&(u=!1)}if(!u){for(;s<i.length-1&&e.node(d=i[s+1]).minRank<=n.rank;)s++;d=i[s]}e.setParent(t,d),t=e.successors(t)[0]}})}},782171,(e,t,n)=>{let r=e.r(486448);t.exports={run:function(e){var t,n,o;let a=r.addDummyNode(e,"root",{},"_root"),i=(n={},(t=e).children().forEach(e=>(function e(r,o){var a=t.children(r);a&&a.length&&a.forEach(t=>e(t,o+1)),n[r]=o})(e,1)),n),l=Math.max(...Object.values(i))-1,s=2*l+1;e.graph().nestingRoot=a,e.edges().forEach(t=>e.edge(t).minlen*=s);let d=(o=e).edges().reduce((e,t)=>e+o.edge(t).weight,0)+1;e.children().forEach(t=>(function e(t,n,o,a,i,l,s){let d=t.children(s);if(!d.length){s!==n&&t.setEdge(n,s,{weight:0,minlen:o});return}let u=r.addBorderNode(t,"_bt"),c=r.addBorderNode(t,"_bb"),h=t.node(s);t.setParent(u,s),h.borderTop=u,t.setParent(c,s),h.borderBottom=c,d.forEach(r=>{e(t,n,o,a,i,l,r);let d=t.node(r),h=d.borderTop?d.borderTop:r,f=d.borderBottom?d.borderBottom:r,g=d.borderTop?a:2*a,p=h!==f?1:i-l[s]+1;t.setEdge(u,h,{weight:g,minlen:p,nestingEdge:!0}),t.setEdge(f,c,{weight:g,minlen:p,nestingEdge:!0})}),t.parent(s)||t.setEdge(n,u,{weight:0,minlen:i+l[s]})})(e,a,s,d,l,i,t)),e.graph().nodeRankFactor=s},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(t=>{e.edge(t).nestingEdge&&e.removeEdge(t)})}}},813194,(e,t,n)=>{let r=e.r(486448);function o(e,t,n,o,a,i){let l=a[t][i-1],s=r.addDummyNode(e,"border",{width:0,height:0,rank:i,borderType:t},n);a[t][i]=s,e.setParent(s,o),l&&e.setEdge(l,s,{weight:1})}t.exports=function(e){e.children().forEach(function t(n){let r=e.children(n),a=e.node(n);if(r.length&&r.forEach(t),a.hasOwnProperty("minRank")){a.borderLeft=[],a.borderRight=[];for(let t=a.minRank,r=a.maxRank+1;t<r;++t)o(e,"borderLeft","_bl",n,a,t),o(e,"borderRight","_br",n,a,t)}})}},35881,(e,t,n)=>{"use strict";function r(e){e.nodes().forEach(t=>o(e.node(t))),e.edges().forEach(t=>o(e.edge(t)))}function o(e){let t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function i(e){let t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){let t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&r(e)},undo:function(e){var t,n;let o=e.graph().rankdir.toLowerCase();("bt"===o||"rl"===o)&&((t=e).nodes().forEach(e=>a(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(a),n.hasOwnProperty("y")&&a(n)})),("lr"===o||"rl"===o)&&((n=e).nodes().forEach(e=>i(n.node(e))),n.edges().forEach(e=>{let t=n.edge(e);t.points.forEach(i),t.hasOwnProperty("x")&&i(t)}),r(e))}}},68045,(e,t,n)=>{"use strict";let r=e.r(486448);t.exports=function(e){let t={},n=e.nodes().filter(t=>!e.children(t).length),o=Math.max(...n.map(t=>e.node(t).rank)),a=r.range(o+1).map(()=>[]);return n.sort((t,n)=>e.node(t).rank-e.node(n).rank).forEach(function n(r){t[r]||(t[r]=!0,a[e.node(r).rank].push(r),e.successors(r).forEach(n))}),a}},631096,(e,t,n)=>{"use strict";let r=e.r(486448).zipObject;t.exports=function(e,t){let n=0;for(let o=1;o<t.length;++o)n+=function(e,t,n){let o=r(n,n.map((e,t)=>t)),a=t.flatMap(t=>e.outEdges(t).map(t=>({pos:o[t.w],weight:e.edge(t).weight})).sort((e,t)=>e.pos-t.pos)),i=1;for(;i<n.length;)i<<=1;let l=2*i-1;i-=1;let s=Array(l).fill(0),d=0;return a.forEach(e=>{let t=e.pos+i;s[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=s[t+1]),t=t-1>>1,s[t]+=e.weight;d+=e.weight*n}),d}(e,t[o-1],t[o]);return n}},936838,(e,t,n)=>{t.exports=function(e,t=[]){return t.map(t=>{let n=e.inEdges(t);if(!n.length)return{v:t};{let r=n.reduce((t,n)=>{let r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}})}},922359,(e,t,n)=>{"use strict";let r=e.r(486448);t.exports=function(e,t){let n={};return e.forEach((e,t)=>{let r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(r.barycenter=e.barycenter,r.weight=e.weight)}),t.edges().forEach(e=>{let t=n[e.v],r=n[e.w];void 0!==t&&void 0!==r&&(r.indegree++,t.out.push(n[e.w]))}),function(e){let t=[];for(;e.length;){let n=e.pop();t.push(n),n.in.reverse().forEach(function(e){return t=>{!t.merged&&(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(n)),n.out.forEach(function(t){return n=>{n.in.push(t),0==--n.indegree&&e.push(n)}}(n))}return t.filter(e=>!e.merged).map(e=>r.pick(e,["vs","i","barycenter","weight"]))}(Object.values(n).filter(e=>!e.indegree))}},478460,(e,t,n)=>{let r=e.r(486448);function o(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}t.exports=function(e,t){var n;let a=r.partition(e,e=>e.hasOwnProperty("barycenter")),i=a.lhs,l=a.rhs.sort((e,t)=>t.i-e.i),s=[],d=0,u=0,c=0;i.sort((n=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i)),c=o(s,l,c),i.forEach(e=>{c+=e.vs.length,s.push(e.vs),d+=e.barycenter*e.weight,u+=e.weight,c=o(s,l,c)});let h={vs:s.flat(!0)};return u&&(h.barycenter=d/u,h.weight=u),h}},153011,(e,t,n)=>{let r=e.r(936838),o=e.r(922359),a=e.r(478460);t.exports=function e(t,n,i,l){var s,d;let u=t.children(n),c=t.node(n),h=c?c.borderLeft:void 0,f=c?c.borderRight:void 0,g={};h&&(u=u.filter(e=>e!==h&&e!==f));let p=r(t,u);p.forEach(n=>{if(t.children(n.v).length){var r,o;let a=e(t,n.v,i,l);g[n.v]=a,a.hasOwnProperty("barycenter")&&(r=n,o=a,void 0!==r.barycenter?(r.barycenter=(r.barycenter*r.weight+o.barycenter*o.weight)/(r.weight+o.weight),r.weight+=o.weight):(r.barycenter=o.barycenter,r.weight=o.weight))}});let m=o(p,i);s=m,d=g,s.forEach(e=>{e.vs=e.vs.flatMap(e=>d[e]?d[e].vs:e)});let y=a(m,l);if(h&&(y.vs=[h,y.vs,f].flat(!0),t.predecessors(h).length)){let e=t.node(t.predecessors(h)[0]),n=t.node(t.predecessors(f)[0]);y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+e.order+n.order)/(y.weight+2),y.weight+=2}return y}},685566,(e,t,n)=>{let r=e.r(321008).Graph,o=e.r(486448);t.exports=function(e,t,n){let a=function(e){for(var t;e.hasNode(t=o.uniqueId("_root")););return t}(e),i=new r({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(t=>e.node(t));return e.nodes().forEach(r=>{let o=e.node(r),l=e.parent(r);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(r),i.setParent(r,l||a),e[n](r).forEach(t=>{let n=t.v===r?t.w:t.v,o=i.edge(n,r),a=void 0!==o?o.weight:0;i.setEdge(n,r,{weight:e.edge(t).weight+a})}),o.hasOwnProperty("minRank")&&i.setNode(r,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}},764045,(e,t,n)=>{t.exports=function(e,t,n){let r={},o;n.forEach(n=>{let a=e.parent(n),i,l;for(;a;){if((i=e.parent(a))?(l=r[i],r[i]=a):(l=o,o=a),l&&l!==a)return void t.setEdge(l,a);a=i}})}},661017,(e,t,n)=>{"use strict";let r=e.r(68045),o=e.r(631096),a=e.r(153011),i=e.r(685566),l=e.r(764045),s=e.r(321008).Graph,d=e.r(486448);function u(e,t,n){return t.map(function(t){return i(e,t,n)})}function c(e,t){Object.values(t).forEach(t=>t.forEach((t,n)=>e.node(t).order=n))}t.exports=function(e){let t=d.maxRank(e),n=u(e,d.range(1,t+1),"inEdges"),i=u(e,d.range(t-1,-1,-1),"outEdges"),h=r(e);c(e,h);let f=1/0,g;for(let t=0,r=0;r<4;++t,++r){(function(e,t){let n=new s;e.forEach(function(e){let r=e.graph().root,o=a(e,r,n,t);o.vs.forEach((t,n)=>e.node(t).order=n),l(e,n,o.vs)})})(t%2?n:i,t%4>=2),h=d.buildLayerMatrix(e);let u=o(e,h);u<f&&(r=0,g=Object.assign({},h),f=u)}c(e,g)}},394933,(e,t,n)=>{"use strict";let r=e.r(321008).Graph,o=e.r(486448);function a(e,t){let n={};return t.reduce(function(t,r){let o=0,a=0,i=t.length,s=r[r.length-1];return r.forEach((t,d)=>{let u=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find(t=>e.node(t).dummy)}(e,t),c=u?e.node(u).order:i;(u||t===s)&&(r.slice(a,d+1).forEach(t=>{e.predecessors(t).forEach(r=>{let a=e.node(r),i=a.order;(i<o||c<i)&&!(a.dummy&&e.node(t).dummy)&&l(n,r,t)})}),a=d+1,o=c)}),r}),n}function i(e,t){let n={};function r(t,r,a,i,s){let d;o.range(r,a).forEach(r=>{d=t[r],e.node(d).dummy&&e.predecessors(d).forEach(t=>{let r=e.node(t);r.dummy&&(r.order<i||r.order>s)&&l(n,t,d)})})}return t.reduce(function(t,n){let o=-1,a,i=0;return n.forEach((l,s)=>{if("border"===e.node(l).dummy){let t=e.predecessors(l);t.length&&(a=e.node(t[0]).order,r(n,i,s,o,a),i=s,o=a)}r(n,i,n.length,a,t.length)}),n}),n}function l(e,t,n){if(t>n){let e=t;t=n,n=e}let r=e[t];r||(e[t]=r={}),r[n]=!0}function s(e,t,n){if(t>n){let e=t;t=n,n=e}return!!e[t]&&e[t].hasOwnProperty(n)}function d(e,t,n,r){let o={},a={},i={};return t.forEach(e=>{e.forEach((e,t)=>{o[e]=e,a[e]=e,i[e]=t})}),t.forEach(e=>{let t=-1;e.forEach(e=>{let l=r(e);if(l.length){let r=((l=l.sort((e,t)=>i[e]-i[t])).length-1)/2;for(let d=Math.floor(r),u=Math.ceil(r);d<=u;++d){let r=l[d];a[e]===e&&t<i[r]&&!s(n,e,r)&&(a[r]=e,a[e]=o[e]=o[r],t=i[r])}}})}),{root:o,align:a}}function u(e,t,n,o,a){var i,l,s,d,u,c,h;let f,g,p,m={},y=(i=e,l=t,s=n,d=a,f=new r,p=(u=(g=i.graph()).nodesep,c=g.edgesep,h=d,(e,t,n)=>{let r,o,a=e.node(t),i=e.node(n);if(r=0+a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":o=-a.width/2;break;case"r":o=a.width/2}if(o&&(r+=h?o:-o),o=0,r+=(a.dummy?c:u)/2,r+=(i.dummy?c:u)/2,r+=i.width/2,i.hasOwnProperty("labelpos"))switch(i.labelpos.toLowerCase()){case"l":o=i.width/2;break;case"r":o=-i.width/2}return o&&(r+=h?o:-o),o=0,r}),l.forEach(e=>{let t;e.forEach(e=>{let n=s[e];if(f.setNode(n),t){var r=s[t],o=f.edge(r,n);f.setEdge(r,n,Math.max(p(i,e,t),o||0))}t=e})}),f),v=a?"borderLeft":"borderRight";function b(e,t){let n=y.nodes(),r=n.pop(),o={};for(;r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return b(function(e){m[e]=y.inEdges(e).reduce((e,t)=>Math.max(e,m[t.v]+y.edge(t)),0)},y.predecessors.bind(y)),b(function(t){let n=y.outEdges(t).reduce((e,t)=>Math.min(e,m[t.w]-y.edge(t)),1/0),r=e.node(t);n!==1/0&&r.borderType!==v&&(m[t]=Math.max(m[t],n))},y.successors.bind(y)),Object.keys(o).forEach(e=>m[e]=m[n[e]]),m}function c(e,t){return Object.values(t).reduce((t,n)=>{let r=-1/0,o=1/0;Object.entries(n).forEach(([t,n])=>{var a,i;let l=(a=e,i=t,a.node(i).width/2);r=Math.max(n+l,r),o=Math.min(n-l,o)});let a=r-o;return a<t[0]&&(t=[a,n]),t},[1/0,null])[1]}function h(e,t){let n=Object.values(t),r=Math.min(...n),a=Math.max(...n);["u","d"].forEach(n=>{["l","r"].forEach(i=>{let l=n+i,s=e[l];if(s===t)return;let d=Object.values(s),u=r-Math.min(...d);"l"!==i&&(u=a-Math.max(...d)),u&&(e[l]=o.mapValues(s,e=>e+u))})})}function f(e,t){return o.mapValues(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];{let t=Object.values(e).map(e=>e[r]).sort((e,t)=>e-t);return(t[1]+t[2])/2}})}t.exports={positionX:function(e){let t,n=o.buildLayerMatrix(e),r=Object.assign(a(e,n),i(e,n)),l={};["u","d"].forEach(a=>{t="u"===a?n:Object.values(n).reverse(),["l","r"].forEach(n=>{"r"===n&&(t=t.map(e=>Object.values(e).reverse()));let i=("u"===a?e.predecessors:e.successors).bind(e),s=d(e,t,r,i),c=u(e,t,s.root,s.align,"r"===n);"r"===n&&(c=o.mapValues(c,e=>-e)),l[a+n]=c})});let s=c(e,l);return h(l,s),f(l,e.graph().align)},findType1Conflicts:a,findType2Conflicts:i,addConflict:l,hasConflict:s,verticalAlignment:d,horizontalCompaction:u,alignCoordinates:h,findSmallestWidthAlignment:c,balance:f}},173075,(e,t,n)=>{"use strict";let r=e.r(486448),o=e.r(394933).positionX;t.exports=function(e){var t;let n,a,i;t=e=r.asNonCompoundGraph(e),n=r.buildLayerMatrix(t),a=t.graph().ranksep,i=0,n.forEach(e=>{let n=e.reduce((e,n)=>{let r=t.node(n).height;return e>r?e:r},0);e.forEach(e=>t.node(e).y=i+n/2),i+=n+a}),Object.entries(o(e)).forEach(([t,n])=>e.node(t).x=n)}},777056,(e,t,n)=>{"use strict";let r=e.r(840825),o=e.r(538232),a=e.r(843512),i=e.r(486448).normalizeRanks,l=e.r(126422),s=e.r(486448).removeEmptyRanks,d=e.r(782171),u=e.r(813194),c=e.r(35881),h=e.r(661017),f=e.r(173075),g=e.r(486448),p=e.r(321008).Graph;t.exports=function(e,t){let n=t&&t.debugTiming?g.time:g.notime;n("layout",()=>{let t=n("  buildLayoutGraph",()=>{var t;let n,r;return t=e,n=new p({multigraph:!0,compound:!0}),r=M(t.graph()),n.setGraph(Object.assign({},y,k(r,m),g.pick(r,v))),t.nodes().forEach(e=>{let r=k(M(t.node(e)),b);Object.keys(w).forEach(e=>{void 0===r[e]&&(r[e]=w[e])}),n.setNode(e,r),n.setParent(e,t.parent(e))}),t.edges().forEach(e=>{let r=M(t.edge(e));n.setEdge(e,Object.assign({},x,k(r,E),g.pick(r,S)))}),n});n("  runLayout",()=>{var e,p;return e=t,void((p=n)("    makeSpaceForEdgeLabels",()=>{var t;let n;return n=(t=e).graph(),void(n.ranksep/=2,t.edges().forEach(e=>{let r=t.edge(e);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}),p("    removeSelfEdges",()=>{var t;(t=e).edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),p("    acyclic",()=>r.run(e)),p("    nestingGraph.run",()=>d.run(e)),p("    rank",()=>a(g.asNonCompoundGraph(e))),p("    injectEdgeLabelProxies",()=>{var t;(t=e).edges().forEach(e=>{let n=t.edge(e);if(n.width&&n.height){let n=t.node(e.v),r={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};g.addDummyNode(t,"edge-proxy",r,"_ep")}})}),p("    removeEmptyRanks",()=>s(e)),p("    nestingGraph.cleanup",()=>d.cleanup(e)),p("    normalizeRanks",()=>i(e)),p("    assignRankMinMax",()=>{var t;let n;return n=0,void((t=e).nodes().forEach(e=>{let r=t.node(e);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,n=Math.max(n,r.maxRank))}),t.graph().maxRank=n)}),p("    removeEdgeLabelProxies",()=>{var t;(t=e).nodes().forEach(e=>{let n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}),p("    normalize.run",()=>o.run(e)),p("    parentDummyChains",()=>l(e)),p("    addBorderSegments",()=>u(e)),p("    order",()=>h(e)),p("    insertSelfEdges",()=>{var t;return t=e,void g.buildLayerMatrix(t).forEach(e=>{var n=0;e.forEach((e,r)=>{var o=t.node(e);o.order=r+n,(o.selfEdges||[]).forEach(e=>{g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}),p("    adjustCoordinateSystem",()=>c.adjust(e)),p("    position",()=>f(e)),p("    positionSelfEdges",()=>{var t;(t=e).nodes().forEach(e=>{var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,l=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*i/3,y:a-l},{x:o+5*i/6,y:a-l},{x:o+i,y:a},{x:o+5*i/6,y:a+l},{x:o+2*i/3,y:a+l}],n.label.x=n.x,n.label.y=n.y}})}),p("    removeBorderNodes",()=>{var t;(t=e).nodes().forEach(e=>{if(t.children(e).length){let n=t.node(e),r=t.node(n.borderTop),o=t.node(n.borderBottom),a=t.node(n.borderLeft[n.borderLeft.length-1]),i=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(i.x-a.x),n.height=Math.abs(o.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{"border"===t.node(e).dummy&&t.removeNode(e)})}),p("    normalize.undo",()=>o.undo(e)),p("    fixupEdgeLabelCoords",()=>{var t;(t=e).edges().forEach(e=>{let n=t.edge(e);if(n.hasOwnProperty("x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}),p("    undoCoordinateSystem",()=>c.undo(e)),p("    translateGraph",()=>(function(e){let t=1/0,n=0,r=1/0,o=0,a=e.graph(),i=a.marginx||0,l=a.marginy||0;function s(e){let a=e.x,i=e.y,l=e.width,s=e.height;t=Math.min(t,a-l/2),n=Math.max(n,a+l/2),r=Math.min(r,i-s/2),o=Math.max(o,i+s/2)}e.nodes().forEach(t=>s(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.hasOwnProperty("x")&&s(n)}),t-=i,r-=l,e.nodes().forEach(n=>{let o=e.node(n);o.x-=t,o.y-=r}),e.edges().forEach(n=>{let o=e.edge(n);o.points.forEach(e=>{e.x-=t,e.y-=r}),o.hasOwnProperty("x")&&(o.x-=t),o.hasOwnProperty("y")&&(o.y-=r)}),a.width=n-t+i,a.height=o-r+l})(e)),p("    assignNodeIntersects",()=>{var t;(t=e).edges().forEach(e=>{let n,r,o=t.edge(e),a=t.node(e.v),i=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=a),o.points.unshift(g.intersectRect(a,n)),o.points.push(g.intersectRect(i,r))})}),p("    reversePoints",()=>{var t;(t=e).edges().forEach(e=>{let n=t.edge(e);n.reversed&&n.points.reverse()})}),p("    acyclic.undo",()=>r.undo(e)))}),n("  updateInputGraph",()=>{var n,r;return n=e,r=t,void(n.nodes().forEach(e=>{let t=n.node(e),o=r.node(e);t&&(t.x=o.x,t.y=o.y,t.rank=o.rank,r.children(e).length&&(t.width=o.width,t.height=o.height))}),n.edges().forEach(e=>{let t=n.edge(e),o=r.edge(e);t.points=o.points,o.hasOwnProperty("x")&&(t.x=o.x,t.y=o.y)}),n.graph().width=r.graph().width,n.graph().height=r.graph().height)})})};let m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},v=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},E=["minlen","weight","width","height","labeloffset"],x={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function k(e,t){return g.mapValues(g.pick(e,t),Number)}function M(e){var t={};return e&&Object.entries(e).forEach(([e,n])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=n}),t}},868694,(e,t,n)=>{let r=e.r(486448),o=e.r(321008).Graph;t.exports={debugOrdering:function(e){let t=r.buildLayerMatrix(e),n=new o({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(t=>{n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),e.edges().forEach(e=>n.setEdge(e.v,e.w,{},e.name)),t.forEach((e,t)=>{n.setNode("layer"+t,{rank:"same"}),e.reduce((e,t)=>(n.setEdge(e,t,{style:"invis"}),t))}),n}}},242148,(e,t,n)=>{t.exports="1.0.4"},971104,(e,t,n)=>{t.exports={graphlib:e.r(321008),layout:e.r(777056),debug:e.r(868694),util:{time:e.r(486448).time,notime:e.r(486448).notime},version:e.r(242148)}}]);

//# debugId=27691f0d-f8c7-cb06-4bab-6f3a198d96b3
//# sourceMappingURL=66af726fb0aef1f7.js.map