;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e9da8c12-0610-aa1a-3b63-51ed0f832082")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,693241,e=>{"use strict";var t=e.i(478902),a=e.i(710483);let s=({resourceText:e,isFullPage:s=!1})=>{let r=()=>(0,t.jsx)(a.Admonition,{type:"warning",title:`You need additional permissions to ${e}`,description:"Contact your organization owner or administrator for assistance."});return s?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-lg",children:(0,t.jsx)(r,{})})}):(0,t.jsx)(r,{})};e.s(["NoPermission",0,s,"default",0,s])},127739,e=>{"use strict";var t=e.i(478902),a=e.i(709520),s=e.i(389959),r=e.i(843778);let n=(0,a.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),i=(0,s.forwardRef)(({className:e,size:a,...s},i)=>(0,t.jsx)("div",{ref:i,...s,className:(0,r.cn)(n({size:a}),e)}));i.displayName="PageContainer",e.s(["PageContainer",0,i])},3259,100387,e=>{"use strict";var t=e.i(478902),a=e.i(153545),s=e.i(933505);e.s(["ChevronRightIcon",()=>s.default],100387);var s=s,r=e.i(389959),n=e.i(843778);let i=r.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));i.displayName="Breadcrumb";let l=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("ol",{ref:s,className:(0,n.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...a}));l.displayName="BreadcrumbList";let c=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("li",{ref:s,className:(0,n.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...a}));c.displayName="BreadcrumbItem";let o=r.forwardRef(({asChild:e,className:s,...r},i)=>{let l=e?a.Slot:"a";return(0,t.jsx)(l,{ref:i,className:(0,n.cn)("transition-colors underline lg:no-underline hover:text-foreground",s),...r})});o.displayName="BreadcrumbLink";let d=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("no-underline text-foreground",e),...a}));d.displayName="BreadcrumbPage";let u=({children:e,className:a,...r})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5 text-foreground-muted",a),...r,children:e??(0,t.jsx)(s.default,{})});u.displayName="BreadcrumbSeparator";let m=({className:e,...a})=>(0,t.jsxs)("span",{className:(0,n.cn)("flex h-4 w-4 items-center justify-center",e),...a,children:[(0,t.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"sr-only",children:"More"})]});m.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>i,"BreadcrumbEllipsis",()=>m,"BreadcrumbItem",()=>c,"BreadcrumbLink",()=>o,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},744061,418638,e=>{"use strict";var t=e.i(478902),a=e.i(938933),s=e.i(843778);function r({children:e,className:a,tag:s="div",style:r}){let n=`${s}`;return(0,t.jsx)(n,{style:r,children:e})}r.Title=function({className:e,level:a=1,children:s,style:r}){let n=`h${a}`;return(0,t.jsx)(n,{style:r,children:s})},r.Text=function({className:e,children:a,style:s,type:r,disabled:n,mark:i,code:l,keyboard:c,underline:o,strikethrough:d,strong:u,small:m}){return l?(0,t.jsx)("code",{style:s,children:a}):i?(0,t.jsx)("mark",{style:s,children:a}):c?(0,t.jsx)("kbd",{style:s,children:a}):u?(0,t.jsx)("strong",{style:s,children:a}):(0,t.jsx)("span",{style:s,children:a})},r.Link=function({children:e,target:a="_blank",href:s,className:r,onClick:n,style:i}){return(0,t.jsx)("a",{onClick:n,href:s,target:a,rel:"noopener noreferrer",style:i,children:e})},e.s(["default",0,r],418638);var n=e.i(389959);let i=(0,n.createContext)({type:"text"}),l=e=>{let{type:a}=e;return(0,t.jsx)(i.Provider,{value:{type:a},children:e.children})},c=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function o({children:e,className:a,ulClassName:s,style:r,type:n="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:r,children:(0,t.jsx)(l,{type:n,children:(0,t.jsx)("ul",{className:s,children:e})})})}o.Item=function({children:e,icon:r,active:n,rounded:i,onClick:l,doNotCloseOverlay:o=!1,showActiveBar:d=!1,style:u}){let m=(0,a.default)("menu"),{type:f}=c(),p=[m.item.base];p.push(m.item.variants[f].base),n?p.push(m.item.variants[f].active):p.push(m.item.variants[f].normal);let h=[m.item.content.base];n?h.push(m.item.content.active):h.push(m.item.content.normal);let g=[m.item.icon.base];return n?g.push(m.item.icon.active):g.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,s.cn)("outline-none",p),style:u,onClick:l,"aria-current":n?"page":void 0,children:[r&&(0,t.jsx)("div",{className:`${g.join(" ")} min-w-fit`,children:r}),(0,t.jsx)("span",{className:h.join(" "),children:e})]})},o.Group=function({children:e,icon:s,title:r}){let n=(0,a.default)("menu"),{type:i}=c();return(0,t.jsxs)("div",{className:[n.group.base,n.group.variants[i]].join(" "),children:[s&&(0,t.jsx)("span",{className:n.group.icon,children:s}),(0,t.jsx)("span",{className:n.group.content,children:r}),e]})},o.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(r.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,o],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),a=e.i(587433),s=e.i(862326),r=e.i(210419),n=e.i(837710);let i=({item:e,isActive:i,target:l="_self",hoverText:c="",onClick:o})=>{let{name:d="",url:u="",icon:m,rightIcon:f,isExternal:p,label:h,disabled:g}=e,x=(0,t.jsx)(s.Menu.Item,{icon:m,active:i,onClick:o,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:c||("string"==typeof d?d:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:d}),void 0!==h&&(0,t.jsx)(a.Badge,{className:"flex-shrink-0",variant:"new"===h.toLowerCase()?"success":"warning",children:h})]}),f&&(0,t.jsx)("div",{children:f})]})});return g?(0,t.jsx)("div",{className:"opacity-50 pointer-events-none",children:x}):u?p?(0,t.jsx)(n.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:m,children:(0,t.jsx)(r.default,{href:u,target:"_blank",rel:"noreferrer",children:d})}):(0,t.jsx)(r.default,{href:u,className:"block",target:l,children:x}):x};e.s(["ProductMenuItem",0,i],799793),e.s(["ProductMenu",0,({page:e,menu:r})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(s.Menu,{type:"pills",children:r.map((n,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(s.Menu.Group,{title:n.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:n.title}),n.isPreview&&(0,t.jsx)(a.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:n.items.map(a=>{let s=a.pages?a.pages.includes(e??""):e===a.key;return(0,t.jsx)(i,{item:a,isActive:s,target:a.isExternal?"_blank":"_self"},a.key)})})]})}),l!==r.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},n.key||n.title))})})],388147)},167892,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(843778);let r="mx-auto w-full max-w-[1200px]",n="px-4 @lg:px-6 @xl:px-10",i=(0,a.forwardRef)(({className:e,bottomPadding:a,size:r="default",...i},l)=>(0,t.jsx)("div",{ref:l,...i,className:(0,s.cn)("mx-auto w-full @container",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[r],n,a&&"pb-16",e)})),l=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("header",{...a,ref:r,className:(0,s.cn)("w-full","flex-col gap-3 py-6",e)})),c=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("h1",{ref:r,...a,className:(0,s.cn)(e)})),o=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,...a,className:(0,s.cn)("text-sm text-foreground-light",e)})),d=(0,a.forwardRef)(({className:e,isFullWidth:a,topPadding:r,...n},i)=>(0,t.jsx)("div",{ref:i,...n,className:(0,s.cn)("flex flex-col first:pt-12 py-6",a?"w-full":"gap-3 @md:grid-cols-12 @lg:grid",e)})),u=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("w-full h-px bg-border shrink-0",e)})),m=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,...a,className:(0,s.cn)("text-foreground text-xl",e)})),f=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,...a,className:(0,s.cn)("text-sm text-foreground-light",e)})),p=(0,a.forwardRef)(({className:e,children:a,title:r,...n},i)=>(0,t.jsxs)("div",{ref:i,...n,className:(0,s.cn)("col-span-4 xl:col-span-5 prose text-sm",e),children:[r&&(0,t.jsx)("h2",{children:r}),a]})),h=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",e)})),g=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-col gap-3 items-center",e)})),x=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex w-full items-center",e)})),b=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-row gap-3",e)})),j=(0,a.forwardRef)(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,...a,className:(0,s.cn)("flex flex-col gap-3","min-w-[420px]",e)})),v=(0,a.forwardRef)(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,...a,className:(0,s.cn)(r,n,"my-8 flex flex-col gap-8",e)}));l.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",o.displayName="ScaffoldDescription",i.displayName="ScaffoldContainer",u.displayName="ScaffoldDivider",d.displayName="ScaffoldSection",j.displayName="ScaffoldColumn",p.displayName="ScaffoldSectionDetail",h.displayName="ScaffoldSectionContent",g.displayName="ScaffoldFilterAndContent",x.displayName="ScaffoldActionsContainer",b.displayName="ScaffoldActionsGroup",v.displayName="ScaffoldContainerLegacy",m.displayName="ScaffoldSectionTitle",f.displayName="ScaffoldSectionDescription",e.s(["MAX_WIDTH_CLASSES",0,r,"PADDING_CLASSES",0,n,"ScaffoldActionsContainer",0,x,"ScaffoldActionsGroup",0,b,"ScaffoldColumn",0,j,"ScaffoldContainer",0,i,"ScaffoldContainerLegacy",0,v,"ScaffoldDescription",0,o,"ScaffoldDivider",0,u,"ScaffoldFilterAndContent",0,g,"ScaffoldHeader",0,l,"ScaffoldSection",0,d,"ScaffoldSectionContent",0,h,"ScaffoldSectionDescription",0,f,"ScaffoldSectionDetail",0,p,"ScaffoldSectionTitle",0,m,"ScaffoldTitle",0,c])},547723,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(843778);let r=(0,a.forwardRef)((e,a)=>(0,t.jsx)("nav",{ref:a,dir:"ltr",...e,className:(0,s.cn)("border-b",e.className),children:(0,t.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),n=(0,a.forwardRef)(({children:e,className:a,active:r,...n},i)=>(0,t.jsx)("li",{ref:i,"aria-selected":r?"true":"false","data-state":r?"active":"inactive",className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",a),...n,children:e}));e.s(["NavMenu",0,r,"NavMenuItem",0,n])},79771,e=>{"use strict";var t=e.i(478902),a=e.i(210419),s=e.i(271226);e.i(128328);var r=e.i(158639),n=e.i(587433),i=e.i(837710),l=e.i(843778),c=e.i(547723),o=e.i(167892),d=e.i(954676),u=e.i(389959),m=e.i(3259);let f=({title:e,subtitle:s,icon:n,breadcrumbs:i=[],primaryActions:c,secondaryActions:f,className:p,isCompact:h=!1})=>{let{ref:g}=(0,r.useParams)(),x=h&&e?[...i,{label:e}]:i;return(0,t.jsxs)("div",{className:(0,l.cn)("space-y-4",p),children:[(x.length>0||h&&(e||c||f))&&(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-4",h?"justify-between":"mb-4"),children:[(0,t.jsx)("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:i.length>0?(0,t.jsx)(m.Breadcrumb,{className:(0,l.cn)("text-foreground-muted",h&&"text-base","min-w-0 flex-1"),children:(0,t.jsxs)(m.BreadcrumbList,{className:(0,l.cn)(h?"text-base":"text-xs","min-w-0"),children:[i.map((e,s)=>(0,t.jsxs)(u.Fragment,{children:[(0,t.jsx)(m.BreadcrumbItem,{children:e.element?e.element:e.href?(0,t.jsx)(m.BreadcrumbLink,{asChild:!0,className:"flex items-center gap-2",children:(0,t.jsxs)(a.default,{href:g?e.href.replace("[ref]",g):e.href,children:[1===i.length&&!h&&(0,t.jsx)(d.ChevronLeft,{size:16,strokeWidth:1.5}),e.label]})}):(0,t.jsxs)(m.BreadcrumbPage,{className:"flex items-center gap-2",children:[1===i.length&&(0,t.jsx)(d.ChevronLeft,{size:16,strokeWidth:1.5}),e.label]})}),s<i.length-1&&(0,t.jsx)(m.BreadcrumbSeparator,{})]},e.label||`breadcrumb-${s}`)),h&&e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.BreadcrumbSeparator,{}),(0,t.jsx)(m.BreadcrumbItem,{className:"min-w-0 flex-1",children:(0,t.jsx)(m.BreadcrumbPage,{className:"min-w-0",children:e})})]})]})}):h?(0,t.jsx)("div",{className:"min-w-0 flex-1",children:e}):null}),h&&(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[f&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:f}),c&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:c})]})]}),!h&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[n&&(0,t.jsx)("div",{className:"text-foreground-light",children:n}),(0,t.jsxs)("div",{className:"space-y-1",children:[e&&("string"==typeof e?(0,t.jsx)(o.ScaffoldTitle,{children:e}):e),s&&("string"==typeof s?(0,t.jsx)(o.ScaffoldDescription,{className:"text-sm text-foreground-light",children:s}):s)]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:f}),c&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:c})]})]})]})};e.s(["PageLayout",0,({children:e,title:d,subtitle:u,icon:m,breadcrumbs:p=[],primaryActions:h,secondaryActions:g,navigationItems:x=[],className:b,size:j="default",isCompact:v=!1})=>{let{ref:E}=(0,r.useParams)(),N=(0,s.useRouter)();return(0,t.jsxs)("div",{className:(0,l.cn)("w-full min-h-full flex flex-col items-stretch",b),children:[(0,t.jsxs)(o.ScaffoldContainer,{size:j,className:(0,l.cn)("w-full mx-auto","full"===j&&(v?"max-w-none !px-6 border-b pt-4":"max-w-none pt-6 !px-10 border-b"),"full"!==j&&(v?"pt-4":"pt-12"),0===x.length&&"full"===j&&(v?"pb-4":"pb-8")),children:[(d||u||h||g||p.length>0)&&(0,t.jsx)(f,{title:d,subtitle:u,icon:m,breadcrumbs:p,primaryActions:h,secondaryActions:g,isCompact:v}),x.length>0&&(0,t.jsx)(c.NavMenu,{className:(0,l.cn)(v?"mt-2":"mt-4","full"===j&&"border-none"),children:x.map(e=>{let s=void 0!==e.active?e.active:N.asPath.split("?")[0]===e.href;return(0,t.jsx)(c.NavMenuItem,{active:s,children:e.href?(0,t.jsxs)(a.default,{href:e.href.includes("[ref]")&&E?e.href.replace("[ref]",E):e.href,className:(0,l.cn)("inline-flex items-center gap-2",s&&"text-foreground"),onClick:e.onClick,children:[e.icon&&(0,t.jsx)("span",{children:e.icon}),e.label,e.badge&&(0,t.jsx)(n.Badge,{variant:"default",children:e.badge})]}):(0,t.jsxs)(i.Button,{type:"link",onClick:e.onClick,className:(0,l.cn)(s&&"text-foreground font-medium"),children:[e.icon&&(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.label,e.badge&&(0,t.jsx)(n.Badge,{variant:"default",children:e.badge})]})},e.label)})})]}),e]})}],79771)},450972,e=>{"use strict";var t=e.i(248593),a=e.i(242882),s=e.i(234745),r=e.i(635494);e.i(10429);var n=e.i(837508),i=e.i(667286);async function l({projectRef:e,connectionString:a},r,n){if(!e)throw Error("projectRef is required");let i=new Headers(n);a&&i.set("x-connection-encrypted",a);let{data:l,error:c}=await (0,s.get)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":a,"x-pg-application-name":t.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e}},headers:i,signal:r});return c&&(0,s.handleError)(c),l}e.s(["useDatabaseExtensionsQuery",0,({projectRef:e,connectionString:t},{enabled:s=!0,...c}={})=>{let{data:o}=(0,r.useSelectedProjectQuery)(),d=o?.status===n.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,a.useQuery)({queryKey:i.databaseExtensionsKeys.list(e),queryFn:({signal:a})=>l({projectRef:e,connectionString:t},a),enabled:s&&void 0!==e&&d,...c})}])},737051,e=>{"use strict";e.i(128328);var t=e.i(657588),a=e.i(265735);e.s(["useIsETLPrivateAlpha",0,()=>{let{data:e}=(0,a.useSelectedOrganizationQuery)(),s=(0,t.useFlag)("etlPrivateAlpha"),r="string"==typeof s?s.split(",").map(e=>e.trim()):[];return(0,t.useFlag)("etlPrivateAlphaOverride")||r.includes(e?.slug??"")}])},812136,e=>{"use strict";var t=e.i(478902),a=e.i(271226),s=e.i(463333),r=e.i(737051),n=e.i(388147),i=e.i(450972),l=e.i(144676),c=e.i(912793),o=e.i(635494),d=e.i(951138),u=e.i(825713),m=e.i(731201);let f=()=>{let{data:e}=(0,o.useSelectedProjectQuery)(),d=(0,a.useRouter)().pathname.split("/")[4],{data:u}=(0,i.useDatabaseExtensionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{data:f}=(0,l.useProjectAddonsQuery)({projectRef:e?.ref}),p=void 0!==(u??[]).find(e=>"pg_net"===e.name),h=f?.selected_addons.find(e=>"pitr"===e.type)!==void 0,g=(0,s.useIsColumnLevelPrivilegesEnabled)(),x=(0,r.useIsETLPrivateAlpha)(),{databaseReplication:b,databaseRoles:j,integrationsWrappers:v}=(0,c.useIsFeatureEnabled)(["database:replication","database:roles","integrations:wrappers"]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.ProductMenu,{page:d,menu:(0,m.generateDatabaseMenu)(e,{pgNetExtensionExists:p,pitrEnabled:h,columnLevelPrivileges:g,showPgReplicate:b,enablePgReplicate:x,showRoles:j,showWrappers:v})})})},p=(0,d.withAuth)(({children:e})=>(0,t.jsx)(u.ProjectLayout,{product:"Database",productMenu:(0,t.jsx)(f,{}),isBlocking:!1,children:e}));e.s(["default",0,p])},394983,228282,e=>{"use strict";var t=e.i(478902);let a=(0,e.i(388019).default)("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);e.s(["SquarePlus",()=>a],228282);var s=e.i(389959),r=e.i(843778);e.s(["EmptyStatePresentational",0,({icon:e,title:n,description:i,children:l,className:c,iconSize:o=24,iconClassName:d,contentClassName:u})=>{let m=e||a,f=(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col items-center text-center text-balance",u),children:[(0,t.jsx)("h3",{children:n}),i&&(0,t.jsx)("p",{className:"text-foreground-light text-sm max-w-[640px]",children:i})]});return(0,t.jsxs)("aside",{className:(0,r.cn)("border border-dashed w-full bg-surface-100 rounded-lg px-4 py-10 flex flex-col items-center gap-y-3",c),children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-3 items-center",children:[(0,s.isValidElement)(m)?m:"function"==typeof m||"object"==typeof m&&null!==m&&"$$typeof"in m?(0,s.createElement)(m,{size:o,strokeWidth:1.5,className:(0,r.cn)("text-foreground-muted",d)}):m,f]}),l]})}],394983)},582391,e=>{"use strict";let t=(0,e.i(388019).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],582391)},572261,(e,t,a)=>{var s=e.r(632981);t.exports=function(e,t){return s(t,function(t){return e[t]})}},812734,(e,t,a)=>{var s=e.r(572261),r=e.r(588159);t.exports=function(e){return null==e?[]:s(e,r(e))}},702454,(e,t,a)=>{var s=e.r(737688),r=e.r(140023),n=e.r(792252),i=e.r(472560),l=e.r(812734),c=Math.max;t.exports=function(e,t,a,o){e=r(e)?e:l(e),a=a&&!o?i(a):0;var d=e.length;return a<0&&(a=c(d+a,0)),n(e)?a<=d&&e.indexOf(t,a)>-1:!!d&&s(e,t,a)>-1}},797691,e=>{"use strict";var t=e.i(478902),a=e.i(88816),s=e.i(389959),r=e.i(237002),n=e.i(339434),i=e.i(737018),l=e.i(767073),c=e.i(837710),o=e.i(843778),d=e.i(866205),u=e.i(703526),m=e.i(920432),f=e.i(549815),p=e.i(911509),h=e.i(97429);let g=h.z.array(h.z.string());e.s(["ReportsSelectFilter",0,({label:e,options:h,value:g,onChange:x,isLoading:b=!1,className:j,showSearch:v=!1})=>{let[E,N]=(0,s.useState)(!1),[_,y]=(0,s.useState)(g),S=_.length>0;(0,s.useEffect)(()=>{E||y(g)},[E,g]);let w=()=>{x(_),N(!1)},T=e=>{"Enter"===e.key&&(e.preventDefault(),w())};return(0,t.jsxs)(l.Popover,{open:E,onOpenChange:N,children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{type:S?"default":"outline",className:(0,o.cn)("min-w-20 border-dashed relative group justify-between",{"border-solid":S},j),iconRight:(0,t.jsx)(a.ChevronDown,{size:14}),children:(0,t.jsxs)("span",{children:[e,_.length>0&&(0,t.jsxs)("span",{className:"ml-1 text-xs",children:["(",_.length,")"]})]})})}),(0,t.jsxs)(l.PopoverContent,{align:"start",className:"p-0 w-72",children:[(0,t.jsxs)(d.Command_Shadcn_,{children:[v&&(0,t.jsx)(m.CommandInput_Shadcn_,{placeholder:"Search..."}),(0,t.jsxs)(p.CommandList_Shadcn_,{children:[(0,t.jsx)(u.CommandEmpty_Shadcn_,{children:"No options found."}),(0,t.jsx)(n.CommandGroup,{children:h.map(a=>(0,t.jsx)(f.CommandItem_Shadcn_,{children:(0,t.jsxs)(i.Label,{className:"flex items-center overflow-hidden p-1 rounded-sm gap-x-3 w-full h-full",children:[(0,t.jsx)(r.Checkbox,{id:`${e}-${a.value}`,checked:_.includes(a.value),onCheckedChange:e=>{y(e?[..._,a.value]:_.filter(e=>e!==a.value))},onKeyDown:T}),(0,t.jsxs)("div",{className:"flex flex-col text-xs",children:[a.label,a.description&&(0,t.jsx)("span",{className:"text-foreground-lighter",children:a.description})]})]},a.value)},a.value))})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t border-default p-2",children:[(0,t.jsx)(c.Button,{size:"tiny",type:"outline",onClick:()=>{y([])},disabled:b,children:"Clear"}),(0,t.jsx)(c.Button,{loading:b,size:"tiny",type:"primary",onClick:w,htmlType:"button",children:"Apply"})]})]})]})},"selectFilterSchema",0,g])},893026,e=>{"use strict";e.s(["ROLE_PERMISSIONS",0,{canLogin:{disabled:!1,description:"User can login",grant_by_dashboard:!0},canCreateRole:{disabled:!1,description:"User can create roles",grant_by_dashboard:!0},canCreateDb:{disabled:!1,description:"User can create databases",grant_by_dashboard:!0},canBypassRls:{disabled:!1,description:"User bypasses every row level security policy",grant_by_dashboard:!0},isSuperuser:{disabled:!0,description:"User is a Superuser",grant_by_dashboard:!1},isReplicationRole:{disabled:!1,description:"User can initiate streaming replication and put the system in and out of backup mode",grant_by_dashboard:!0}},"SUPABASE_ROLES",0,["anon","service_role","authenticated","authenticator","dashboard_user","supabase_admin","supabase_auth_admin","supabase_functions_admin","supabase_read_only_user","supabase_realtime_admin","supabase_replication_admin","supabase_storage_admin","pgbouncer","pgsodium_keyholder","pgsodium_keyiduser","pgsodium_keymaker","pgtle_admin","cli_login_postgres","supabase_etl_admin"],"SYSTEM_ROLES",0,["postgres","pgbouncer","supabase_admin","supabase_auth_admin","supabase_storage_admin","dashboard_user","authenticator","pg_database_owner","pg_read_all_data","pg_write_all_data"]])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},436855,e=>{"use strict";var t=e.i(478902),a=e.i(902858);e.i(128328);var s=e.i(158639),r=e.i(79771),n=e.i(693241),i=e.i(2579),l=e.i(812136);e.s(["default",0,({children:e})=>{let{ref:c}=(0,s.useParams)(),{can:o,isSuccess:d}=(0,i.useAsyncCheckPermissions)(a.PermissionAction.TENANT_SQL_ADMIN_READ,"triggers"),u=[{label:"Data",href:`/project/${c}/database/triggers/data`},{label:"Event",href:`/project/${c}/database/triggers/event`}];return(0,t.jsx)(l.default,{title:"Database",children:d&&!o?(0,t.jsx)(n.default,{isFullPage:!0,resourceText:"view database triggers"}):(0,t.jsx)(r.PageLayout,{title:"Database Triggers",subtitle:"Execute actions automatically when database events occur",navigationItems:u,size:"large",children:e})})}])},763013,e=>{"use strict";let t=`CREATE OR REPLACE FUNCTION event_trigger_fn()
RETURNS event_trigger
LANGUAGE plpgsql
AS $$
BEGIN
  -- Add logic here
END;
$$;

DROP EVENT TRIGGER IF EXISTS event_trigger_name;
CREATE EVENT TRIGGER event_trigger_name
ON ddl_command_end
EXECUTE FUNCTION event_trigger_fn();
`,a=`
CREATE OR REPLACE FUNCTION rls_auto_enable()
RETURNS EVENT_TRIGGER
LANGUAGE plpgsql
SECURITY DEFINER
SET search_path = pg_catalog
AS $$
DECLARE
  cmd record;
BEGIN
  FOR cmd IN
    SELECT *
    FROM pg_event_trigger_ddl_commands()
    WHERE command_tag IN ('CREATE TABLE', 'CREATE TABLE AS', 'SELECT INTO')
      AND object_type IN ('table','partitioned table')
  LOOP
     IF cmd.schema_name IS NOT NULL AND cmd.schema_name IN ('public') AND cmd.schema_name NOT IN ('pg_catalog','information_schema') AND cmd.schema_name NOT LIKE 'pg_toast%' AND cmd.schema_name NOT LIKE 'pg_temp%' THEN
      BEGIN
        EXECUTE format('alter table if exists %s enable row level security', cmd.object_identity);
        RAISE LOG 'rls_auto_enable: enabled RLS on %', cmd.object_identity;
      EXCEPTION
        WHEN OTHERS THEN
          RAISE LOG 'rls_auto_enable: failed to enable RLS on %', cmd.object_identity;
      END;
     ELSE
        RAISE LOG 'rls_auto_enable: skip % (either system schema or not in enforced list: %.)', cmd.object_identity, cmd.schema_name;
     END IF;
  END LOOP;
END;
$$;

DROP EVENT TRIGGER IF EXISTS ensure_rls;
CREATE EVENT TRIGGER ensure_rls
ON ddl_command_end
WHEN TAG IN ('CREATE TABLE', 'CREATE TABLE AS', 'SELECT INTO')
EXECUTE FUNCTION rls_auto_enable();`,s=[{name:"Auto enable RLS",description:"Enable RLS automatically on new tables in selected schemas.",content:a},{name:"Prevent table drops",description:"Block dropping tables using the sql_drop event trigger.",content:`-- Function
CREATE OR REPLACE FUNCTION dont_drop_function()
  RETURNS event_trigger LANGUAGE plpgsql AS $$
DECLARE
    obj record;
    tbl_name text;
BEGIN
    FOR obj IN SELECT * FROM pg_event_trigger_dropped_objects()
    LOOP
        IF obj.object_type = 'table' THEN
            RAISE EXCEPTION 'ERROR: All tables in this schema are protected and cannot be dropped';
        END IF;
    END LOOP;
END;
$$;
-- Event trigger
CREATE EVENT TRIGGER dont_drop_trigger
ON sql_drop
EXECUTE FUNCTION dont_drop_function();
`},{name:"Blank event trigger",description:"A minimal scaffold to start from.",content:t}];e.s(["AUTO_ENABLE_RLS_EVENT_TRIGGER_SQL",0,a,"DEFAULT_EVENT_TRIGGER_SQL",0,t,"EVENT_TRIGGER_TEMPLATES",0,s])},439416,541255,e=>{"use strict";let t={list:e=>["projects",e,"database-event-triggers"]};e.s(["databaseEventTriggerKeys",0,t],439416);var a=e.i(242882),s=e.i(714403);let r=`
select
  evt.oid,
  evt.evtname as name,
  evt.evtevent as event,
  case evt.evtenabled
    when 'O' then 'ORIGIN'
    when 'A' then 'ALWAYS'
    when 'R' then 'REPLICA'
    when 'D' then 'DISABLED'
  end as enabled_mode,
  evt.evttags as tags,
  proc.proname as function_name,
  namespace.nspname as function_schema,
  owner.rolname as owner,
  case
    when proc.oid is not null then pg_get_functiondef(proc.oid)
    else null
  end as function_definition
from pg_event_trigger as evt
left join pg_proc as proc on proc.oid = evt.evtfoid
left join pg_namespace as namespace on namespace.oid = proc.pronamespace
left join pg_roles as owner on owner.oid = evt.evtowner
order by evt.evtname;
`;async function n({projectRef:e,connectionString:a},n){let{result:i}=await (0,s.executeSql)({projectRef:e,connectionString:a,sql:r,queryKey:t.list(e)},n);return i}e.s(["useDatabaseEventTriggersQuery",0,({projectRef:e,connectionString:s},{enabled:r=!0,...i}={})=>(0,a.useQuery)({queryKey:t.list(e),queryFn:({signal:t})=>n({projectRef:e,connectionString:s},t),enabled:r&&void 0!==e,...i})],541255)},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:s=3,redaction:r="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:i=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...i].map(e=>e.toLowerCase())),c=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],o=new WeakMap;function d(e){let t=e;for(let{re:e}of c)t=t.replace(e,r);return t}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=s)return n;if("object"==typeof t){if(o.has(t))return"[Circular]";if(Array.isArray(t)){let s=[];o.set(t,s);for(let r=0;r<t.length;r++)s[r]=e(t[r],a+1);return s}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let s={};for(let[n,i]of(o.set(t,s),Object.entries(t)))u(n)?s[n]=r:s[n]=e(i,a+1);return s}if(t instanceof Map){let s=[];for(let[n,i]of(o.set(t,s),t.entries())){let t=u(n)?r:e(n,a+1),l=u(n)?r:e(i,a+1);s.push([t,l])}return s}if(t instanceof Set){let s=[];for(let r of(o.set(t,s),t.values()))s.push(e(r,a+1));return s}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:n};return o.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},658419,e=>{"use strict";var t=e.i(478902),a=e.i(354354),s=e.i(479232),r=e.i(366652),n=e.i(533488),i=e.i(389959),l=e.i(355901),c=e.i(681328),o=e.i(902858),d=e.i(170149);let u=({trigger:e,visible:a,onCancel:s,onDelete:r,isLoading:n})=>{let i=e?.name??"";return(0,t.jsx)(d.TextConfirmModal,{variant:"warning",visible:a,onCancel:s,onConfirm:r,title:"Delete this event trigger",loading:n,confirmLabel:`Delete trigger ${i}`,confirmPlaceholder:"Type in name of trigger",confirmString:i,text:(0,t.jsxs)(t.Fragment,{children:["This will delete your event trigger called"," ",(0,t.jsx)("span",{className:"text-bold text-foreground",children:i}),"."]}),alert:{title:"You cannot recover this event trigger once deleted."}})};var m=e.i(797691),f=e.i(215618),p=e.i(567558),h=e.i(215312),g=e.i(513826),x=e.i(38429),b=e.i(356003),j=e.i(714403),v=e.i(439416);async function E({trigger:e,projectRef:t,connectionString:a}){let s=`DROP EVENT TRIGGER IF EXISTS "${e.name.replace(/"/g,'""')}";`,{result:r}=await (0,j.executeSql)({projectRef:t,connectionString:a,sql:s,queryKey:["event-trigger","delete",e.oid]});return r}var N=e.i(541255),_=e.i(2579),y=e.i(635494),S=e.i(10429),w=e.i(317040),T=e.i(931942),R=e.i(441081),C=e.i(627069),A=e.i(171997),k=e.i(492418),P=e.i(394983),I=e.i(108151),L=e.i(702454),D=e.i(339098),B=e.i(370410),O=e.i(816467),G=e.i(53071),M=e.i(582391),F=e.i(471998),U=e.i(211570),$=e.i(975924),z=e.i(210419);e.i(128328);var V=e.i(158639),Q=e.i(893026),H=e.i(587433),q=e.i(837710),K=e.i(874311);let Y=new Set(Q.SUPABASE_ROLES),W=({filterString:e,eventTriggers:a,ownerFilter:s,canEdit:r,onEditTrigger:n,onEditTriggerWithAssistant:l,onDuplicateTrigger:c,onDeleteTrigger:o})=>{let{ref:d}=(0,V.useParams)(),u=(0,i.useMemo)(()=>{let t=e.toLowerCase(),r=new Set(s),n=a.filter(e=>(0===r.size||!!e.owner&&r.has(e.owner))&&((0,L.default)(e.name.toLowerCase(),t)||(0,L.default)(e.event.toLowerCase(),t)||e.function_name&&(0,L.default)(e.function_name.toLowerCase(),t)));return(0,D.default)(n,e=>e.name.toLocaleLowerCase())},[a,s,e]);return 0===u.length&&0===e.length&&0===s.length?(0,t.jsx)(k.TableRow,{children:(0,t.jsxs)(k.TableCell,{colSpan:6,children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:"No event triggers created yet"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"There are no event triggers configured for this database"})]})}):0===u.length&&(e.length>0||s.length>0)?(0,t.jsx)(k.TableRow,{children:(0,t.jsxs)(k.TableCell,{colSpan:6,children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:e.length>0?`Your search for "${e}" did not return any results`:"No event triggers match the current filters"})]})}):(0,t.jsx)(t.Fragment,{children:u.map(e=>{let a=!(e.owner&&Y.has(e.owner))&&r;return(0,t.jsxs)(k.TableRow,{children:[(0,t.jsx)(k.TableCell,{className:"space-x-2",children:a?(0,t.jsx)(q.Button,{type:"text",onClick:()=>n(e),title:e.name,className:"text-link-table-cell text-left text-sm disabled:opacity-90 disabled:no-underline min-w-0 p-0 hover:bg-transparent font-medium max-w-48 title",children:e.name}):(0,t.jsx)("p",{title:e.name,className:"truncate text-foreground text-sm font-medium",children:e.name})}),(0,t.jsx)(k.TableCell,{children:(0,t.jsx)(H.Badge,{children:e.event})}),(0,t.jsx)(k.TableCell,{className:"space-x-2",children:e.function_name?(0,t.jsx)(z.default,{href:`/project/${d}/database/functions?search=${e.function_name}&schema=${e.function_schema}`,className:"text-link-table-cell block max-w-40 text-foreground-light",children:e.function_name}):(0,t.jsx)("p",{className:"truncate text-foreground-light",children:"-"})}),(0,t.jsx)(k.TableCell,{children:e.tags&&e.tags.length>0?(0,t.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.tags.map(e=>(0,t.jsx)(H.Badge,{children:e},e))}):(0,t.jsx)("p",{className:"truncate text-foreground-light",children:"-"})}),(0,t.jsx)(k.TableCell,{children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:"DISABLED"!==e.enabled_mode?(0,t.jsx)(B.Check,{strokeWidth:2,className:"text-brand"}):(0,t.jsx)($.X,{strokeWidth:2})})}),(0,t.jsx)(k.TableCell,{className:"text-right",children:a?(0,t.jsxs)(K.DropdownMenu,{children:[(0,t.jsx)(K.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(q.Button,{"aria-label":"More options",type:"default",className:"px-1",icon:(0,t.jsx)(F.MoreVertical,{})})}),(0,t.jsxs)(K.DropdownMenuContent,{side:"bottom",align:"end",className:"w-52",children:[(0,t.jsxs)(K.DropdownMenuItem,{className:"space-x-2",onClick:()=>n(e),children:[(0,t.jsx)(M.Edit2,{size:14}),(0,t.jsx)("p",{children:"Edit trigger"})]}),(0,t.jsxs)(K.DropdownMenuItem,{className:"space-x-2",onClick:()=>l(e),children:[(0,t.jsx)(G.Edit,{size:14}),(0,t.jsx)("p",{children:"Edit with Assistant"})]}),(0,t.jsxs)(K.DropdownMenuItem,{className:"space-x-2",onClick:()=>c(e),children:[(0,t.jsx)(O.Copy,{size:14}),(0,t.jsx)("p",{children:"Duplicate trigger"})]}),(0,t.jsx)(K.DropdownMenuSeparator,{}),(0,t.jsxs)(K.DropdownMenuItem,{className:"space-x-2",onClick:()=>o(e),children:[(0,t.jsx)(U.Trash,{stroke:"red",size:14}),(0,t.jsx)("p",{children:"Delete trigger"})]})]})]}):(0,t.jsx)(h.ButtonTooltip,{disabled:!0,type:"default",className:"px-1",icon:(0,t.jsx)(F.MoreVertical,{}),tooltip:{content:{side:"bottom",text:r?"System event triggers cannot be edited":"You need additional permissions to update event triggers"}}})})]},e.oid)})})},X=e=>{let t,a=[];return e.function_definition&&a.push((t=e.function_definition.trim()).endsWith(";")?t:`${t};`),e.event&&e.function_schema&&e.function_name&&(a.push(`DROP EVENT TRIGGER IF EXISTS "${e.name.replace(/"/g,'""')}";`),a.push([`CREATE EVENT TRIGGER "${e.name.replace(/"/g,'""')}"`,`ON ${e.event}`,e.tags&&e.tags.length>0?`WHEN TAG IN (${e.tags.map(e=>`'${e.replace(/'/g,"''")}'`).join(", ")})`:null,`EXECUTE FUNCTION "${e.function_schema.replace(/"/g,'""')}"."${e.function_name.replace(/"/g,'""')}"();`].filter(Boolean).join("\n"))),a.filter(Boolean).join("\n\n").trim()};var Z=e.i(763013);let J=["postgres"],ee=()=>{let{data:e}=(0,y.useSelectedProjectQuery)(),[d,j]=(0,n.useQueryState)("search",n.parseAsString.withDefault("").withOptions({history:"replace",clearOnDefault:!0})),[L,D]=(0,n.useQueryState)("owner",(0,n.parseAsJson)(m.selectFilterSchema.parse)),B=L??J,[O,G]=(0,i.useState)(null),{openSidebar:M}=(0,R.useSidebarManagerSnapshot)(),F=(0,w.useAiAssistantStateSnapshot)(),{setValue:U,setTemplates:$,setInitialPrompt:z}=(0,T.useEditorPanelStateSnapshot)(),{can:V}=(0,_.useAsyncCheckPermissions)(o.PermissionAction.TENANT_SQL_ADMIN_WRITE,"triggers"),{data:Q=c.EMPTY_ARR,error:H,isPending:q,isError:K}=(0,N.useDatabaseEventTriggersQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{mutate:Y,isPending:ee}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,b.useQueryClient)();return(0,x.useMutation)({mutationFn:e=>E(e),async onSuccess(t,a,r){await s.invalidateQueries({queryKey:v.databaseEventTriggerKeys.list(a.projectRef)}),await e?.(t,a,r)},async onError(e,a,s){void 0===t?l.toast.error(`Failed to delete event trigger: ${e.message}`):t(e,a,s)},...a})})({onSuccess:(e,t)=>{l.toast.success(`Successfully removed ${t.trigger.name}`),G(null)},onError:()=>{G(null)}}),et=()=>{z("Create a new event trigger that..."),U(Z.DEFAULT_EVENT_TRIGGER_SQL),$(Z.EVENT_TRIGGER_TEMPLATES),M(f.SIDEBAR_KEYS.EDITOR_PANEL)},ea=(0,i.useMemo)(()=>{let e=Array.from(new Set(Q.map(e=>e.owner).filter(Boolean))).sort((e,t)=>e.localeCompare(t));return e.includes("postgres")?e:["postgres",...e]},[Q]),es=(0,i.useMemo)(()=>{let e=Q.some(e=>"postgres"===e.owner);return B.includes("postgres")&&1===B.length&&!e},[Q,B]);return q?(0,t.jsx)(I.GenericSkeletonLoader,{}):K?(0,t.jsx)(p.default,{error:H,subject:"Failed to retrieve event triggers"}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2 flex-wrap",children:[(0,t.jsx)(A.Input,{placeholder:"Search for an event trigger",size:"tiny",icon:(0,t.jsx)(r.Search,{}),value:d,className:"w-full lg:w-64",onChange:e=>j(e.target.value)}),(0,t.jsx)(m.ReportsSelectFilter,{label:"Owner",options:ea.map(e=>({label:e,value:e})),value:B,onChange:D,showSearch:!0})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.DocsButton,{href:`${S.DOCS_URL}/guides/database/postgres/event-triggers`}),(0,t.jsx)(h.ButtonTooltip,{type:"primary",icon:(0,t.jsx)(s.Plus,{size:12}),disabled:!V,onClick:et,tooltip:{content:{side:"bottom",text:V?void 0:"You need additional permissions to add a new event trigger"}},children:"New trigger"})]})]}),es?(0,t.jsx)(P.EmptyStatePresentational,{icon:a.DatabaseZap,title:"No event triggers yet",description:"Event triggers run on database-level events like DDL commands.",children:(0,t.jsx)(h.ButtonTooltip,{type:"default",disabled:!V,onClick:et,tooltip:{content:{side:"bottom",text:V?void 0:"You need additional permissions to add a new event trigger"}},children:"New trigger"})}):(0,t.jsx)("div",{className:"w-full overflow-hidden overflow-x-auto",children:(0,t.jsx)(C.Card,{children:(0,t.jsxs)(k.Table,{children:[(0,t.jsx)(k.TableHeader,{children:(0,t.jsxs)(k.TableRow,{children:[(0,t.jsx)(k.TableHead,{children:"Name"},"name"),(0,t.jsx)(k.TableHead,{children:"Event"},"event"),(0,t.jsx)(k.TableHead,{children:"Function"},"function"),(0,t.jsx)(k.TableHead,{children:"Tags"},"tags"),(0,t.jsx)(k.TableHead,{className:"w-20",children:"Enabled"},"enabled"),(0,t.jsx)(k.TableHead,{className:"w-1/12"},"buttons")]})}),(0,t.jsx)(k.TableBody,{children:(0,t.jsx)(W,{eventTriggers:Q,filterString:d,ownerFilter:B,canEdit:V,onEditTrigger:e=>{z(`Update the event trigger "${e.name}" that...`);let t=X(e);U(t.length>0?t:Z.DEFAULT_EVENT_TRIGGER_SQL),$([]),M(f.SIDEBAR_KEYS.EDITOR_PANEL)},onEditTriggerWithAssistant:e=>{let t=X(e);M(f.SIDEBAR_KEYS.AI_ASSISTANT),F.newChat({name:`Update event trigger ${e.name}`,initialInput:"Update this event trigger to...",suggestions:{title:"I can help you update this event trigger, here are a few example prompts to get you started:",prompts:[{label:"Change firing event",description:"Update this trigger to run on a different event"},{label:"Update tags",description:"Modify the tags used to filter which commands it fires for"},{label:"Rename trigger",description:"Rename this event trigger"}]},sqlSnippets:[t.length>0?t:Z.DEFAULT_EVENT_TRIGGER_SQL]})},onDuplicateTrigger:e=>{let t={...e,name:`${e.name}_duplicate`};z("Create a new event trigger that...");let a=X(t);U(a.length>0?a:Z.DEFAULT_EVENT_TRIGGER_SQL),$([]),M(f.SIDEBAR_KEYS.EDITOR_PANEL)},onDeleteTrigger:e=>{G(e)}})})]})})}),(0,t.jsx)(u,{trigger:O??void 0,visible:!!O,onCancel:()=>G(null),onDelete:()=>{e?O&&Y({projectRef:e.ref,connectionString:e.connectionString,trigger:O}):l.toast.error("Project is required to delete an event trigger")},isLoading:ee})]})};var et=e.i(436855),ea=e.i(448710),es=e.i(127739),er=e.i(228027);let en=()=>(0,t.jsx)(es.PageContainer,{size:"large",children:(0,t.jsx)(er.PageSection,{children:(0,t.jsx)(er.PageSectionContent,{children:(0,t.jsx)(ee,{})})})});en.getLayout=e=>(0,t.jsx)(ea.DefaultLayout,{children:(0,t.jsx)(et.default,{children:e})}),e.s(["TriggersSchemaPage",0,en,"default",0,en],658419)},650408,(e,t,a)=>{let s="/project/[ref]/database/triggers/event";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(658419)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0860ba34f07162db.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=e9da8c12-0610-aa1a-3b63-51ed0f832082
//# sourceMappingURL=8eb9a4e9bd1fce49.js.map