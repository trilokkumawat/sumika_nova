;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b4ca3e9c-0540-4732-3d9e-331746cdb670")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,271332,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(843778),r=e.i(837710),n=e.i(253214);let i=(0,a.forwardRef)(({children:e,customFooter:i,description:o,hideFooter:l=!1,alignFooter:c="left",layout:d="horizontal",loading:u=!1,cancelText:m="Cancel",onConfirm:p=()=>{},onCancel:h=()=>{},confirmText:f="Confirm",showCloseButton:x=!0,footerBackground:g,variant:j="success",visible:b=!1,size:y="large",style:v,overlayStyle:w,contentStyle:_,triggerElement:P,header:S,modal:C,defaultOpen:N,...k},A)=>{let[T,z]=a.default.useState(!!b&&b);(0,a.useEffect)(()=>{z(b)},[b]);let E=i||(0,t.jsxs)("div",{className:"flex w-full space-x-2",style:{width:"100%",justifyContent:"vertical"===d?"center":"right"===c?"flex-end":"flex-start"},children:[(0,t.jsx)(r.Button,{type:"default",onClick:h,disabled:u,children:m}),(0,t.jsx)(r.Button,{onClick:p,disabled:u,loading:u,type:"danger"===j?"danger":"warning"===j?"warning":"primary",children:f})]});return(0,t.jsxs)(n.Dialog,{open:T,defaultOpen:N,onOpenChange:function(e){void 0===b||e?z(e):h()},modal:C,children:[P&&(0,t.jsx)(n.DialogTrigger,{children:P}),(0,t.jsxs)(n.DialogContent,{ref:A,hideClose:!x,...k,size:y,children:[S||o?(0,t.jsxs)(n.DialogHeader,{className:(0,s.cn)("border-b"),padding:"small",children:[S&&(0,t.jsx)(n.DialogTitle,{children:S}),o&&(0,t.jsx)(n.DialogDescription,{children:o})]}):null,e,!l&&(0,t.jsx)(n.DialogFooter,{padding:"small",children:E})]})]})}),o=(0,a.forwardRef)(({...e},a)=>(0,t.jsx)(n.DialogSection,{ref:a,...e,padding:"small",className:(0,s.cn)(e.className)})),l=(0,a.forwardRef)(({...e},a)=>(0,t.jsx)(n.DialogSectionSeparator,{ref:a,...e}));i.Content=o,i.Separator=l,e.s(["default",0,i])},40892,e=>{"use strict";var t=e.i(271332);e.s(["Modal",()=>t.default])},3259,100387,e=>{"use strict";var t=e.i(478902),a=e.i(153545),s=e.i(933505);e.s(["ChevronRightIcon",()=>s.default],100387);var s=s,r=e.i(389959),n=e.i(843778);let i=r.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));i.displayName="Breadcrumb";let o=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("ol",{ref:s,className:(0,n.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...a}));o.displayName="BreadcrumbList";let l=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("li",{ref:s,className:(0,n.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...a}));l.displayName="BreadcrumbItem";let c=r.forwardRef(({asChild:e,className:s,...r},i)=>{let o=e?a.Slot:"a";return(0,t.jsx)(o,{ref:i,className:(0,n.cn)("transition-colors underline lg:no-underline hover:text-foreground",s),...r})});c.displayName="BreadcrumbLink";let d=r.forwardRef(({className:e,...a},s)=>(0,t.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("no-underline text-foreground",e),...a}));d.displayName="BreadcrumbPage";let u=({children:e,className:a,...r})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:size-3.5 text-foreground-muted",a),...r,children:e??(0,t.jsx)(s.default,{})});u.displayName="BreadcrumbSeparator";let m=({className:e,...a})=>(0,t.jsxs)("span",{className:(0,n.cn)("flex h-4 w-4 items-center justify-center",e),...a,children:[(0,t.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"sr-only",children:"More"})]});m.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>i,"BreadcrumbEllipsis",()=>m,"BreadcrumbItem",()=>l,"BreadcrumbLink",()=>c,"BreadcrumbList",()=>o,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},744061,418638,e=>{"use strict";var t=e.i(478902),a=e.i(938933),s=e.i(843778);function r({children:e,className:a,tag:s="div",style:r}){let n=`${s}`;return(0,t.jsx)(n,{style:r,children:e})}r.Title=function({className:e,level:a=1,children:s,style:r}){let n=`h${a}`;return(0,t.jsx)(n,{style:r,children:s})},r.Text=function({className:e,children:a,style:s,type:r,disabled:n,mark:i,code:o,keyboard:l,underline:c,strikethrough:d,strong:u,small:m}){return o?(0,t.jsx)("code",{style:s,children:a}):i?(0,t.jsx)("mark",{style:s,children:a}):l?(0,t.jsx)("kbd",{style:s,children:a}):u?(0,t.jsx)("strong",{style:s,children:a}):(0,t.jsx)("span",{style:s,children:a})},r.Link=function({children:e,target:a="_blank",href:s,className:r,onClick:n,style:i}){return(0,t.jsx)("a",{onClick:n,href:s,target:a,rel:"noopener noreferrer",style:i,children:e})},e.s(["default",0,r],418638);var n=e.i(389959);let i=(0,n.createContext)({type:"text"}),o=e=>{let{type:a}=e;return(0,t.jsx)(i.Provider,{value:{type:a},children:e.children})},l=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:a,ulClassName:s,style:r,type:n="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:r,children:(0,t.jsx)(o,{type:n,children:(0,t.jsx)("ul",{className:s,children:e})})})}c.Item=function({children:e,icon:r,active:n,rounded:i,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,a.default)("menu"),{type:p}=l(),h=[m.item.base];h.push(m.item.variants[p].base),n?h.push(m.item.variants[p].active):h.push(m.item.variants[p].normal);let f=[m.item.content.base];n?f.push(m.item.content.active):f.push(m.item.content.normal);let x=[m.item.icon.base];return n?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,s.cn)("outline-none",h),style:u,onClick:o,"aria-current":n?"page":void 0,children:[r&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:r}),(0,t.jsx)("span",{className:f.join(" "),children:e})]})},c.Group=function({children:e,icon:s,title:r}){let n=(0,a.default)("menu"),{type:i}=l();return(0,t.jsxs)("div",{className:[n.group.base,n.group.variants[i]].join(" "),children:[s&&(0,t.jsx)("span",{className:n.group.icon,children:s}),(0,t.jsx)("span",{className:n.group.content,children:r}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(r.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),a=e.i(587433),s=e.i(862326),r=e.i(210419),n=e.i(837710);let i=({item:e,isActive:i,target:o="_self",hoverText:l="",onClick:c})=>{let{name:d="",url:u="",icon:m,rightIcon:p,isExternal:h,label:f,disabled:x}=e,g=(0,t.jsx)(s.Menu.Item,{icon:m,active:i,onClick:c,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:l||("string"==typeof d?d:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:d}),void 0!==f&&(0,t.jsx)(a.Badge,{className:"flex-shrink-0",variant:"new"===f.toLowerCase()?"success":"warning",children:f})]}),p&&(0,t.jsx)("div",{children:p})]})});return x?(0,t.jsx)("div",{className:"opacity-50 pointer-events-none",children:g}):u?h?(0,t.jsx)(n.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:m,children:(0,t.jsx)(r.default,{href:u,target:"_blank",rel:"noreferrer",children:d})}):(0,t.jsx)(r.default,{href:u,className:"block",target:o,children:g}):g};e.s(["ProductMenuItem",0,i],799793),e.s(["ProductMenu",0,({page:e,menu:r})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(s.Menu,{type:"pills",children:r.map((n,o)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(s.Menu.Group,{title:n.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:n.title}),n.isPreview&&(0,t.jsx)(a.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:n.items.map(a=>{let s=a.pages?a.pages.includes(e??""):e===a.key;return(0,t.jsx)(i,{item:a,isActive:s,target:a.isExternal?"_blank":"_self"},a.key)})})]})}),o!==r.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},n.key||n.title))})})],388147)},127739,e=>{"use strict";var t=e.i(478902),a=e.i(709520),s=e.i(389959),r=e.i(843778);let n=(0,a.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),i=(0,s.forwardRef)(({className:e,size:a,...s},i)=>(0,t.jsx)("div",{ref:i,...s,className:(0,r.cn)(n({size:a}),e)}));i.displayName="PageContainer",e.s(["PageContainer",0,i])},456050,e=>{"use strict";var t=e.i(478902),a=e.i(709520),s=e.i(389959),r=e.i(843778),n=e.i(3259),i=e.i(127739);let o=(0,a.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),l=(0,s.createContext)({size:"default"}),c=()=>(0,s.useContext)(l),d=({className:e,size:a,children:s,...n})=>{let i=a??"default";return(0,t.jsx)(l.Provider,{value:{size:i},children:(0,t.jsx)("div",{"data-slot":"page-header","data-size":i,className:(0,r.cn)(o({size:i}),e),...n,children:s})})},u=({className:e,children:a,...s})=>{let{size:o}=c();return(0,t.jsx)(i.PageContainer,{size:o,children:(0,t.jsx)(n.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,r.cn)("flex items-center gap-4 [&_li]:text-xs",e),...s,children:a})})};u.displayName="PageHeaderBreadcrumb";let m=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-icon",className:(0,r.cn)("text-foreground-light",e),...a});m.displayName="PageHeaderIcon";let p=({className:e,children:a,...s})=>(0,t.jsx)("div",{"data-slot":"page-header-summary",className:(0,r.cn)("flex flex-col gap-1",e),...s,children:a});p.displayName="PageHeaderSummary";let h=({className:e,children:a,...s})=>(0,t.jsx)("h1",{"data-slot":"page-header-title",className:(0,r.cn)("heading-title",e),...s,children:a}),f=({className:e,children:a,...s})=>(0,t.jsx)("div",{"data-slot":"page-header-description",className:(0,r.cn)("heading-subSection text-foreground-light",e),...s,children:a}),x=({className:e,children:a,...s})=>{let{size:n}=c();return(0,t.jsx)(i.PageContainer,{size:n,children:(0,t.jsx)("div",{"data-slot":"page-header-meta",className:(0,r.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...s,children:a})})};x.displayName="PageHeaderMeta";let g=({className:e,...a})=>(0,t.jsx)("div",{"data-slot":"page-header-actions",className:(0,r.cn)("flex items-center gap-2 shrink-0",e),...a});g.displayName="PageHeaderAside";let j=({className:e,...a})=>{let{size:s}=c();return(0,t.jsx)(i.PageContainer,{size:s,className:(0,r.cn)("full"===s&&"border-b"),children:(0,t.jsx)("div",{"data-slot":"page-header-footer",className:(0,r.cn)("w-full [&>nav]:border-b-0","full"!==s&&"border-b",e),...a})})};j.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>g,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>f,"PageHeaderIcon",()=>m,"PageHeaderMeta",()=>x,"PageHeaderNavigationTabs",()=>j,"PageHeaderSummary",()=>p,"PageHeaderTitle",()=>h])},450972,e=>{"use strict";var t=e.i(248593),a=e.i(242882),s=e.i(234745),r=e.i(635494);e.i(10429);var n=e.i(837508),i=e.i(667286);async function o({projectRef:e,connectionString:a},r,n){if(!e)throw Error("projectRef is required");let i=new Headers(n);a&&i.set("x-connection-encrypted",a);let{data:o,error:l}=await (0,s.get)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":a,"x-pg-application-name":t.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e}},headers:i,signal:r});return l&&(0,s.handleError)(l),o}e.s(["useDatabaseExtensionsQuery",0,({projectRef:e,connectionString:t},{enabled:s=!0,...l}={})=>{let{data:c}=(0,r.useSelectedProjectQuery)(),d=c?.status===n.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,a.useQuery)({queryKey:i.databaseExtensionsKeys.list(e),queryFn:({signal:a})=>o({projectRef:e,connectionString:t},a),enabled:s&&void 0!==e&&d,...l})}])},737051,e=>{"use strict";e.i(128328);var t=e.i(657588),a=e.i(265735);e.s(["useIsETLPrivateAlpha",0,()=>{let{data:e}=(0,a.useSelectedOrganizationQuery)(),s=(0,t.useFlag)("etlPrivateAlpha"),r="string"==typeof s?s.split(",").map(e=>e.trim()):[];return(0,t.useFlag)("etlPrivateAlphaOverride")||r.includes(e?.slug??"")}])},812136,e=>{"use strict";var t=e.i(478902),a=e.i(271226),s=e.i(463333),r=e.i(737051),n=e.i(388147),i=e.i(450972),o=e.i(144676),l=e.i(912793),c=e.i(635494),d=e.i(951138),u=e.i(825713),m=e.i(731201);let p=()=>{let{data:e}=(0,c.useSelectedProjectQuery)(),d=(0,a.useRouter)().pathname.split("/")[4],{data:u}=(0,i.useDatabaseExtensionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{data:p}=(0,o.useProjectAddonsQuery)({projectRef:e?.ref}),h=void 0!==(u??[]).find(e=>"pg_net"===e.name),f=p?.selected_addons.find(e=>"pitr"===e.type)!==void 0,x=(0,s.useIsColumnLevelPrivilegesEnabled)(),g=(0,r.useIsETLPrivateAlpha)(),{databaseReplication:j,databaseRoles:b,integrationsWrappers:y}=(0,l.useIsFeatureEnabled)(["database:replication","database:roles","integrations:wrappers"]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.ProductMenu,{page:d,menu:(0,m.generateDatabaseMenu)(e,{pgNetExtensionExists:h,pitrEnabled:f,columnLevelPrivileges:x,showPgReplicate:j,enablePgReplicate:g,showRoles:b,showWrappers:y})})})},h=(0,d.withAuth)(({children:e})=>(0,t.jsx)(u.ProjectLayout,{product:"Database",productMenu:(0,t.jsx)(p,{}),isBlocking:!1,children:e}));e.s(["default",0,h])},372378,e=>{"use strict";var t=e.i(478902),a=e.i(389959),s=e.i(843778);let r=(0,a.forwardRef)(({preTab:e,postTab:a,children:r,className:n,...i},o)=>(0,t.jsxs)("div",{ref:o,...i,className:(0,s.cn)("flex -space-x-px",n),children:[e&&(0,t.jsx)("div",{className:"border border-strong bg-surface-300 rounded-l-md px-3 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-foreground-light text-xs font-mono",children:e})}),(0,t.jsx)("div",{className:(0,s.cn)("flex-1",{"[&_input]:rounded-l-none [&_select]:rounded-l-none [&_textarea]:rounded-l-none":!!e,"[&_input]:rounded-r-none [&_select]:rounded-r-none [&_textarea]:rounded-r-none":!!a}),children:r}),a&&(0,t.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-foreground-light text-xs font-mono",children:a})})]}));e.s(["PrePostTab",0,r])},331720,e=>{"use strict";var t=e.i(478902),a=e.i(837710);e.s(["FormActions",0,({form:e,hasChanges:s,handleReset:r,helper:n,disabled:i=!1,isSubmitting:o,submitText:l="Save"})=>{let c=o||i||!s&&void 0!==s;return(0,t.jsxs)("div",{className:["flex w-full items-center gap-2",n?"justify-between":"justify-end"].join(" "),children:[n&&(0,t.jsx)("span",{className:"text-sm text-foreground-lighter",children:n}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Button,{disabled:c,type:"default",htmlType:"reset",onClick:()=>r(),children:"Cancel"}),(0,t.jsx)(a.Button,{form:e,type:"primary",htmlType:"submit",disabled:c,loading:o,children:l})]})]})}])},598792,e=>{"use strict";var t=e.i(242882),a=e.i(714403),s=e.i(246230);async function r({projectRef:e,connectionString:t},s){let{result:r}=await (0,a.executeSql)({projectRef:e,connectionString:t,sql:"show max_connections",queryKey:["max-connections"]},s);return{maxConnections:parseInt(r[0].max_connections)}}e.s(["useMaxConnectionsQuery",0,({projectRef:e,connectionString:a},{enabled:n=!0,...i}={})=>(0,t.useQuery)({queryKey:s.databaseKeys.maxConnections(e),queryFn:({signal:t})=>r({projectRef:e,connectionString:a},t),enabled:n&&void 0!==e,...i})])},697138,(e,t,a)=>{var s=e.r(738254),r=s.Buffer;function n(e,t){for(var a in e)t[a]=e[a]}function i(e,t,a){return r(e,t,a)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=s:(n(s,a),a.Buffer=i),i.prototype=Object.create(r.prototype),n(r,i),i.from=function(e,t,a){if("number"==typeof e)throw TypeError("Argument must not be a number");return r(e,t,a)},i.alloc=function(e,t,a){if("number"!=typeof e)throw TypeError("Argument must be a number");var s=r(e);return void 0!==t?"string"==typeof a?s.fill(t,a):s.fill(t):s.fill(0),s},i.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return s.SlowBuffer(e)}},565534,(e,t,a)=>{"use strict";var s=e.i(869176),r=e.r(697138).Buffer,n=e.g.crypto||e.g.msCrypto;n&&n.getRandomValues?t.exports=function(e,t){if(e>0xffffffff)throw RangeError("requested too many random bytes");var a=r.allocUnsafe(e);if(e>0)if(e>65536)for(var i=0;i<e;i+=65536)n.getRandomValues(a.slice(i,i+65536));else n.getRandomValues(a);return"function"==typeof t?s.default.nextTick(function(){t(null,a)}):a}:t.exports=function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},356102,(e,t,a)=>{"undefined"!=typeof window&&(window.global=window.global||window);var s,r,n={randomBytes:e.r(565534)},i=t.exports,o=function(){(void 0===s||s>=r.length)&&(s=0,r=n.randomBytes(256));var e=r[s];return s+=1,e},l=function(e){for(var t=o();t>=256-256%e;)t=o();return t%e},c=/[ilLI|`oO0]/g,d=[{name:"lowercase",rule:/[a-z]/},{name:"uppercase",rule:/[A-Z]/},{name:"numbers",rule:/[0-9]/},{name:"symbols",rule:/[!@#$%^&*()+_\-=}{[\]|:;"/?.><,`~]/}],u=function(e,t){for(var a="",s=e.length,r=t.length,n=0;n<s;n++)a+=t[l(r)];return e.strict&&!d.every(function(t){return!1==e[t.name]||("symbols"===t.name&&"string"==typeof e[t.name]?RegExp("["+e[t.name]+"]").test(a):t.rule.test(a))})?u(e,t):a};i.generate=function(e){if(e=e||{},Object.prototype.hasOwnProperty.call(e,"length")||(e.length=10),Object.prototype.hasOwnProperty.call(e,"numbers")||(e.numbers=!1),Object.prototype.hasOwnProperty.call(e,"symbols")||(e.symbols=!1),Object.prototype.hasOwnProperty.call(e,"exclude")||(e.exclude=""),Object.prototype.hasOwnProperty.call(e,"uppercase")||(e.uppercase=!0),Object.prototype.hasOwnProperty.call(e,"lowercase")||(e.lowercase=!0),Object.prototype.hasOwnProperty.call(e,"excludeSimilarCharacters")||(e.excludeSimilarCharacters=!1),Object.prototype.hasOwnProperty.call(e,"strict")||(e.strict=!1),e.strict&&1+ +!!e.numbers+ +!!e.symbols+ +!!e.uppercase>e.length)throw TypeError("Length must correlate with strict guidelines");var t="";if(e.lowercase&&(t+="abcdefghijklmnopqrstuvwxyz"),e.uppercase&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.numbers&&(t+="0123456789"),e.symbols&&("string"==typeof e.symbols?t+=e.symbols:t+='!@#$%^&*()+_-=}{[]|:;"/?.><,`~'),!t)throw TypeError("At least one rule for pools must be true");e.excludeSimilarCharacters&&(t=t.replace(c,""));for(var a=e.exclude.length;a--;)t=t.replace(e.exclude[a],"");return u(e,t)},i.generateMultiple=function(e,t){for(var a=[],s=0;s<e;s++)a[s]=i.generate(t);return a}},836110,(e,t,a)=>{t.exports=e.r(356102)},900943,727060,379606,e=>{"use strict";var t=e.i(478902);e.i(10429);var a=e.i(837508),s=e.i(937942);async function r(t){let s=await e.A(232472).then(e=>e.default),r="",n="",i=0;if(t&&""!==t)if(t.length>99)r=`${a.PASSWORD_STRENGTH[0]} Maximum length of password exceeded`,n="Password should be less than 100 characters";else{let e=s(t),o=e?.score??0,l=a.PASSWORD_STRENGTH[o],c=e.feedback?.suggestions?.join(" ")??"";r=`${l} ${c}`,i=o,o<a.DEFAULT_MINIMUM_PASSWORD_STRENGTH&&(n=`${e?.feedback?.warning?e?.feedback?.warning+".":""} You need a stronger password.`)}return{message:r,warning:n,strength:i}}e.s(["PasswordStrengthBar",0,({passwordStrengthScore:e=0,passwordStrengthMessage:r="",password:n="",generateStrongPassword:i})=>(0,t.jsxs)(t.Fragment,{children:[n&&(0,t.jsx)("div",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a.PASSWORD_STRENGTH_PERCENTAGE[e],"aria-valuetext":`${a.PASSWORD_STRENGTH_PERCENTAGE[e]}%`,role:"progressbar",className:"mb-2 overflow-hidden transition-all border rounded bg-200 w-full",children:(0,t.jsx)("div",{style:{width:`${a.PASSWORD_STRENGTH_PERCENTAGE[e]}%`},className:`relative h-1 w-full ${a.PASSWORD_STRENGTH_COLOR[e]} transition-all duration-500 ease-out shadow-inner`})}),(0,t.jsxs)("p",{children:[(r||"This is the password to your Postgres database, so it must be strong and hard to guess.")+" ",(0,t.jsx)("button",{type:"button",className:s.InlineLinkClassName,onClick:i,children:"Generate a password"}),"."]})]})],900943),e.s(["passwordStrength",()=>r],727060);var n=e.i(836110);e.s(["generateStrongPassword",0,()=>n.default.generate({length:16,numbers:!0,uppercase:!0})],379606)},735184,e=>{"use strict";var t=e.i(512841);e.s(["AlertTriangleIcon",()=>t.default])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},324817,e=>{"use strict";e.s(["POOLING_OPTIMIZATIONS",0,{ci_nano:{maxClientConn:200,poolSize:15},ci_micro:{maxClientConn:200,poolSize:15},ci_small:{maxClientConn:400,poolSize:15},ci_medium:{maxClientConn:600,poolSize:15},ci_large:{maxClientConn:800,poolSize:20},ci_xlarge:{maxClientConn:1e3,poolSize:20},ci_2xlarge:{maxClientConn:1500,poolSize:25},ci_4xlarge:{maxClientConn:3e3,poolSize:32},ci_8xlarge:{maxClientConn:6e3,poolSize:64},ci_12xlarge:{maxClientConn:9e3,poolSize:96},ci_16xlarge:{maxClientConn:12e3,poolSize:128},ci_24xlarge:{maxClientConn:18e3,poolSize:192},ci_24xlarge_optimized_cpu:{maxClientConn:18e3,poolSize:192},ci_24xlarge_optimized_memory:{maxClientConn:18e3,poolSize:192},ci_24xlarge_high_memory:{maxClientConn:18e3,poolSize:192},ci_48xlarge:{maxClientConn:36e3,poolSize:384},ci_48xlarge_optimized_cpu:{maxClientConn:36e3,poolSize:384},ci_48xlarge_optimized_memory:{maxClientConn:36e3,poolSize:384},ci_48xlarge_high_memory:{maxClientConn:36e3,poolSize:384}}])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function a(e,t={}){let{maxDepth:s=3,redaction:r="[REDACTED]",truncationNotice:n="[REDACTED: max depth reached]",sensitiveKeys:i=[]}=t,o=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...i].map(e=>e.toLowerCase())),l=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let t=e;for(let{re:e}of l)t=t.replace(e,r);return t}function u(e){return o.has(String(e).toLowerCase())}return e.map(e=>(function e(t,a){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return d(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(a>=s)return n;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let s=[];c.set(t,s);for(let r=0;r<t.length;r++)s[r]=e(t[r],a+1);return s}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let s={};for(let[n,i]of(c.set(t,s),Object.entries(t)))u(n)?s[n]=r:s[n]=e(i,a+1);return s}if(t instanceof Map){let s=[];for(let[n,i]of(c.set(t,s),t.entries())){let t=u(n)?r:e(n,a+1),o=u(n)?r:e(i,a+1);s.push([t,o])}return s}if(t instanceof Set){let s=[];for(let r of(c.set(t,s),t.values()))s.push(e(r,a+1));return s}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:d(t.message),stack:n};return c.set(t,e),e}try{return d(String(t))}catch{return d(Object.prototype.toString.call(t))}}return d(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>a,"sanitizeUrlHashParams",()=>t])},157162,e=>{"use strict";let t;var a=e.i(478902),s=e.i(679152),r=e.i(10429),n=e.i(532728),i=e.i(902858),o=e.i(744524),l=e.i(389959),c=e.i(408891),d=e.i(355901),u=e.i(417403);e.i(128328);var m=e.i(158639),p=e.i(567558),h=e.i(513826);e.i(531837).string().transform(e=>""===e?null:e).nullable().refine(e=>null===e||!isNaN(Number(e)),{message:"Invalid number"}).transform(e=>null===e?null:Number(e));let f=e=>""===e||null===e?null:parseInt(e);var x=e.i(331720),g=e.i(937942),j=e.i(368315),b=e.i(598792),y=e.i(83006),v=e.i(38429),w=e.i(356003),_=e.i(234745),P=e.i(246230);async function S({ref:e,default_pool_size:t,max_client_conn:a,ignore_startup_parameters:s}){if(!e)return console.error("Project ref is required");let{data:r,error:n}=await (0,_.patch)("/platform/projects/{ref}/config/pgbouncer",{params:{path:{ref:e}},body:{default_pool_size:t,max_client_conn:a,ignore_startup_parameters:s}});return n&&(0,_.handleError)(n),r}var C=e.i(144676),N=e.i(2579),k=e.i(265735),A=e.i(635494),T=e.i(206413),z=e.i(592360),E=e.i(178527),R=e.i(587433),D=e.i(24315),O=e.i(61863),I=e.i(428353),B=e.i(378277),M=e.i(372378),L=e.i(479095),F=e.i(710483),H=e.i(538482),U=e.i(108151),$=e.i(324817);let G="pooling-configuration-form",Q=u.default.object({default_pool_size:u.default.number().nullable(),max_client_conn:u.default.number().nullable()}),q=()=>{let{ref:e}=(0,m.useParams)(),{data:t}=(0,A.useSelectedProjectQuery)(),{data:s}=(0,k.useSelectedOrganizationQuery)(),{can:u}=(0,N.useAsyncCheckPermissions)(i.PermissionAction.UPDATE,"projects",{resource:{project_id:t?.id}}),{data:_,error:q,isPending:K,isError:W,isSuccess:Z}=(0,y.usePgbouncerConfigQuery)({projectRef:e}),V=(0,l.useMemo)(()=>s?.plan?.id==="free",[s]),{data:Y}=(0,b.useMaxConnectionsQuery)({projectRef:t?.ref,connectionString:t?.connectionString}),{data:X,isSuccess:J}=(0,C.useProjectAddonsQuery)({projectRef:e}),{mutate:ee,isPending:et}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,w.useQueryClient)();return(0,v.useMutation)({mutationFn:e=>S(e),async onSuccess(t,a,r){let{ref:n}=a;await s.invalidateQueries({queryKey:P.databaseKeys.pgbouncerConfig(n)}),await e?.(t,a,r)},async onError(e,a,s){void 0===t?d.toast.error(`Failed to update PgBouncer configuration: ${e.message}`):t(e,a,s)},...a})})(),ea=!!X?.selected_addons.find(e=>"ipv4"===e.type),es=X?.selected_addons.find(e=>"compute_instance"===e.type),er=es?.variant.name??(0,o.default)(t?.infra_compute_size)??"Nano",en=$.POOLING_OPTIMIZATIONS[es?.variant.identifier??(t?.infra_compute_size==="nano"?"ci_nano":"ci_micro")],ei=en.poolSize??15,eo=en.maxClientConn??200,el=(0,c.useForm)({resolver:(0,n.zodResolver)(Q),defaultValues:{default_pool_size:void 0,max_client_conn:null}}),{default_pool_size:ec}=el.watch(),ed=_?.pool_mode===null,eu=_?.ignore_startup_parameters,em=async t=>{let{default_pool_size:a}=t;if(!e)return console.error("Project ref is required");ee({ref:e,default_pool_size:null===a?void 0:a,ignore_startup_parameters:eu??""},{onSuccess:e=>{d.toast.success("Successfully updated pooler configuration"),e&&el.reset({default_pool_size:e.default_pool_size})}})},ep=()=>{el.reset({default_pool_size:_?.default_pool_size??ei,max_client_conn:_?.max_client_conn??eo})};return(0,l.useEffect)(()=>{Z&&ep()},[Z]),(0,a.jsx)("section",{id:"connection-pooler",children:(0,a.jsxs)(j.default,{noMargin:!0,title:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{children:"Connection pooling configuration"}),V?(0,a.jsx)(R.Badge,{children:"Shared Pooler"}):(0,a.jsx)(R.Badge,{children:"Shared/Dedicated Pooler"})]}),(0,a.jsx)(h.DocsButton,{href:`${r.DOCS_URL}/guides/database/connecting-to-postgres#connection-pooler`})]}),footer:(0,a.jsx)(x.FormActions,{form:G,isSubmitting:et,hasChanges:el.formState.isDirty,handleReset:()=>ep(),helper:u?void 0:"You need additional permissions to update connection pooling settings"}),children:[J&&!V&&!ea&&(0,a.jsx)(F.Admonition,{className:"border-x-0 border-t-0 rounded-none",type:"default",title:"Dedicated Pooler is not IPv4 compatible",children:(0,a.jsxs)("p",{className:"!m-0",children:["If your network only supports IPv4, consider purchasing the"," ",(0,a.jsx)(g.InlineLink,{href:`/project/${e}/settings/addons?panel=ipv4`,children:"IPv4 add-on"})]})}),(0,a.jsxs)(j.default.Content,{children:[K&&(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[Array.from({length:4}).map((e,t)=>(0,a.jsxs)(l.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-2 items-center md:grid md:grid-cols-12 md:gap-x-4 w-full",children:[(0,a.jsx)(U.ShimmeringLoader,{className:"h-4 w-1/3 col-span-4",delayIndex:t}),(0,a.jsx)(U.ShimmeringLoader,{className:"h-8 w-full col-span-8",delayIndex:t})]}),(0,a.jsx)(L.Separator,{})]},`loader-${t}`)),(0,a.jsx)(U.ShimmeringLoader,{className:"h-8 w-full"})]}),W&&(0,a.jsx)(p.default,{error:q,subject:"Failed to retrieve connection pooler configuration"}),ed&&(0,a.jsx)(F.Admonition,{type:"default",title:"Unable to retrieve pooling configuration",description:"Please start a new project to enable this feature"}),Z&&(0,a.jsx)(I.Form_Shadcn_,{...el,children:(0,a.jsxs)("form",{id:G,className:"flex flex-col gap-y-4 w-full",onSubmit:el.handleSubmit(em),children:[(0,a.jsx)(O.FormField_Shadcn_,{control:el.control,name:"default_pool_size",render:({field:e})=>(0,a.jsxs)(H.FormItemLayout,{layout:"flex-row-reverse",label:"Pool Size",description:(0,a.jsxs)("p",{children:["The maximum number of connections made to the underlying Postgres cluster, per user+db combination. Pool size has a default of ",ei," ","based on your compute size of ",er,"."]}),className:"[&>div]:md:w-1/2 [&>div]:xl:w-2/5 [&>div>div]:w-full [&>div>div>div]:min-w-100",children:[(0,a.jsx)(D.FormControl_Shadcn_,{children:(0,a.jsx)(M.PrePostTab,{postTab:"connections",className:"uppercase",children:(0,a.jsx)(B.Input_Shadcn_,{...e,type:"number",className:"w-full",value:e.value||"",placeholder:ei.toString(),...el.register("default_pool_size",{setValueAs:f})})})}),!!Y&&(ec??15)>.8*Y.maxConnections&&(0,a.jsxs)(E.Alert_Shadcn_,{variant:"warning",className:"mt-2",children:[(0,a.jsxs)(z.AlertTitle_Shadcn_,{className:"text-foreground",children:["Pool size is greater than 80% of the max connections (",Y.maxConnections,") on your database"]}),(0,a.jsx)(T.AlertDescription_Shadcn_,{children:"This may result in instability and unreliability with your database connections."})]})]})}),(0,a.jsx)(L.Separator,{className:"bg-border -mx-6 w-[calc(100%+3rem)]"}),(0,a.jsx)(O.FormField_Shadcn_,{control:el.control,name:"max_client_conn",render:({field:e})=>(0,a.jsx)(H.FormItemLayout,{layout:"flex-row-reverse",label:"Max Client Connections",className:"[&>div]:md:w-1/2 [&>div]:xl:w-2/5 [&>div>div]:w-full [&>div>div>div]:min-w-100",description:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:["The maximum number of concurrent client connections allowed. This value is fixed at ",eo," based on your compute size of"," ",er," and cannot be changed."]}),(0,a.jsxs)("p",{className:"mt-2",children:["Please refer to our"," ",(0,a.jsx)(g.InlineLink,{href:`${r.DOCS_URL}/guides/database/connection-management#configuring-supavisors-pool-size`,children:"documentation"})," ","to find out more."]})]}),children:(0,a.jsx)(D.FormControl_Shadcn_,{children:(0,a.jsx)(M.PrePostTab,{postTab:"clients",className:"uppercase",children:(0,a.jsx)(B.Input_Shadcn_,{...e,type:"number",className:"w-full",value:_?.max_client_conn||"",disabled:!0,placeholder:eo.toString(),...el.register("max_client_conn",{setValueAs:f})})})})})})]})})]})]})})};var K=e.i(217444),W=e.i(17203),Z=e.i(210419),V=e.i(589314),Y=e.i(837710),X=e.i(40892),J=e.i(557282);async function ee({projectRef:e}){let{data:t,error:a}=await (0,_.post)("/v1/projects/{ref}/readonly/temporary-disable",{params:{path:{ref:e}}});return a&&(0,_.handleError)(a),t}let et=({visible:e,onClose:t})=>{let{ref:s}=(0,m.useParams)(),{mutate:r,isPending:n}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,w.useQueryClient)();return(0,v.useMutation)({mutationFn:e=>ee(e),async onSuccess(t,a,r){setTimeout(()=>s.invalidateQueries({queryKey:J.usageKeys.resourceWarnings()}),2e3),await e?.(t,a,r)},async onError(e,a,s){void 0===t?d.toast.error(`Failed to disable read only mode: ${e.message}`):t(e,a,s)},...a})})({onSuccess:()=>{d.toast.success("Successfully disabled read-only mode for 15 minutes"),t()}});return(0,a.jsx)(X.Modal,{alignFooter:"right",visible:e,onCancel:t,loading:n,confirmText:"Disable read-only mode",header:"Confirm to temporarily disable read-only mode",onConfirm:()=>{if(!s)return console.error("Project ref is required");r({projectRef:s})},children:(0,a.jsxs)(X.Modal.Content,{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm",children:["This will temporarily allow writes to your database for the"," ",(0,a.jsx)("span",{className:"text-amber-900",children:"next 15 minutes"}),", during which you can reduce your database size. After deleting data, you should run a vacuum to reclaim as much space as possible."]}),(0,a.jsx)("p",{className:"text-sm",children:"If your database size has not been sufficiently reduced after 15 minutes, read-only mode will be toggled back on. Otherwise, it will stay disabled."})]})})},ea=()=>{let{ref:e}=(0,m.useParams)(),{data:t}=(0,k.useSelectedOrganizationQuery)(),[s,n]=(0,l.useState)(!1),{data:i}=(0,V.useResourceWarningsQuery)({ref:e}),o=(i??[])?.find(t=>t.project===e)?.is_readonly_mode_enabled??!1;return(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsxs)(E.Alert_Shadcn_,{variant:"destructive",children:[(0,a.jsx)(K.AlertTriangle,{}),(0,a.jsx)(z.AlertTitle_Shadcn_,{children:"Project is in read-only mode and database is no longer accepting write requests"}),(0,a.jsxs)(T.AlertDescription_Shadcn_,{children:["You have reached 95% of your project's disk space, and read-only mode has been enabled to preserve your database's stability and prevent your project from exceeding its current billing plan. To resolve this, you may:",(0,a.jsxs)("ul",{className:"list-disc pl-6 mt-1",children:[(0,a.jsx)("li",{children:"Temporarily disable read-only mode to free up space and reduce your database size"}),t?.plan.id==="free"?(0,a.jsxs)("li",{children:[(0,a.jsx)(Z.default,{href:`/org/${t?.slug}/billing?panel=subscriptionPlan&source=databaseReadOnlyAlertUpgradePlan`,children:(0,a.jsx)("a",{className:"text underline",children:"Upgrade to the Pro Plan"})})," ","to increase your database size limit to 8GB."]}):t?.plan.id==="pro"&&t?.usage_billing_enabled?(0,a.jsxs)("li",{children:[(0,a.jsx)(Z.default,{href:`/org/${t?.slug}/billing?panel=subscriptionPlan&source=databaseReadOnlyAlertSpendCap`,children:(0,a.jsx)("a",{className:"text-foreground underline",children:"Disable your Spend Cap"})})," ","to allow your project to auto-scale and expand beyond the 8GB database size limit"]}):null]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,a.jsx)(Y.Button,{type:"default",onClick:()=>n(!0),children:"Disable read-only mode"}),(0,a.jsx)(Y.Button,{asChild:!0,type:"default",icon:(0,a.jsx)(W.ExternalLink,{}),children:(0,a.jsx)("a",{href:`${r.DOCS_URL}/guides/platform/database-size#disabling-read-only-mode`,target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,a.jsx)(et,{visible:s,onClose:()=>n(!1)})]})};var es=e.i(509926),er=e.i(215312),en=e.i(900943),ei=e.i(47302);async function eo({ref:e,password:t}){if(!e)return console.error("Project ref is required");let{data:a,error:s}=await (0,_.patch)("/platform/projects/{ref}/db-password",{params:{path:{ref:e}},body:{password:t}});return s&&(0,_.handleError)(s),a}var el=e.i(837508),ec=e.i(727060),ed=e.i(379606),eu=e.i(627069),em=e.i(171997),ep=e.i(95053);let eh=({disabled:e=!1})=>{let{ref:t}=(0,m.useParams)(),s=(0,es.useIsProjectActive)(),{data:r}=(0,A.useSelectedProjectQuery)(),{can:n}=(0,N.useAsyncCheckPermissions)(i.PermissionAction.UPDATE,"projects",{resource:{project_id:r?.id}}),[o,c]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),[h,f]=(0,l.useState)(""),[x,g]=(0,l.useState)(""),[j,b]=(0,l.useState)(0),{mutate:y,isPending:_}=(({onSuccess:e,onError:t,...a}={})=>{let s=(0,w.useQueryClient)();return(0,v.useMutation)({mutationFn:e=>eo(e),async onSuccess(t,a,r){await s.invalidateQueries({queryKey:ei.projectKeys.detail(a.ref)}),await e?.(t,a,r)},async onError(e,a,s){void 0===t?d.toast.error(`Failed to reset database password: ${e.message}`):t(e,a,s)},...a})})({onSuccess:async()=>{d.toast.success("Successfully updated database password"),c(!1)}});async function P(e){let{message:t,warning:a,strength:s}=await (0,ec.passwordStrength)(e);b(s),g(a),f(t)}(0,l.useEffect)(()=>{o&&(p(""),f(""),g(""),b(0))},[o]);let S=async()=>{if(!t)return console.error("Project ref is required");j>=el.DEFAULT_MINIMUM_PASSWORD_STRENGTH&&y({ref:t,password:u})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eu.Card,{id:"database-password",children:(0,a.jsx)(eu.CardContent,{children:(0,a.jsx)(ep.FormLayout,{layout:"flex-row-reverse",label:"Database password",description:"You can use this password to connect directly to your Postgres database.",children:(0,a.jsx)("div",{className:"flex items-end justify-end",children:(0,a.jsx)(er.ButtonTooltip,{type:"default",disabled:!n||!s||e,onClick:()=>c(!0),tooltip:{content:{side:"bottom",text:n?s?void 0:"Unable to reset database password as project is not active":"You need additional permissions to reset the database password"}},children:"Reset database password"})})})})}),(0,a.jsxs)(X.Modal,{hideFooter:!0,header:(0,a.jsx)("h5",{className:"text-foreground",children:"Reset database password"}),confirmText:"Reset password",size:"medium",visible:o,loading:_,onCancel:()=>c(!1),children:[(0,a.jsx)(X.Modal.Content,{className:"w-full space-y-8",children:(0,a.jsx)(em.Input,{type:"password",value:u,copy:u.length>0,onChange:e=>{let t=e.target.value;p(t),""==t?(b(-1),f("")):P(t)},error:x,descriptionText:(0,a.jsx)(en.PasswordStrengthBar,{passwordStrengthScore:j,passwordStrengthMessage:h,password:u,generateStrongPassword:function(){let e=(0,ed.generateStrongPassword)();p(e),P(e)}})})}),(0,a.jsx)(X.Modal.Separator,{}),(0,a.jsxs)(X.Modal.Content,{className:"flex items-center justify-end space-x-2",children:[(0,a.jsx)(Y.Button,{type:"default",disabled:_,onClick:()=>c(!1),children:"Cancel"}),(0,a.jsx)(Y.Button,{type:"primary",loading:_,disabled:_,onClick:()=>S(),children:"Reset password"})]})]})]})};var ef=e.i(735184),ex=e.i(592383),eg=e.i(578152),ej=e.i(189329),eb=e.i(991435),ey=e.i(416785);e.i(298650);let ev=(0,l.createContext)(t=(0,eb.proxy)({usePoolerConnection:!0,setUsePoolerConnection:e=>{t.usePoolerConnection=e},showPoolingModeHelper:!1,setShowPoolingModeHelper:e=>{t.showPoolingModeHelper=e}}));var ew=e.i(253214);let e_=()=>{let e,{ref:t}=(0,m.useParams)(),s=(e=(0,l.useContext)(ev),(0,ey.useSnapshot)(e,void 0)),n=(0,ej.useDatabaseSelectorStateSnapshot)(),{data:i}=(0,eg.useSupavisorConfigurationQuery)({projectRef:t}),o=i?.find(e=>e.identifier===n.selectedDatabaseId);return(0,a.jsx)(ew.Dialog,{open:s.showPoolingModeHelper,onOpenChange:s.setShowPoolingModeHelper,children:(0,a.jsxs)(ew.DialogContent,{hideClose:!0,className:"sm:max-w-4xl",children:[(0,a.jsxs)(ew.DialogHeader,{children:[(0,a.jsx)(ew.DialogTitle,{children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("p",{className:"max-w-2xl",children:"Which pooling mode should I use?"}),(0,a.jsx)(h.DocsButton,{href:`${r.DOCS_URL}/guides/database/connecting-to-postgres#how-connection-pooling-works`})]})}),(0,a.jsx)(ew.DialogDescription,{className:"max-w-2xl",children:"A connection pooler is a system (external to Postgres) which manages Postgres connections by allocating connections whenever clients make requests."})]}),(0,a.jsx)(ew.DialogSectionSeparator,{}),(0,a.jsx)(ew.DialogSection,{children:(0,a.jsx)(ex.Markdown,{className:"max-w-full [&>h3]:text-sm",content:`
Each pooling mode handles connections differently.

### Transaction mode
This mode is recommended if you are connecting from *serverless environments*. A connection is assigned to the client for the duration of a transaction. Two consecutive transactions from the same client could be executed over two different connections. Some session-based Postgres features such as prepared statements are *not available* with this option.

### Session mode
This mode is similar to connecting to your database directly. There is full support for prepared statements in this mode. When a new client connects, a connection is assigned to the client until it disconnects. You *might run into pooler connection limits* since the connection is held till the client disconnects.

### Using session and transaction modes at the same time
 ${o?.pool_mode==="transaction"?"You can use the session mode connection string (port 5432) and transaction mode connection string (port 6543) in your application.":"To get the best of both worlds, as a starting point, we recommend using session mode just when you need support for prepared statements and transaction mode in other cases."}
`})}),o?.pool_mode==="session"&&(0,a.jsx)("div",{className:"px-6",children:(0,a.jsxs)(E.Alert_Shadcn_,{variant:"warning",children:[(0,a.jsx)(ef.AlertTriangleIcon,{strokeWidth:2}),(0,a.jsx)(z.AlertTitle_Shadcn_,{children:"Pooling mode is currently configured to use session mode"}),(0,a.jsxs)(T.AlertDescription_Shadcn_,{children:["To use transaction mode concurrently with session mode, change the pooling mode to transaction first in the"," ",(0,a.jsx)("span",{tabIndex:0,className:"text-foreground cursor-pointer underline underline-offset-2",onClick:()=>{let e;s.setShowPoolingModeHelper(!1),(e=document.getElementById("connection-pooler"))&&e.scrollIntoView({behavior:"smooth",block:"center"})},children:"connection pooling settings"}),". After this, you can use transaction mode on port 6543 and session mode on port 5432."]})]})}),(0,a.jsx)(ew.DialogFooter,{children:(0,a.jsx)(ew.DialogClose,{onClick:()=>s.setShowPoolingModeHelper(!1),children:(0,a.jsx)(Y.Button,{type:"default",children:"Close"})})})]})})};var eP=e.i(812136),eS=e.i(448710),eC=e.i(912793),eN=e.i(127739),ek=e.i(456050),eA=e.i(228027);function eT(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eu.Card,{children:[(0,a.jsxs)(eu.CardHeader,{className:"flex-row items-center justify-between",children:["Local development & CLI",(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:(0,a.jsx)(h.DocsButton,{href:`${r.DOCS_URL}/guides/local-development/cli/config#database-config`})})]}),(0,a.jsx)(eu.CardContent,{children:(0,a.jsxs)("p",{className:"prose [&>code]:text-xs text-sm max-w-full",children:["Change settings in ",(0,a.jsx)("code",{children:"supabase/config.toml"})," file, which is automatically loaded on ",(0,a.jsx)("code",{children:"supabase start"})]})})]}),(0,a.jsxs)(eu.Card,{children:[(0,a.jsxs)(eu.CardHeader,{className:"flex-row items-center justify-between",children:["Self-Hosted Supabase",(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:(0,a.jsx)(h.DocsButton,{href:`${r.DOCS_URL}/guides/self-hosting/docker#configuring-and-securing-supabase`})})]}),(0,a.jsx)(eu.CardContent,{children:(0,a.jsxs)("p",{className:"prose [&>code]:text-xs space-x-1 text-sm max-w-full",children:[(0,a.jsx)("span",{children:"Change settings in"}),(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/supabase/supabase/blob/master/docker/.env.example",children:".env file"}),(0,a.jsx)("span",{children:"and"}),(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/supabase/supabase/blob/master/docker/docker-compose.yml",children:"docker-compose.yml"})]})})]})]})}let ez=(0,s.default)(()=>e.A(666370),{loadableGenerated:{modules:[944781]}}),eE=(0,s.default)(()=>e.A(621529),{loadableGenerated:{modules:[505131]}}),eR=(0,s.default)(()=>e.A(41610).then(e=>e.NetworkRestrictions),{loadableGenerated:{modules:[405151]}}),eD=(0,s.default)(()=>e.A(455421),{loadableGenerated:{modules:[770664]}}),eO=(0,s.default)(()=>e.A(827702).then(e=>e.DiskManagementPanelForm),{loadableGenerated:{modules:[820260]}}),eI=()=>{let e=(0,A.useIsAwsCloudProvider)(),t=(0,A.useIsAwsK8sCloudProvider)(),{databaseNetworkRestrictions:s}=(0,eC.useIsFeatureEnabled)(["database:network_restrictions"]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek.PageHeader,{children:(0,a.jsx)(ek.PageHeaderMeta,{children:(0,a.jsx)(ek.PageHeaderSummary,{children:(0,a.jsx)(ek.PageHeaderTitle,{children:"Database Settings"})})})}),r.IS_PLATFORM?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eN.PageContainer,{className:"pb-12",children:[(0,a.jsx)(eA.PageSection,{children:(0,a.jsxs)(eA.PageSectionContent,{className:"space-y-4 md:space-y-8",children:[(0,a.jsx)(ea,{}),(0,a.jsx)(eh,{}),(0,a.jsx)(q,{})]})}),(0,a.jsx)(ez,{}),e||t?(0,a.jsx)(eO,{}):(0,a.jsx)(eE,{}),s&&(0,a.jsx)(eR,{}),(0,a.jsx)(eD,{})]}),(0,a.jsx)(e_,{})]}):(0,a.jsx)(eN.PageContainer,{className:"pb-12",children:(0,a.jsx)(eA.PageSection,{children:(0,a.jsx)(eA.PageSectionContent,{className:"space-y-4 md:space-y-8",children:(0,a.jsx)(eT,{})})})})]})};eI.getLayout=e=>(0,a.jsx)(eS.default,{children:(0,a.jsx)(eP.default,{title:"Database",children:e})}),e.s(["default",0,eI],157162)},152983,(e,t,a)=>{let s="/project/[ref]/database/settings";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(157162)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},232472,e=>{e.v(t=>Promise.all(["static/chunks/01a77810a6071cc5.js"].map(t=>e.l(t))).then(()=>t(208189)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0860ba34f07162db.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))},666370,e=>{e.v(t=>Promise.all(["static/chunks/e7c5ed4876ec6a96.js"].map(t=>e.l(t))).then(()=>t(944781)))},621529,e=>{e.v(t=>Promise.all(["static/chunks/a063013a75db8bea.js","static/chunks/ff63de120c645bd9.js","static/chunks/f51f176b2997f9cb.js","static/chunks/8449582f8a2ed1ff.js"].map(t=>e.l(t))).then(()=>t(505131)))},41610,e=>{e.v(t=>Promise.all(["static/chunks/e831a7235650d6bb.js","static/chunks/8449582f8a2ed1ff.js","static/chunks/f51f176b2997f9cb.js","static/chunks/be435ede00da1234.js"].map(t=>e.l(t))).then(()=>t(405151)))},455421,e=>{e.v(t=>Promise.all(["static/chunks/082d2324d0a3f206.js"].map(t=>e.l(t))).then(()=>t(770664)))},827702,e=>{e.v(t=>Promise.all(["static/chunks/f8f8533b1665f75a.js"].map(t=>e.l(t))).then(()=>t(820260)))}]);

//# debugId=b4ca3e9c-0540-4732-3d9e-331746cdb670
//# sourceMappingURL=4b7cb9e87852c61c.js.map