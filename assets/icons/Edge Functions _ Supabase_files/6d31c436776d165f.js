;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="00c12a32-fcb8-9881-533b-48650d136ab8")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,744061,418638,e=>{"use strict";var t=e.i(478902),s=e.i(938933),a=e.i(843778);function i({children:e,className:s,tag:a="div",style:i}){let r=`${a}`;return(0,t.jsx)(r,{style:i,children:e})}i.Title=function({className:e,level:s=1,children:a,style:i}){let r=`h${s}`;return(0,t.jsx)(r,{style:i,children:a})},i.Text=function({className:e,children:s,style:a,type:i,disabled:r,mark:n,code:l,keyboard:o,underline:c,strikethrough:u,strong:d,small:m}){return l?(0,t.jsx)("code",{style:a,children:s}):n?(0,t.jsx)("mark",{style:a,children:s}):o?(0,t.jsx)("kbd",{style:a,children:s}):d?(0,t.jsx)("strong",{style:a,children:s}):(0,t.jsx)("span",{style:a,children:s})},i.Link=function({children:e,target:s="_blank",href:a,className:i,onClick:r,style:n}){return(0,t.jsx)("a",{onClick:r,href:a,target:s,rel:"noopener noreferrer",style:n,children:e})},e.s(["default",0,i],418638);var r=e.i(389959);let n=(0,r.createContext)({type:"text"}),l=e=>{let{type:s}=e;return(0,t.jsx)(n.Provider,{value:{type:s},children:e.children})},o=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:s,ulClassName:a,style:i,type:r="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:i,children:(0,t.jsx)(l,{type:r,children:(0,t.jsx)("ul",{className:a,children:e})})})}c.Item=function({children:e,icon:i,active:r,rounded:n,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:d}){let m=(0,s.default)("menu"),{type:h}=o(),p=[m.item.base];p.push(m.item.variants[h].base),r?p.push(m.item.variants[h].active):p.push(m.item.variants[h].normal);let f=[m.item.content.base];r?f.push(m.item.content.active):f.push(m.item.content.normal);let x=[m.item.icon.base];return r?x.push(m.item.icon.active):x.push(m.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,a.cn)("outline-none",p),style:d,onClick:l,"aria-current":r?"page":void 0,children:[i&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:i}),(0,t.jsx)("span",{className:f.join(" "),children:e})]})},c.Group=function({children:e,icon:a,title:i}){let r=(0,s.default)("menu"),{type:n}=o();return(0,t.jsxs)("div",{className:[r.group.base,r.group.variants[n]].join(" "),children:[a&&(0,t.jsx)("span",{className:r.group.icon,children:a}),(0,t.jsx)("span",{className:r.group.content,children:i}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(i.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},388147,799793,e=>{"use strict";var t=e.i(478902),s=e.i(587433),a=e.i(862326),i=e.i(210419),r=e.i(837710);let n=({item:e,isActive:n,target:l="_self",hoverText:o="",onClick:c})=>{let{name:u="",url:d="",icon:m,rightIcon:h,isExternal:p,label:f,disabled:x}=e,_=(0,t.jsx)(a.Menu.Item,{icon:m,active:n,onClick:c,children:(0,t.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:o||("string"==typeof u?u:""),children:[(0,t.jsx)("span",{className:"truncate flex-1 min-w-0",children:u}),void 0!==f&&(0,t.jsx)(s.Badge,{className:"flex-shrink-0",variant:"new"===f.toLowerCase()?"success":"warning",children:f})]}),h&&(0,t.jsx)("div",{children:h})]})});return x?(0,t.jsx)("div",{className:"opacity-50 pointer-events-none",children:_}):d?p?(0,t.jsx)(r.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:m,children:(0,t.jsx)(i.default,{href:d,target:"_blank",rel:"noreferrer",children:u})}):(0,t.jsx)(i.default,{href:d,className:"block",target:l,children:_}):_};e.s(["ProductMenuItem",0,n],799793),e.s(["ProductMenu",0,({page:e,menu:i})=>(0,t.jsx)("div",{className:"flex flex-col space-y-8",children:(0,t.jsx)(a.Menu,{type:"pills",children:i.map((r,l)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"my-6 space-y-8",children:(0,t.jsxs)("div",{className:"mx-3",children:[(0,t.jsx)(a.Menu.Group,{title:r.title?(0,t.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,t.jsx)("span",{children:r.title}),r.isPreview&&(0,t.jsx)(s.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,t.jsx)("div",{children:r.items.map(s=>{let a=s.pages?s.pages.includes(e??""):e===s.key;return(0,t.jsx)(n,{item:s,isActive:a,target:s.isExternal?"_blank":"_self"},s.key)})})]})}),l!==i.length-1&&(0,t.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},r.key||r.title))})})],388147)},248210,e=>{"use strict";var t=e.i(478902),s=e.i(843778);e.s(["LoadingLine",0,({loading:e})=>(0,t.jsx)("div",{className:"relative overflow-hidden w-full h-px bg-border m-auto",children:(0,t.jsx)("span",{className:(0,s.cn)("absolute w-[80px] h-px ml-auto mr-auto left-0 right-0 text-center block top-0","transition-all","line-loading-bg-light dark:line-loading-bg",e&&"animate-line-loading-slower opacity-100",e?"opacity-100":"opacity-0")})})])},870152,e=>{"use strict";var t=e.i(532480);e.s(["InfoIcon",()=>t.default])},843142,e=>{"use strict";var t=e.i(130843);e.s(["SelectSeparator_Shadcn_",()=>t.SelectSeparator])},14703,e=>{"use strict";var t=e.i(242882),s=e.i(356003),a=e.i(234745),i=e.i(10429),r=e.i(389959),n=e.i(294285);async function l({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:i}=await (0,a.get)("/platform/auth/{ref}/config",{params:{path:{ref:e}},signal:t});return i&&(0,a.handleError)(i),s}e.s(["getProjectAuthConfig",()=>l,"useAuthConfigPrefetch",0,({projectRef:e})=>{let t=(0,s.useQueryClient)();return(0,r.useCallback)(()=>{e&&t.prefetchQuery({queryKey:n.authKeys.authConfig(e),queryFn:({signal:t})=>l({projectRef:e},t)})},[t,e])},"useAuthConfigQuery",0,({projectRef:e},{enabled:s=!0,...a}={})=>(0,t.useQuery)({queryKey:n.authKeys.authConfig(e),queryFn:({signal:t})=>l({projectRef:e},t),enabled:s&&i.IS_PLATFORM&&void 0!==e,...a})])},785951,e=>{"use strict";var t=e.i(478902),s=e.i(271226);e.i(128328);var a=e.i(657588),i=e.i(158639),r=e.i(388147),n=e.i(14703),l=e.i(912793),o=e.i(951138),c=e.i(825713),u=e.i(887902);let d=()=>{let e=(0,s.useRouter)(),{ref:o="default"}=(0,i.useParams)(),c=(0,a.useFlag)("authOverviewPage"),d=(0,a.useFlag)("EnableOAuth21"),{authenticationSignInProviders:m,authenticationRateLimits:h,authenticationEmails:p,authenticationMultiFactor:f,authenticationAttackProtection:x,authenticationPerformance:_}=(0,l.useIsFeatureEnabled)(["authentication:sign_in_providers","authentication:rate_limits","authentication:emails","authentication:multi_factor","authentication:attack_protection","authentication:performance"]);(0,n.useAuthConfigPrefetch)({projectRef:o});let v=e.pathname.split("/")[4];return(0,t.jsx)(r.ProductMenu,{page:v,menu:(0,u.generateAuthMenu)(o,{authenticationSignInProviders:m,authenticationRateLimits:h,authenticationEmails:p,authenticationMultiFactor:f,authenticationAttackProtection:x,authenticationShowOverview:c,authenticationOauth21:d,authenticationPerformance:_})})},m=(0,o.withAuth)(({children:e})=>(0,t.jsx)(c.ProjectLayout,{title:"Authentication",product:"Authentication",productMenu:(0,t.jsx)(d,{}),isBlocking:!1,children:e}));e.s(["default",0,m])},309233,e=>{"use strict";var t=e.i(38429),s=e.i(356003),a=e.i(355901),i=e.i(234745),r=e.i(915993),n=e.i(294285);async function l({projectRef:e,config:t}){let{data:s,error:a}=await (0,i.patch)("/platform/auth/{ref}/config",{params:{path:{ref:e}},body:{...t}});return a&&(0,i.handleError)(a),s}e.s(["useAuthConfigUpdateMutation",0,({onSuccess:e,onError:i,...o}={})=>{let c=(0,s.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>l(e),async onSuccess(t,s,a){let{projectRef:i}=s;await Promise.all([c.invalidateQueries({queryKey:n.authKeys.authConfig(i)}),c.invalidateQueries({queryKey:r.lintKeys.lint(i)})]),await e?.(t,s,a)},async onError(e,t,s){void 0===i?a.toast.error(`Failed to update auth configuration: ${e.message}`):i(e,t,s)},...o})}])},908027,e=>{"use strict";var t=e.i(478902),s=e.i(843778),a=e.i(513826);e.s(["FormHeader",0,({title:e,description:i,docsUrl:r,actions:n,className:l})=>(0,t.jsxs)("div",{className:(0,s.cn)(`w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ${l}`),children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-foreground text-xl prose",children:e}),i&&(0,t.jsx)("p",{className:"prose text-sm max-w-2xl",children:i})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==r&&(0,t.jsx)(a.DocsButton,{href:r}),n]})]})])},959076,e=>{"use strict";function t(e,t){let s="00000000-0000-0000-0000-000000000000".split("").map((t,s)=>"-"===t?t:e[s]??t);if(e.length>=s.length)return s.join("");if(e.length&&e.length<15&&(s[14]="4"),e.length&&e.length<20&&(s[19]=t?"b":"8"),t)for(let t=e.length;t<s.length;t+=1)"0"===s[t]&&(s[t]="f");return s.join("")}function s(e){if(!e)return[e,void 0];let t=e.charCodeAt(e.length-1);if(122===t)return[e,e+"~"];if(t>=126)return[e,e+" "];let s=e.substring(0,e.length-1)+String.fromCharCode(t+1);return[e,s]}e.s(["prefixToUUID",()=>t,"stringRange",()=>s])},258732,e=>{"use strict";var t=e.i(479084),s=e.i(959076);let a=50;var i=e.i(867088),r=e.i(714403),n=e.i(635494);e.i(10429);var l=e.i(837508),o=e.i(294285);e.s(["useUsersInfiniteQuery",0,({projectRef:e,connectionString:c,keywords:u,filter:d,providers:m,sort:h,order:p,column:f,improvedSearchEnabled:x=!1},{enabled:_=!0,...v}={})=>{let{data:y}=(0,n.useSelectedProjectQuery)(),g=y?.status===l.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,i.useInfiniteQuery)({queryKey:o.authKeys.usersInfinite(e,{keywords:u,filter:d,providers:m,sort:h,order:p,column:f}),queryFn:({signal:i,pageParam:n})=>(0,r.executeSql)({projectRef:e,connectionString:c,sql:(({page:e=0,verified:i,keywords:r,providers:n,sort:l,order:o,limit:c=a,column:u,startAt:d,cursor:m,improvedSearchEnabled:h=!1})=>{if(h)return(({column:e,keywords:i,verified:r,providers:n,sort:l,order:o,cursor:c,limit:u=a})=>{let d=[];if(i&&""!==i){if("email"===e){let e=(0,s.stringRange)(i);e[1]?d.push(`email >= ${(0,t.literal)(e[0])} AND email < ${(0,t.literal)(e[1])}`):d.push(`email >= ${(0,t.literal)(e[0])}`)}else if("phone"===e){let e=(0,s.stringRange)(i);e[1]?d.push(`phone >= ${(0,t.literal)(e[0])} AND phone < ${(0,t.literal)(e[1])}`):d.push(`phone >= ${(0,t.literal)(e[0])}`)}else if("id"===e)d.push(`id = ${(0,t.literal)(i)}`);else if("name"===e){let e=(0,s.stringRange)(i);e[1]?d.push(`raw_user_meta_data->>'name' >= ${(0,t.literal)(e[0])} AND raw_user_meta_data->>'name' < ${(0,t.literal)(e[1])}`):d.push(`raw_user_meta_data->>'name' >= ${(0,t.literal)(e[0])}`)}}"verified"===r?d.push("(email_confirmed_at IS NOT NULL OR phone_confirmed_at IS NOT NULL)"):"anonymous"===r?d.push("is_anonymous IS TRUE"):"unverified"===r&&d.push("(email_confirmed_at IS NULL AND phone_confirmed_at IS NULL)"),n&&n.length>0&&(n.includes("saml 2.0")?d.push(`(SELECT jsonb_agg(CASE WHEN value ~ '^sso' THEN 'sso' ELSE value END) FROM jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[${n.map(e=>(0,t.literal)("saml 2.0"===e?"sso":e)).join(", ")}]`):d.push(`(raw_app_meta_data->>'providers')::jsonb ?| array[${n.map(e=>(0,t.literal)(e)).join(", ")}]`));let m=l??"created_at",h=o??"desc";if(c){let e="desc"===h?"<":">";"id"===m?d.push(`id ${e} ${(0,t.literal)(c.id)}::uuid`):d.push(`(${(0,t.ident)(m)}, id) ${e} (${(0,t.literal)(c.sort)}, ${(0,t.literal)(c.id)}::uuid)`)}let p=d.map(e=>`(${e})`).join(" AND "),f=d.length>0?`WHERE ${p}`:"",x="id"===m?`${(0,t.ident)(m)} ${h}`:`${(0,t.ident)(m)} ${h}, id ${h}`,_=`
    SELECT
      auth.users.id,
      auth.users.email,
      auth.users.banned_until,
      auth.users.created_at,
      auth.users.confirmed_at,
      auth.users.confirmation_sent_at,
      auth.users.is_anonymous,
      auth.users.is_sso_user,
      auth.users.invited_at,
      auth.users.last_sign_in_at,
      auth.users.phone,
      auth.users.raw_app_meta_data,
      auth.users.raw_user_meta_data
    FROM
      auth.users
    ${f}
    ORDER BY
      ${x}
    LIMIT
      ${u}`;return`
WITH
  users_data AS (${_})
SELECT
  *,
  COALESCE(
    (
      SELECT
        array_agg(DISTINCT i.provider)
      FROM
        auth.identities i
      WHERE
        i.user_id = users_data.id
    ),
    '{}'::text[]
  ) AS providers
FROM
  users_data;`.trim()})({column:u??"email",keywords:r,verified:i,providers:n,sort:l,order:o,limit:c,cursor:m});let p=e*c,f=[];if(r&&""!==r){let e=`%${r}%`;f.push(`id::text like ${(0,t.literal)(e)} or email like ${(0,t.literal)(e)} or phone like ${(0,t.literal)(e)} or raw_user_meta_data->>'full_name' ilike ${(0,t.literal)(e)} or raw_user_meta_data->>'first_name' ilike ${(0,t.literal)(e)} or raw_user_meta_data->>'last_name' ilike ${(0,t.literal)(e)} or raw_user_meta_data->>'display_name' ilike ${(0,t.literal)(e)}`)}"verified"===i?f.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===i?f.push("is_anonymous is true"):"unverified"===i&&f.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),n&&n.length>0&&(n.includes("saml 2.0")?f.push(`(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[${n.map(e=>(0,t.literal)("saml 2.0"===e?"sso":e)).join(", ")}]`.trim()):f.push(`(raw_app_meta_data->>'providers')::jsonb ?| array[${n.map(e=>(0,t.literal)(e)).join(", ")}]`));let x=f.map(e=>`(${e})`).join(" and "),_=o??"desc",v=`${f.length>0?` where ${x}`:""}
    order by
      ${(0,t.ident)(l??"created_at")} ${_} nulls last
    limit
      ${c}
    offset
      ${p}
  `,y=d?">":">=";if("email"===u){let e=(0,s.stringRange)(r??"");v=`where lower(email) ${y} ${(0,t.literal)(d||e[0])} ${e[1]?`and lower(email) < ${(0,t.literal)(e[1])}`:""} and instance_id = '00000000-0000-0000-0000-000000000000'::uuid order by instance_id, lower(email) asc limit ${c}`}else if("phone"===u){let e=(0,s.stringRange)(r??"");v=`where phone ${y} ${(0,t.literal)(d||e[0])} ${e[1]?`and phone < ${(0,t.literal)(e[1])}`:""} order by phone asc limit ${c}`}else"id"===u&&(v=(0,s.prefixToUUID)(r??"",!1)===r?`where id = ${(0,t.literal)(r)} order by id asc limit ${c}`:`where id ${y} ${(0,t.literal)(d||(0,s.prefixToUUID)(r??"",!1))} and id < ${(0,t.literal)((0,s.prefixToUUID)(r??"",!0))} order by id asc limit ${c}`);let g=`
    select
      auth.users.id,
      auth.users.email,
      auth.users.banned_until,
      auth.users.created_at,
      auth.users.confirmed_at,
      auth.users.confirmation_sent_at,
      auth.users.is_anonymous,
      auth.users.is_sso_user,
      auth.users.invited_at,
      auth.users.last_sign_in_at,
      auth.users.phone,
      auth.users.raw_app_meta_data,
      auth.users.raw_user_meta_data,
      auth.users.updated_at
    from
      auth.users
    ${v}`;return`
with
  users_data as (${g})
select
  *,
  coalesce(
    (
      select
        array_agg(distinct i.provider)
      from
        auth.identities i
      where
        i.user_id = users_data.id
    ),
    '{}'::text[]
  ) as providers
from
  users_data;
  `.trim()})({page:f?void 0:n,verified:d,keywords:u,providers:m,sort:h??"id",order:p??"asc",limit:50,column:f,startAt:f?n:void 0,cursor:x?n:void 0,improvedSearchEnabled:x})},i),enabled:_&&void 0!==e&&g,initialPageParam:void 0,getNextPageParam(e,t){if(!(e.result.length>=50))return;let s=e.result[e.result.length-1];if(s)return x?{sort:s[h??"created_at"],id:s.id}:f?s[f]:t.length},...v})}],258732)},525070,e=>{"use strict";var t=e.i(478902);let s=(0,e.i(388019).default)("BookOpenText",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}],["path",{d:"M6 8h2",key:"30oboj"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M16 12h2",key:"7q9ll5"}]]);e.i(128328);var a=e.i(158639),i=e.i(162082),r=e.i(265735),n=e.i(876298),l=e.i(215312);e.s(["APIDocsButton",0,({section:e,source:o})=>{let c=(0,n.useAppStateSnapshot)(),{ref:u}=(0,a.useParams)(),{data:d}=(0,r.useSelectedOrganizationQuery)(),{mutate:m}=(0,i.useSendEventMutation)();return(0,t.jsx)(l.ButtonTooltip,{size:"tiny",type:"default",onClick:()=>{e&&c.setActiveDocsSection(e),c.setShowProjectApiDocs(!0),m({action:"api_docs_opened",properties:{source:o},groups:{project:u??"Unknown",organization:d?.slug??"Unknown"}})},icon:(0,t.jsx)(s,{}),className:"h-7 w-7",tooltip:{content:{side:"bottom",text:"API Docs"}}})}],525070)},999918,e=>{"use strict";let t=(0,e.i(388019).default)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);e.s(["ShieldOff",()=>t],999918)},899850,e=>{"use strict";e.s(["COUNT_ESTIMATE_SQL",0,`
CREATE OR REPLACE FUNCTION pg_temp.count_estimate(
    query text
) RETURNS integer LANGUAGE plpgsql AS $$
DECLARE
    plan jsonb;
BEGIN
    EXECUTE 'EXPLAIN (FORMAT JSON)' || query INTO plan;
    RETURN plan->0->'Plan'->'Plan Rows';
END;
$$;
`.trim(),"THRESHOLD_COUNT",0,5e4])},502035,e=>{"use strict";var t=e.i(672483);e.s(["ExternalLinkIcon",()=>t.default])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},526925,e=>{"use strict";e.s(["formatEstimatedCount",0,e=>{if(0===e)return"0";let t=Math.floor(Math.log(e)/Math.log(1e3)),s=t>4?"T":["","K","M","B","T"][t],a=e/Math.pow(1e3,t>4?4:t);return""===s?`${a}`:`${a.toFixed(1)}${s}`}])},886514,e=>{"use strict";let t=(0,e.i(388019).default)("ArrowDownNarrowWide",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h4",key:"6d7r33"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h10",key:"1438ji"}]]);e.s(["ArrowDownNarrowWide",()=>t],886514)},701257,e=>{"use strict";var t=e.i(583369);e.s(["ArrowDownWideNarrow",()=>t.default])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function s(e,t={}){let{maxDepth:a=3,redaction:i="[REDACTED]",truncationNotice:r="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=t,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),o=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function u(e){let t=e;for(let{re:e}of o)t=t.replace(e,i);return t}function d(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(t,s){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return u(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(s>=a)return r;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let a=[];c.set(t,a);for(let i=0;i<t.length;i++)a[i]=e(t[i],s+1);return a}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let a={};for(let[r,n]of(c.set(t,a),Object.entries(t)))d(r)?a[r]=i:a[r]=e(n,s+1);return a}if(t instanceof Map){let a=[];for(let[r,n]of(c.set(t,a),t.entries())){let t=d(r)?i:e(r,s+1),l=d(r)?i:e(n,s+1);a.push([t,l])}return a}if(t instanceof Set){let a=[];for(let i of(c.set(t,a),t.values()))a.push(e(i,s+1));return a}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:u(t.message),stack:r};return c.set(t,e),e}try{return u(String(t))}catch{return u(Object.prototype.toString.call(t))}}return u(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>s,"sanitizeUrlHashParams",()=>t])},432639,e=>{"use strict";let t=(0,e.i(388019).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],432639)},360608,e=>{"use strict";var t=e.i(479084),s=e.i(899850),a=e.i(959076),i=e.i(242882),r=e.i(714403),n=e.i(294285);async function l({projectRef:e,connectionString:i,keywords:n,filter:l,providers:o,forceExactCount:c,column:u},d){let m=(({filter:e,keywords:i,providers:r,forceExactCount:n=!1,column:l})=>{let o=i&&""!==i,c=[],u="select count(*) from auth.users";if(l&&o){if("email"===l){let e=(0,a.stringRange)(i),s=(0,t.literal)(e[0]),r=e[1]?(0,t.literal)(e[1]):null;c.push(`lower(email) >= ${s}${r?` and lower(email) < ${r}`:""} and instance_id = '00000000-0000-0000-0000-000000000000'::uuid`)}else if("phone"===l){let e=(0,a.stringRange)(i),s=(0,t.literal)(e[0]),r=e[1]?(0,t.literal)(e[1]):null;c.push(`phone >= ${s}${r?` and phone < ${r}`:""}`)}else if("id"===l){let e=(0,a.prefixToUUID)(i,!1);if(e===i)c.push(`id = ${(0,t.literal)(i)}`);else{let s=(0,a.prefixToUUID)(i,!0);c.push(`id >= ${(0,t.literal)(e)} and id < ${(0,t.literal)(s)}`)}}}else{if(o){let e=(0,t.literal)(`%${i}%`);c.push(`id::text ilike ${e} or email ilike ${e} or phone ilike ${e}`)}if("verified"===e?c.push("email_confirmed_at IS NOT NULL or phone_confirmed_at IS NOT NULL"):"anonymous"===e?c.push("is_anonymous is true"):"unverified"===e&&c.push("email_confirmed_at IS NULL AND phone_confirmed_at IS NULL"),r&&r.length>0)if(r.includes("saml 2.0")){let e=r.map(e=>"saml 2.0"===e?"sso":e);c.push(`(select jsonb_agg(case when value ~ '^sso' then 'sso' else value end) from jsonb_array_elements_text((raw_app_meta_data ->> 'providers')::jsonb)) ?| array[${(0,t.literal)(e)}]`.trim())}else c.push(`(raw_app_meta_data->>'providers')::jsonb ?| array[${(0,t.literal)(r)}]`)}let d=c.map(e=>`(${e})`).join(" and "),m=c.length>0?` where ${d}`:"";if(n)return`select (${u}${m}), false as is_estimate;`;{let e=`select * from auth.users${m}`,a=`${u}${m}`,i=(0,t.literal)(e);return`
${s.COUNT_ESTIMATE_SQL}

with approximation as (select reltuples as estimate from pg_class where oid = 'auth.users'::regclass)
select 
  case 
    when estimate = -1 then (select pg_temp.count_estimate(${i}))::int
    when estimate > ${s.THRESHOLD_COUNT} then ${c.length>0?`(select pg_temp.count_estimate(${i}))::int`:"estimate::int"}
    else (${a})
  end as count,
  estimate = -1 or estimate > ${s.THRESHOLD_COUNT} as is_estimate
from approximation;
`.trim()}})({filter:l,keywords:n,providers:o,forceExactCount:c,column:u}),{result:h}=await (0,r.executeSql)({projectRef:e,connectionString:i,sql:m,queryKey:["users-count"]},d),p=h?.[0]?.count,f=h?.[0]?.is_estimate;if("number"!=typeof p)throw Error("Error fetching users count");return{count:p,is_estimate:f??!0}}e.s(["useUsersCountQuery",0,({projectRef:e,connectionString:t,keywords:s,filter:a,providers:r,forceExactCount:o,column:c},{enabled:u=!0,...d}={})=>(0,i.useQuery)({queryKey:n.authKeys.usersCount(e,{keywords:s,filter:a,providers:r,forceExactCount:o,column:c}),queryFn:({signal:i})=>l({projectRef:e,connectionString:t,keywords:s,filter:a,providers:r,forceExactCount:o,column:c},i),enabled:u&&void 0!==e,...d})],360608)},108444,e=>{"use strict";let t=(0,e.i(388019).default)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);e.s(["Ban",()=>t],108444)},875430,56714,54592,795238,e=>{"use strict";var t=e.i(478902);e.i(128328);var s=e.i(158639),a=e.i(355901),i=e.i(38429),r=e.i(356003),n=e.i(234745),l=e.i(294285);async function o({projectRef:e,userId:t}){let{data:s,error:a}=await (0,n.del)("/platform/auth/{ref}/users/{id}",{params:{path:{ref:e,id:t}}});return a&&(0,n.handleError)(a),s}let c=({onSuccess:e,onError:t,...s}={})=>{let n=(0,r.useQueryClient)();return(0,i.useMutation)({mutationFn:e=>o(e),async onSuccess(t,s,a){let{projectRef:i,skipInvalidation:r=!1}=s;r||await Promise.all([n.invalidateQueries({queryKey:l.authKeys.usersInfinite(i)})]),await e?.(t,s,a)},async onError(e,s,i){void 0===t?a.toast.error(`Failed to delete user: ${e.message}`):t(e,s,i)},...s})};e.s(["useUserDeleteMutation",0,c],56714);var u=e.i(466472);e.s(["DeleteUserModal",0,({visible:e,selectedUser:i,onClose:r,onDeleteSuccess:n})=>{let{ref:l}=(0,s.useParams)(),{mutate:o,isPending:d}=c({onSuccess:()=>{a.toast.success(`Successfully deleted ${i?.email}`),n?.()}}),m=async()=>l?i?.id===void 0?a.toast.error("Failed to delete user: User ID not found"):void o({projectRef:l,userId:i.id}):console.error("Project ref is required");return(0,t.jsx)(u.default,{visible:e,variant:"destructive",title:"Confirm to delete user",loading:d,confirmLabel:"Delete",onCancel:()=>r(),onConfirm:()=>m(),alert:{title:"Deleting a user is irreversible",description:"This will remove the selected the user from the project and all associated data."},children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["This is permanent! Are you sure you want to delete the user"," ",i?.email??i?.phone??"this user","?"]})})}],875430);var d=e.i(816467),m=e.i(223600),h=e.i(843778),p=e.i(10429),f=e.i(441730);let x="px-5 py-5",_=f.PROVIDERS_SCHEMAS.map(e=>({name:e.title,value:"key"in e?e.key:e.title.toLowerCase(),icon:`${p.BASE_PATH}/img/icons/${e.misc.iconKey}.svg`,iconClass:"GitHub"===e.title?"dark:invert":""})).concat(f.PROVIDER_PHONE.properties.SMS_PROVIDER.enum.map(e=>({name:e.label,value:e.value,icon:`${p.BASE_PATH}/img/icons/${e.icon}`,iconClass:""})));e.s(["MAX_BULK_DELETE",0,20,"PANEL_PADDING",0,x,"PHONE_NUMBER_LEFT_PREFIX_REGEX",0,/^[+]?[0-9]{0,15}$/,"PROVIDER_FILTER_OPTIONS",0,_,"USERS_TABLE_COLUMNS",0,[{id:"img",name:"",minWidth:95,width:95,resizable:!1},{id:"id",name:"UID",width:280},{id:"name",name:"Display name",minWidth:0,width:150},{id:"email",name:"Email",width:300},{id:"phone",name:"Phone"},{id:"providers",name:"Providers",minWidth:150},{id:"provider_type",name:"Provider type",minWidth:150},{id:"created_at",name:"Created at",width:260},{id:"last_sign_in_at",name:"Last sign in at",width:260}],"UUIDV4_LEFT_PREFIX_REGEX",0,/^(?:[0-9a-f]{1,8}|[0-9a-f]{8}-|[0-9a-f]{8}-[0-9a-f]{1,4}|[0-9a-f]{8}-[0-9a-f]{4}-|[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{0,3}|[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-|[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{0,3}|[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-|[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{0,12})$/i],54592);var v=e.i(71011);e.s(["UserHeader",0,({user:e})=>{let s=(0,v.getDisplayName)(e),a="-"!==s,i=null!==e.phone,r=e.is_anonymous;return(0,t.jsx)("div",{className:(0,h.cn)(x),children:i?(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("p",{children:e.phone}),(0,t.jsx)(m.default,{iconOnly:!0,type:"text",icon:(0,t.jsx)(d.Copy,{}),className:"px-1",text:e?.phone??""})]}):r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Anonymous user"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("p",{className:"text-foreground-light text-sm",children:e.id}),(0,t.jsx)(m.default,{iconOnly:!0,type:"text",icon:(0,t.jsx)(d.Copy,{}),className:"px-1",text:e?.id??""})]})]}):(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)("p",{children:s}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("p",{className:(0,h.cn)(a?"text-foreground-light text-sm":"text-foreground"),children:e.email}),(0,t.jsx)(m.default,{iconOnly:!0,type:"text",icon:(0,t.jsx)(d.Copy,{}),className:"px-1",text:e?.email??""})]})]})})}],795238)},691200,547268,521933,492375,810584,102541,e=>{"use strict";var t=e.i(38429),s=e.i(355901),a=e.i(234745);async function i({projectRef:e,userId:t}){let{data:s,error:i}=await (0,a.del)("/platform/auth/{ref}/users/{id}/factors",{params:{path:{ref:e,id:t}}});return i&&(0,a.handleError)(i),s}async function r({projectRef:e,user:t}){let{data:s,error:i}=await (0,a.post)("/platform/auth/{ref}/recover",{params:{path:{ref:e}},body:{email:t.email}});return i&&(0,a.handleError)(i),s}async function n({projectRef:e,user:t}){let{data:s,error:i}=await (0,a.post)("/platform/auth/{ref}/magiclink",{params:{path:{ref:e}},body:{email:t.email}});return i&&(0,a.handleError)(i),s}async function l({projectRef:e,user:t}){let{data:s,error:i}=await (0,a.post)("/platform/auth/{ref}/otp",{params:{path:{ref:e}},body:{phone:t.phone}});return i&&(0,a.handleError)(i),s}e.s(["useUserDeleteMFAFactorsMutation",0,({onSuccess:e,onError:a,...r}={})=>(0,t.useMutation)({mutationFn:e=>i(e),async onSuccess(t,s,a){await e?.(t,s,a)},async onError(e,t,i){void 0===a?s.toast.error(`Failed to delete the user's MFA factors: ${e.message}`):a(e,t,i)},...r})],691200),e.s(["useUserResetPasswordMutation",0,({onSuccess:e,onError:a,...i}={})=>(0,t.useMutation)({mutationFn:e=>r(e),async onSuccess(t,s,a){await e?.(t,s,a)},async onError(e,t,i){void 0===a?s.toast.error(`Failed to reset user password: ${e.message}`):a(e,t,i)},...i})],547268),e.s(["useUserSendMagicLinkMutation",0,({onSuccess:e,onError:a,...i}={})=>(0,t.useMutation)({mutationFn:e=>n(e),async onSuccess(t,s,a){await e?.(t,s,a)},async onError(e,t,i){void 0===a?s.toast.error(`Failed to send magic link: ${e.message}`):a(e,t,i)},...i})],521933),e.s(["useUserSendOTPMutation",0,({onSuccess:e,onError:a,...i}={})=>(0,t.useMutation)({mutationFn:e=>l(e),async onSuccess(t,s,a){await e?.(t,s,a)},async onError(e,t,i){void 0===a?s.toast.error(`Failed to send magic link: ${e.message}`):a(e,t,i)},...i})],492375);var o=e.i(356003),c=e.i(294285);async function u({projectRef:e,userId:t,banDuration:s}){let{data:i,error:r}=await (0,a.patch)("/platform/auth/{ref}/users/{id}",{params:{path:{ref:e,id:t}},body:{ban_duration:"number"==typeof s?`${s}h`:s}});return r&&(0,a.handleError)(r),i}let d=({onSuccess:e,onError:a,...i}={})=>{let r=(0,o.useQueryClient)();return(0,t.useMutation)({mutationFn:e=>u(e),async onSuccess(t,s,a){let{projectRef:i}=s;await r.invalidateQueries({queryKey:c.authKeys.usersInfinite(i)}),await e?.(t,s,a)},async onError(e,t,i){void 0===a?s.toast.error(`Failed to update user: ${e.message}`):a(e,t,i)},...i})};e.s(["useUserUpdateMutation",0,d],810584);var m=e.i(478902),h=e.i(532728),p=e.i(55956),f=e.i(389959),x=e.i(408891),_=e.i(531837);e.i(128328);var v=e.i(158639),y=e.i(837710),g=e.i(843778),j=e.i(428353),b=e.i(24315),w=e.i(61863),N=e.i(378277),k=e.i(40892),S=e.i(449123),$=e.i(451031),E=e.i(831927),A=e.i(156722),P=e.i(479095),C=e.i(538482);e.s(["BanUserModal",0,({visible:e,user:t,onClose:a})=>{let{ref:i}=(0,v.useParams)(),{mutate:r,isPending:n}=d({onSuccess:(e,t)=>{let i=(0,p.default)().add(Number(t.banDuration),"hours").format("DD MMM YYYY HH:mm (ZZ)");s.toast.success(`User banned successfully until ${i}`),a()}}),l=_.object({value:_.string().min(1,{message:"Please provide a duration"}),unit:_.enum(["hours","days"])}),o={value:"24",unit:"hours"},c=(0,x.useForm)({mode:"onBlur",reValidateMode:"onChange",resolver:(0,h.zodResolver)(l),defaultValues:o}),{value:u,unit:T}=c.watch(),M=(0,p.default)().add(Number(u),T).format("DD MMM YYYY HH:mm (ZZ)");return(0,f.useEffect)(()=>{e&&c.reset(o)},[e]),(0,m.jsx)(k.Modal,{hideFooter:!0,visible:e,size:"small",header:"Confirm to ban user",onCancel:()=>a(),children:(0,m.jsx)(j.Form_Shadcn_,{...c,children:(0,m.jsxs)("form",{onSubmit:c.handleSubmit(e=>{if(void 0===i)return console.error("Project ref is required");if(void 0===t.id)return s.toast.error("Failed to ban user: User ID not found");let a="hours"===e.unit?Number(e.value):24*Number(e.value);r({projectRef:i,userId:t.id,banDuration:a})}),children:[(0,m.jsxs)(k.Modal.Content,{className:"flex flex-col gap-y-3",children:[(0,m.jsx)("p",{className:"text-sm",children:"This will revoke the user's access to your project and prevent them from logging in for a specified duration."}),(0,m.jsxs)("div",{className:"flex items-start gap-x-2 [&>div:first-child]:flex-grow",children:[(0,m.jsx)(w.FormField_Shadcn_,{control:c.control,name:"value",render:({field:e})=>(0,m.jsx)(C.FormItemLayout,{className:"[&>div>div]:mt-0",label:"Set a ban duration",children:(0,m.jsx)(b.FormControl_Shadcn_,{children:(0,m.jsx)(N.Input_Shadcn_,{...e})})})}),(0,m.jsx)(w.FormField_Shadcn_,{control:c.control,name:"unit",render:({field:e})=>(0,m.jsx)(C.FormItemLayout,{className:"[&>div>div]:mt-0 mt-[33px]",children:(0,m.jsx)(b.FormControl_Shadcn_,{children:(0,m.jsxs)(S.Select_Shadcn_,{...e,value:e.value,onValueChange:e=>c.setValue("unit",e),children:[(0,m.jsx)(A.SelectTrigger_Shadcn_,{className:"capitalize w-24",children:e.value}),(0,m.jsxs)($.SelectContent_Shadcn_,{children:[(0,m.jsx)(E.SelectItem_Shadcn_,{value:"hours",children:"Hours"}),(0,m.jsx)(E.SelectItem_Shadcn_,{value:"days",children:"Days"})]})]})})})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm text-foreground-lighter",children:"This user will not be able to log in until:"}),(0,m.jsx)("p",{className:(0,g.cn)("text-sm",!u&&"text-foreground-light"),children:u?M:"Invalid duration set"})]})]}),(0,m.jsx)(P.Separator,{}),(0,m.jsxs)(k.Modal.Content,{className:"flex justify-end gap-2",children:[(0,m.jsx)(y.Button,{type:"default",disabled:n,onClick:()=>a(),children:"Cancel"}),(0,m.jsx)(y.Button,{type:"warning",htmlType:"submit",loading:n,children:"Confirm ban"})]})]})})})}],102541)},101385,e=>{"use strict";var t=e.i(478902),s=e.i(902858),a=e.i(55956),i=e.i(108444),r=e.i(370410),n=e.i(816467),l=e.i(906346),o=e.i(999918),c=e.i(211570),u=e.i(975924),d=e.i(210419),m=e.i(389959),h=e.i(355901);e.i(128328);var p=e.i(158639),f=e.i(215312),x=e.i(223600),_=e.i(14703),v=e.i(691200),y=e.i(547268),g=e.i(521933),j=e.i(492375),b=e.i(810584),w=e.i(2579),N=e.i(912793),k=e.i(10429),S=e.i(48189),$=e.i(837710),E=e.i(843778),A=e.i(479095),P=e.i(710483),C=e.i(466472),T=e.i(441730),M=e.i(102541),L=e.i(875430),U=e.i(795238),D=e.i(54592),I=e.i(71011);let R="DD MMM, YYYY HH:mm",F=(0,E.cn)("bg-surface-100 border-default text-foreground flex items-center justify-between","gap-x-4 border px-5 py-4 text-sm first:rounded-tr first:rounded-tl last:rounded-br last:rounded-bl"),O=({property:e,value:s})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2 group justify-between",children:[(0,t.jsx)("p",{className:" text-foreground-lighter text-xs",children:e}),"boolean"==typeof s?(0,t.jsx)("div",{className:"h-[26px] flex items-center justify-center min-w-[70px]",children:s?(0,t.jsx)("div",{className:"rounded-full w-4 h-4 dark:bg-white bg-black flex items-center justify-center",children:(0,t.jsx)(r.Check,{size:10,className:"text-contrast",strokeWidth:4})}):(0,t.jsx)("div",{className:"rounded-full w-4 h-4 dark:bg-white bg-black flex items-center justify-center",children:(0,t.jsx)(u.X,{size:10,className:"text-contrast",strokeWidth:4})})}):(0,t.jsxs)("div",{className:"flex items-center gap-x-2 h-[26px] font-mono min-w-[40px]",children:[(0,t.jsx)("p",{className:"text-xs",children:s||"-"}),!!s&&(0,t.jsx)(x.default,{iconOnly:!0,type:"text",icon:(0,t.jsx)(n.Copy,{}),className:"transition opacity-0 group-hover:opacity-100 px-1",text:s})]})]}),(0,t.jsx)(A.Separator,{})]}),B=({title:e,description:s,button:a,success:i,className:n})=>{let l=a?.disabled??!1;return(0,t.jsxs)("div",{className:(0,E.cn)(F,n),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:i?i.title:e}),(0,t.jsx)("p",{className:"text-xs text-foreground-light",children:i?i.description:s})]}),(0,t.jsx)(f.ButtonTooltip,{type:a?.type??"default",icon:i?(0,t.jsx)(r.Check,{className:"text-brand"}):a.icon,loading:a.isLoading??!1,onClick:a.onClick,disabled:l,tooltip:{content:{side:"bottom",text:l?`You need additional permissions to ${a.text.toLowerCase()}`:void 0}},children:a.text})]})};e.s(["RowAction",0,B,"RowData",0,O,"UserOverview",0,({user:e,onDeleteSuccess:n})=>{let{ref:u}=(0,p.useParams)(),f=null!==e.email,x=null!==e.phone,H=null!==e.banned_until,q=null!=e.confirmed_at,{authenticationSignInProviders:K}=(0,N.useIsFeatureEnabled)(["authentication:sign_in_providers"]),z=(e.raw_app_meta_data?.providers??[]).map(e=>({name:e.startsWith("sso")?"SAML":e,icon:"email"===e?`${k.BASE_PATH}/img/icons/email-icon2.svg`:I.providerIconMap[e]?`${k.BASE_PATH}/img/icons/${I.providerIconMap[e]}.svg`:void 0})),{can:Q}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.AUTH_EXECUTE,"*"),{can:G}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.AUTH_EXECUTE,"send_magic_link"),{can:W}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.AUTH_EXECUTE,"send_recovery"),{can:Y}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.AUTH_EXECUTE,"send_otp"),{can:V}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_DELETE,"auth.users"),{can:X}=(0,w.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_DELETE,"auth.mfa_factors"),[Z,J]=(0,m.useState)(),[ee,et]=(0,m.useState)(!1),[es,ea]=(0,m.useState)(!1),[ei,er]=(0,m.useState)(!1),[en,el]=(0,m.useState)(!1),{data:eo}=(0,_.useAuthConfigQuery)({projectRef:u}),ec=eo?.MAILER_OTP_EXP??0,eu=Math.floor(ec/60),ed=Math.floor(ec%60),em=`${ec>60?`${eu} minute${eu>1?"s":""} ${ed>0?"and":""} `:""}${ed>0?`${ed} second${ed>1?"s":""}`:""}`,{mutate:eh,isPending:ep}=(0,y.useUserResetPasswordMutation)({onSuccess:(e,t)=>{J("send_recovery"),h.toast.success(`Sent password recovery to ${t.user.email}`)},onError:e=>{h.toast.error(`Failed to send password recovery: ${e.message}`)}}),{mutate:ef,isPending:ex}=(0,g.useUserSendMagicLinkMutation)({onSuccess:(e,t)=>{J("send_magic_link"),h.toast.success(q?`Sent magic link to ${t.user.email}`:`Sent confirmation email to ${t.user.email}`)},onError:e=>{h.toast.error(q?`Failed to send magic link: ${e.message}`:`Failed to send confirmation email: ${e.message}`)}}),{mutate:e_,isPending:ev}=(0,j.useUserSendOTPMutation)({onSuccess:(e,t)=>{J("send_otp"),h.toast.success(`Sent OTP to ${t.user.phone}`)},onError:e=>{h.toast.error(`Failed to send OTP: ${e.message}`)}}),{mutate:ey}=(0,v.useUserDeleteMFAFactorsMutation)({onSuccess:()=>{h.toast.success("Successfully deleted the user's factors"),el(!1)}}),{mutate:eg,isPending:ej}=(0,b.useUserUpdateMutation)({onSuccess:()=>{h.toast.success("Successfully unbanned user"),ea(!1)}}),eb=async()=>{if(await (0,S.timeout)(200),!u)return console.error("Project ref is required");ey({projectRef:u,userId:e.id})};return(0,m.useEffect)(()=>{if(void 0!==Z){let e=setTimeout(()=>J(void 0),5e3);return()=>clearTimeout(e)}},[Z]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(U.UserHeader,{user:e}),H?(0,t.jsx)(P.Admonition,{type:"warning",label:`User banned until ${(0,a.default)(e.banned_until).format(R)}`,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5"}):(0,t.jsx)(A.Separator,{}),(0,t.jsxs)("div",{className:(0,E.cn)("flex flex-col gap-y-1",D.PANEL_PADDING),children:[(0,t.jsx)(O,{property:"User UID",value:e.id}),(0,t.jsx)(O,{property:"Created at",value:e.created_at?(0,a.default)(e.created_at).format(R):void 0}),(0,t.jsx)(O,{property:"Updated at",value:e.updated_at?(0,a.default)(e.updated_at).format(R):void 0}),(0,t.jsx)(O,{property:"Invited at",value:e.invited_at}),(0,t.jsx)(O,{property:"Confirmation sent at",value:e.confirmation_sent_at}),(0,t.jsx)(O,{property:"Confirmed at",value:e.confirmed_at?(0,a.default)(e.confirmed_at).format(R):void 0}),(0,t.jsx)(O,{property:"Last signed in",value:e.last_sign_in_at?(0,a.default)(e.last_sign_in_at).format(R):void 0}),(0,t.jsx)(O,{property:"SSO",value:e.is_sso_user})]}),(0,t.jsxs)("div",{className:(0,E.cn)("flex flex-col !pt-0",D.PANEL_PADDING),children:[(0,t.jsx)("p",{children:"Provider Information"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"The user has the following providers"})]}),(0,t.jsx)("div",{className:(0,E.cn)("flex flex-col -space-y-1 !pt-0",D.PANEL_PADDING),children:z.map(e=>{let s=T.PROVIDERS_SCHEMAS.find(t=>"key"in t&&t.key===e.name||t.title.toLowerCase()===e.name),a=Object.keys(s?.properties??{}).find(e=>e.toLowerCase().endsWith("_enabled")),i="email"===e.name?e.name.toLowerCase():s?.title??e.name,n=eo?.[a]??!1;return(0,t.jsxs)("div",{className:(0,E.cn)(F,"items-start justify-start"),children:[e.icon&&(0,t.jsx)("img",{width:16,src:e.icon,alt:`${e.name} auth icon`,className:(0,E.cn)("mt-1.5","github"===e.name?"dark:invert":"")}),(0,t.jsxs)("div",{className:"flex-grow mt-0.5",children:[(0,t.jsx)("p",{className:"capitalize",children:i}),(0,t.jsxs)("p",{className:"text-xs text-foreground-light",children:["Signed in with a ",i," account via"," ","SAML"===i?"SSO":"OAuth"]}),K&&(0,t.jsx)($.Button,{asChild:!0,type:"default",className:"mt-2",children:(0,t.jsxs)(d.default,{href:`/project/${u}/auth/providers?provider=${"SAML"===e.name?"SAML 2.0":e.name}`,children:["Configure ",i," provider"]})})]}),n?(0,t.jsxs)("div",{className:"flex items-center gap-1 rounded-full border border-brand-400 bg-brand-200 py-1 px-1 text-xs text-brand",children:[(0,t.jsx)("span",{className:"rounded-full bg-brand p-0.5 text-xs text-brand-200",children:(0,t.jsx)(r.Check,{strokeWidth:2,size:12})}),(0,t.jsx)("span",{className:"px-1",children:"Enabled"})]}):(0,t.jsx)("div",{className:"rounded-md border border-strong bg-surface-100 py-1 px-3 text-xs text-foreground-lighter",children:"Disabled"})]},e.name)})}),(0,t.jsx)(A.Separator,{}),(0,t.jsxs)("div",{className:(0,E.cn)("flex flex-col -space-y-1",D.PANEL_PADDING),children:[f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{title:"Reset password",description:"Send a password recovery email to the user",button:{icon:(0,t.jsx)(l.Mail,{}),text:"Send password recovery",isLoading:ep,disabled:!W,onClick:()=>{u&&eh({projectRef:u,user:e})}},success:"send_recovery"===Z?{title:"Password recovery sent",description:`The link in the email is valid for ${em}`}:void 0}),(0,t.jsx)(B,{title:q?"Send Magic Link":"Send confirmation email",description:q?"Passwordless login via email for the user":"Send a confirmation email to the user",button:{icon:(0,t.jsx)(l.Mail,{}),text:q?"Send magic link":"Send confirmation email",isLoading:ex,disabled:!G,onClick:()=>{u&&ef({projectRef:u,user:e})}},success:"send_magic_link"===Z?{title:q?"Magic link sent":"Confirmation email sent",description:q?`The link in the email is valid for ${em}`:"The confirmation email has been sent to the user"}:void 0})]}),x&&(0,t.jsx)(B,{title:"Send OTP",description:"Passwordless login via phone for the user",button:{icon:(0,t.jsx)(l.Mail,{}),text:"Send OTP",isLoading:ev,disabled:!Y,onClick:()=>{u&&e_({projectRef:u,user:e})}},success:"send_otp"===Z?{title:"OTP sent",description:`The link in the OTP SMS is valid for ${em}`}:void 0})]}),(0,t.jsx)(A.Separator,{}),(0,t.jsxs)("div",{className:(0,E.cn)("flex flex-col",D.PANEL_PADDING),children:[(0,t.jsx)("p",{children:"Danger zone"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Be wary of the following features as they cannot be undone."})]}),(0,t.jsxs)("div",{className:(0,E.cn)("flex flex-col -space-y-1 !pt-0",D.PANEL_PADDING),children:[(0,t.jsx)(B,{title:"Remove MFA factors",description:"Removes all MFA factors associated with the user",button:{icon:(0,t.jsx)(o.ShieldOff,{}),text:"Remove MFA factors",disabled:!X,onClick:()=>el(!0)},className:"!bg border-destructive-400"}),(0,t.jsx)(B,{title:H?`User is banned until ${(0,a.default)(e.banned_until).format(R)}`:"Ban user",description:H?"User has no access to the project until after this date":"Revoke access to the project for a set duration",button:{icon:(0,t.jsx)(i.Ban,{}),text:H?"Unban user":"Ban user",disabled:!Q,onClick:()=>{H?ea(!0):et(!0)}},className:"!bg border-destructive-400"}),(0,t.jsx)(B,{title:"Delete user",description:"User will no longer have access to the project",button:{icon:(0,t.jsx)(c.Trash,{}),type:"danger",text:"Delete user",disabled:!V,onClick:()=>er(!0)},className:"!bg border-destructive-400"})]})]}),(0,t.jsx)(L.DeleteUserModal,{visible:ei,selectedUser:e,onClose:()=>er(!1),onDeleteSuccess:()=>{er(!1),n()}}),(0,t.jsx)(C.default,{visible:en,variant:"warning",title:"Confirm to remove MFA factors",confirmLabel:"Remove factors",confirmLabelLoading:"Removing",onCancel:()=>el(!1),onConfirm:()=>eb(),alert:{base:{variant:"warning"},title:"Removing MFA factors will drop the user's authentication assurance level (AAL) to AAL1",description:"Note that this does not sign the user out"},children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to remove the MFA factors for the user"," ",(0,t.jsx)("span",{className:"text-foreground",children:e.email??e.phone??"this user"}),"?"]})}),(0,t.jsx)(M.BanUserModal,{visible:ee,user:e,onClose:()=>et(!1)}),(0,t.jsx)(C.default,{variant:"warning",visible:es,title:"Confirm to unban user",loading:ej,confirmLabel:"Unban user",confirmLabelLoading:"Unbanning",onCancel:()=>ea(!1),onConfirm:()=>void 0===u?console.error("Project ref is required"):void 0===e.id?h.toast.error("Failed to ban user: User ID not found"):void eg({projectRef:u,userId:e.id,banDuration:"none"}),children:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"The user will have access to your project again once unbanned. Are you sure you want to unban this user?"})})]})}])},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0734037b67c1024e.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=00c12a32-fcb8-9881-533b-48650d136ab8
//# sourceMappingURL=c28947026111e348.js.map