;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="79d298e2-26d2-3716-7ffa-2783d10f6911")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,271332,e=>{"use strict";var a=e.i(478902),t=e.i(389959),s=e.i(843778),r=e.i(837710),i=e.i(253214);let n=(0,t.forwardRef)(({children:e,customFooter:n,description:l,hideFooter:o=!1,alignFooter:c="left",layout:d="horizontal",loading:u=!1,cancelText:m="Cancel",onConfirm:p=()=>{},onCancel:h=()=>{},confirmText:x="Confirm",showCloseButton:f=!0,footerBackground:g,variant:b="success",visible:j=!1,size:y="large",style:v,overlayStyle:N,contentStyle:_,triggerElement:S,header:w,modal:C,defaultOpen:P,...k},R)=>{let[E,I]=t.default.useState(!!j&&j);(0,t.useEffect)(()=>{I(j)},[j]);let A=n||(0,a.jsxs)("div",{className:"flex w-full space-x-2",style:{width:"100%",justifyContent:"vertical"===d?"center":"right"===c?"flex-end":"flex-start"},children:[(0,a.jsx)(r.Button,{type:"default",onClick:h,disabled:u,children:m}),(0,a.jsx)(r.Button,{onClick:p,disabled:u,loading:u,type:"danger"===b?"danger":"warning"===b?"warning":"primary",children:x})]});return(0,a.jsxs)(i.Dialog,{open:E,defaultOpen:P,onOpenChange:function(e){void 0===j||e?I(e):h()},modal:C,children:[S&&(0,a.jsx)(i.DialogTrigger,{children:S}),(0,a.jsxs)(i.DialogContent,{ref:R,hideClose:!f,...k,size:y,children:[w||l?(0,a.jsxs)(i.DialogHeader,{className:(0,s.cn)("border-b"),padding:"small",children:[w&&(0,a.jsx)(i.DialogTitle,{children:w}),l&&(0,a.jsx)(i.DialogDescription,{children:l})]}):null,e,!o&&(0,a.jsx)(i.DialogFooter,{padding:"small",children:A})]})]})}),l=(0,t.forwardRef)(({...e},t)=>(0,a.jsx)(i.DialogSection,{ref:t,...e,padding:"small",className:(0,s.cn)(e.className)})),o=(0,t.forwardRef)(({...e},t)=>(0,a.jsx)(i.DialogSectionSeparator,{ref:t,...e}));n.Content=l,n.Separator=o,e.s(["default",0,n])},40892,e=>{"use strict";var a=e.i(271332);e.s(["Modal",()=>a.default])},441345,e=>{"use strict";var a=e.i(343563);e.s(["Form",()=>a.default])},3259,100387,e=>{"use strict";var a=e.i(478902),t=e.i(153545),s=e.i(933505);e.s(["ChevronRightIcon",()=>s.default],100387);var s=s,r=e.i(389959),i=e.i(843778);let n=r.forwardRef(({...e},t)=>(0,a.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...e}));n.displayName="Breadcrumb";let l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("ol",{ref:s,className:(0,i.cn)("flex flex-wrap items-center gap-0.5 break-words text-sm text-muted-foreground sm:gap-1.5",e),...t}));l.displayName="BreadcrumbList";let o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("li",{ref:s,className:(0,i.cn)("inline-flex text-foreground-lighter items-center gap-1.5 leading-5",e),...t}));o.displayName="BreadcrumbItem";let c=r.forwardRef(({asChild:e,className:s,...r},n)=>{let l=e?t.Slot:"a";return(0,a.jsx)(l,{ref:n,className:(0,i.cn)("transition-colors underline lg:no-underline hover:text-foreground",s),...r})});c.displayName="BreadcrumbLink";let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("no-underline text-foreground",e),...t}));d.displayName="BreadcrumbPage";let u=({children:e,className:t,...r})=>(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:size-3.5 text-foreground-muted",t),...r,children:e??(0,a.jsx)(s.default,{})});u.displayName="BreadcrumbSeparator";let m=({className:e,...t})=>(0,a.jsxs)("span",{className:(0,i.cn)("flex h-4 w-4 items-center justify-center",e),...t,children:[(0,a.jsx)("svg",{role:"presentation","aria-hidden":"true",width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"sr-only",children:"More"})]});m.displayName="BreadcrumbEllipsis",e.s(["Breadcrumb",()=>n,"BreadcrumbEllipsis",()=>m,"BreadcrumbItem",()=>o,"BreadcrumbLink",()=>c,"BreadcrumbList",()=>l,"BreadcrumbPage",()=>d,"BreadcrumbSeparator",()=>u],3259)},744061,418638,e=>{"use strict";var a=e.i(478902),t=e.i(938933),s=e.i(843778);function r({children:e,className:t,tag:s="div",style:r}){let i=`${s}`;return(0,a.jsx)(i,{style:r,children:e})}r.Title=function({className:e,level:t=1,children:s,style:r}){let i=`h${t}`;return(0,a.jsx)(i,{style:r,children:s})},r.Text=function({className:e,children:t,style:s,type:r,disabled:i,mark:n,code:l,keyboard:o,underline:c,strikethrough:d,strong:u,small:m}){return l?(0,a.jsx)("code",{style:s,children:t}):n?(0,a.jsx)("mark",{style:s,children:t}):o?(0,a.jsx)("kbd",{style:s,children:t}):u?(0,a.jsx)("strong",{style:s,children:t}):(0,a.jsx)("span",{style:s,children:t})},r.Link=function({children:e,target:t="_blank",href:s,className:r,onClick:i,style:n}){return(0,a.jsx)("a",{onClick:i,href:s,target:t,rel:"noopener noreferrer",style:n,children:e})},e.s(["default",0,r],418638);var i=e.i(389959);let n=(0,i.createContext)({type:"text"}),l=e=>{let{type:t}=e;return(0,a.jsx)(n.Provider,{value:{type:t},children:e.children})},o=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:t,ulClassName:s,style:r,type:i="text"}){return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:t,style:r,children:(0,a.jsx)(l,{type:i,children:(0,a.jsx)("ul",{className:s,children:e})})})}c.Item=function({children:e,icon:r,active:i,rounded:n,onClick:l,doNotCloseOverlay:c=!1,showActiveBar:d=!1,style:u}){let m=(0,t.default)("menu"),{type:p}=o(),h=[m.item.base];h.push(m.item.variants[p].base),i?h.push(m.item.variants[p].active):h.push(m.item.variants[p].normal);let x=[m.item.content.base];i?x.push(m.item.content.active):x.push(m.item.content.normal);let f=[m.item.icon.base];return i?f.push(m.item.icon.active):f.push(m.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,s.cn)("outline-none",h),style:u,onClick:l,"aria-current":i?"page":void 0,children:[r&&(0,a.jsx)("div",{className:`${f.join(" ")} min-w-fit`,children:r}),(0,a.jsx)("span",{className:x.join(" "),children:e})]})},c.Group=function({children:e,icon:s,title:r}){let i=(0,t.default)("menu"),{type:n}=o();return(0,a.jsxs)("div",{className:[i.group.base,i.group.variants[n]].join(" "),children:[s&&(0,a.jsx)("span",{className:i.group.icon,children:s}),(0,a.jsx)("span",{className:i.group.content,children:r}),e]})},c.Misc=function({children:e}){return(0,a.jsx)("div",{children:(0,a.jsx)(r.Text,{children:(0,a.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var a=e.i(744061);e.s(["Menu",()=>a.default])},388147,799793,e=>{"use strict";var a=e.i(478902),t=e.i(587433),s=e.i(862326),r=e.i(210419),i=e.i(837710);let n=({item:e,isActive:n,target:l="_self",hoverText:o="",onClick:c})=>{let{name:d="",url:u="",icon:m,rightIcon:p,isExternal:h,label:x,disabled:f}=e,g=(0,a.jsx)(s.Menu.Item,{icon:m,active:n,onClick:c,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 min-w-0 flex-1",title:o||("string"==typeof d?d:""),children:[(0,a.jsx)("span",{className:"truncate flex-1 min-w-0",children:d}),void 0!==x&&(0,a.jsx)(t.Badge,{className:"flex-shrink-0",variant:"new"===x.toLowerCase()?"success":"warning",children:x})]}),p&&(0,a.jsx)("div",{children:p})]})});return f?(0,a.jsx)("div",{className:"opacity-50 pointer-events-none",children:g}):u?h?(0,a.jsx)(i.Button,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:m,children:(0,a.jsx)(r.default,{href:u,target:"_blank",rel:"noreferrer",children:d})}):(0,a.jsx)(r.default,{href:u,className:"block",target:l,children:g}):g};e.s(["ProductMenuItem",0,n],799793),e.s(["ProductMenu",0,({page:e,menu:r})=>(0,a.jsx)("div",{className:"flex flex-col space-y-8",children:(0,a.jsx)(s.Menu,{type:"pills",children:r.map((i,l)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.Menu.Group,{title:i.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:i.title}),i.isPreview&&(0,a.jsx)(t.Badge,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:i.items.map(t=>{let s=t.pages?t.pages.includes(e??""):e===t.key;return(0,a.jsx)(n,{item:t,isActive:s,target:t.isExternal?"_blank":"_self"},t.key)})})]})}),l!==r.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},i.key||i.title))})})],388147)},127739,e=>{"use strict";var a=e.i(478902),t=e.i(709520),s=e.i(389959),r=e.i(843778);let i=(0,t.cva)(["mx-auto w-full @container px-6 xl:px-10"],{variants:{size:{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}},defaultVariants:{size:"default"}}),n=(0,s.forwardRef)(({className:e,size:t,...s},n)=>(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)(i({size:t}),e)}));n.displayName="PageContainer",e.s(["PageContainer",0,n])},456050,e=>{"use strict";var a=e.i(478902),t=e.i(709520),s=e.i(389959),r=e.i(843778),i=e.i(3259),n=e.i(127739);let l=(0,t.cva)(["flex flex-col gap-4 w-full"],{variants:{size:{default:"pt-12",small:"pt-12",large:"pt-12",full:"pt-6"}},defaultVariants:{size:"default"}}),o=(0,s.createContext)({size:"default"}),c=()=>(0,s.useContext)(o),d=({className:e,size:t,children:s,...i})=>{let n=t??"default";return(0,a.jsx)(o.Provider,{value:{size:n},children:(0,a.jsx)("div",{"data-slot":"page-header","data-size":n,className:(0,r.cn)(l({size:n}),e),...i,children:s})})},u=({className:e,children:t,...s})=>{let{size:l}=c();return(0,a.jsx)(n.PageContainer,{size:l,children:(0,a.jsx)(i.Breadcrumb,{"data-slot":"page-header-breadcrumb",className:(0,r.cn)("flex items-center gap-4 [&_li]:text-xs",e),...s,children:t})})};u.displayName="PageHeaderBreadcrumb";let m=({className:e,...t})=>(0,a.jsx)("div",{"data-slot":"page-header-icon",className:(0,r.cn)("text-foreground-light",e),...t});m.displayName="PageHeaderIcon";let p=({className:e,children:t,...s})=>(0,a.jsx)("div",{"data-slot":"page-header-summary",className:(0,r.cn)("flex flex-col gap-1",e),...s,children:t});p.displayName="PageHeaderSummary";let h=({className:e,children:t,...s})=>(0,a.jsx)("h1",{"data-slot":"page-header-title",className:(0,r.cn)("heading-title",e),...s,children:t}),x=({className:e,children:t,...s})=>(0,a.jsx)("div",{"data-slot":"page-header-description",className:(0,r.cn)("heading-subSection text-foreground-light",e),...s,children:t}),f=({className:e,children:t,...s})=>{let{size:i}=c();return(0,a.jsx)(n.PageContainer,{size:i,children:(0,a.jsx)("div",{"data-slot":"page-header-meta",className:(0,r.cn)("flex flex-col @xl:flex-row @xl:justify-between @xl:items-center gap-4",'[&>[data-slot="page-header-icon"]]:shrink-0','[&>[data-slot="page-header-summary"]]:flex-1',e),...s,children:t})})};f.displayName="PageHeaderMeta";let g=({className:e,...t})=>(0,a.jsx)("div",{"data-slot":"page-header-actions",className:(0,r.cn)("flex items-center gap-2 shrink-0",e),...t});g.displayName="PageHeaderAside";let b=({className:e,...t})=>{let{size:s}=c();return(0,a.jsx)(n.PageContainer,{size:s,className:(0,r.cn)("full"===s&&"border-b"),children:(0,a.jsx)("div",{"data-slot":"page-header-footer",className:(0,r.cn)("w-full [&>nav]:border-b-0","full"!==s&&"border-b",e),...t})})};b.displayName="PageHeaderNavigationTabs",e.s(["PageHeader",()=>d,"PageHeaderAside",()=>g,"PageHeaderBreadcrumb",()=>u,"PageHeaderDescription",()=>x,"PageHeaderIcon",()=>m,"PageHeaderMeta",()=>f,"PageHeaderNavigationTabs",()=>b,"PageHeaderSummary",()=>p,"PageHeaderTitle",()=>h])},902780,e=>{"use strict";var a=e.i(478902),t=e.i(210419),s=e.i(837710),r=e.i(843778),i=e.i(710483);e.s(["UnknownInterface",0,({urlBack:e,fullHeight:n=!0})=>(0,a.jsx)("div",{className:(0,r.cn)("w-full flex items-center justify-center",n&&"h-full"),children:(0,a.jsx)(i.Admonition,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for",children:(0,a.jsx)(s.Button,{asChild:!0,type:"default",className:"mt-2",children:(0,a.jsx)(t.default,{href:e,children:"Head back"})})})})])},450972,e=>{"use strict";var a=e.i(248593),t=e.i(242882),s=e.i(234745),r=e.i(635494);e.i(10429);var i=e.i(837508),n=e.i(667286);async function l({projectRef:e,connectionString:t},r,i){if(!e)throw Error("projectRef is required");let n=new Headers(i);t&&n.set("x-connection-encrypted",t);let{data:l,error:o}=await (0,s.get)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":t,"x-pg-application-name":a.DEFAULT_PLATFORM_APPLICATION_NAME},path:{ref:e}},headers:n,signal:r});return o&&(0,s.handleError)(o),l}e.s(["useDatabaseExtensionsQuery",0,({projectRef:e,connectionString:a},{enabled:s=!0,...o}={})=>{let{data:c}=(0,r.useSelectedProjectQuery)(),d=c?.status===i.PROJECT_STATUS.ACTIVE_HEALTHY;return(0,t.useQuery)({queryKey:n.databaseExtensionsKeys.list(e),queryFn:({signal:t})=>l({projectRef:e,connectionString:a},t),enabled:s&&void 0!==e&&d,...o})}])},737051,e=>{"use strict";e.i(128328);var a=e.i(657588),t=e.i(265735);e.s(["useIsETLPrivateAlpha",0,()=>{let{data:e}=(0,t.useSelectedOrganizationQuery)(),s=(0,a.useFlag)("etlPrivateAlpha"),r="string"==typeof s?s.split(",").map(e=>e.trim()):[];return(0,a.useFlag)("etlPrivateAlphaOverride")||r.includes(e?.slug??"")}])},812136,e=>{"use strict";var a=e.i(478902),t=e.i(271226),s=e.i(463333),r=e.i(737051),i=e.i(388147),n=e.i(450972),l=e.i(144676),o=e.i(912793),c=e.i(635494),d=e.i(951138),u=e.i(825713),m=e.i(731201);let p=()=>{let{data:e}=(0,c.useSelectedProjectQuery)(),d=(0,t.useRouter)().pathname.split("/")[4],{data:u}=(0,n.useDatabaseExtensionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),{data:p}=(0,l.useProjectAddonsQuery)({projectRef:e?.ref}),h=void 0!==(u??[]).find(e=>"pg_net"===e.name),x=p?.selected_addons.find(e=>"pitr"===e.type)!==void 0,f=(0,s.useIsColumnLevelPrivilegesEnabled)(),g=(0,r.useIsETLPrivateAlpha)(),{databaseReplication:b,databaseRoles:j,integrationsWrappers:y}=(0,o.useIsFeatureEnabled)(["database:replication","database:roles","integrations:wrappers"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(i.ProductMenu,{page:d,menu:(0,m.generateDatabaseMenu)(e,{pgNetExtensionExists:h,pitrEnabled:x,columnLevelPrivileges:f,showPgReplicate:b,enablePgReplicate:g,showRoles:j,showWrappers:y})})})},h=(0,d.withAuth)(({children:e})=>(0,a.jsx)(u.ProjectLayout,{product:"Database",productMenu:(0,a.jsx)(p,{}),isBlocking:!1,children:e}));e.s(["default",0,h])},114378,e=>{"use strict";var a=e.i(533488),t=e.i(389959),s=e.i(355901);function r({enabled:e,urlKey:s,select:r,onError:i}){let[n,l]=(0,a.useQueryState)(s,a.parseAsString.withOptions({history:"push",clearOnDefault:!0})),o=(0,t.useMemo)(()=>n?r(n):void 0,[n,r]);return(0,t.useEffect)(()=>{e&&n&&!o&&(i(Error("not found"),n),l(null))},[e,i,n,l,o]),{value:o,setValue:l}}e.s(["handleErrorOnDelete",0,(e,a,t)=>{a!==e.current?s.toast.error(t):e.current=null},"useQueryStateWithSelect",()=>r])},418029,e=>{"use strict";var a=e.i(478902),t=e.i(837710),s=e.i(843778);e.s(["NoSearchResults",0,({searchString:e,withinTableCell:r=!1,onResetFilter:i,className:n,label:l,description:o})=>(0,a.jsxs)("div",{className:(0,s.cn)("flex items-center justify-between",!r&&"bg-surface-100 px-4 md:px-6 py-4 rounded-md border border-default",n),children:[(0,a.jsxs)("div",{className:"text-sm flex flex-col gap-y-0.5",children:[(0,a.jsx)("p",{className:"text-foreground",children:l??"No results found"}),(0,a.jsx)("p",{className:"text-foreground-lighter",children:o??`Your search for “${e}” did not return any results`})]}),void 0!==i&&(0,a.jsx)(t.Button,{type:"default",onClick:()=>i(),children:"Reset filter"})]})])},101369,e=>{"use strict";var a=e.i(478902),t=e.i(843778);e.s(["default",0,({max:e=100,value:s=0,barClass:r="bg-foreground",bgClass:i="",type:n="vertical",borderClass:l="",labelBottom:o="",labelBottomClass:c="tabular-nums",labelTop:d="",labelTopClass:u=""})=>{if("horizontal"===n){let n=Number(s/e*100),m=`${n}%`,p=o||d;return(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[p&&(0,a.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,a.jsx)("p",{className:(0,t.cn)("text-foreground text-sm truncate capitalize-sentence",d.length>0&&"max-w-[75%]",c),children:o}),(0,a.jsx)("p",{className:(0,t.cn)("text-foreground-light text-sm",u),children:d})]}),(0,a.jsx)("div",{className:`relative rounded h-1 overflow-hidden w-full border p-0 ${i||"bg-surface-400"} ${l||"border-none"}`,children:(0,a.jsx)("div",{className:`absolute rounded inset-x-0 bottom-0 h-1 ${r} transition-all`,style:{width:m}})})]})}{let t=Number(s/e*35);return t<2&&(t=2),(0,a.jsx)("div",{className:`relative rounded w-5 overflow-hidden border p-1 ${i||"bg-gray-400"} ${l||"border-none"}`,style:{height:35},children:(0,a.jsx)("div",{className:`absolute inset-x-0 bottom-0 w-5 ${r}`,style:{height:t}})})}}])},457065,e=>{"use strict";var a=e.i(478902),t=e.i(585102),s=e.i(389959),r=e.i(753515),i=e.i(938933),n=e.i(140449);e.s(["default",0,function({disabled:e,id:l="",name:o="",layout:c="flex",error:d,descriptionText:u,label:m,afterLabel:p,beforeLabel:h,labelOptional:x,onChange:f,onBlur:g,defaultChecked:b,checked:j,className:y,align:v="left",size:N="medium",validation:_,labelLayout:S,...w}){let C=(0,i.default)("toggle"),{formContextOnChange:P,values:k,errors:R,handleBlur:E,touched:I,fieldLevelValidation:A}=(0,n.useFormContext)();k&&!j&&(j=k[l||o]);let[O,T]=(0,s.useState)((b||j)??!1),L=j??O;(0,s.useEffect)(()=>{T(L)},[]),d||(R&&!d&&(d=R[l||o]),d=I&&I[l||o]?d:void 0);let B=[C.base,C.handle_container[N]];L&&B.push(C.active);let M=[C.handle.base,C.handle[N]];return L&&M.push(C.handle_active[N]),(0,a.jsx)(r.FormLayout,{className:y,label:m,afterLabel:p,beforeLabel:h,labelOptional:x,layout:c,id:l,error:d,align:v,descriptionText:u,size:N,labelLayout:S,nonBoxInput:!0,children:(0,a.jsx)("button",{type:"button",id:l,name:o,className:(0,t.default)(...B,e&&"opacity-50 cursor-default"),onClick:function(){f&&f(!L),T(!O);let e={};e.target={type:"checkbox",name:o,id:l,value:!L,checked:!L},P&&P(e),_&&A(l,_(!O))},disabled:e,onBlur:function(e){setTimeout(()=>{E&&E(e)},100),g&&g(e)},...w,children:(0,a.jsx)("span",{"aria-hidden":"true",className:M.join(" ")})})})}])},905596,e=>{"use strict";var a=e.i(457065);e.s(["Toggle",()=>a.default])},331720,e=>{"use strict";var a=e.i(478902),t=e.i(837710);e.s(["FormActions",0,({form:e,hasChanges:s,handleReset:r,helper:i,disabled:n=!1,isSubmitting:l,submitText:o="Save"})=>{let c=l||n||!s&&void 0!==s;return(0,a.jsxs)("div",{className:["flex w-full items-center gap-2",i?"justify-between":"justify-end"].join(" "),children:[i&&(0,a.jsx)("span",{className:"text-sm text-foreground-lighter",children:i}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t.Button,{disabled:c,type:"default",htmlType:"reset",onClick:()=>r(),children:"Cancel"}),(0,a.jsx)(t.Button,{form:e,type:"primary",htmlType:"submit",disabled:c,loading:l,children:o})]})]})}])},974900,e=>{"use strict";var a=e.i(755216),t=e.i(242882),s=e.i(714403);let r=e=>["projects",e,"database-roles"],i=a.default.roles.list();async function n({projectRef:e,connectionString:a},t){let{result:r}=await (0,s.executeSql)({projectRef:e,connectionString:a,sql:i.sql,queryKey:["database-roles"]},t);return r}function l(e,a){return e.invalidateQueries({queryKey:r(a)})}e.s(["invalidateRolesQuery",()=>l,"useDatabaseRolesQuery",0,({projectRef:e,connectionString:a},{enabled:s=!0,...i}={})=>(0,t.useQuery)({queryKey:r(e),queryFn:({signal:t})=>n({projectRef:e,connectionString:a},t),enabled:s&&void 0!==e,...i})],974900)},598792,e=>{"use strict";var a=e.i(242882),t=e.i(714403),s=e.i(246230);async function r({projectRef:e,connectionString:a},s){let{result:r}=await (0,t.executeSql)({projectRef:e,connectionString:a,sql:"show max_connections",queryKey:["max-connections"]},s);return{maxConnections:parseInt(r[0].max_connections)}}e.s(["useMaxConnectionsQuery",0,({projectRef:e,connectionString:t},{enabled:i=!0,...n}={})=>(0,a.useQuery)({queryKey:s.databaseKeys.maxConnections(e),queryFn:({signal:a})=>r({projectRef:e,connectionString:t},a),enabled:i&&void 0!==e,...n})])},893026,e=>{"use strict";e.s(["ROLE_PERMISSIONS",0,{canLogin:{disabled:!1,description:"User can login",grant_by_dashboard:!0},canCreateRole:{disabled:!1,description:"User can create roles",grant_by_dashboard:!0},canCreateDb:{disabled:!1,description:"User can create databases",grant_by_dashboard:!0},canBypassRls:{disabled:!1,description:"User bypasses every row level security policy",grant_by_dashboard:!0},isSuperuser:{disabled:!0,description:"User is a Superuser",grant_by_dashboard:!1},isReplicationRole:{disabled:!1,description:"User can initiate streaming replication and put the system in and out of backup mode",grant_by_dashboard:!0}},"SUPABASE_ROLES",0,["anon","service_role","authenticated","authenticator","dashboard_user","supabase_admin","supabase_auth_admin","supabase_functions_admin","supabase_read_only_user","supabase_realtime_admin","supabase_replication_admin","supabase_storage_admin","pgbouncer","pgsodium_keyholder","pgsodium_keyiduser","pgsodium_keymaker","pgtle_admin","cli_login_postgres","supabase_etl_admin"],"SYSTEM_ROLES",0,["postgres","pgbouncer","supabase_admin","supabase_auth_admin","supabase_storage_admin","dashboard_user","authenticator","pg_database_owner","pg_read_all_data","pg_write_all_data"]])},863562,e=>{"use strict";let a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>a])},672296,e=>{"use strict";function a(e){return e.split("#")[0]}function t(e,a={}){let{maxDepth:s=3,redaction:r="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=a,l=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),o=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function d(e){let a=e;for(let{re:e}of o)a=a.replace(e,r);return a}function u(e){return l.has(String(e).toLowerCase())}return e.map(e=>(function e(a,t){if(null==a||"number"==typeof a||"boolean"==typeof a||"bigint"==typeof a)return a;if("string"==typeof a)return d(a);if("function"==typeof a)return"[Function]";if(a instanceof Date)return a.toISOString();if(a instanceof RegExp)return a.toString();if(ArrayBuffer.isView(a)&&!(a instanceof DataView))return`[TypedArray byteLength=${a.byteLength}]`;if(a instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${a.byteLength}]`;if(t>=s)return i;if("object"==typeof a){if(c.has(a))return"[Circular]";if(Array.isArray(a)){let s=[];c.set(a,s);for(let r=0;r<a.length;r++)s[r]=e(a[r],t+1);return s}if(function(e){if(null===e||"object"!=typeof e)return!1;let a=Object.getPrototypeOf(e);return a===Object.prototype||null===a}(a)){let s={};for(let[i,n]of(c.set(a,s),Object.entries(a)))u(i)?s[i]=r:s[i]=e(n,t+1);return s}if(a instanceof Map){let s=[];for(let[i,n]of(c.set(a,s),a.entries())){let a=u(i)?r:e(i,t+1),l=u(i)?r:e(n,t+1);s.push([a,l])}return s}if(a instanceof Set){let s=[];for(let r of(c.set(a,s),a.values()))s.push(e(r,t+1));return s}if(a instanceof URL)return a.toString();if(a instanceof Error){let e={name:a.name,message:d(a.message),stack:i};return c.set(a,e),e}try{return d(String(a))}catch{return d(Object.prototype.toString.call(a))}}return d(String(a))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>t,"sanitizeUrlHashParams",()=>a])},674995,e=>{"use strict";var a=e.i(478902);e.i(128328);var t=e.i(158639),s=e.i(902858),r=e.i(667852),i=e.i(339098),n=e.i(479232),l=e.i(366652),o=e.i(975924),c=e.i(533488),d=e.i(389959),u=e.i(215312),m=e.i(418029),p=e.i(101369),h=e.i(974900),x=e.i(598792),f=e.i(2579),g=e.i(114378),b=e.i(635494),j=e.i(587433),y=e.i(837710),v=e.i(171997),N=e.i(613580),_=e.i(532728),S=e.i(408891),w=e.i(355901),C=e.i(417403),P=e.i(331720),k=e.i(755216),R=e.i(38429),E=e.i(356003),I=e.i(714403);async function A({projectRef:e,connectionString:a,payload:t}){let s=k.default.roles.create(t).sql,{result:r}=await (0,I.executeSql)({projectRef:e,connectionString:a,sql:s,queryKey:["roles","create"]});return r}var O=e.i(24315),T=e.i(61863),L=e.i(191209),B=e.i(837243),M=e.i(846887),F=e.i(428353),D=e.i(378277),z=e.i(539013),Q=e.i(290811),q=e.i(893026);let H=C.default.object({name:C.default.string().trim().min(1,"You must provide a name").default(""),isSuperuser:C.default.boolean().default(!1),canLogin:C.default.boolean().default(!1),canCreateRole:C.default.boolean().default(!1),canCreateDb:C.default.boolean().default(!1),isReplicationRole:C.default.boolean().default(!1),canBypassRls:C.default.boolean().default(!1)}),$={name:"",isSuperuser:!1,canLogin:!1,canCreateRole:!1,canCreateDb:!1,isReplicationRole:!1,canBypassRls:!1},U=({visible:e,onClose:t})=>{let s="create-new-role",{data:r}=(0,b.useSelectedProjectQuery)(),i=(0,S.useForm)({resolver:(0,_.zodResolver)(H)}),{mutate:n,isPending:l}=(({onSuccess:e,onError:a,...t}={})=>{let s=(0,E.useQueryClient)();return(0,R.useMutation)({mutationFn:e=>A(e),async onSuccess(a,t,r){let{projectRef:i}=t;await (0,h.invalidateRolesQuery)(s,i),await e?.(a,t,r)},async onError(e,t,s){void 0===a?w.toast.error(`Failed to create database role: ${e.message}`):a(e,t,s)},...t})})({onSuccess:(e,a)=>{w.toast.success(`Successfully created new role: ${a.payload.name}`),c()}}),o=async e=>{if(!r)return console.error("Project is required");n({projectRef:r.ref,connectionString:r.connectionString,payload:e})},c=()=>{t(),i.reset($)};return(0,a.jsx)(z.SidePanel,{size:"large",visible:e,header:"Create a new role",className:"mr-0 transform transition-all duration-300 ease-in-out",loading:!1,onCancel:c,customFooter:(0,a.jsx)("div",{className:"flex w-full justify-end space-x-3 border-t border-default px-3 py-4",children:(0,a.jsx)(P.FormActions,{form:s,isSubmitting:l,hasChanges:i.formState.isDirty,handleReset:c})}),children:(0,a.jsx)(F.Form_Shadcn_,{...i,children:(0,a.jsxs)("form",{id:s,className:"grid gap-6 w-full px-8 py-8",onSubmit:i.handleSubmit(o),children:[(0,a.jsx)(T.FormField_Shadcn_,{control:i.control,name:"name",render:({field:e})=>(0,a.jsxs)(L.FormItem_Shadcn_,{className:"grid gap-2 md:grid md:grid-cols-12 space-y-0",children:[(0,a.jsx)(B.FormLabel_Shadcn_,{className:"flex flex-col space-y-2 col-span-4 text-sm justify-center text-foreground-light",children:"Name"}),(0,a.jsx)(O.FormControl_Shadcn_,{className:"col-span-8",children:(0,a.jsx)(D.Input_Shadcn_,{...e,className:"w-full"})}),(0,a.jsx)(M.FormMessage_Shadcn_,{className:"col-start-5 col-span-8"})]})}),(0,a.jsxs)("div",{className:"grid gap-2 mt-4 md:grid md:grid-cols-12",children:[(0,a.jsx)("div",{className:"col-span-4",children:(0,a.jsx)(B.FormLabel_Shadcn_,{className:"flex flex-col space-y-2 col-span-4 text-sm justify-center text-foreground-light",children:"Role privileges"})}),(0,a.jsxs)("div",{className:"col-span-8 grid gap-4",children:[Object.keys(q.ROLE_PERMISSIONS).filter(e=>q.ROLE_PERMISSIONS[e].grant_by_dashboard).map(e=>{let t=q.ROLE_PERMISSIONS[e];return(0,a.jsx)(T.FormField_Shadcn_,{control:i.control,name:e,render:({field:e})=>(0,a.jsxs)(L.FormItem_Shadcn_,{className:"grid gap-2 md:grid md:grid-cols-12 space-y-0",children:[(0,a.jsx)(O.FormControl_Shadcn_,{className:"col-span-8 flex items-center gap-4",children:(0,a.jsxs)("div",{className:"w-full text-sm",children:[(0,a.jsx)(Q.Switch,{checked:e.value,onCheckedChange:e.onChange}),(0,a.jsx)(B.FormLabel_Shadcn_,{children:t.description})]})}),(0,a.jsx)(M.FormMessage_Shadcn_,{className:"col-start-5 col-span-8"})]})},e)}),(0,a.jsx)(z.SidePanel.Separator,{}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("p",{className:"text-sm",children:"These privileges cannot be granted via the Dashboard:"}),Object.keys(q.ROLE_PERMISSIONS).filter(e=>!q.ROLE_PERMISSIONS[e].grant_by_dashboard).map(e=>{let t=q.ROLE_PERMISSIONS[e];return(0,a.jsx)(T.FormField_Shadcn_,{control:i.control,name:e,render:({field:e})=>(0,a.jsxs)(L.FormItem_Shadcn_,{className:"space-y-0 opacity-70",children:[(0,a.jsx)(O.FormControl_Shadcn_,{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"w-full text-sm",children:[(0,a.jsx)(Q.Switch,{checked:e.value,onCheckedChange:e.onChange,disabled:!0,"aria-readonly":!0}),(0,a.jsx)(B.FormLabel_Shadcn_,{children:t.description})]})}),(0,a.jsx)(M.FormMessage_Shadcn_,{className:"col-start-5 col-span-8"})]})},e)})]})]})]})]})})})};async function K({projectRef:e,connectionString:a,id:t,payload:s}){let r=k.default.roles.remove({id:t},s).sql,{result:i}=await (0,I.executeSql)({projectRef:e,connectionString:a,sql:r,queryKey:["roles","delete"]});return i}var W=e.i(40892);let V=({role:e,visible:t,onClose:s,onDelete:r})=>{let{data:i}=(0,b.useSelectedProjectQuery)(),{mutate:n,isPending:l}=(({onSuccess:e,onError:a,...t}={})=>{let s=(0,E.useQueryClient)();return(0,R.useMutation)({mutationFn:e=>K(e),async onSuccess(a,t,r){let{projectRef:i}=t;await (0,h.invalidateRolesQuery)(s,i),await e?.(a,t,r)},async onError(e,t,s){void 0===a?w.toast.error(`Failed to delete database role: ${e.message}`):a(e,t,s)},...t})})({onSuccess:()=>{w.toast.success(`Successfully deleted role: ${e.name}`),s()}}),o=async()=>i?e?void(r?.(),n({projectRef:i.ref,connectionString:i.connectionString,id:e.id})):console.error("Failed to delete role: role is missing"):console.error("Project is required");return(0,a.jsx)(W.Modal,{size:"small",alignFooter:"right",visible:t,onCancel:s,onConfirm:o,header:(0,a.jsxs)("h3",{children:['Confirm to delete role "',e?.name,'"']}),loading:l,children:(0,a.jsx)(W.Modal.Content,{children:(0,a.jsx)("p",{className:"text-sm",children:"This will automatically revoke any membership of this role in other roles, and this action cannot be undone."})})})};var Z=e.i(843778),Y=e.i(58359),G=e.i(874311),X=e.i(441345),J=e.i(905596);async function ee({projectRef:e,connectionString:a,id:t,payload:s}){let r=k.default.roles.update({id:t},s).sql,{result:i}=await (0,I.executeSql)({projectRef:e,connectionString:a,sql:r,queryKey:["roles","update"]});return i}var ea=e.i(283342),et=e.i(382490),es=e.i(471998),er=e.i(211570);let ei=({role:e,disabled:t=!1,onSelectDelete:s})=>{let{data:r}=(0,b.useSelectedProjectQuery)(),[i,n]=(0,d.useState)(!1),{mutate:l,isPending:o}=(({onSuccess:e,onError:a,...t}={})=>{let s=(0,E.useQueryClient)();return(0,R.useMutation)({mutationFn:e=>ee(e),async onSuccess(a,t,r){let{projectRef:i}=t;await (0,h.invalidateRolesQuery)(s,i),await e?.(a,t,r)},async onError(e,t,s){void 0===a?w.toast.error(`Failed to update database role: ${e.message}`):a(e,t,s)},...t})})(),{isSuperuser:c,canLogin:u,canCreateRole:m,canCreateDb:p,isReplicationRole:x,canBypassRls:f}=e,g=async(a,{resetForm:t})=>{if(!r)return console.error("Project is required");let s=Object.fromEntries(Object.entries(a).filter(([a,t])=>t!==e[a]));l({projectRef:r.ref,connectionString:r.connectionString,id:e.id,payload:s},{onSuccess:()=>{w.toast.success(`Successfully updated role "${e.name}"`),t({values:{...a},initialValues:{...a}})}})};return(0,a.jsx)(X.Form,{name:"role-update-form",initialValues:{isSuperuser:c,canLogin:u,canCreateRole:m,canCreateDb:p,isReplicationRole:x,canBypassRls:f},onSubmit:g,className:(0,Z.cn)("bg-surface-100","hover:bg-overlay-hover","data-open:bg-selection","border-default hover:border-strong","data-open:border-strong","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border border-t-0 first:border-t first:!mt-0 hover:border-t hover:-mt-[1px] shadow transition hover:z-50","first:rounded-tl first:rounded-tr","last:rounded-bl last:rounded-br"),children:({values:r,initialValues:l,handleReset:c})=>{let d=JSON.stringify(r)!==JSON.stringify(l);return(0,a.jsxs)(Y.Collapsible,{open:i,children:[(0,a.jsx)(Y.Collapsible.Trigger,{asChild:!0,children:(0,a.jsxs)("button",{id:"collapsible-trigger",type:"button",className:"group flex w-full items-center justify-between rounded py-3 px-[var(--card-padding-x)] text-foreground",onClick:e=>{"collapsible-trigger"===e.target.id&&n(!i)},children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(ea.ChevronUp,{id:"collapsible-trigger",className:"text-border-stronger transition data-open-parent:rotate-0 data-closed-parent:rotate-180",strokeWidth:2,width:14}),(0,a.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,a.jsx)("p",{className:"text-left text-sm",id:"collapsible-trigger",children:e.name}),(0,a.jsxs)("p",{className:"text-left text-sm text-foreground-light",id:"collapsible-trigger",children:["(ID: ",e.id,")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[e.activeConnections>0&&(0,a.jsx)("div",{className:"relative h-2 w-2",children:(0,a.jsxs)("span",{className:"flex h-2 w-2",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-brand opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-brand opacity-75"})]})}),(0,a.jsxs)("p",{id:"collapsible-trigger",className:`text-sm ${e.activeConnections>0?"text-foreground":"text-foreground-light"}`,children:[e.activeConnections," connections"]}),!t&&(0,a.jsxs)(G.DropdownMenu,{children:[(0,a.jsx)(G.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(y.Button,{type:"default",className:"px-1",icon:(0,a.jsx)(es.MoreVertical,{})})}),(0,a.jsx)(G.DropdownMenuContent,{side:"bottom",className:"w-[120px]",children:(0,a.jsxs)(G.DropdownMenuItem,{className:"space-x-2",onClick:a=>{a.stopPropagation(),s(e.id.toString())},children:[(0,a.jsx)(er.Trash,{className:"text-red-800",size:"14",strokeWidth:2}),(0,a.jsx)("p",{children:"Delete"})]})})]})]})]})}),(0,a.jsx)(Y.Collapsible.Content,{children:(0,a.jsxs)("div",{className:"group border-t border-default bg-surface-100 py-6 px-5 md:px-20 text-foreground",children:[(0,a.jsx)("div",{className:"py-4 space-y-[9px]",children:Object.keys(q.ROLE_PERMISSIONS).map(e=>(0,a.jsx)(J.Toggle,{size:"small",id:e,name:e,label:q.ROLE_PERMISSIONS[e].description,disabled:t||q.ROLE_PERMISSIONS[e].disabled,className:["roles-toggle",t||q.ROLE_PERMISSIONS[e].disabled?"[&>div>button]:opacity-30 [&>div>label]:text-foreground-lighter":""].join(" "),afterLabel:!t&&q.ROLE_PERMISSIONS[e].disabled&&(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{children:(0,a.jsx)(et.HelpCircle,{size:"14",strokeWidth:2,className:"ml-2 relative top-[3px]"})}),(0,a.jsx)(N.TooltipContent,{side:"bottom",children:"This privilege cannot be updated via the dashboard"})]})},e))}),!t&&(0,a.jsxs)("div",{className:"py-4 flex items-center space-x-2 justify-end",children:[(0,a.jsx)(y.Button,{type:"default",disabled:!d||o,onClick:()=>c(),children:"Cancel"}),(0,a.jsx)(y.Button,{type:"primary",htmlType:"submit",disabled:!d||o,loading:o,children:"Save"})]})]})})]})}})};var en=e.i(108151);let el=({index:e})=>(0,a.jsx)("div",{className:(0,Z.cn)(["bg-surface-100","data-open:bg-selection","border-default","data-open:border-strong","data-open:pb-px col-span-12 mx-auto","-space-y-px overflow-hidden","border border-t-0 first:border-t first:!mt-0 shadow transition","first:rounded-tl first:rounded-tr","last:rounded-bl last:rounded-br"]),children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between rounded py-3 px-6 text-foreground",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(ea.ChevronUp,{id:"collapsible-trigger",className:"text-border-stronger rotate-180",strokeWidth:2,width:14}),(0,a.jsxs)("div",{className:"space-x-2 flex items-center",children:[(0,a.jsx)(en.ShimmeringLoader,{className:"h-4 w-20 py-0 my-0.5",delayIndex:e}),(0,a.jsx)(en.ShimmeringLoader,{className:"h-4 w-16 py-0 my-0.5",delayIndex:e})]})]}),(0,a.jsx)(en.ShimmeringLoader,{className:"h-4 w-[90px] py-0 my-0.5",delayIndex:e})]})}),eo=()=>{let{data:e}=(0,b.useSelectedProjectQuery)(),[t,_]=(0,d.useState)(""),[S,w]=(0,d.useState)("all"),C=(0,d.useRef)(null),{can:P}=(0,f.useAsyncCheckPermissions)(s.PermissionAction.TENANT_SQL_ADMIN_WRITE,"roles"),{data:k}=(0,x.useMaxConnectionsQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),R=k?.maxConnections,{data:E,isPending:I}=(0,h.useDatabaseRolesQuery)({projectRef:e?.ref,connectionString:e?.connectionString}),[A,O]=(0,c.useQueryState)("new",c.parseAsBoolean.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{setValue:T,value:L}=(0,g.useQueryStateWithSelect)({urlKey:"delete",select:e=>e?E?.find(a=>a.id.toString()===e):void 0,enabled:!!E,onError:(e,a)=>(0,g.handleErrorOnDelete)(C,a,"Database Role not found")}),B=(0,i.default)(E??[],e=>e.name.toLocaleLowerCase()),M=("active"===S?B.filter(e=>e.activeConnections>0):B).filter(e=>e.name.includes(t)),[F,D]=(0,r.default)(M,e=>q.SUPABASE_ROLES.includes(e.name)),z=B.map(e=>e.activeConnections).reduce((e,a)=>e+a,0),Q=(0,i.default)(B.filter(e=>e.activeConnections>0),e=>-e.activeConnections);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(v.Input,{size:"tiny",className:"w-52",placeholder:"Search for a role",icon:(0,a.jsx)(l.Search,{}),value:t,onChange:e=>_(e.target.value),actions:t&&(0,a.jsx)(y.Button,{size:"tiny",type:"text",onClick:()=>_(""),className:"px-1 mr-1",children:(0,a.jsx)(o.X,{size:12,strokeWidth:2})})}),(0,a.jsxs)("div",{className:"flex items-center border border-strong rounded-full w-min h-[26px]",children:[(0,a.jsx)("button",{className:["text-xs w-[80px] h-full text-center rounded-l-full flex items-center justify-center transition","all"===S?"bg-overlay-hover text-foreground":"hover:bg-surface-200 text-foreground-light"].join(" "),onClick:()=>w("all"),children:"All roles"}),(0,a.jsx)("div",{className:"h-full w-[1px] border-r border-strong"}),(0,a.jsx)("button",{className:["text-xs w-[80px] h-full text-center rounded-r-full flex items-center justify-center transition","active"===S?"bg-overlay-hover text-foreground":"hover:bg-surface-200 text-foreground-light"].join(" "),onClick:()=>w("active"),children:"Active roles"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{children:(0,a.jsx)("div",{className:"w-42",children:(0,a.jsx)(p.default,{type:"horizontal",max:R||z,value:z,barClass:0===R||void 0===R?"bg-foreground":z>.9*R?"bg-destructive":z>.75*R?"bg-warning":void 0,labelTop:Number.isInteger(R)?`${z}/${R}`:`${z}`,labelTopClass:"text-xs",labelBottom:"Active connections",labelBottomClass:"text-xs"})})}),(0,a.jsxs)(N.TooltipContent,{align:"start",side:"bottom",className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-foreground-light pr-2",children:"Connections by roles:"}),Q.map(e=>(0,a.jsxs)("div",{children:[e.name,": ",e.activeConnections]},e.id))]})]}),(0,a.jsx)(u.ButtonTooltip,{type:"primary",disabled:!P,icon:(0,a.jsx)(n.Plus,{size:12}),onClick:()=>O(!0),tooltip:{content:{side:"bottom",text:P?void 0:"You need additional permissions to add a new role"}},children:"Add role"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-surface-100 border border-default px-[var(--card-padding-x)] py-3 rounded-t flex items-center space-x-4",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Roles managed by Supabase"}),(0,a.jsx)(j.Badge,{variant:"success",children:"Protected"})]}),I?Array.from({length:5}).map((e,t)=>(0,a.jsx)(el,{index:t},t)):F.map(e=>(0,a.jsx)(ei,{disabled:!0,role:e,onSelectDelete:T},e.id))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"bg-surface-100 border border-default px-[var(--card-padding-x)] py-3 rounded-t",children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Other database roles"})}),I?Array.from({length:3}).map((e,t)=>(0,a.jsx)(el,{index:t},t)):D.map(e=>(0,a.jsx)(ei,{disabled:!P,role:e,onSelectDelete:T},e.id))]})]}),t.length>0&&0===M.length&&(0,a.jsx)(m.NoSearchResults,{searchString:t,onResetFilter:()=>_("")}),(0,a.jsx)(U,{visible:A,onClose:()=>O(!1)}),(0,a.jsx)(V,{role:L,visible:!!L,onClose:()=>T(null),onDelete:()=>{L&&(C.current=L.id.toString())}})]})};var ec=e.i(812136),ed=e.i(448710),eu=e.i(902780),em=e.i(912793),ep=e.i(127739),eh=e.i(456050),ex=e.i(228027);let ef=()=>{let{ref:e}=(0,t.useParams)();return(0,em.useIsFeatureEnabled)("database:roles")?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh.PageHeader,{size:"large",children:(0,a.jsx)(eh.PageHeaderMeta,{children:(0,a.jsxs)(eh.PageHeaderSummary,{children:[(0,a.jsx)(eh.PageHeaderTitle,{children:"Database Roles"}),(0,a.jsx)(eh.PageHeaderDescription,{children:"Manage access control to your database through users, groups, and permissions"})]})})}),(0,a.jsx)(ep.PageContainer,{size:"large",children:(0,a.jsx)(ex.PageSection,{children:(0,a.jsx)(ex.PageSectionContent,{children:(0,a.jsx)(eo,{})})})})]}):(0,a.jsx)(eu.UnknownInterface,{urlBack:`/project/${e}/database/schemas`})};ef.getLayout=e=>(0,a.jsx)(ed.default,{children:(0,a.jsx)(ec.default,{title:"Database",children:e})}),e.s(["default",0,ef],674995)},979286,(e,a,t)=>{let s="/project/[ref]/database/roles";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(674995)]),a.hot&&a.hot.dispose(function(){window.__NEXT_P.push([s])})},111410,e=>{e.v(a=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(a=>e.l(a))).then(()=>a(677146)))},883471,e=>{e.v(a=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(a=>e.l(a))).then(()=>a(518769)))},774186,e=>{e.v(a=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(a=>e.l(a))).then(()=>a(376359)))},981889,e=>{e.v(a=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(a=>e.l(a))).then(()=>a(242525)))},730314,e=>{e.v(a=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0734037b67c1024e.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(a=>e.l(a))).then(()=>a(686651)))},753940,e=>{e.v(a=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(a=>e.l(a))).then(()=>a(478124)))},724565,e=>{e.v(a=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(a=>e.l(a))).then(()=>a(341546)))},591393,e=>{e.v(a=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(a=>e.l(a))).then(()=>a(217383)))},379416,e=>{e.v(a=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(a=>e.l(a))).then(()=>a(931066)))},15732,e=>{e.v(a=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(a=>e.l(a))).then(()=>a(760545)))},957083,e=>{e.v(a=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(a=>e.l(a))).then(()=>a(667558)))},926327,e=>{e.v(a=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(a=>e.l(a))).then(()=>a(72947)))},207969,e=>{e.v(a=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(a=>e.l(a))).then(()=>a(427328)))},992842,e=>{e.v(a=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(a=>e.l(a))).then(()=>a(793794)))},239573,e=>{e.v(a=>Promise.all(["static/chunks/edc5d84148401903.js"].map(a=>e.l(a))).then(()=>a(210246)))},963685,e=>{e.v(a=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(a=>e.l(a))).then(()=>a(983756)))},665811,e=>{e.v(a=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(a=>e.l(a))).then(()=>a(544836)))},369256,e=>{e.v(a=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(a=>e.l(a))).then(()=>a(930239)))},16037,e=>{e.v(a=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(a=>e.l(a))).then(()=>a(397698)))},616788,e=>{e.v(a=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(a=>e.l(a))).then(()=>a(7346)))},315750,e=>{e.v(a=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(a=>e.l(a))).then(()=>a(531289)))},460510,e=>{e.v(a=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(a=>e.l(a))).then(()=>a(276898)))},550265,e=>{e.v(a=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(a=>e.l(a))).then(()=>a(259714)))},830960,e=>{e.v(a=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(a=>e.l(a))).then(()=>a(882885)))},336744,e=>{e.v(a=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(a=>e.l(a))).then(()=>a(955268)))},63631,e=>{e.v(a=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(a=>e.l(a))).then(()=>a(853630)))},396476,e=>{e.v(a=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(a=>e.l(a))).then(()=>a(62943)))},912072,e=>{e.v(a=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(a=>e.l(a))).then(()=>a(311301)))}]);

//# debugId=79d298e2-26d2-3716-7ffa-2783d10f6911
//# sourceMappingURL=efc00dd68f633b08.js.map