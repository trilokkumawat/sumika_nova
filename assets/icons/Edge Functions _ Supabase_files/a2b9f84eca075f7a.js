;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="1a706dd2-105b-b683-0e2b-1d6dbfc35cb0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,744061,418638,e=>{"use strict";var t=e.i(478902),r=e.i(938933),a=e.i(843778);function s({children:e,className:r,tag:a="div",style:s}){let i=`${a}`;return(0,t.jsx)(i,{style:s,children:e})}s.Title=function({className:e,level:r=1,children:a,style:s}){let i=`h${r}`;return(0,t.jsx)(i,{style:s,children:a})},s.Text=function({className:e,children:r,style:a,type:s,disabled:i,mark:n,code:o,keyboard:l,underline:c,strikethrough:u,strong:d,small:p}){return o?(0,t.jsx)("code",{style:a,children:r}):n?(0,t.jsx)("mark",{style:a,children:r}):l?(0,t.jsx)("kbd",{style:a,children:r}):d?(0,t.jsx)("strong",{style:a,children:r}):(0,t.jsx)("span",{style:a,children:r})},s.Link=function({children:e,target:r="_blank",href:a,className:s,onClick:i,style:n}){return(0,t.jsx)("a",{onClick:i,href:a,target:r,rel:"noopener noreferrer",style:n,children:e})},e.s(["default",0,s],418638);var i=e.i(389959);let n=(0,i.createContext)({type:"text"}),o=e=>{let{type:r}=e;return(0,t.jsx)(n.Provider,{value:{type:r},children:e.children})},l=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function c({children:e,className:r,ulClassName:a,style:s,type:i="text"}){return(0,t.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:r,style:s,children:(0,t.jsx)(o,{type:i,children:(0,t.jsx)("ul",{className:a,children:e})})})}c.Item=function({children:e,icon:s,active:i,rounded:n,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:d}){let p=(0,r.default)("menu"),{type:h}=l(),f=[p.item.base];f.push(p.item.variants[h].base),i?f.push(p.item.variants[h].active):f.push(p.item.variants[h].normal);let m=[p.item.content.base];i?m.push(p.item.content.active):m.push(p.item.content.normal);let x=[p.item.icon.base];return i?x.push(p.item.icon.active):x.push(p.item.icon.normal),(0,t.jsxs)("li",{role:"menuitem",className:(0,a.cn)("outline-none",f),style:d,onClick:o,"aria-current":i?"page":void 0,children:[s&&(0,t.jsx)("div",{className:`${x.join(" ")} min-w-fit`,children:s}),(0,t.jsx)("span",{className:m.join(" "),children:e})]})},c.Group=function({children:e,icon:a,title:s}){let i=(0,r.default)("menu"),{type:n}=l();return(0,t.jsxs)("div",{className:[i.group.base,i.group.variants[n]].join(" "),children:[a&&(0,t.jsx)("span",{className:i.group.icon,children:a}),(0,t.jsx)("span",{className:i.group.content,children:s}),e]})},c.Misc=function({children:e}){return(0,t.jsx)("div",{children:(0,t.jsx)(s.Text,{children:(0,t.jsx)("span",{children:e})})})},e.s(["default",0,c],744061)},862326,e=>{"use strict";var t=e.i(744061);e.s(["Menu",()=>t.default])},902780,e=>{"use strict";var t=e.i(478902),r=e.i(210419),a=e.i(837710),s=e.i(843778),i=e.i(710483);e.s(["UnknownInterface",0,({urlBack:e,fullHeight:n=!0})=>(0,t.jsx)("div",{className:(0,s.cn)("w-full flex items-center justify-center",n&&"h-full"),children:(0,t.jsx)(i.Admonition,{type:"note",className:"max-w-xl",title:"Looking for something?",description:"We couldn't find the page that you're looking for",children:(0,t.jsx)(a.Button,{asChild:!0,type:"default",className:"mt-2",children:(0,t.jsx)(r.default,{href:e,children:"Head back"})})})})])},456598,e=>{"use strict";var t=e.i(460988),r=e.i(389959);e.s(["default",0,(e,a)=>(0,r.useMemo)(()=>0!==e.length&&(0,t.isUnixMicro)(e[0][a])?e?.map(e=>(e[a]=(0,t.unixMicroToIsoTimestamp)(e[a]),e)):e,[JSON.stringify(e)])])},238921,e=>{"use strict";var t=e.i(478902),r=e.i(55956),a=e.i(389959),s=e.i(151675),i=e.i(942032),n=e.i(30772),o=e.i(214765),l=e.i(941327),c=e.i(462273),u=e.i(843778);let d="hsl(var(--background-overlay-hover))",p="hsl(var(--brand-default))",h="hsl(var(--destructive-default))",f="hsl(var(--warning-default))";e.s(["LogsBarChart",0,({data:e,onBarClick:m,EmptyState:x,DateTimeFormat:g="MMM D, YYYY, hh:mma",isFullHeight:y=!1,chartConfig:b,hideZeroValues:v=!1})=>{let[j,k]=(0,a.useState)(null);if(0===e.length)return x||null;let w=(0,r.default)(e[0].timestamp).format(g),N=(0,r.default)(e[e?.length-1]?.timestamp).format(g);return(0,t.jsxs)("div",{"data-testid":"logs-bar-chart",className:(0,u.cn)("flex flex-col gap-y-3",y?"h-full":"h-24"),children:[(0,t.jsx)(c.ChartContainer,{className:"h-full",config:b??{error_count:{label:"Errors"},ok_count:{label:"Ok"},warning_count:{label:"Warnings"}},children:(0,t.jsxs)(n.BarChart,{data:e,onMouseMove:e=>{e.activeTooltipIndex!==j&&k(e.activeTooltipIndex)},onMouseLeave:()=>k(null),onClick:e=>{let t=e?.activePayload?.[0]?.payload;m&&m(t,e)},children:[(0,t.jsx)(l.YAxis,{tick:!1,width:0,axisLine:{stroke:d},tickLine:{stroke:d}}),(0,t.jsx)(o.XAxis,{dataKey:"timestamp",interval:e.length-2,tick:!1,axisLine:{stroke:d},tickLine:{stroke:d}}),(0,t.jsx)(c.ChartTooltip,{animationDuration:0,position:{y:16},content:e=>{if(!e.active||!e.payload||0===e.payload.length)return null;let a=v?e.payload.filter(e=>0!==Number(e.value)):e.payload;return 0===a.length?null:(0,t.jsx)(c.ChartTooltipContent,{active:e.active,payload:a,label:e.label,className:"text-foreground-light -mt-5 !transition-none",labelFormatter:e=>(0,r.default)(e).format(g)})}}),(0,t.jsx)(s.Bar,{dataKey:"error_count",fill:h,maxBarSize:24,stackId:"stack",children:e?.map((e,r)=>(0,t.jsx)(i.Cell,{className:"cursor-pointer transition-colors",fill:j===r||null===j?h:"hsl(var(--destructive-500))"},`error-${r}`))}),(0,t.jsx)(s.Bar,{dataKey:"warning_count",fill:f,maxBarSize:24,stackId:"stack",children:e?.map((e,r)=>(0,t.jsx)(i.Cell,{className:"cursor-pointer transition-colors",fill:j===r||null===j?f:"hsl(var(--warning-500))"},`warning-${r}`))}),(0,t.jsx)(s.Bar,{dataKey:"ok_count",fill:p,maxBarSize:24,stackId:"stack",children:e?.map((e,r)=>(0,t.jsx)(i.Cell,{className:"cursor-pointer transition-colors",fill:j===r||null===j?p:"hsl(var(--brand-500))"},`success-${r}`))})]})}),e&&(0,t.jsxs)("div",{className:"text-foreground-lighter -mt-10 flex items-center justify-between text-[10px] font-mono",children:[(0,t.jsx)("span",{children:w}),(0,t.jsx)("span",{children:N})]})]})}])},598792,e=>{"use strict";var t=e.i(242882),r=e.i(714403),a=e.i(246230);async function s({projectRef:e,connectionString:t},a){let{result:s}=await (0,r.executeSql)({projectRef:e,connectionString:t,sql:"show max_connections",queryKey:["max-connections"]},a);return{maxConnections:parseInt(s[0].max_connections)}}e.s(["useMaxConnectionsQuery",0,({projectRef:e,connectionString:r},{enabled:i=!0,...n}={})=>(0,t.useQuery)({queryKey:a.databaseKeys.maxConnections(e),queryFn:({signal:t})=>s({projectRef:e,connectionString:r},t),enabled:i&&void 0!==e,...n})])},92092,e=>{"use strict";var t=e.i(948610),r=e.i(903805),a=e.i(214765),s=e.i(941327),i=e.i(451711),n=(0,t.generateCategoricalChart)({chartName:"AreaChart",GraphicalChild:r.Area,axisComponents:[{axisType:"xAxis",AxisComp:a.XAxis},{axisType:"yAxis",AxisComp:s.YAxis}],formatAxisMap:i.formatAxisMap});e.s(["AreaChart",()=>n])},469100,e=>{"use strict";var t=e.i(478902),r=e.i(843778);e.s(["default",0,({children:e})=>(0,t.jsx)("div",{className:(0,r.cn)("flex flex-col flex-grow gap-4 px-5 py-6 mx-auto 1xl:px-28 lg:px-16 2xl:px-32 w-full @lg:px-6 @xl:px-22"),children:e})])},72987,e=>{"use strict";var t=e.i(478902),r=e.i(271226);e.i(128328);var a=e.i(158639),s=e.i(282492);e.s(["default",0,({title:e,showDatabaseSelector:i})=>{let n=(0,r.useRouter)(),{ref:o}=(0,a.useParams)(),{db:l,chart:c,...u}=n.query;return(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-4 items-center",children:[(0,t.jsx)("h1",{children:e}),i&&(0,t.jsx)(s.DatabaseSelector,{onSelectId:e=>{n.push({pathname:n.pathname,query:e!==o?{...u,db:e}:u})}})]})}])},903805,e=>{"use strict";var t=e.i(389959),r=e.i(197649),a=e.i(791576),s=e.i(837574),i=e.i(638375),n=e.i(736912),o=e.i(870217),l=e.i(822574),c=e.i(818369),u=e.i(113939),d=e.i(557385),p=e.i(143109),h=e.i(129405),f=e.i(767799),m=e.i(447958),x=e.i(877591),g=["layout","type","stroke","connectNulls","isRange","ref"],y=["key"];function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function j(){return(j=Object.assign.bind()).apply(this,arguments)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function N(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P(a.key),a)}}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_=function(){return!!e})()}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=b(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var O=function(e){var u,h;function m(){var e,t,r;if(!(this instanceof m))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,i=Array(a),n=0;n<a;n++)i[n]=arguments[n];return t=m,r=[].concat(i),t=C(t),S(e=function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var r=e;if(void 0===r)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(this,_()?Reflect.construct(t,r||[],C(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!0}),S(e,"id",(0,f.uniqueId)("recharts-area-")),S(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),(0,s.default)(t)&&t()}),S(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),(0,s.default)(t)&&t()}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return m.prototype=Object.create(e&&e.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),e&&A(m,e),u=[{key:"renderDots",value:function(e,r,a){var s=this.props.isAnimationActive,i=this.state.isAnimationFinished;if(s&&!i)return null;var n=this.props,o=n.dot,l=n.points,c=n.dataKey,u=(0,x.filterProps)(this.props,!1),p=(0,x.filterProps)(o,!0),h=l.map(function(e,t){var r=w(w(w({key:"dot-".concat(t),r:3},u),p),{},{index:t,cx:e.x,cy:e.y,dataKey:c,value:e.value,payload:e.payload,points:l});return m.renderDotItem(o,r)}),f={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(a,")"):null};return t.default.createElement(d.Layer,j({className:"recharts-area-dots"},f),h)}},{key:"renderHorizontalRect",value:function(e){var r=this.props,a=r.baseLine,s=r.points,n=r.strokeWidth,o=s[0].x,l=s[s.length-1].x,c=e*Math.abs(o-l),u=(0,i.default)(s.map(function(e){return e.y||0}));return((0,f.isNumber)(a)&&"number"==typeof a?u=Math.max(a,u):a&&Array.isArray(a)&&a.length&&(u=Math.max((0,i.default)(a.map(function(e){return e.y||0})),u)),(0,f.isNumber)(u))?t.default.createElement("rect",{x:o<l?o:o-c,y:0,width:c,height:Math.floor(u+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var r=this.props,a=r.baseLine,s=r.points,n=r.strokeWidth,o=s[0].y,l=s[s.length-1].y,c=e*Math.abs(o-l),u=(0,i.default)(s.map(function(e){return e.x||0}));return((0,f.isNumber)(a)&&"number"==typeof a?u=Math.max(a,u):a&&Array.isArray(a)&&a.length&&(u=Math.max((0,i.default)(a.map(function(e){return e.x||0})),u)),(0,f.isNumber)(u))?t.default.createElement("rect",{x:0,y:o<l?o:o-c,width:u+(n?parseInt("".concat(n),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,r,a,s){var i=this.props,n=i.layout,o=i.type,l=i.stroke,u=i.connectNulls,p=i.isRange,h=(i.ref,v(i,g));return t.default.createElement(d.Layer,{clipPath:a?"url(#clipPath-".concat(s,")"):null},t.default.createElement(c.Curve,j({},(0,x.filterProps)(h,!0),{points:e,connectNulls:u,type:o,baseLine:r,layout:n,stroke:"none",className:"recharts-area-area"})),"none"!==l&&t.default.createElement(c.Curve,j({},(0,x.filterProps)(this.props,!1),{className:"recharts-area-curve",layout:n,type:o,connectNulls:u,fill:"none",points:e})),"none"!==l&&p&&t.default.createElement(c.Curve,j({},(0,x.filterProps)(this.props,!1),{className:"recharts-area-curve",layout:n,type:o,connectNulls:u,fill:"none",points:r})))}},{key:"renderAreaWithAnimation",value:function(e,r){var s=this,i=this.props,l=i.points,c=i.baseLine,u=i.isAnimationActive,p=i.animationBegin,h=i.animationDuration,m=i.animationEasing,x=i.animationId,g=this.state,y=g.prevPoints,b=g.prevBaseLine;return t.default.createElement(a.default,{begin:p,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(a){var i=a.t;if(y){var u,p=y.length/l.length,h=l.map(function(e,t){var r=Math.floor(t*p);if(y[r]){var a=y[r],s=(0,f.interpolateNumber)(a.x,e.x),n=(0,f.interpolateNumber)(a.y,e.y);return w(w({},e),{},{x:s(i),y:n(i)})}return e});return u=(0,f.isNumber)(c)&&"number"==typeof c?(0,f.interpolateNumber)(b,c)(i):(0,n.default)(c)||(0,o.default)(c)?(0,f.interpolateNumber)(b,0)(i):c.map(function(e,t){var r=Math.floor(t*p);if(b[r]){var a=b[r],s=(0,f.interpolateNumber)(a.x,e.x),n=(0,f.interpolateNumber)(a.y,e.y);return w(w({},e),{},{x:s(i),y:n(i)})}return e}),s.renderAreaStatically(h,u,e,r)}return t.default.createElement(d.Layer,null,t.default.createElement("defs",null,t.default.createElement("clipPath",{id:"animationClipPath-".concat(r)},s.renderClipRect(i))),t.default.createElement(d.Layer,{clipPath:"url(#animationClipPath-".concat(r,")")},s.renderAreaStatically(l,c,e,r)))})}},{key:"renderArea",value:function(e,t){var r=this.props,a=r.points,s=r.baseLine,i=r.isAnimationActive,n=this.state,o=n.prevPoints,c=n.prevBaseLine,u=n.totalLength;return i&&a&&a.length&&(!o&&u>0||!(0,l.default)(o,a)||!(0,l.default)(c,s))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(a,s,e,t)}},{key:"render",value:function(){var e,a=this.props,s=a.hide,i=a.dot,o=a.points,l=a.className,c=a.top,u=a.left,h=a.xAxis,f=a.yAxis,m=a.width,g=a.height,y=a.isAnimationActive,b=a.id;if(s||!o||!o.length)return null;var v=this.state.isAnimationFinished,j=1===o.length,k=(0,r.default)("recharts-area",l),w=h&&h.allowDataOverflow,N=f&&f.allowDataOverflow,_=w||N,C=(0,n.default)(b)?this.id:b,A=null!=(e=(0,x.filterProps)(i,!1))?e:{r:3,strokeWidth:2},S=A.r,P=A.strokeWidth,O=((0,x.hasClipDot)(i)?i:{}).clipDot,T=void 0===O||O,L=2*(void 0===S?3:S)+(void 0===P?2:P);return t.default.createElement(d.Layer,{className:k},w||N?t.default.createElement("defs",null,t.default.createElement("clipPath",{id:"clipPath-".concat(C)},t.default.createElement("rect",{x:w?u:u-m/2,y:N?c:c-g/2,width:w?m:2*m,height:N?g:2*g})),!T&&t.default.createElement("clipPath",{id:"clipPath-dots-".concat(C)},t.default.createElement("rect",{x:u-L/2,y:c-L/2,width:m+L,height:g+L}))):null,j?null:this.renderArea(_,C),(i||j)&&this.renderDots(_,T,C),(!y||v)&&p.LabelList.renderCallByParent(this.props,o))}}],h=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],u&&N(m.prototype,u),h&&N(m,h),Object.defineProperty(m,"prototype",{writable:!1}),m}(t.PureComponent);S(O,"displayName","Area"),S(O,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!h.Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),S(O,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,n=t.props.baseValue,o=null!=n?n:i;if((0,f.isNumber)(o)&&"number"==typeof o)return o;var l="horizontal"===s?a:r,c=l.scale.domain();if("number"===l.type){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return"dataMin"===o?d:"dataMax"===o||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),S(O,"getComposedData",function(e){var t,r=e.props,a=e.item,s=e.xAxis,i=e.yAxis,n=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,p=e.displayedData,h=e.offset,f=r.layout,x=u&&u.length,g=O.getBaseValue(r,a,s,i),y="horizontal"===f,b=!1,v=p.map(function(e,t){x?r=u[d+t]:Array.isArray(r=(0,m.getValueByDataKey)(e,c))?b=!0:r=[g,r];var r,a=null==r[1]||x&&null==(0,m.getValueByDataKey)(e,c);return y?{x:(0,m.getCateCoordinateOfLine)({axis:s,ticks:n,bandSize:l,entry:e,index:t}),y:a?null:i.scale(r[1]),value:r,payload:e}:{x:a?null:s.scale(r[1]),y:(0,m.getCateCoordinateOfLine)({axis:i,ticks:o,bandSize:l,entry:e,index:t}),value:r,payload:e}});return t=x||b?v.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?i.scale(t):null}:{x:null!=t?s.scale(t):null,y:e.y}}):y?i.scale(g):s.scale(g),w({points:v,baseLine:t,layout:f,isRange:b},h)}),S(O,"renderDotItem",function(e,a){var i;if(t.default.isValidElement(e))i=t.default.cloneElement(e,a);else if((0,s.default)(e))i=e(a);else{var n=(0,r.default)("recharts-area-dot","boolean"!=typeof e?e.className:""),o=a.key,l=v(a,y);i=t.default.createElement(u.Dot,j({},l,{key:o,className:n}))}return i}),e.s(["Area",()=>O])},510334,e=>{"use strict";function t(e){return e?e.split("T")[0]:e}e.s(["analyticsKeys",0,{functionsCombinedStats:(e,{interval:t,functionId:r})=>["projects",e,"functions-combined-stats",{interval:t,functionId:r}],functionsInvStats:(e,{interval:t,functionId:r})=>["projects",e,"functions-inv-stats",{interval:t,functionId:r}],functionsReqStats:(e,{interval:t,functionId:r})=>["projects",e,"functions-req-stats",{interval:t,functionId:r}],functionsResourceUsage:(e,{interval:t,functionId:r})=>["projects",e,"functions-resource-usage",{interval:t,functionId:r}],orgDailyStats:(e,{startDate:r,endDate:a,projectRef:s})=>["organizations",e,"daily-stats",{startDate:t(r),endDate:t(a),projectRef:s}],infraMonitoring:(e,{attribute:t,startDate:r,endDate:a,interval:s,databaseIdentifier:i})=>["projects",e,"infra-monitoring",{attribute:t,startDate:r,endDate:a,interval:s,databaseIdentifier:i}],infraMonitoringGroup:(e,{attributes:t,startDate:r,endDate:a,interval:s,databaseIdentifier:i})=>["projects",e,"infra-monitoring","group",{attributes:t?[...t].sort():void 0,startDate:r,endDate:a,interval:s,databaseIdentifier:i}],usageApiCounts:(e,t)=>["projects",e,"usage.api-counts",t],usageApiRequestsCount:e=>["projects",e,"usage.api-requests-count"]}])},193,e=>{"use strict";var t=e.i(242882),r=e.i(234745),a=e.i(510334);async function s({projectRef:e,attributes:t,startDate:a,endDate:s,interval:i="1h",databaseIdentifier:n},o){if(!e)throw Error("Project ref is required");if(!t?.length)throw Error("At least one attribute is required");if(!a)throw Error("Start date is required");if(!s)throw Error("End date is required");let l="2m"===i,{data:c,error:u}=await (0,r.get)("/platform/projects/{ref}/infra-monitoring",{params:{path:{ref:e},query:{attributes:t,startDate:a,endDate:s,interval:l?"1m":i,databaseIdentifier:n}},signal:o});return u&&(0,r.handleError)(u),l&&(c._originalInterval="2m"),c}e.s(["getInfraMonitoringAttributes",()=>s,"useInfraMonitoringAttributesQuery",0,({projectRef:e,attributes:r,startDate:i,endDate:n,interval:o="1h",databaseIdentifier:l},{enabled:c=!0,...u}={})=>(0,t.useQuery)({queryKey:a.analyticsKeys.infraMonitoringGroup(e,{attributes:r,startDate:i,endDate:n,interval:o,databaseIdentifier:l}),queryFn:({signal:t})=>s({projectRef:e,attributes:r,startDate:i,endDate:n,interval:o,databaseIdentifier:l},t),enabled:c&&void 0!==e&&!!r?.length&&void 0!==i&&void 0!==n,staleTime:6e4,...u})])},993463,e=>{"use strict";var t=e.i(478902),r=e.i(17203),a=e.i(215312),s=e.i(210419),i=e.i(837710);e.s(["default",0,({title:e="",size:n="medium",children:o,ctaButtonLabel:l="",infoButtonLabel:c="",infoButtonUrl:u="",onClickCta:d=()=>{},loading:p=!1,disabled:h=!1,disabledMessage:f="",ctaUrl:m})=>{let x=l&&d||u&&c;return(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:`${"medium"===n?"w-80":"w-[400px]"} space-y-4`,children:[(0,t.jsx)("h5",{className:"text-foreground",children:e}),(0,t.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:o}),x&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&m?(0,t.jsx)(i.Button,{asChild:!0,type:"primary",children:(0,t.jsx)(s.default,{href:m,children:l})}):l&&d?(0,t.jsx)(a.ButtonTooltip,{type:"primary",onClick:d,loading:p,disabled:p||h,tooltip:{content:{side:"bottom",text:h&&f.length>0?f:void 0}},children:l}):null,u&&c?(0,t.jsx)(i.Button,{type:"default",icon:(0,t.jsx)(r.ExternalLink,{strokeWidth:1.5}),children:(0,t.jsx)("a",{target:"_blank",rel:"noreferrer",href:u,children:c})}):null]})]})})})})}])},863562,e=>{"use strict";let t="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;e.s(["DEBUG_BUILD",()=>t])},672296,e=>{"use strict";function t(e){return e.split("#")[0]}function r(e,t={}){let{maxDepth:a=3,redaction:s="[REDACTED]",truncationNotice:i="[REDACTED: max depth reached]",sensitiveKeys:n=[]}=t,o=new Set(["password","passwd","pwd","pass","secret","token","id_token","access_token","refresh_token","apikey","api_key","api-key","apiKey","key","privatekey","private_key","client_secret","clientSecret","auth","authorization","ssh_key","sshKey","bearer","session","cookie","csrf","xsrf","ip","ip_address","ipAddress","aws_access_key_id","aws_secret_access_key","gcp_service_account_key",...n].map(e=>e.toLowerCase())),l=[{re:/\b(?:(?:25[0-5]|2[0-4]\d|1?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|1?\d?\d)\b/g,reason:"ip"},{re:/\b(?:[A-Fa-f0-9]{1,4}:){2,7}[A-Fa-f0-9]{1,4}\b/g,reason:"ip6"},{re:/\b(AKI|ASI)A[0-9A-Z]{16}\b/g,reason:"aws_access_key_id"},{re:/\b[0-9A-Za-z/+]{40}\b/g,reason:"aws_secret_access_key_like"},{re:/\bBearer\s+[A-Za-z0-9\-._~+/]+=*\b/g,reason:"bearer"},{re:/\b[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\.[A-Za-z0-9-_]+?\b/g,reason:"jwt_like"},{re:/\b[A-Za-z0-9_\-]{24,64}\b/g,reason:"long_token"}],c=new WeakMap;function u(e){let t=e;for(let{re:e}of l)t=t.replace(e,s);return t}function d(e){return o.has(String(e).toLowerCase())}return e.map(e=>(function e(t,r){if(null==t||"number"==typeof t||"boolean"==typeof t||"bigint"==typeof t)return t;if("string"==typeof t)return u(t);if("function"==typeof t)return"[Function]";if(t instanceof Date)return t.toISOString();if(t instanceof RegExp)return t.toString();if(ArrayBuffer.isView(t)&&!(t instanceof DataView))return`[TypedArray byteLength=${t.byteLength}]`;if(t instanceof ArrayBuffer)return`[ArrayBuffer byteLength=${t.byteLength}]`;if(r>=a)return i;if("object"==typeof t){if(c.has(t))return"[Circular]";if(Array.isArray(t)){let a=[];c.set(t,a);for(let s=0;s<t.length;s++)a[s]=e(t[s],r+1);return a}if(function(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}(t)){let a={};for(let[i,n]of(c.set(t,a),Object.entries(t)))d(i)?a[i]=s:a[i]=e(n,r+1);return a}if(t instanceof Map){let a=[];for(let[i,n]of(c.set(t,a),t.entries())){let t=d(i)?s:e(i,r+1),o=d(i)?s:e(n,r+1);a.push([t,o])}return a}if(t instanceof Set){let a=[];for(let s of(c.set(t,a),t.values()))a.push(e(s,r+1));return a}if(t instanceof URL)return t.toString();if(t instanceof Error){let e={name:t.name,message:u(t.message),stack:i};return c.set(t,e),e}try{return u(String(t))}catch{return u(Object.prototype.toString.call(t))}}return u(String(t))})(e,0))}e.s(["sanitizeArrayOfObjects",()=>r,"sanitizeUrlHashParams",()=>t])},629847,158005,e=>{"use strict";var t=e.i(478902),r=e.i(937942),a=e.i(88816),s=e.i(837710),i=e.i(874311),n=e.i(613580);let o={free:1,pro:7,team:28,enterprise:90,platform:1},l=[{key:"1hr",label:"Last 60 minutes",startValue:1,startUnit:"hour",format:"MMM D, h:mma",availableIn:["free","pro","team","enterprise","platform"]},{key:"1day",label:"Last 24 hours",startValue:24,startUnit:"hour",format:"MMM D, ha",availableIn:["free","pro","team","enterprise","platform"]},{key:"7day",label:"Last 7 days",startValue:7,startUnit:"day",format:"MMM D",availableIn:["pro","team","enterprise"]}];e.s(["CHART_INTERVALS",0,l,"LOG_RETENTION",0,o],158005),e.s(["ChartIntervalDropdown",0,({value:e,onChange:c,planId:u="free",planName:d,organizationSlug:p,dropdownAlign:h="start",tooltipSide:f="right"})=>{let m=l.find(t=>t.key===e)||l[1],x=u&&u in o?u:"free";return(0,t.jsxs)(i.DropdownMenu,{children:[(0,t.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{type:"default",iconRight:(0,t.jsx)(a.ChevronDown,{size:14}),children:(0,t.jsx)("span",{children:m.label})})}),(0,t.jsx)(i.DropdownMenuContent,{side:"bottom",align:h,className:"w-40",children:(0,t.jsx)(i.DropdownMenuRadioGroup,{value:e,onValueChange:c,children:l.map(e=>{if(e.availableIn?.includes(x))return(0,t.jsx)(i.DropdownMenuRadioItem,{value:e.key,children:e.label},e.key);{let a=o[x];return(0,t.jsxs)(n.Tooltip,{children:[(0,t.jsx)(n.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(i.DropdownMenuRadioItem,{disabled:!0,value:e.key,className:"!pointer-events-auto",children:e.label})}),(0,t.jsxs)(n.TooltipContent,{side:f,children:[(0,t.jsxs)("p",{children:[d," plan only includes up to ",a," day",a>1?"s":""," of log retention"]}),(0,t.jsx)("p",{className:"text-foreground-light",children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.InlineLink,{className:"text-foreground-light hover:text-foreground",href:`/org/${p}/billing?panel=subscriptionPlan`,children:"Upgrade your plan"})," ","to increase log retention and view statistics for the"," ",e.label.toLowerCase()]}):`Upgrade your plan to increase log retention and view statistics for the ${e.label.toLowerCase()}`})]})]},e.key)}})})})]})}],629847)},761074,e=>{"use strict";var t=e.i(478902),r=e.i(902858),a=e.i(271226),s=e.i(389959);e.i(128328);var i=e.i(158639),n=e.i(657588),o=e.i(303213),l=e.i(356003),c=e.i(72987),u=e.i(469100),d=e.i(629847),p=e.i(158005),h=e.i(55956),f=e.i(25123),m=e.i(912793),x=e.i(265735),g=e.i(61187),y=e.i(587433),b=e.i(837710),v=e.i(613580),j=e.i(193),k=e.i(598792),w=e.i(635494),N=e.i(210419),_=e.i(416050),C=e.i(382490),A=e.i(903805),S=e.i(92092),P=e.i(625198),O=e.i(751883),T=e.i(627069),L=e.i(843778),M=e.i(903248);let E=s.createContext({isLoading:!1,isDisabled:!1}),R=()=>(0,s.useContext)(E),D=s.forwardRef(({isLoading:e=!1,isDisabled:r=!1,className:a,children:s,...i},n)=>(0,t.jsx)(T.Card,{ref:n,className:(0,L.cn)("group-hover:bg-surface-200 transition-colors",a),...i,children:(0,t.jsx)(E.Provider,{value:{isLoading:e,isDisabled:r},children:s})}));D.displayName="MetricCard";let I=s.forwardRef(({className:e,href:r,children:a,linkTooltip:s,...i},n)=>(0,t.jsxs)("div",{ref:n,className:(0,L.cn)("py-4 px-6 flex flex-row items-center justify-between gap-2 space-y-0 pb-0 border-b-0 relative",e),...i,children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:a}),r?(0,t.jsxs)(v.Tooltip,{children:[(0,t.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(b.Button,{type:"text",size:"tiny",className:"px-1 text-foreground-lighter group-hover:text-foreground absolute right-3 transition-colors",asChild:!0,children:(0,t.jsxs)(N.default,{href:r,children:[(0,t.jsx)(_.ChevronRight,{"aria-disabled":!0,size:14,strokeWidth:1.5}),(0,t.jsx)("span",{className:"sr-only",children:"More information"})]})})}),s?(0,t.jsx)(v.TooltipContent,{children:s}):null]}):null]}));I.displayName="MetricCardHeader";let B=s.forwardRef(({className:e,orientation:r="vertical",...a},s)=>(0,t.jsx)(T.CardContent,{ref:s,className:(0,L.cn)("pb-4 px-6 pt-0 flex-1 flex h-full items-start gap-1 overflow-hidden border-b-0","horizontal"===r?"flex-row":"flex-col ",e),...a}));B.displayName="MetricCardContent",s.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,L.cn)("text-foreground-light",e),...r})).displayName="MetricCardIcon";let U=s.forwardRef(({className:e,tooltip:r,children:a,...s},i)=>(0,t.jsxs)(T.CardTitle,{ref:i,className:(0,L.cn)("flex items-center gap-2 text-foreground-light",e),...s,children:[(0,t.jsx)("span",{children:a}),r&&(0,t.jsxs)(v.Tooltip,{children:[(0,t.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(C.HelpCircle,{size:14,strokeWidth:1.5})}),(0,t.jsx)(v.TooltipContent,{className:"max-w-xs",children:r})]})]}));U.displayName="MetricCardLabel";let F=s.forwardRef(({className:e,...r},a)=>{let{isLoading:s}=R();return s?(0,t.jsx)(M.Skeleton,{className:"w-32 h-7"}):(0,t.jsx)("span",{ref:a,className:(0,L.cn)("font-normal text-xl tabular-nums",e),...r})});F.displayName="MetricCardValue",s.forwardRef(({className:e,variant:r="default",...a},s)=>{let{isLoading:i}=R();return i?(0,t.jsx)(M.Skeleton,{className:"w-16 h-5"}):(0,t.jsx)("span",{ref:s,className:(0,L.cn)("positive"===r?"text-brand":"negative"===r?"text-destructive":"text-foreground-light","tabular-nums text-sm",e),...a})}).displayName="MetricCardDifferential";let $=({active:e,payload:r,label:a})=>{var s;let i,n;return e&&r&&r.length?(0,t.jsxs)("div",{className:"bg-black/90 text-white p-2 rounded text-xs",children:[a&&(0,t.jsx)("div",{className:"dark:text-foreground-light text-white/60",children:(s=r[0].payload.timestamp,n=(i=(0,h.default)(s)).hour(),`${i.format("MMM D")}, ${n%12||12}${n>=12?"pm":"am"}`)}),(0,t.jsx)("div",{children:r[0].value.toLocaleString(void 0,{maximumFractionDigits:0})})]}):null};function z(e){return"number"==typeof e?e:"string"==typeof e&&parseFloat(e)||0}s.forwardRef(({className:e,data:r,dataKey:a,...s},i)=>{let{isLoading:n}=R();return n?(0,t.jsx)(M.Skeleton,{className:"w-full h-[56px] rounded-none"}):r&&0!==r.length?(0,t.jsx)("div",{ref:i,className:(0,L.cn)("w-full h-16 relative",e),...s,children:(0,t.jsx)(O.ResponsiveContainer,{width:"100%",height:"100%",className:"relative",children:(0,t.jsxs)(S.AreaChart,{data:r,margin:{top:5,left:0,right:0,bottom:0},children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"sparklineGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--brand-default))",stopOpacity:.8}),(0,t.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--brand-default))",stopOpacity:0})]})}),(0,t.jsx)(P.Tooltip,{content:(0,t.jsx)($,{})}),(0,t.jsx)(A.Area,{type:"step",dataKey:a||"value",fill:"url(#sparklineGradient)",fillOpacity:.1,stroke:"hsl(var(--brand-default))",strokeWidth:1.5})]})})}):null}).displayName="MetricCardSparkline";let q=({interval:e,refreshKey:r,dbErrorRate:a,isLoading:n,slowQueriesCount:o=0,slowQueriesLoading:l=!1})=>{let{ref:c}=(0,i.useParams)(),{data:u}=(0,w.useSelectedProjectQuery)(),{startDate:d,endDate:p,infraInterval:f}=(0,s.useMemo)(()=>{let t,r,a=(0,h.default)(),s=a.toISOString();switch(e){case"1hr":default:t=a.subtract(1,"hour").toISOString(),r="1h";break;case"1day":t=a.subtract(1,"day").toISOString(),r="1h";break;case"7day":t=a.subtract(7,"day").toISOString(),r="1d"}return{startDate:t,endDate:s,infraInterval:r}},[e,r]),{data:m,isLoading:x,error:g}=(0,j.useInfraMonitoringAttributesQuery)({projectRef:c,attributes:["avg_cpu_usage","ram_usage","disk_fs_used_system","disk_fs_used_wal","pg_database_size","disk_fs_size","disk_io_consumption","pg_stat_database_num_backends"],startDate:d,endDate:p,interval:f}),{data:y}=(0,k.useMaxConnectionsQuery)({projectRef:c,connectionString:u?.connectionString}),b=(0,s.useMemo)(()=>(function(e){if(!e)return null;let t="series"in e?e.series:{},r=z(t.avg_cpu_usage?.totalAverage),a=z(t.ram_usage?.totalAverage),s=z(t.disk_fs_used_system?.totalAverage),i=z(t.disk_fs_used_wal?.totalAverage),n=z(t.pg_database_size?.totalAverage),o=z(t.disk_fs_size?.totalAverage);return{cpu:{current:r,max:100},ram:{current:a,max:100},disk:{current:o>0?(s+i+n)/o*100:0,max:100},diskIo:{current:z(t.disk_io_consumption?.totalAverage),max:100}}})(m),[m]),v=(0,s.useMemo)(()=>(function(e,t){if(!e)return{current:0,max:0};let r="series"in e?e.series:{};return{current:Math.round(z(r.pg_stat_database_num_backends?.totalAverage)),max:t?.maxConnections||0}})(m,y),[m,y]),_=g&&"object"==typeof g&&"message"in g?String(g.message):"Error loading data",C=(()=>{let t,r,a=(0,h.default)();switch(e){case"1hr":t=a.subtract(1,"hour").toISOString(),r="Last 60 minutes";break;case"1day":default:t=a.subtract(24,"hour").toISOString(),r="Last 24 hours";break;case"7day":t=a.subtract(7,"day").toISOString(),r="Last 7 days"}let s=new URLSearchParams({its:t,ite:a.toISOString(),isHelper:"true",helperText:r});return`/project/${c}/observability/database?${s.toString()}`})();return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-4",children:"Database"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)(N.default,{href:`/project/${c}/observability/query-performance?totalTimeFilter=${encodeURIComponent(JSON.stringify({operator:">",value:1e3}))}`,className:"block group",children:(0,t.jsxs)(D,{isLoading:l,children:[(0,t.jsx)(I,{href:`/project/${c}/observability/query-performance?totalTimeFilter=${encodeURIComponent(JSON.stringify({operator:">",value:1e3}))}`,linkTooltip:"Go to query performance",children:(0,t.jsx)(U,{tooltip:"Queries with total execution time (execution time + planning time) greater than 1000ms. High values may indicate query optimization opportunities",children:"Slow Queries"})}),(0,t.jsx)(B,{children:(0,t.jsx)(F,{children:o})})]})}),(0,t.jsx)(N.default,{href:C,className:"block group",children:(0,t.jsxs)(D,{isLoading:x,children:[(0,t.jsx)(I,{href:C,linkTooltip:"Go to database report",children:(0,t.jsx)(U,{tooltip:"Active database connections (current/max). Monitor to avoid connection exhaustion",children:"Connections"})}),(0,t.jsx)(B,{children:g?(0,t.jsx)("div",{className:"text-xs text-destructive break-words",children:_}):v.max>0?(0,t.jsxs)(F,{children:[v.current,"/",v.max]}):(0,t.jsx)(F,{children:"--"})})]})}),(0,t.jsx)(N.default,{href:C,className:"block group",children:(0,t.jsxs)(D,{isLoading:x,children:[(0,t.jsx)(I,{href:C,linkTooltip:"Go to database report",children:(0,t.jsx)(U,{tooltip:"Disk usage percentage of total disk space used",children:"Disk Usage"})}),(0,t.jsx)(B,{children:g?(0,t.jsx)("div",{className:"text-xs text-destructive break-words",children:_}):b?(0,t.jsxs)(F,{children:[b.disk.current.toFixed(0),"%"]}):(0,t.jsx)(F,{children:"--"})})]})}),(0,t.jsx)(N.default,{href:C,className:"block group",children:(0,t.jsxs)(D,{isLoading:x,children:[(0,t.jsx)(I,{href:C,linkTooltip:"Go to database report",children:(0,t.jsx)(U,{tooltip:"Disk I/O consumption percentage. High values may indicate disk bottlenecks",children:"Disk IO"})}),(0,t.jsx)(B,{children:g?(0,t.jsx)("div",{className:"text-xs text-destructive break-words",children:_}):b?(0,t.jsxs)(F,{children:[b.diskIo.current.toFixed(0),"%"]}):(0,t.jsx)(F,{children:"--"})})]})}),(0,t.jsx)(N.default,{href:C,className:"block group",children:(0,t.jsxs)(D,{isLoading:x,children:[(0,t.jsx)(I,{href:C,linkTooltip:"Go to database report",children:(0,t.jsx)(U,{tooltip:"RAM usage percentage. Sustained high usage may indicate memory pressure",children:"Memory"})}),(0,t.jsx)(B,{children:g?(0,t.jsx)("div",{className:"text-xs text-destructive break-words",children:_}):b?(0,t.jsxs)(F,{children:[b.ram.current.toFixed(0),"%"]}):(0,t.jsx)(F,{children:"--"})})]})}),(0,t.jsx)(N.default,{href:C,className:"block group",children:(0,t.jsxs)(D,{isLoading:x,children:[(0,t.jsx)(I,{href:C,linkTooltip:"Go to database report",children:(0,t.jsx)(U,{tooltip:"CPU usage percentage. High values may suggest CPU-intensive queries or workloads",children:"CPU"})}),(0,t.jsx)(B,{children:g?(0,t.jsx)("div",{className:"text-xs text-destructive break-words",children:_}):b?(0,t.jsxs)(F,{children:[b.cpu.current.toFixed(0),"%"]}):(0,t.jsx)(F,{children:"--"})})]})})]})]})},K=()=>(0,t.jsx)("div",{className:"py-12 flex items-center justify-center",children:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,t.jsx)(N.default,{href:"https://supabase.com/docs/guides/troubleshooting",target:"_blank",rel:"noopener noreferrer",className:"text-foreground underline underline-offset-2 decoration-foreground-muted hover:decoration-foreground transition-all",children:"View our troubleshooting guides"})," ","for solutions to common Supabase issues."," "]})}),G=(e,t,r)=>{if(e<=0)return{successRate:0,nonSuccessRate:0};let a=(t+r)/e*100;return{successRate:100-a,nonSuccessRate:a}};var Q=e.i(242882),V=e.i(234745),H=e.i(520124),W=e.i(456598),Y=e.i(993394),Z=e.i(460988);let X={db:{table:Y.LogsTableName.POSTGRES,enabled:!0},auth:{table:Y.LogsTableName.AUTH,enabled:!0},functions:{table:Y.LogsTableName.FN_EDGE,enabled:!0},storage:{table:Y.LogsTableName.STORAGE,enabled:!0},realtime:{table:Y.LogsTableName.REALTIME,enabled:!0},postgrest:{table:Y.LogsTableName.POSTGREST,enabled:!0}},J=async(e,t,r,a,s)=>{let i=(0,Z.genChartQuery)(t,{iso_timestamp_start:r,iso_timestamp_end:a},{}),{data:n,error:o}=await (0,V.get)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:{sql:i,iso_timestamp_start:r,iso_timestamp_end:a}},signal:s});if(o??n?.error)throw o??n?.error;return n?.result??[]},ee=({projectRef:e,serviceKey:t,startDate:r,endDate:a,enabled:i})=>{let n=X[t],o=n.table,l=(0,Q.useQuery)({queryKey:["service-health-metrics",e,t,r,a,o],queryFn:({signal:t})=>J(e,o,r,a,t),enabled:i&&n.enabled&&!!e,staleTime:6e4}),c=(0,W.default)(l.data??[],"timestamp"),{data:u}=(0,H.useFillTimeseriesSorted)({data:c,timestampKey:"timestamp",valueKey:"ok_count",defaultValue:0,startDate:r,endDate:a}),d=(0,s.useMemo)(()=>u.map(e=>({timestamp:"string"==typeof e.timestamp?e.timestamp:String(e.timestamp),ok_count:e.ok_count??0,warning_count:e.warning_count??0,error_count:e.error_count??0})),[u]);return{...(0,s.useMemo)(()=>(e=>{let t=e.reduce((e,t)=>e+t.ok_count+t.warning_count+t.error_count,0),r=e.reduce((e,t)=>e+t.error_count,0),a=e.reduce((e,t)=>e+t.warning_count,0),s=t-r-a,i=t>0?r/t*100:0,{successRate:n}=G(t,a,r);return{total:t,errorRate:i,successRate:n,errorCount:r,warningCount:a,okCount:s}})(d),[d]),eventChartData:d,isLoading:l.isLoading,error:l.error,refresh:l.refetch}};var et=e.i(787902),er=e.i(238921),ea=e.i(215312);let es={db:"PostgreSQL database health and performance",auth:"Authentication and user management",functions:"Serverless Edge Functions execution",storage:"Object storage for files and assets",realtime:"WebSocket connections and broadcasts",postgrest:"Auto-generated REST API for your database"},ei=({service:e,data:r,onBarClick:a,datetimeFormat:s})=>{var i;let{status:n}=(i=r.errorRate,r.total<100?{status:"unknown",color:"muted"}:i>=1?{status:"error",color:"destructive"}:{status:"healthy",color:"brand"}),o=(e=>{switch(e){case"healthy":return"Healthy";case"error":return"Unhealthy";case"unknown":return"Unknown"}})(n),l=(e=>{switch(e){case"healthy":return"success";case"error":return"destructive";case"unknown":return"default"}})(n),c=(e=>{switch(e){case"healthy":return"Error rate is below 1%";case"error":return"Error rate is 1% or higher";case"unknown":return"Insufficient data (fewer than 100 requests)"}})(n),u=r.total>0?r.errorRate:0,d=r.total>0?r.warningCount/r.total*100:0,p=e.reportUrl||e.logsUrl;return(0,t.jsxs)(N.default,{href:p,className:"block group p-4 border-b border-default last:border-b-0 hover:bg-surface-200 transition-colors cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-foreground font-medium",children:e.name}),(0,t.jsxs)(v.Tooltip,{children:[(0,t.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("button",{onClick:e=>e.preventDefault(),className:"text-foreground-lighter hover:text-foreground-light transition-colors",children:(0,t.jsx)(C.HelpCircle,{size:14})})}),(0,t.jsx)(v.TooltipContent,{side:"right",className:"max-w-xs",children:(0,t.jsx)("p",{children:es[e.key]||e.description})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(v.Tooltip,{children:[(0,t.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(y.Badge,{variant:l,children:o})}),(0,t.jsx)(v.TooltipContent,{side:"top",children:(0,t.jsx)("p",{children:c})})]}),(0,t.jsx)(ea.ButtonTooltip,{type:"text",size:"tiny",className:"p-1.5",tooltip:{content:{text:`Go to ${e.name} report`}},children:(0,t.jsx)(_.ChevronRight,{size:14,className:"text-foreground-lighter group-hover:text-foreground"})})]})]}),(0,t.jsx)("div",{className:"h-16",onClick:e=>e.preventDefault(),children:(0,t.jsx)(et.Loading,{active:r.isLoading,children:r.isLoading?(0,t.jsx)("div",{}):(0,t.jsx)(er.LogsBarChart,{data:r.eventChartData,DateTimeFormat:s,onBarClick:a,EmptyState:(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-xs text-foreground-lighter",children:"No data"})})})}),r.total>0&&(0,t.jsxs)("div",{className:"flex items-center justify-center mt-2 text-xs text-foreground-lighter gap-4 font-mono tabular-nums tracking-tight",children:[u>0&&(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-destructive"}),u.toFixed(2),"% errors"]}),d>0&&(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-warning"}),d.toFixed(2),"% warnings"]}),0===u&&0===d&&(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-brand"}),"0% errors"]})]})]})},en=({services:e,serviceData:r,onBarClick:a,datetimeFormat:s})=>(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"heading-section mb-4",children:"Service Health"}),(0,t.jsx)(T.Card,{children:(0,t.jsx)(T.CardContent,{className:"p-0",children:e.map(e=>{let i=r[e.key];return i?(0,t.jsx)(ei,{service:e,data:i,onBarClick:a(e.key,e.logsUrl),datetimeFormat:s},e.key):null})})})]});var eo=e.i(749199);let el=()=>{let e=(0,a.useRouter)(),{ref:r}=(0,i.useParams)(),{data:o}=(0,x.useSelectedOrganizationQuery)(),{plan:j}=(0,f.useCurrentOrgPlan)(),k=(0,l.useQueryClient)(),w=(0,n.useFlag)("authreportv2"),N=(0,n.useFlag)("edgefunctionreport"),_=(0,n.useFlag)("realtimeReport"),C=(0,n.useFlag)("storagereport"),A=(0,n.useFlag)("postgrestreport"),{projectStorageAll:S}=(0,m.useIsFeatureEnabled)(["project_storage:all"]),[P,O]=(0,s.useState)("1day"),[T,L]=(0,s.useState)(0),M=p.CHART_INTERVALS.find(e=>e.key===P)||p.CHART_INTERVALS[1],{datetimeFormat:E}=(0,s.useMemo)(()=>({datetimeFormat:M.format||"MMM D, ha"}),[M]),R=((e,t,r)=>{let{startDate:a,endDate:i}=(0,s.useMemo)(()=>(e=>{let t,r=(0,h.default)(),a=r.toISOString();switch(e){case"1hr":default:t=r.subtract(1,"hour").toISOString();break;case"1day":t=r.subtract(1,"day").toISOString();break;case"7day":t=r.subtract(7,"day").toISOString()}return{startDate:t,endDate:a}})(t),[t,r]),n=!!e,o=ee({projectRef:e,serviceKey:"db",startDate:a,endDate:i,enabled:n}),l=ee({projectRef:e,serviceKey:"auth",startDate:a,endDate:i,enabled:n}),c=ee({projectRef:e,serviceKey:"functions",startDate:a,endDate:i,enabled:n}),u=ee({projectRef:e,serviceKey:"storage",startDate:a,endDate:i,enabled:n}),d=ee({projectRef:e,serviceKey:"realtime",startDate:a,endDate:i,enabled:n}),p=ee({projectRef:e,serviceKey:"postgrest",startDate:a,endDate:i,enabled:n}),f=(0,s.useMemo)(()=>({db:o,auth:l,functions:c,storage:u,realtime:d,postgrest:p}),[o,l,c,u,d,p]),m=(0,s.useMemo)(()=>(e=>{let t=e.reduce((e,t)=>e+t.total,0),r=e.reduce((e,t)=>e+t.errorCount,0),a=e.reduce((e,t)=>e+t.warningCount,0),{successRate:s,nonSuccessRate:i}=G(t,a,r);return{totalRequests:t,totalErrors:r,totalWarnings:a,overallErrorRate:i,overallSuccessRate:s}})(Object.values(f)),[f]),x=Object.values(f).some(e=>e.isLoading);return{services:f,aggregated:m,isLoading:x,endDate:i}})(r,P,T),{slowQueriesCount:D,isLoading:I}=((e,t=0)=>{let r=(0,s.useMemo)(()=>`
    -- observability-slow-queries-count
    set search_path to public, extensions;

    SELECT
      count(*)::int as slow_queries_count
    FROM pg_stat_statements
    WHERE total_exec_time + total_plan_time > 1000;
  `,[t]),{data:a,isLoading:i,error:n}=(0,eo.default)({sql:r});return{slowQueriesCount:(0,s.useMemo)(()=>a&&Array.isArray(a)&&0!==a.length?a[0]?.slow_queries_count??0:0,[a]),isLoading:i,error:n}})(0,T),B=(0,s.useCallback)(()=>{L(e=>e+1),k.invalidateQueries({queryKey:["project-metrics"]}),k.invalidateQueries({queryKey:["postgrest-overview-metrics"]}),k.invalidateQueries({queryKey:["infra-monitoring"]}),k.invalidateQueries({queryKey:["max-connections"]})},[k]),U=(0,s.useMemo)(()=>[{key:"db",name:"Database",reportUrl:`/project/${r}/observability/database`,logsUrl:`/project/${r}/logs/postgres-logs`,enabled:!0,hasReport:!0},{key:"auth",name:"Auth",reportUrl:`/project/${r}/observability/auth`,logsUrl:`/project/${r}/logs/auth-logs`,enabled:!0,hasReport:w},{key:"functions",name:"Edge Functions",reportUrl:`/project/${r}/observability/edge-functions`,logsUrl:`/project/${r}/logs/edge-functions-logs`,enabled:!0,hasReport:N},{key:"realtime",name:"Realtime",reportUrl:`/project/${r}/observability/realtime`,logsUrl:`/project/${r}/logs/realtime-logs`,enabled:!0,hasReport:_},{key:"storage",name:"Storage",reportUrl:`/project/${r}/observability/storage`,logsUrl:`/project/${r}/logs/storage-logs`,enabled:S,hasReport:C},{key:"postgrest",name:"Data API",reportUrl:`/project/${r}/observability/postgrest`,logsUrl:`/project/${r}/logs/postgrest-logs`,enabled:!0,hasReport:A}],[r,w,N,_,C,S,A]).filter(e=>e.enabled),F=R.services.db,$=(0,s.useCallback)((t,r)=>t=>{if(!t?.timestamp)return;let a=(0,h.default)(t.timestamp),s=new URLSearchParams({its:a.startOf("hour").toISOString(),ite:a.startOf("hour").add(1,"hour").toISOString()});e.push(`${r}?${s.toString()}`)},[e]);return(0,t.jsxs)(u.default,{children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.default,{title:"Overview"}),(0,t.jsxs)(v.Tooltip,{children:[(0,t.jsx)(v.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(y.Badge,{variant:"warning",children:"Beta"})}),(0,t.jsx)(v.TooltipContent,{children:(0,t.jsx)("p",{children:"This page is subject to change"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(b.Button,{type:"outline",icon:(0,t.jsx)(g.RefreshCw,{size:14}),onClick:B,children:"Refresh"}),(0,t.jsx)(d.ChartIntervalDropdown,{value:P,onChange:e=>O(e),planId:j?.id,planName:j?.name,organizationSlug:o?.slug,dropdownAlign:"end",tooltipSide:"left"})]})]}),(0,t.jsxs)("div",{className:"space-y-12 mt-8",children:[(0,t.jsx)(q,{interval:P,refreshKey:T,dbErrorRate:F.errorRate,isLoading:F.isLoading,slowQueriesCount:D,slowQueriesLoading:I}),(0,t.jsx)(en,{services:U.map(e=>({key:e.key,name:e.name,description:"",reportUrl:e.hasReport?e.reportUrl:void 0,logsUrl:e.logsUrl})),serviceData:R.services,onBarClick:$,interval:P,datetimeFormat:E})]}),(0,t.jsx)(K,{})]})};var ec=e.i(448710),eu=e.i(212846),ed=e.i(993463),ep=e.i(929461),eh=e.i(2579),ef=e.i(432478),em=e.i(818843),ex=e.i(533488);let eg=()=>{let e=(0,a.useRouter)(),{ref:l}=(0,i.useParams)(),{profile:c}=(0,ef.useProfile)(),u=(0,n.useFlag)("observabilityOverview"),[d,p]=(0,ex.useQueryState)("newReport",ex.parseAsBoolean.withDefault(!1).withOptions({history:"push",clearOnDefault:!0})),{isPending:h,isSuccess:f,data:m}=(0,ep.useContentQuery)({projectRef:l,type:"report"});(0,s.useEffect)(()=>{if(!f||u)return;let t=m.content.filter(e=>"report"===e.type).sort((e,t)=>e.name.localeCompare(t.name));t.length>=1&&e.push(`/project/${l}/observability/${t[0].id}`),0===t.length&&e.push(`/project/${l}/observability/api-overview`)},[f,m,e,l,u]);let{can:x}=(0,eh.useAsyncCheckPermissions)(r.PermissionAction.CREATE,"user_content",{resource:{type:"report",owner_id:c?.id},subject:{id:c?.id}});return u?(0,t.jsx)(el,{}):(0,t.jsx)("div",{className:"h-full w-full",children:h?(0,t.jsx)(em.LogoLoader,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ed.default,{title:"Observability",ctaButtonLabel:"New custom report",onClickCta:()=>{p(!0)},disabled:!x,disabledMessage:"You need additional permissions to create a report",children:[(0,t.jsx)("p",{className:"text-foreground-light text-sm",children:"Create custom reports for your projects."}),(0,t.jsx)("p",{className:"text-foreground-light text-sm",children:"Get a high level overview of your network traffic, user actions, and infrastructure health."})]}),(0,t.jsx)(o.CreateReportModal,{visible:d,onCancel:()=>p(!1),afterSubmit:()=>p(!1)})]})})};eg.getLayout=e=>(0,t.jsx)(ec.default,{children:(0,t.jsx)(eu.default,{children:e})}),e.s(["UserReportPage",0,eg,"default",0,eg],761074)},300444,(e,t,r)=>{let a="/project/[ref]/observability";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(761074)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},111410,e=>{e.v(t=>Promise.all(["static/chunks/a428d2b7e6671266.js","static/chunks/92a7c4be60dd12e3.js"].map(t=>e.l(t))).then(()=>t(677146)))},883471,e=>{e.v(t=>Promise.all(["static/chunks/69b2faaedd35af23.js"].map(t=>e.l(t))).then(()=>t(518769)))},774186,e=>{e.v(t=>Promise.all(["static/chunks/117b4e5883cfc423.js"].map(t=>e.l(t))).then(()=>t(376359)))},981889,e=>{e.v(t=>Promise.all(["static/chunks/e44cabdf5aea9bff.js"].map(t=>e.l(t))).then(()=>t(242525)))},730314,e=>{e.v(t=>Promise.all(["static/chunks/dcadd9d46d72282e.js","static/chunks/0734037b67c1024e.js","static/chunks/82dddbda1a808189.js","static/chunks/15e50b9d6c55f00a.js","static/chunks/87b9766a4d16d1da.js","static/chunks/cc8130a84ee9bc2c.css"].map(t=>e.l(t))).then(()=>t(686651)))},753940,e=>{e.v(t=>Promise.all(["static/chunks/046f60a3ac988a54.js"].map(t=>e.l(t))).then(()=>t(478124)))},724565,e=>{e.v(t=>Promise.all(["static/chunks/3ef67abf4c659c0b.js"].map(t=>e.l(t))).then(()=>t(341546)))},591393,e=>{e.v(t=>Promise.all(["static/chunks/e9ad074e72197584.js"].map(t=>e.l(t))).then(()=>t(217383)))},379416,e=>{e.v(t=>Promise.all(["static/chunks/031b0d6330b6fbae.js"].map(t=>e.l(t))).then(()=>t(931066)))},15732,e=>{e.v(t=>Promise.all(["static/chunks/0d5256e667945be4.js"].map(t=>e.l(t))).then(()=>t(760545)))},957083,e=>{e.v(t=>Promise.all(["static/chunks/e7d07ff1ae210964.js"].map(t=>e.l(t))).then(()=>t(667558)))},926327,e=>{e.v(t=>Promise.all(["static/chunks/a5f6425a6c20e9a8.js"].map(t=>e.l(t))).then(()=>t(72947)))},207969,e=>{e.v(t=>Promise.all(["static/chunks/8dd7282c22f923f6.js"].map(t=>e.l(t))).then(()=>t(427328)))},992842,e=>{e.v(t=>Promise.all(["static/chunks/d064a48a1c7cf778.js"].map(t=>e.l(t))).then(()=>t(793794)))},239573,e=>{e.v(t=>Promise.all(["static/chunks/edc5d84148401903.js"].map(t=>e.l(t))).then(()=>t(210246)))},963685,e=>{e.v(t=>Promise.all(["static/chunks/92b20126e5ca0919.js"].map(t=>e.l(t))).then(()=>t(983756)))},665811,e=>{e.v(t=>Promise.all(["static/chunks/e37e25f8b82619ef.js"].map(t=>e.l(t))).then(()=>t(544836)))},369256,e=>{e.v(t=>Promise.all(["static/chunks/8296dc618dae72f0.js"].map(t=>e.l(t))).then(()=>t(930239)))},16037,e=>{e.v(t=>Promise.all(["static/chunks/3251b4bc539a554b.js"].map(t=>e.l(t))).then(()=>t(397698)))},616788,e=>{e.v(t=>Promise.all(["static/chunks/c6b81ab43a1d5d23.js"].map(t=>e.l(t))).then(()=>t(7346)))},315750,e=>{e.v(t=>Promise.all(["static/chunks/32c236321136eb7c.js"].map(t=>e.l(t))).then(()=>t(531289)))},460510,e=>{e.v(t=>Promise.all(["static/chunks/d91062943e6a7c30.js"].map(t=>e.l(t))).then(()=>t(276898)))},550265,e=>{e.v(t=>Promise.all(["static/chunks/75ff0e62b8a31d26.js"].map(t=>e.l(t))).then(()=>t(259714)))},830960,e=>{e.v(t=>Promise.all(["static/chunks/b44aa26556fee7df.js"].map(t=>e.l(t))).then(()=>t(882885)))},336744,e=>{e.v(t=>Promise.all(["static/chunks/2b0767b5c008139a.js"].map(t=>e.l(t))).then(()=>t(955268)))},63631,e=>{e.v(t=>Promise.all(["static/chunks/21a4706e1f02d90b.js"].map(t=>e.l(t))).then(()=>t(853630)))},396476,e=>{e.v(t=>Promise.all(["static/chunks/265a0c1d143bd3f1.js"].map(t=>e.l(t))).then(()=>t(62943)))},912072,e=>{e.v(t=>Promise.all(["static/chunks/c17c80e5efc43419.js"].map(t=>e.l(t))).then(()=>t(311301)))}]);

//# debugId=1a706dd2-105b-b683-0e2b-1d6dbfc35cb0
//# sourceMappingURL=49e621ea1b192046.js.map