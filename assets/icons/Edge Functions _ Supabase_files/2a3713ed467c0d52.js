;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="4c6d6606-4e02-c996-007f-44b273ce45e2")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,430854,e=>{"use strict";var s=e.i(478902);e.i(128328);var t=e.i(86086),r=e.i(743371),a=e.i(902858),i=e.i(774803),n=e.i(389959),o=e.i(355901),c=e.i(158639),l=e.i(567558),d=e.i(513826),u=e.i(937942),m=e.i(38429),h=e.i(356003),j=e.i(234745),x=e.i(78162);async function p({projectRef:e,isSensitive:s}){if(!e)throw Error("projectRef is required");let{data:t,error:r}=await (0,j.patch)("/platform/projects/{ref}/settings/sensitivity",{params:{path:{ref:e}},body:{is_sensitive:s}});return r&&(0,j.handleError)(r),t}var f=e.i(377451),g=e.i(2579),y=e.i(635494),v=e.i(10429),b=e.i(627069),S=e.i(290811),N=e.i(613580),P=e.i(228027);let w=()=>{let{ref:e}=(0,c.useParams)(),{data:t}=(0,y.useSelectedProjectQuery)(),[r,j]=(0,n.useState)(!1),{can:w}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"projects",{resource:{project_id:t?.id}}),{data:C,error:_,isError:A,isPending:T,isSuccess:k}=(0,f.useProjectSettingsV2Query)({projectRef:e}),D=C?.is_sensitive||!1,{mutate:E,isPending:F}=(({onSuccess:e,onError:s,...t}={})=>{let r=(0,h.useQueryClient)();return(0,m.useMutation)({mutationFn:e=>p(e),async onSuccess(s,t,a){let{projectRef:i}=t;await r.invalidateQueries({queryKey:x.configKeys.settingsV2(i)}),await e?.(s,t,a)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to update project compliance configuration: ${e.message}`):s(e,t,r)},...t})})({onSuccess:()=>{o.toast.success("Successfully updated project compliance configuration")},onError:e=>{j(D),o.toast.error(`Failed to update project compliance configuration: ${e.message}`)}}),R=async()=>{if(!e)return console.error("Project ref is required");j(!r),E({projectRef:e,isSensitive:!r})};return(0,n.useEffect)(()=>{T||j(D)},[T]),(0,s.jsxs)(P.PageSection,{id:"compliance-configuration",children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-3 @lg:flex-row @lg:items-center @lg:justify-between",children:[(0,s.jsxs)(P.PageSectionSummary,{children:[(0,s.jsx)(P.PageSectionTitle,{children:"High Compliance Configuration"}),(0,s.jsx)(P.PageSectionDescription,{children:"For projects storing and processing sensitive data (HIPAA)."})]}),(0,s.jsx)(d.DocsButton,{href:`${v.DOCS_URL}/guides/platform/hipaa-projects`})]})}),(0,s.jsx)(P.PageSectionContent,{children:(0,s.jsx)(b.Card,{children:(0,s.jsxs)(b.CardContent,{className:"flex flex-col gap-4 @lg:flex-row @lg:items-center @lg:justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2 max-w-2xl",children:[(0,s.jsx)("p",{className:"text-sm",children:"Apply additional compliance controls to project"}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Enable security warnings in the"," ",(0,s.jsx)(u.InlineLink,{href:`/project/${e}/advisors/security`,children:"Security Advisor"})," ","to enforce requirements for managing sensitive data."]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(T||F)&&(0,s.jsx)(i.Loader2,{className:"animate-spin",strokeWidth:1.5,size:16}),A&&(0,s.jsx)(l.default,{error:_,subject:"Failed to retrieve project settings"}),k&&(0,s.jsxs)(N.Tooltip,{children:[(0,s.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("div",{children:(0,s.jsx)(S.Switch,{size:"large",checked:r,disabled:T||F||!w,onCheckedChange:R})})}),!w&&(0,s.jsx)(N.TooltipContent,{side:"bottom",className:"w-64 text-center",children:"You need additional permissions to update the compliance configuration for your project"})]})]})]})})})]})};var C=e.i(867637),_=e.i(657588),A=e.i(196621),T=e.i(235458),k=e.i(71005),D=e.i(144676),E=e.i(265735),F=e.i(368315);async function R({domain:e}){try{let s=await (0,j.fetchHandler)(`${v.BASE_PATH}/api/check-cname?domain=${e}`).then(e=>e.json());if(void 0===s.Answer)throw Error(`Your CNAME record for ${e} cannot be found - if you've just added the record, do check back in a bit.`);return s.Answer.some(e=>5===e.type)}catch(e){(0,j.handleError)(e)}}let I=({onSuccess:e,onError:s,...t}={})=>(0,m.useMutation)({mutationFn:e=>R(e),async onSuccess(s,t,r){await e?.(s,t,r)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to check CNAME record: ${e.message}`):s(e,t,r)},...t});var Q=e.i(447808);async function z({projectRef:e}){let{data:s,error:t}=await (0,j.post)("/v1/projects/{ref}/custom-hostname/activate",{params:{path:{ref:e}}});return t&&(0,j.handleError)(t),s}var M=e.i(795513);async function L({projectRef:e}){let{data:s,error:t}=await (0,j.del)("/v1/projects/{ref}/custom-hostname",{params:{path:{ref:e}}});return t&&(0,j.handleError)(t),s}let q=({onSuccess:e,onError:s,...t}={})=>{let r=(0,h.useQueryClient)();return(0,m.useMutation)({mutationFn:e=>L(e),async onSuccess(s,t,a){let{projectRef:i}=t;r.setQueriesData({queryKey:Q.customDomainKeys.list(i)},()=>({customDomain:null,status:"0_no_hostname_configured"})),await r.invalidateQueries({queryKey:M.subscriptionKeys.addons(i)}),await e?.(s,t,a)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to delete custom domain: ${e.message}`):s(e,t,r)},...t})};var $=e.i(837710),O=e.i(466472),U=e.i(710483);let B=({projectRef:e,customDomain:t})=>{let[r,a]=(0,n.useState)(!1),{data:i}=(0,f.useProjectSettingsV2Query)({projectRef:e}),{mutate:c,isPending:l}=I(),{mutate:u,isPending:j}=(({onSuccess:e,onError:s,...t}={})=>{let r=(0,h.useQueryClient)();return(0,m.useMutation)({mutationFn:e=>z(e),async onSuccess(s,t,a){let{projectRef:i}=t;await r.invalidateQueries({queryKey:Q.customDomainKeys.list(i)}),await e?.(s,t,a)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to activate custom domain: ${e.message}`):s(e,t,r)},...t})})({onSuccess:()=>{o.toast.success("Successfully activated custom domain"),a(!1)}}),{mutate:x,isPending:p}=q({onSuccess:()=>{o.toast.success("Custom domain setup cancelled successfully. It may take a few seconds before your custom domain is fully removed, so you may need to refresh your browser.")}}),g=i?.app_config?.endpoint,y=async()=>{if(!e)return console.error("Project ref is required");c({domain:t.hostname},{onSuccess:()=>u({projectRef:e})})},b=async()=>{if(!e)return console.error("Project ref is required");x({projectRef:e})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-start",children:[(0,s.jsxs)(F.default.Content,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h4",{className:"text-foreground",children:"Enable your custom domain"}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Set up is almost complete. Press “Activate” below to enable"," ",(0,s.jsx)("code",{className:"text-code-inline",children:t.hostname})," for this project."]}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"We recommend that you schedule a downtime window of 20 - 30 minutes for your application, as you will need to update any services that need to know about your custom domain (e.g client side code or OAuth providers)."})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(U.Admonition,{type:"note",title:"Retain your CNAME record for service continuity after activation",children:(0,s.jsxs)("p",{children:["Your custom domain CNAME record for"," ",(0,s.jsx)("code",{className:"text-code-inline",children:t.hostname})," should resolve to"," ",g?(0,s.jsx)("code",{className:"text-code-inline",children:g}):"your project's API URL",". If you're using Cloudflare as your DNS provider, disable the proxy option."]})})})]}),(0,s.jsx)("div",{className:"w-full border-t border-muted"}),(0,s.jsx)(F.default.Content,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d.DocsButton,{href:`${v.DOCS_URL}/guides/platform/custom-domains`}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)($.Button,{type:"default",className:"self-end",onClick:b,loading:p,children:"Cancel"}),(0,s.jsx)($.Button,{disabled:p,onClick:()=>a(!0),className:"self-end",children:"Activate"})]})]})})]}),(0,s.jsx)(O.default,{size:"small",loading:l||j,visible:r,title:"Activate custom domain",confirmLabel:"Activate",confirmLabelLoading:"Activating",onCancel:()=>a(!1),onConfirm:y,children:(0,s.jsxs)("p",{className:"text-sm",children:["Activating ",(0,s.jsx)("code",{className:"text-code-inline !break-normal",children:t.hostname})," ","will make it visible to users in place of your project’s Supabase domain. The Supabase domain will continue to work too."]})})]})};var K=e.i(211570);let Y=({projectRef:e,customDomain:t})=>{let[r,a]=(0,n.useState)(!1),{mutate:i,isPending:c}=q({onSuccess:()=>{o.toast.success("Successfully deleted custom domain. Refresh your browser to see the changes."),a(!1)}}),l=async()=>{if(!e)return console.error("Project ref is required");i({projectRef:e})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.default.Content,{children:(0,s.jsxs)("div",{className:"w-full space-y-2",children:[(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"Active custom domain:"}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("code",{className:"text-lg mx-0 flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-brand"}),(0,s.jsx)("span",{children:(0,s.jsx)("code",{className:"text-code-inline",children:t.hostname})})]})}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Your custom domain is currently active and is serving traffic"})]})}),(0,s.jsx)("div",{className:"w-full border-t border-muted"}),(0,s.jsx)(F.default.Content,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d.DocsButton,{href:`${v.DOCS_URL}/guides/platform/custom-domains`}),(0,s.jsx)($.Button,{type:"danger",icon:(0,s.jsx)(K.Trash,{}),onClick:()=>a(!0),children:"Delete custom domain"})]})}),(0,s.jsx)(O.default,{visible:r,variant:"destructive",title:"Delete custom domain",confirmLabel:"Delete",confirmLabelLoading:"Deleting",loading:c,onCancel:()=>a(!1),onConfirm:l,children:(0,s.jsxs)("p",{className:"text-sm",children:["Are you sure you want to delete the custom domain"," ",(0,s.jsx)("code",{className:"text-code-inline !break-normal",children:t.hostname})," for your project? You will need to re-verify this domain if you want to use it again."]})})]})};var V=e.i(61187),H=e.i(242882);async function W({projectRef:e}){if(!e)throw Error("projectRef is required");let{data:s,error:t}=await (0,j.post)("/v1/projects/{ref}/custom-hostname/reverify",{params:{path:{ref:e}}});return t&&(0,j.handleError)(t),s}var X=e.i(206413),G=e.i(592360),J=e.i(178527),Z=e.i(877555),ee=e.i(171997);let es=({type:e,name:t,value:r})=>(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("div",{className:"w-[50px]",children:(0,s.jsx)("p",{className:"font-mono text-base",children:e.toUpperCase()})}),(0,s.jsx)(ee.Input,{readOnly:!0,copy:!0,disabled:!0,className:"input-mono flex-1",value:t,layout:"vertical"}),(0,s.jsx)(ee.Input,{readOnly:!0,copy:!0,disabled:!0,className:"input-mono flex-1",value:r,layout:"vertical"})]}),et=({display:e})=>""!==e?(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-[50px]",children:(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"Type"})}),(0,s.jsx)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4 input-mono flex-1",children:(0,s.jsx)("div",{className:"flex flex-row space-x-2 justify-between col-span-12",children:(0,s.jsx)("label",{className:"block text-foreground-light text-sm break-all",children:"Name"})})}),(0,s.jsx)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4 input-mono flex-1",children:(0,s.jsx)("div",{className:"flex flex-row space-x-2 justify-between col-span-12",children:(0,s.jsx)("label",{className:"block text-foreground-light text-sm break-all",children:"Content"})})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Loader2,{size:14,className:"animate-spin"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Validating custom domain and TLS configuration..."})]}),er=()=>{let{ref:e}=(0,c.useParams)(),{data:t}=(0,f.useProjectSettingsV2Query)({projectRef:e}),{data:r}=(0,k.useCustomDomainsQuery)({projectRef:e}),a=r?.customDomain,i=a?.ssl.status!==void 0&&void 0===a.ssl.txt_name,{mutate:l,isPending:m}=q({onSuccess:()=>{o.toast.success("Custom domain setup cancelled successfully. It may take a few seconds before your custom domain is fully removed, so you may need to refresh your browser.")}}),{data:j,refetch:x,isFetching:p,isError:g,error:y}=(({projectRef:e},{enabled:s=!0,...t}={})=>{let r=(0,h.useQueryClient)(),a=(0,H.useQuery)({queryKey:Q.customDomainKeys.reverify(e),queryFn:()=>W({projectRef:e}),enabled:s&&void 0!==e,...t});return(0,n.useEffect)(()=>{a.isSuccess&&r.invalidateQueries({queryKey:Q.customDomainKeys.list(e)})},[a.isSuccess,e,r]),a})({projectRef:e},{refetchInterval:!!i&&!m&&1e4});(0,n.useEffect)(()=>{g&&o.toast.error(y?.message)},[g,y]);let b=j?.status==="2_initiated",S=a?.ssl.validation_errors?.reduce((e,s)=>e||s.message.includes("caa_error"),!1),N=(a?.ssl.txt_name??"")==="",P=async()=>{if(!e)return console.error("Project ref is required");l({projectRef:e})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(F.default.Content,{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-foreground mb-2",children:["Configure TXT verification for your custom domain"," ",(0,s.jsx)("code",{className:"text-code-inline",children:a?.hostname})]}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Set the following TXT record(s) in your DNS provider, then click verify to confirm your control over the domain."}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Records which have been successfully verified will be removed from this list below."}),!N&&(0,s.jsx)("div",{className:"mt-4 mb-2",children:(0,s.jsxs)(U.Admonition,{type:"note",title:b?"Unable to verify records from DNS provider yet.":"Please note that it may take up to 24 hours for the DNS records to propagate.",children:[(0,s.jsxs)("p",{children:["You may also visit"," ",(0,s.jsx)(u.InlineLink,{href:`https://whatsmydns.net/#TXT/${a?.ssl.txt_name}`,children:"here"})," ","to check if your DNS has been propagated successfully before clicking verify."]}),b&&(0,s.jsxs)("p",{className:"mt-1",children:["Some registrars will require you to remove the domain name when creating DNS records. As an example, to create a record for"," ",(0,s.jsx)("code",{className:"text-code-inline",children:"foo.app.example.com"}),", you would need to create an entry for ",(0,s.jsx)("code",{className:"text-code-inline",children:"foo.app"}),"."]})]})})]}),S&&(0,s.jsxs)(J.Alert_Shadcn_,{children:[(0,s.jsx)(Z.WarningIcon,{}),(0,s.jsx)(G.AlertTitle_Shadcn_,{children:"Certificate Authority Authentication (CAA) error"}),(0,s.jsxs)(X.AlertDescription_Shadcn_,{children:['Please add a CAA record allowing "digicert.com" to issue certificates for'," ",(0,s.jsx)("code",{className:"text-code-inline",children:a?.hostname}),". For example:"," ",(0,s.jsx)("code",{className:"text-code-inline",children:'0 issue "digicert.com"'})]})]}),a?.ssl.status==="validation_timed_out"?(0,s.jsxs)(J.Alert_Shadcn_,{children:[(0,s.jsx)(Z.WarningIcon,{}),(0,s.jsx)(G.AlertTitle_Shadcn_,{children:"Validation timed out"}),(0,s.jsx)(X.AlertDescription_Shadcn_,{children:'Please click "Verify" again to retry the validation of the records'})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(et,{display:a?.ssl.txt_name??""}),a?.verification_errors?.includes("custom hostname does not CNAME to this zone.")&&(0,s.jsx)(es,{type:"CNAME",name:a?.hostname,value:t?.app_config?.endpoint??"Loading..."}),!N&&a?.ssl.status==="pending_validation"&&(0,s.jsx)(es,{type:"TXT",name:a?.ssl.txt_name??"Loading...",value:a?.ssl.txt_value??"Loading..."}),a?.ssl.status==="pending_deployment"&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-8",children:[(0,s.jsx)(C.AlertCircle,{size:16,strokeWidth:1.5}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"SSL certificate is being deployed. Please wait a few minutes and try again."})]})]})]}),(0,s.jsx)("div",{className:"border-t border-muted"}),(0,s.jsx)(F.default.Content,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d.DocsButton,{href:`${v.DOCS_URL}/guides/platform/custom-domains`}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)($.Button,{type:"default",onClick:P,loading:m,className:"self-end",children:"Cancel"}),(0,s.jsx)($.Button,{icon:(0,s.jsx)(V.RefreshCw,{}),onClick:()=>{if(!e)return console.error("Project ref is required");x()},loading:!N&&p,disabled:m||p||N,className:"self-end",children:"Verify"})]})]})})]})};var ea=e.i(532728),ei=e.i(408891),en=e.i(97429);async function eo({projectRef:e,customDomain:s}){let{data:t,error:r}=await (0,j.post)("/v1/projects/{ref}/custom-hostname/initialize",{params:{path:{ref:e}},body:{custom_hostname:s}});return r&&(0,j.handleError)(r),t}var ec=e.i(24315),el=e.i(61863),ed=e.i(846887),eu=e.i(428353),em=e.i(378277),eh=e.i(538482);let ej=en.z.object({domain:en.z.string().trim().min(1,"A value for your custom domain is required")}),ex=()=>{let{ref:e}=(0,c.useParams)(),{data:t}=(0,y.useSelectedProjectQuery)(),{mutate:r,isPending:i}=I(),{mutate:n,isPending:l}=(({onSuccess:e,onError:s,...t}={})=>{let r=(0,h.useQueryClient)();return(0,m.useMutation)({mutationFn:e=>eo(e),async onSuccess(s,t,a){let{projectRef:i}=t;await r.invalidateQueries({queryKey:Q.customDomainKeys.list(i)}),await e?.(s,t,a)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to create custom domain: ${e.message}`):s(e,t,r)},...t})})(),{data:u}=(0,f.useProjectSettingsV2Query)({projectRef:e}),j=u?.app_config?.endpoint,{can:x}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"projects",{resource:{project_id:t?.id}}),p=(0,ei.useForm)({resolver:(0,ea.zodResolver)(ej),defaultValues:{domain:""},mode:"onSubmit",reValidateMode:"onBlur"}),S=async s=>{if(!e)return console.error("Project ref is required");r({domain:s.domain.trim()},{onSuccess:()=>{n({projectRef:e,customDomain:s.domain.trim()})}})},N=p.watch("domain"),P=i||l;return(0,s.jsx)(eu.Form_Shadcn_,{...p,children:(0,s.jsxs)("form",{onSubmit:p.handleSubmit(S),children:[(0,s.jsxs)(b.Card,{children:[(0,s.jsxs)(b.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 gap-4",children:[(0,s.jsx)(b.CardTitle,{children:"Add a custom domain"}),(0,s.jsx)(d.DocsButton,{href:`${v.DOCS_URL}/guides/platform/custom-domains`})]}),(0,s.jsx)(b.CardContent,{children:(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(el.FormField_Shadcn_,{control:p.control,name:"domain",render:({field:e})=>(0,s.jsxs)(eh.FormItemLayout,{layout:"flex-row-reverse",label:"Custom domain",description:"Enter the subdomain you want to use.",className:"[&>div]:md:w-1/2",children:[(0,s.jsx)(ec.FormControl_Shadcn_,{children:(0,s.jsx)(em.Input_Shadcn_,{...e,placeholder:"subdomain.example.com",disabled:!x||P,autoComplete:"off"})}),(0,s.jsx)(ed.FormMessage_Shadcn_,{})]})})})}),(0,s.jsxs)(b.CardContent,{children:[(0,s.jsx)("h4",{className:"text-sm mb-1",children:"Configure a CNAME record"}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Set up a CNAME record for"," ",N?(0,s.jsx)("code",{className:"text-code-inline",children:N}):"your custom domain"," ","resolving to"," ",j?(0,s.jsx)("code",{className:"text-code-inline",children:j}):"your project's API URL"," ","with as low a TTL as possible. If you're using Cloudflare as your DNS provider, disable the proxy option."]})]}),(0,s.jsxs)(b.CardFooter,{className:"justify-end space-x-2",children:[p.formState.isDirty&&(0,s.jsx)($.Button,{type:"default",disabled:P,onClick:()=>p.reset({domain:""}),children:"Cancel"}),(0,s.jsx)($.Button,{type:"primary",htmlType:"submit",loading:P,disabled:!p.formState.isDirty||P||!x,children:"Add"})]})]}),!x&&(0,s.jsx)("p",{className:"text-xs text-foreground-light",children:"You need additional permissions to update your project's custom domain settings."})]})})},ep=()=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6 px-8 py-8",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,s.jsx)("div",{className:"h-6 w-1/3 bg-foreground-lighter rounded shimmering-loader"})}),(0,s.jsx)("div",{className:"col-span-12 lg:col-span-7",children:(0,s.jsx)("div",{className:"h-[38px] w-full bg-foreground-lighter rounded shimmering-loader"})})]}),ef=()=>{let{ref:e}=(0,c.useParams)(),{data:t}=(0,E.useSelectedOrganizationQuery)(),r=(0,_.useFlag)("customDomainsDisabledDueToQuota"),i=t?.plan?.id,{data:n,isPending:o}=(0,D.useProjectAddonsQuery)({projectRef:e}),l=!!n?.selected_addons.find(e=>"custom_domain"===e.type),{data:d,isPending:m,isError:h,isSuccess:j,status:x}=(0,k.useCustomDomainsQuery)({projectRef:e},{refetchInterval:e=>{let s=e.state.data;return!!s?.customDomain?.ssl.status&&1e4}}),{status:p}=d||{};return(0,s.jsxs)(P.PageSection,{id:"custom-domains",children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsxs)(P.PageSectionSummary,{children:[(0,s.jsx)(P.PageSectionTitle,{children:"Custom Domains"}),(0,s.jsx)(P.PageSectionDescription,{children:"Present a branded experience to your users."})]})}),(0,s.jsx)(P.PageSectionContent,{children:o?(0,s.jsx)(b.Card,{children:(0,s.jsx)(b.CardContent,{className:"space-y-6",children:(0,s.jsx)(ep,{})})}):l?m?(0,s.jsx)(b.Card,{children:(0,s.jsx)(b.CardContent,{className:"space-y-6",children:(0,s.jsx)(ep,{})})}):h?(0,s.jsx)(b.Card,{children:(0,s.jsx)(b.CardContent,{className:"space-y-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-8",children:[(0,s.jsx)(C.AlertCircle,{size:16,strokeWidth:1.5}),(0,s.jsxs)("p",{className:"text-sm text-foreground-light",children:["Failed to retrieve custom domain configuration. Please try again later or"," ",(0,s.jsx)(A.SupportLink,{queryParams:{projectRef:e,category:a.SupportCategories.SALES_ENQUIRY},className:u.InlineLinkClassName,children:"contact support"}),"."]})]})})}):"0_no_hostname_configured"===p?(0,s.jsx)(ex,{}):(0,s.jsx)(b.Card,{children:(0,s.jsx)(b.CardContent,{className:"p-0",children:j?(0,s.jsxs)("div",{className:"flex flex-col",children:[("1_not_started"===p||"2_initiated"===p||"3_challenge_verified"===p)&&(0,s.jsx)(er,{}),"4_origin_setup_completed"===d.status&&(0,s.jsx)(B,{projectRef:e,customDomain:d.customDomain}),"5_services_reconfigured"===d.status&&(0,s.jsx)(Y,{projectRef:e,customDomain:d.customDomain})]}):(0,s.jsx)(eg,{fetchStatus:x,data:d})})}):(0,s.jsx)(T.UpgradeToPro,{primaryText:r?"New custom domains are temporarily disabled":"Custom domains are a Pro Plan add-on",secondaryText:r?"We are working with our upstream DNS provider before we are able to sign up new custom domains. Please check back in a few hours.":"free"===i?"Paid Plans come with free vanity subdomains or Custom Domains for an additional $10/month per domain.":"To configure a custom domain for your project, please enable the add-on. Each Custom Domain costs $10 per month.",addon:"customDomain",source:"customDomain",featureProposition:"enable custom domains",disabled:r})})]})};function eg({fetchStatus:e,data:s}){return console.error(`Failing to display UI for custom domains:
Fetch status: ${e}
Custom domain status: ${s?.status}`),null}var ey=e.i(215312),ev=e.i(152622);let eb=({type:e="danger"})=>{let{data:t}=(0,y.useSelectedProjectQuery)(),[r,i]=(0,n.useState)(!1),{can:o}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"projects",{resource:{project_id:t?.id}});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.ButtonTooltip,{type:e,disabled:!o,onClick:()=>i(!0),tooltip:{content:{side:"bottom",text:o?void 0:"You need additional permissions to delete this project"}},children:"Delete project"}),(0,s.jsx)(ev.DeleteProjectModal,{visible:r,onClose:()=>i(!1)})]})},eS=()=>{let{data:e}=(0,y.useSelectedProjectQuery)(),{data:t}=(0,E.useSelectedOrganizationQuery)();if(void 0===e)return null;let r=t?.managed_by==="vercel-marketplace"?"Deleting this project will also remove your database and uninstall the resource on Vercel.":"Deleting this project will also remove your database.",a=t?.managed_by==="vercel-marketplace"?"Make sure you have made a backup if you want to keep your data, and that no Vercel project is connected to this resource.":"Make sure you have made a backup if you want to keep your data.";return(0,s.jsxs)(P.PageSection,{id:"delete-project",children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsxs)(P.PageSectionSummary,{children:[(0,s.jsx)(P.PageSectionTitle,{children:"Delete Project"}),(0,s.jsx)(P.PageSectionDescription,{children:"Permanently remove your project and its database."})]})}),(0,s.jsx)(P.PageSectionContent,{children:(0,s.jsxs)(J.Alert_Shadcn_,{variant:"destructive",children:[(0,s.jsx)(Z.CriticalIcon,{}),(0,s.jsx)(G.AlertTitle_Shadcn_,{children:r}),(0,s.jsx)(X.AlertDescription_Shadcn_,{children:a}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(eb,{})})]})})]})};var eN=e.i(536068),eP=e.i(210419),ew=e.i(531837),eC=e.i(47302),e_=e.i(722740);async function eA({ref:e,name:s}){let{data:t,error:r}=await (0,j.patch)("/platform/projects/{ref}",{params:{path:{ref:e}},body:{name:s}});return r&&(0,j.handleError)(r),t}var eT=e.i(912793),ek=e.i(746301),eD=e.i(108151),eE=e.i(899929),eF=e.i(271226),eR=e.i(509926),eI=e.i(164045);async function eQ({ref:e}){let{data:s,error:t}=await (0,j.post)("/platform/projects/{ref}/pause",{params:{path:{ref:e}}});return t&&(0,j.handleError)(t),s}var ez=e.i(837508);let eM=()=>{let e=(0,eF.useRouter)(),{data:t}=(0,y.useSelectedProjectQuery)(),{data:r}=(0,E.useSelectedOrganizationQuery)(),{setProjectStatus:i}=(0,eI.useSetProjectStatus)(),c=(0,eR.useIsProjectActive)(),[l,d]=(0,n.useState)(!1),u=t?.ref??"",h=t?.status===ez.PROJECT_STATUS.INACTIVE,{can:j}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.INFRA_EXECUTE,"queue_jobs.projects.pause"),x=(0,y.useIsAwsK8sCloudProvider)(),p=r?.plan.id==="free",f=!t?.parent_project_ref&&!p&&!x,{mutate:v,isPending:b}=(({onSuccess:e,onError:s,...t}={})=>(0,m.useMutation)({mutationFn:e=>eQ(e),async onSuccess(s,t,r){await e?.(s,t,r)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to pause project: ${e.message}`):s(e,t,r)},...t}))({onSuccess:(s,t)=>{i({ref:t.ref,status:ez.PROJECT_STATUS.PAUSING}),o.toast.success("Pausing project..."),e.push(`/project/${u}`)}}),S=f||void 0===t||h||!j||!c;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.ButtonTooltip,{type:"default",icon:(0,s.jsx)(eE.Pause,{}),onClick:()=>d(!0),loading:b,disabled:S,tooltip:{content:{side:"bottom",text:h?"Your project is already paused":j?c?f?"Projects on a paid plan will always be running":void 0:"Unable to pause project as project is not active":"You need additional permissions to pause this project"}},children:"Pause project"}),(0,s.jsx)(O.default,{variant:"destructive",visible:l,loading:b,title:"Pause this project?",confirmLabel:"Pause project",confirmLabelLoading:"Pausing project",onCancel:()=>d(!1),onConfirm:()=>{if(!j)return o.toast.error("You do not have the required permissions to pause this project");v({ref:u})},children:(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"Are you sure you want to pause this project? It will not be accessible until you unpause it."})})]})};var eL=e.i(88816),eq=e.i(351895);async function e$({ref:e,region:s,services:t=["postgresql"],source_notification_id:r}){let{data:a,error:i}=await (0,j.post)("/platform/projects/{ref}/restart-services",{params:{path:{ref:e}},body:{restartRequest:{region:s,services:t,source_notification_id:r}}});return i&&(0,j.handleError)(i),a}var eO=e.i(874311),eU=e.i(843778);let eB=()=>{let e=(0,eF.useRouter)(),{data:t}=(0,y.useSelectedProjectQuery)(),r=(0,eR.useIsProjectActive)(),i=(0,y.useIsAwsK8sCloudProvider)(),{setProjectStatus:c}=(0,eI.useSetProjectStatus)(),[l,d]=(0,n.useState)(),{projectSettingsRestartProject:u}=(0,eT.useIsFeatureEnabled)(["project_settings:restart_project"]),h=t?.ref??"",j=t?.region??"",x=(0,_.useFlag)("disableProjectRestarts"),{can:p}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.INFRA_EXECUTE,"reboot"),{mutate:f,isPending:v}=(0,eq.useProjectRestartMutation)({onSuccess:()=>{C()},onError:e=>{w(e,"project")}}),{mutate:b,isPending:S}=(({onSuccess:e,onError:s,...t}={})=>(0,m.useMutation)({mutationFn:e=>e$(e),async onSuccess(s,t,r){await e?.(s,t,r)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to restart project: ${e.message}`):s(e,t,r)},...t}))({onSuccess:()=>{C()},onError:e=>{w(e,"database")}}),N=v||S,P=async()=>{if(!p)return o.toast.error("You do not have the required permissions to restart this project");b({ref:h,region:j,services:["postgresql"]})},w=(e,s)=>{o.toast.error(`Unable to restart ${s}: ${e.message}`),d(void 0)},C=()=>{c({ref:h,status:ez.PROJECT_STATUS.RESTARTING}),o.toast.success("Restarting server..."),e.push(`/project/${h}`),d(void 0)};return(0,s.jsxs)(s.Fragment,{children:[u?(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(ey.ButtonTooltip,{type:"default",className:(0,eU.cn)("px-3 hover:z-10",p&&r?"rounded-r-none":""),disabled:void 0===t||!p||!r||x||i,onClick:()=>d("project"),tooltip:{content:{side:"bottom",text:x?"Project restart is currently disabled":p?r?i?"Project restart is not supported for AWS (Revamped) projects":void 0:"Unable to restart project as project is not active":"You need additional permissions to restart this project"}},children:"Restart project"}),p&&r&&!x&&(0,s.jsxs)(eO.DropdownMenu,{children:[(0,s.jsx)(eO.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)($.Button,{type:"default",className:"rounded-l-none px-[4px] py-[5px] -ml-[1px]",icon:(0,s.jsx)(eL.ChevronDown,{}),disabled:!p})}),(0,s.jsx)(eO.DropdownMenuContent,{align:"end",side:"bottom",children:(0,s.jsx)(eO.DropdownMenuItem,{disabled:N,onClick:()=>{d("database")},children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"block text-foreground",children:"Fast database reboot"}),(0,s.jsx)("p",{className:"block text-foreground-light",children:"Restarts only the database - faster but may not be able to recover from all failure modes"})]})},"database")})]})]}):(0,s.jsx)($.Button,{type:"default",disabled:N,onClick:()=>{d("database")},children:"Restart database"}),(0,s.jsx)(O.default,{visible:void 0!==l,variant:"destructive",title:`Restart ${l}`,description:(0,s.jsxs)(s.Fragment,{children:["Are you sure you want to restart your ",l,"? There will be a few minutes of downtime."]}),confirmLabel:"Restart",confirmLabelLoading:"Restarting",loading:N,onCancel:()=>d(void 0),onConfirm:async()=>{"project"===l?await (()=>{if(!p)return o.toast.error("You do not have the required permissions to restart this project");f({ref:h})})():"database"===l&&await P()}})]})},eK=()=>{let{data:e}=(0,y.useSelectedProjectQuery)(),{data:t}=(0,E.useSelectedOrganizationQuery)(),r=!!e?.parent_project_ref,{projectSettingsRestartProject:i}=(0,eT.useIsFeatureEnabled)(["project_settings:restart_project"]),{can:n}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"projects",{resource:{project_id:e?.id}}),{mutate:c,isPending:l}=(({onSuccess:e,onError:s,...t}={})=>{let r=(0,h.useQueryClient)(),{invalidateProjectsQuery:a}=(0,e_.useInvalidateProjectsInfiniteQuery)();return(0,m.useMutation)({mutationFn:e=>eA(e),async onSuccess(s,t,i){let{ref:n}=t;await Promise.all([a(),r.invalidateQueries({queryKey:eC.projectKeys.detail(n)})]),await e?.(s,t,i)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to update project: ${e.message}`):s(e,t,r)},...t})})(),d=ew.object({name:ew.string().trim().min(3,"Project name must be at least 3 characters long")}),u={name:e?.name??""},j=(0,ei.useForm)({resolver:(0,ea.zodResolver)(d),defaultValues:u,values:u,mode:"onSubmit",reValidateMode:"onBlur"}),x=async s=>{if(!e?.ref)return console.error("Ref is required");c({ref:e.ref,name:s.name.trim()},{onSuccess:({name:e})=>{j.reset({name:e}),o.toast.success("Successfully saved settings")}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(P.PageSection,{children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsx)(P.PageSectionSummary,{children:(0,s.jsx)(P.PageSectionTitle,{children:"General settings"})})}),(0,s.jsxs)(P.PageSectionContent,{children:[r&&(0,s.jsxs)(J.Alert_Shadcn_,{variant:"default",children:[(0,s.jsx)(Z.WarningIcon,{}),(0,s.jsx)(G.AlertTitle_Shadcn_,{children:"You are currently on a preview branch of your project"}),(0,s.jsxs)(X.AlertDescription_Shadcn_,{children:["Certain settings are not available while you're on a preview branch. To adjust your project settings, you may return to your"," ",(0,s.jsx)(eP.default,{href:`/project/${e?.parent_project_ref}/settings/general`,className:"text-brand",children:"main branch"}),"."]})]}),void 0===e?(0,s.jsx)(eD.GenericSkeletonLoader,{}):(0,s.jsx)(eu.Form_Shadcn_,{...j,children:(0,s.jsx)("form",{onSubmit:j.handleSubmit(x),children:(0,s.jsxs)(b.Card,{children:[(0,s.jsx)(b.CardContent,{children:(0,s.jsx)(el.FormField_Shadcn_,{control:j.control,name:"name",render:({field:e})=>(0,s.jsxs)(eh.FormItemLayout,{layout:"flex-row-reverse",label:"Project name",description:"Displayed throughout the dashboard.",className:"[&>div]:md:w-1/2",children:[(0,s.jsx)(ec.FormControl_Shadcn_,{children:(0,s.jsx)(em.Input_Shadcn_,{...e,disabled:r||!n,autoComplete:"off"})}),(0,s.jsx)(ed.FormMessage_Shadcn_,{})]})})}),(0,s.jsx)(b.CardContent,{children:(0,s.jsx)(eh.FormItemLayout,{layout:"flex-row-reverse",label:"Project ID",description:"Reference used in APIs and URLs.",className:"[&>div]:md:w-1/2 [&>div>div]:md:w-full",children:(0,s.jsx)(ec.FormControl_Shadcn_,{children:(0,s.jsx)(ek.Input,{copy:!0,readOnly:!0,size:"small",value:e?.ref??""})})})}),(0,s.jsxs)(b.CardFooter,{className:"justify-end space-x-2",children:[j.formState.isDirty&&(0,s.jsx)($.Button,{type:"default",htmlType:"button",disabled:l,onClick:()=>j.reset({name:e?.name??""}),children:"Cancel"}),(0,s.jsx)($.Button,{type:"primary",htmlType:"submit",disabled:!j.formState.isDirty||l||!n||r,loading:l,children:"Save changes"})]})]})})})]})]}),(0,s.jsxs)(P.PageSection,{id:"restart-project",children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsxs)(P.PageSectionSummary,{children:[(0,s.jsx)(P.PageSectionTitle,{children:"Project availability"}),(0,s.jsx)(P.PageSectionDescription,{children:"Restart or pause your project when performing maintenance."})]})}),(0,s.jsx)(P.PageSectionContent,{children:(0,s.jsxs)(b.Card,{children:[(0,s.jsx)(b.CardContent,{children:(0,s.jsxs)("div",{className:"flex flex-col @lg:flex-row @lg:justify-between @lg:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm",children:i?"Restart project":"Restart database"}),(0,s.jsx)("div",{className:"max-w-[420px]",children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project will not be available for a few minutes."})})]}),(0,s.jsx)(eB,{})]})}),(0,s.jsx)(b.CardContent,{children:(0,s.jsxs)("div",{className:"flex w-full flex-col @lg:flex-row @lg:justify-between @lg:items-center gap-4",id:"pause-project",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm",children:"Pause project"}),(0,s.jsx)("div",{className:"max-w-[420px]",children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project will not be accessible while it is paused."})})]}),(0,s.jsx)(eM,{})]})})]})})]}),!r&&(0,s.jsxs)(P.PageSection,{children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsxs)(P.PageSectionSummary,{children:[(0,s.jsx)(P.PageSectionTitle,{children:"Project usage"}),(0,s.jsx)(P.PageSectionDescription,{children:"Usage statistics now live under your organization settings."})]})}),(0,s.jsx)(P.PageSectionContent,{children:(0,s.jsx)(b.Card,{children:(0,s.jsx)(b.CardContent,{children:(0,s.jsxs)("div",{className:"flex flex-col @lg:flex-row @lg:justify-between @lg:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(eN.BarChart2,{strokeWidth:2}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm",children:"Project usage statistics have been moved"}),(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:"You may view your project's usage under your organization's settings"})]})]}),!!t&&!!e&&(0,s.jsx)($.Button,{asChild:!0,type:"default",children:(0,s.jsx)(eP.default,{href:`/org/${t.slug}/usage?projectRef=${e.ref}`,children:"View project usage"})})]})})})})]})]})},eY=(0,e.i(388019).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var eV=e.i(585915),eH=e.i(857889),eW=e.i(753521),eX=e.i(953197),eG=e.i(811025);async function eJ({projectRef:e,targetOrganizationSlug:s}){if(!e)throw Error("projectRef is required");if(!s)throw Error("targetOrganizationSlug is required");let{data:t,error:r}=await (0,j.post)("/platform/projects/{ref}/transfer",{params:{path:{ref:e}},body:{target_organization_slug:s}});return r&&(0,j.handleError)(r),t}async function eZ({projectRef:e,targetOrganizationSlug:s},t){if(!e)throw Error("projectRef is required");if(!s)throw Error("targetOrganizationSlug is required");let{data:r,error:a}=await (0,j.post)("/platform/projects/{ref}/transfer/preview",{params:{path:{ref:e}},body:{target_organization_slug:s},signal:t});return a&&(0,j.handleError)(a),r}var e0=e.i(331077),e1=e.i(787902),e2=e.i(40892);let e4=()=>{let{data:e}=(0,y.useSelectedProjectQuery)(),t=e?.ref,r=e?.organization_id,[i,c]=(0,n.useState)(!1),{data:l}=(0,eG.useOrganizationsQuery)({enabled:i}),u=(0,_.useFlag)("disableProjectTransfer"),j=(l||[]).filter(e=>e.id!==r),[x,p]=(0,n.useState)(),{mutate:f,error:b,isPending:S}=(({onSuccess:e,onError:s,...t}={})=>{let r=(0,h.useQueryClient)(),{invalidateProjectsQuery:a}=(0,e_.useInvalidateProjectsInfiniteQuery)();return(0,m.useMutation)({mutationFn:e=>eJ(e),async onSuccess(s,t,i){let{projectRef:n,targetOrganizationSlug:o}=t;await Promise.all([r.invalidateQueries({queryKey:eC.projectKeys.projectTransferPreview(n,o)}),r.invalidateQueries({queryKey:eC.projectKeys.detail(n)}),a()]),await e?.(s,t,i)},async onError(e,t,r){void 0===s?o.toast.error(`Failed to transfer project: ${e.message}`):s(e,t,r)},...t})})({onSuccess:()=>{o.toast.success(`Successfully transferred project ${e?.name}.`),c(!1)}}),{data:N,error:P,isPending:w}=(({projectRef:e,targetOrganizationSlug:s},{enabled:t=!0,...r}={})=>(0,H.useQuery)({queryKey:eC.projectKeys.projectTransferPreview(e,s),queryFn:({signal:t})=>eZ({projectRef:e,targetOrganizationSlug:s},t),enabled:t&&void 0!==e&&void 0!==s,...r}))({projectRef:t,targetOrganizationSlug:x},{enabled:!S&&i}),C=(0,h.useQueryClient)();(0,n.useEffect)(()=>{i?p(void 0):C.removeQueries({queryKey:eC.projectKeys.projectTransferPreview(t,x)})},[i]);let{can:A}=(0,g.useAsyncCheckPermissions)(a.PermissionAction.UPDATE,"organizations"),T=()=>{c(!i)};async function k(){void 0===e||void 0!==x&&f({projectRef:t,targetOrganizationSlug:x})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.ButtonTooltip,{type:"default",onClick:T,disabled:!A||u,tooltip:{content:{side:"bottom",text:A?u?"Project transfers are temporarily disabled, please try again later.":void 0:"You need additional permissions to transfer this project"}},children:"Transfer project"}),(0,s.jsxs)(e2.Modal,{onCancel:()=>T(),visible:i,loading:S,size:"xlarge",header:`Transfer project ${e?.name}`,customFooter:(0,s.jsxs)("div",{className:"flex items-center space-x-2 justify-end",children:[(0,s.jsx)($.Button,{type:"default",onClick:()=>c(!1),children:"Cancel"}),(0,s.jsx)($.Button,{onClick:()=>k(),disabled:!N||!N.valid||S||!x,children:"Transfer Project"})]}),children:[(0,s.jsxs)(e2.Modal.Content,{className:"text-foreground-light",children:[(0,s.jsx)("p",{className:"text-sm",children:"To transfer projects, the owner must be a member of both the source and target organizations. Consider the following before transferring your project:"}),(0,s.jsxs)("ul",{className:"mt-4 space-y-5 text-sm",children:[(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(eV.Loader,{})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Possible downtime"}),(0,s.jsx)("p",{children:"There might be a short downtime when transferring projects from a paid to a free organization."})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(eH.Shield,{})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Permissions"}),(0,s.jsx)("p",{children:"Depending on your role in the target organization, your level of permissions may change after transfer."})]})]}),(0,s.jsxs)("li",{className:"flex gap-4",children:[(0,s.jsx)("span",{className:"shrink-0 mt-1",children:(0,s.jsx)(eX.Wrench,{size:24,className:"flex-shrink-0"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:"Features"}),(0,s.jsx)("p",{children:"Moving your project to an organization with a smaller subscription plan may result in the loss of certain features (i.e. image transformations)."})]})]})]}),(0,s.jsx)(d.DocsButton,{abbrev:!1,className:"mt-6",href:`${v.DOCS_URL}/guides/platform/project-transfer`})]}),(0,s.jsx)(e2.Modal.Separator,{}),(0,s.jsx)(e2.Modal.Content,{children:j&&(0,s.jsx)("div",{className:"space-y-2",children:0===j.length?(0,s.jsxs)("div",{className:"flex items-center gap-3 bg-surface-200 p-3 text-sm rounded-md border",children:[(0,s.jsx)(Z.InfoIcon,{})," You do not have any organizations you can transfer your project to."]}):(0,s.jsxs)(e0.Listbox,{label:"Select Target Organization",layout:"vertical",value:x,onChange:e=>p(e),placeholder:"Select Organization",children:[(0,s.jsx)(e0.Listbox.Option,{disabled:!0,label:"Select Organization",value:"",children:"Select Organization"},"no-results"),j.map(e=>(0,s.jsx)(e0.Listbox.Option,{label:e.name,value:e.slug,addOnBefore:()=>(0,s.jsx)(eW.Users,{}),children:e.name},e.id))]})})}),void 0!==x&&(0,s.jsx)(e1.Loading,{active:void 0!==x&&w,children:(0,s.jsx)(e2.Modal.Content,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[N&&N.errors.length>0&&(0,s.jsxs)(U.Admonition,{type:"danger",title:"Project cannot be transferred",children:[(0,s.jsx)("div",{className:"space-y-1",children:N.errors.map(e=>(0,s.jsx)("p",{children:e.message},e.key))}),N.members_exceeding_free_project_limit.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"These members have reached their maximum limits for the number of active Free plan projects within organizations where they are an administrator or owner:"}),(0,s.jsx)("ul",{className:"pl-5 text-sm list-disc text-foreground-light",children:(N.members_exceeding_free_project_limit||[]).map((e,t)=>(0,s.jsxs)("li",{children:[e.name," (Limit: ",e.limit," free projects)"]},`member-${t}`))}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of their projects before you can transfer this project."})]})]}),N&&(N.warnings.length>0||N.info.length>0)&&(0,s.jsx)(U.Admonition,{type:"caution",showIcon:!1,className:"mt-3",children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-2",children:[N.warnings.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.WarningIcon,{className:"flex-shrink-0"}),(0,s.jsx)("p",{className:"mb-0.5",children:e.message})]},e.key)),N.info.map(e=>(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)(Z.InfoIcon,{className:"flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"mb-0.5",children:e.message})]},e.key))]})}),P&&!b&&(0,s.jsx)(U.Admonition,{type:"danger",title:"Project cannot be transferred",description:P.message}),b&&(0,s.jsx)(U.Admonition,{type:"danger",title:"Project cannot be transferred",description:b.message})]})})})]})]})},e8=()=>{let{data:e}=(0,y.useSelectedProjectQuery)();return void 0===e?null:(0,s.jsxs)(P.PageSection,{id:"transfer-project",children:[(0,s.jsx)(P.PageSectionMeta,{children:(0,s.jsxs)(P.PageSectionSummary,{children:[(0,s.jsx)(P.PageSectionTitle,{children:"Transfer Project"}),(0,s.jsx)(P.PageSectionDescription,{children:"Transfer your project to a different organization."})]})}),(0,s.jsx)(P.PageSectionContent,{children:(0,s.jsx)(b.Card,{children:(0,s.jsx)(b.CardContent,{children:(0,s.jsxs)("div",{className:"flex flex-col @lg:flex-row @lg:justify-between @lg:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(eY,{className:"mt-1"}),(0,s.jsxs)("div",{className:"space-y-1 xl:max-w-lg",children:[(0,s.jsx)("p",{className:"text-sm",children:"Transfer project to another organization"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"To transfer projects, the owner must be a member of both the source and target organizations."})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)(e4,{})})]})})})})]})};var e5=e.i(448710),e3=e.i(865389),e7=e.i(540203),e6=e.i(127739),e9=e.i(456050);let se=()=>{let{data:e}=(0,y.useSelectedProjectQuery)(),{data:a}=(0,E.useSelectedOrganizationQuery)(),i=!!e?.parent_project_ref,{projectsTransfer:o,projectSettingsCustomDomains:c}=(0,eT.useIsFeatureEnabled)(["projects:transfer","project_settings:custom_domains"]),l=(0,eF.useRouter)();(0,n.useEffect)(()=>{t.IS_PLATFORM||l.push("/project/default/settings/log-drains")},[l]);let{data:d}=(0,e7.useOrgSubscriptionQuery)({orgSlug:a?.slug}),u=(0,r.subscriptionHasHipaaAddon)(d);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e9.PageHeader,{size:"small",children:(0,s.jsx)(e9.PageHeaderMeta,{children:(0,s.jsxs)(e9.PageHeaderSummary,{children:[(0,s.jsx)(e9.PageHeaderTitle,{children:"Project Settings"}),(0,s.jsx)(e9.PageHeaderDescription,{children:"Configure general options, domains, transfers, and project lifecycle."})]})})}),(0,s.jsxs)(e6.PageContainer,{size:"small",children:[(0,s.jsx)(eK,{}),!i&&u&&(0,s.jsx)(w,{}),c&&(0,s.jsx)(ef,{}),!i&&o&&(0,s.jsx)(e8,{}),!i&&(0,s.jsx)(eS,{})]})]})};se.getLayout=e=>(0,s.jsx)(e5.default,{children:(0,s.jsx)(e3.default,{title:"General",children:e})}),e.s(["default",0,se],430854)},971212,(e,s,t)=>{let r="/project/[ref]/settings/general";(window.__NEXT_P=window.__NEXT_P||[]).push([r,()=>e.r(430854)]),s.hot&&s.hot.dispose(function(){window.__NEXT_P.push([r])})}]);

//# debugId=4c6d6606-4e02-c996-007f-44b273ce45e2
//# sourceMappingURL=6fd7fea9c32695be.js.map