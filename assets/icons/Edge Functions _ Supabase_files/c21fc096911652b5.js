;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="55032391-f889-67da-e64e-8e7627a01228")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,454931,e=>{"use strict";let t=(0,e.i(388019).default)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);e.s(["Terminal",()=>t],454931)},354354,e=>{"use strict";let t=(0,e.i(388019).default)("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);e.s(["DatabaseZap",()=>t],354354)},356331,199168,e=>{"use strict";let t=(0,e.i(388019).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],356331);var s=e.i(478902),a=e.i(902858),i=e.i(613851),r=e.i(210419);e.i(128328);var n=e.i(158639),o=e.i(215312),l=e.i(2579),c=e.i(876298),d=e.i(837710);e.s(["BranchingPITRNotice",0,()=>{let{ref:e}=(0,n.useParams)(),t=(0,c.useAppStateSnapshot)(),{can:u}=(0,l.useAsyncCheckPermissions)(a.PermissionAction.BILLING_WRITE,"stripe.subscriptions");return(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("figure",{className:"w-10 h-10 rounded-md border flex items-center justify-center",children:(0,s.jsx)(i.Clock,{className:"text-warning-700",size:20,strokeWidth:2})})}),(0,s.jsxs)("div",{className:"flex grow items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsx)("p",{className:"text-sm text-foreground",children:"Consider enabling Point in Time Recovery (PITR)"}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:"This ensures you can recover production data if you merge a bad migration (e.g. delete a column)."})]}),u?(0,s.jsx)(d.Button,{size:"tiny",type:"default",asChild:!0,children:(0,s.jsx)(r.default,{href:`/project/${e}/settings/addons?panel=pitr`,onClick:()=>t.setShowCreateBranchModal(!1),children:"Enable PITR"})}):(0,s.jsx)(o.ButtonTooltip,{disabled:!0,size:"tiny",type:"default",tooltip:{content:{side:"bottom",text:"You need additional permissions to amend subscriptions"}},children:"Enable PITR add-on"})]})]})}],199168)},605317,218115,e=>{"use strict";var t=e.i(242882),s=e.i(55956),a=e.i(389959),i=e.i(234745),r=e.i(38429),n=e.i(356003),o=e.i(355901),l=e.i(78162);async function c(e){if(!e.ref)throw Error("ref is required");let t="gp3"===e.storageType?{iops:e.provisionedIOPS,throughput_mbps:e.throughput,size_gb:e.totalSize,type:e.storageType}:{iops:e.provisionedIOPS,size_gb:e.totalSize,type:e.storageType},{data:s,error:a}=await (0,i.post)("/platform/projects/{ref}/disk",{params:{path:{ref:e.ref}},body:{attributes:t}});return a&&(0,i.handleError)(a),s}async function d({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:s,error:a}=await (0,i.get)("/platform/projects/{ref}/disk",{params:{path:{ref:e}},signal:t});return a&&(0,i.handleError)(a),s}e.s(["COOLDOWN_DURATION",0,21600,"useUpdateDiskAttributesMutation",0,({onSuccess:e,onError:t,...s}={})=>{let a=(0,n.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>c(e),async onSuccess(t,s,i){let{ref:r}=s;await a.invalidateQueries({queryKey:l.configKeys.diskAttributes(r)}),await e?.(t,s,i)},async onError(e,s,a){void 0===t?o.toast.error(`Failed to update disk attributes: ${e.message}`):t(e,s,a)},...s})}],218115);let u=({projectRef:e},{enabled:s=!0,...a}={})=>(0,t.useQuery)({queryKey:l.configKeys.diskAttributes(e),queryFn:({signal:t})=>d({projectRef:e},t),enabled:s&&void 0!==e,...a});e.s(["useDiskAttributesQuery",0,u,"useRemainingDurationForDiskAttributeUpdate",0,({projectRef:e,enabled:t=!0})=>{let{data:i,isPending:r,isError:n,isSuccess:o,error:l}=u({projectRef:e},{enabled:t}),c=(0,s.default)(i?.last_modified_at??"").utc(),d=Math.max(0,(0,s.default)().utc().diff((0,s.default)(c).utc(),"second")),p=(0,a.useMemo)(()=>void 0===c||21600-d<0?0:21600-d,[c,d]);return i?.last_modified_at===void 0?{remainingDuration:0,isWithinCooldownWindow:!1,isLoading:r,isError:n,error:l,isSuccess:o}:{remainingDuration:p,isWithinCooldownWindow:p>0,isLoading:r,isError:n,error:l,isSuccess:o}}],605317)},819591,e=>{"use strict";var t,s=((t={}).GP3="gp3",t.IO2="io2",t);e.s(["AUTOSCALING_THRESHOLD",0,.9,"DISK_AUTOSCALE_CONFIG_DEFAULTS",0,{growthPercent:50,minIncrementSize:4,maxSizeGb:6e4},"DISK_LIMITS",0,{gp3:{minStorage:1,maxStorage:16384,minIops:3e3,maxIops:16e3,minThroughput:125,maxThroughput:1e3,includedIops:3e3,includedThroughput:125},io2:{minStorage:4,maxStorage:61440,minIops:1500,maxIops:256e3,includedIops:0,includedThroughput:0}},"DISK_PRICING",0,{gp3:{storage:.125,iops:.024,throughput:.095},io2:{storage:.195,iops:.119}},"DISK_TYPE_OPTIONS",0,[{type:"gp3",name:"General Purpose SSD",description:"Balance between price and performance"},{type:"io2",name:"High Performance SSD",description:"High performance for mission critical applications"}],"DiskType",()=>s,"PLAN_DETAILS",0,{free:{includedDiskGB:{gp3:1,io2:0}},pro:{includedDiskGB:{gp3:8,io2:0}},team:{includedDiskGB:{gp3:8,io2:0}},enterprise:{includedDiskGB:{gp3:8,io2:0}},platform:{includedDiskGB:{gp3:8,io2:0}}},"RESTRICTED_COMPUTE_FOR_IOPS_ON_GP3",0,["ci_nano","ci_micro","ci_small","ci_medium"],"RESTRICTED_COMPUTE_FOR_THROUGHPUT_ON_GP3",0,["ci_nano","ci_micro","ci_small","ci_medium"]])},470834,e=>{"use strict";var t=e.i(478902),s=e.i(532728),a=e.i(902858),i=e.i(356003),r=e.i(370410),n=e.i(354354),o=e.i(356331),l=e.i(387911),c=e.i(398696),d=e.i(774803),u=e.i(994110),p=e.i(210419),h=e.i(271226),m=e.i(389959),g=e.i(408891),x=e.i(355901),f=e.i(531837),j=e.i(202584);e.i(128328);var y=e.i(657588),b=e.i(158639),v=e.i(463333),S=e.i(199168),N=e.i(567558),w=e.i(215312),E=e.i(937942),C=e.i(235458),_=e.i(677436),k=e.i(109),T=e.i(605317),P=e.i(362784),R=e.i(148210),A=e.i(47302),I=e.i(295057),O=e.i(144676),D=e.i(162082),U=e.i(280590),L=e.i(2579),$=e.i(265735),z=e.i(635494),F=e.i(10429),M=e.i(876298),B=e.i(587433),G=e.i(837710),q=e.i(253214),H=e.i(24315),Q=e.i(61863),W=e.i(428353),K=e.i(378277),Y=e.i(9679),V=e.i(290811),J=e.i(613580),X=e.i(843778),Z=e.i(538482),ee=e.i(108151),et=e.i(819591);let es=new Map([[10,I.instanceSizeSpecs.micro],[50,I.instanceSizeSpecs.small],[100,I.instanceSizeSpecs.medium],[200,I.instanceSizeSpecs.large],[500,I.instanceSizeSpecs.xlarge],[1e3,I.instanceSizeSpecs["2xlarge"]],[2e3,I.instanceSizeSpecs["4xlarge"]],[4e3,I.instanceSizeSpecs["8xlarge"]],[6e3,I.instanceSizeSpecs["12xlarge"]],[1e4,I.instanceSizeSpecs["16xlarge"]]]);e.s(["CreateBranchModal",0,()=>{let e,ea,ei,er,en,eo,el,{ref:ec}=(0,b.useParams)(),ed=(0,h.useRouter)(),eu=(0,i.useQueryClient)(),{data:ep}=(0,z.useSelectedProjectQuery)(),{data:eh}=(0,$.useSelectedOrganizationQuery)(),{showCreateBranchModal:em,setShowCreateBranchModal:eg}=(0,M.useAppStateSnapshot)(),ex=(0,v.useIsBranching2Enabled)(),ef=(0,y.useFlag)("allowDataBranching"),[ej,ey]=(0,m.useState)(!1),{can:eb}=(0,L.useAsyncCheckPermissions)(a.PermissionAction.CREATE,"preview_branches"),{hasAccess:ev,isLoading:eS}=(0,U.useCheckEntitlements)("branching_limit"),eN=F.IS_PLATFORM&&!ev,ew=ep?.parent_project_ref!==void 0,eE=void 0!==ep?ew?ep.parent_project_ref:ec:void 0,eC="create-branch-form",e_=f.object({branchName:f.string().min(1,"Branch name cannot be empty").refine(e=>/^[a-zA-Z0-9\-_]+$/.test(e),"Branch name can only contain alphanumeric characters, hyphens, and underscores.").refine(e=>(eL??[]).every(t=>t.name!==e),"A branch with this name already exists"),gitBranchName:f.string().refine(e=>ex||!e1||e&&e.length>0,"Git branch name is required when GitHub is connected"),withData:f.boolean().default(!1).optional()}),ek=(0,g.useForm)({mode:"onSubmit",reValidateMode:"onBlur",resolver:(0,s.zodResolver)(e_),defaultValues:{branchName:"",gitBranchName:"",withData:!1}}),{withData:eT,gitBranchName:eP}=ek.watch(),eR=(0,j.useDebounce)(eP,500),{data:eA,error:eI,isPending:eO,isSuccess:eD,isError:eU}=(0,R.useGitHubConnectionsQuery)({organizationId:eh?.id},{enabled:em}),{data:eL}=(0,k.useBranchesQuery)({projectRef:eE}),{data:e$,isSuccess:ez}=(0,O.useProjectAddonsQuery)({projectRef:eE},{enabled:em}),eF=e$?.selected_addons.find(e=>"compute_instance"===e.type),eM=eF?eF.variant.identifier.split("ci_")[1]:void 0,eB=void 0!==(e$?.selected_addons??[]).find(e=>"pitr"===e.type),{data:eG,isPending:eq,isError:eH}=(0,T.useDiskAttributesQuery)({projectRef:eE},{enabled:em&&eT}),eQ=eG?.attributes??{type:"gp3",size_gb:0,iops:0,throughput_mbps:0},eW={...eQ,size_gb:Math.round(1.5*eQ.size_gb)},eK=((e,t)=>{if(t)return I.instanceSizeSpecs[t];for(let[t,s]of es)if(e<=t)return s;return I.instanceSizeSpecs["24xlarge"]})(eQ.size_gb,eM),eY=(e=eW.type,ea=et.DISK_PRICING[e],ei=et.PLAN_DETAILS.pro.includedDiskGB[e],er=Math.max(eW.size_gb-ei,0)*ea.storage,en=et.DISK_LIMITS[e].includedIops,eo=Math.max(eW.iops-en,0)*ea.iops,{total:er+eo+(el=e===et.DiskType.GP3&&"throughput_mbps"in eW?Math.max(eW.throughput_mbps-et.DISK_LIMITS[et.DiskType.GP3].includedThroughput,0)*et.DISK_PRICING[et.DiskType.GP3].throughput:0),size:er,iops:eo,throughput:el}),{mutate:eV}=(0,D.useSendEventMutation)(),{mutate:eJ,isPending:eX}=(0,P.useCheckGithubBranchValidity)({onError:()=>{}}),{mutate:eZ,isPending:e0}=(0,_.useBranchCreateMutation)({onSuccess:async e=>{x.toast.success(`Successfully created preview branch "${e.name}"`),eE&&await Promise.all([eu.invalidateQueries({queryKey:A.projectKeys.detail(eE)})]),eV({action:"branch_create_button_clicked",properties:{branchType:e.persistent?"persistent":"preview",gitlessBranching:ex},groups:{project:ec??"Unknown",organization:eh?.slug??"Unknown"}}),eg(!1),ed.push(`/project/${e.project_ref}`)},onError:e=>{x.toast.error(`Failed to create branch: ${e.message}`)}}),e1=eA?.find(e=>e.project.ref===eE),e2=eL?.find(e=>e.is_default),[e4,e3]=e1?.repository.name.split("/")??[],e8=!(ek.formState.isValid&&(!eP||ej))||!eb||!ez||!eD||eS||!ev||!ex&&!e1||e0||eX,e5=eN?"Upgrade to unlock branching":ex||e1?void 0:"Set up a GitHub connection first to create branches",e7=(0,m.useCallback)(e=>{if(!e1)return console.error("[CreateBranchModal > validateGitBranchName] GitHub Connection is missing");eJ({repositoryId:e1.repository.id,branchName:e},{onSuccess:()=>{ek.getValues("gitBranchName")===e&&(ey(!0),ek.clearErrors("gitBranchName"))},onError:t=>{ek.getValues("gitBranchName")===e&&(ey(!1),ek.setError("gitBranchName",{...t,message:`Unable to find branch "${e}" in ${e4}/${e3}`}))}})},[e1,ek,eJ,e4,e3]);return(0,m.useEffect)(()=>{ek&&em&&ek.reset()},[ek,em]),(0,m.useEffect)(()=>{if(!e1||!eR){ey(ex),ek.clearErrors("gitBranchName");return}ek.clearErrors("gitBranchName"),e7(eR)},[eR,e7,ek,e1,ex]),(0,t.jsx)(q.Dialog,{open:em,onOpenChange:e=>eg(e),children:(0,t.jsxs)(q.DialogContent,{size:"large",hideClose:!0,onOpenAutoFocus:e=>{eN&&e.preventDefault()},"aria-describedby":void 0,children:[(0,t.jsx)(q.DialogHeader,{padding:"small",children:(0,t.jsx)(q.DialogTitle,{children:"Create a new preview branch"})}),(0,t.jsx)(q.DialogSectionSeparator,{}),(0,t.jsx)(W.Form_Shadcn_,{...ek,children:(0,t.jsxs)("form",{id:eC,onSubmit:ek.handleSubmit(e=>{if(!eE)return console.error("Project ref is required");eZ({projectRef:eE,branchName:e.branchName,is_default:!1,...e.withData?{desired_instance_size:eM}:{},...e.gitBranchName?{gitBranch:e.gitBranchName}:{},...ef?{withData:e.withData}:{}})}),children:[eN&&(0,t.jsx)(C.UpgradeToPro,{fullWidth:!0,layout:"vertical",source:"create-branch",featureProposition:"enable branching",primaryText:"Upgrade to unlock branching",secondaryText:"Create and test schema changes, functions, and more in a separate, temporary instance without affecting production.",className:"pb-5"}),(0,t.jsxs)(q.DialogSection,{padding:"medium",className:(0,X.cn)("space-y-4",eN&&"opacity-25 pointer-events-none"),children:[(0,t.jsx)(Q.FormField_Shadcn_,{control:ek.control,name:"branchName",render:({field:e})=>(0,t.jsx)(Z.FormItemLayout,{label:"Preview Branch Name",children:(0,t.jsx)(H.FormControl_Shadcn_,{children:(0,t.jsx)(K.Input_Shadcn_,{...e,placeholder:"e.g. staging, dev-feature-x",autoComplete:"off"})})})}),e1&&(0,t.jsx)(Q.FormField_Shadcn_,{control:ek.control,name:"gitBranchName",render:({field:e})=>(0,t.jsx)(Z.FormItemLayout,{label:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full gap-4",children:[(0,t.jsxs)("span",{className:"flex-1",children:["Sync with Git branch ",ex?"(optional)":""]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(u.default,{className:(0,X.cn)("dark:invert"),src:`${F.BASE_PATH}/img/icons/github-icon.svg`,width:16,height:16,alt:"GitHub icon"}),(0,t.jsxs)(p.default,{href:`https://github.com/${e4}/${e3}`,target:"_blank",rel:"noreferrer",className:"text-foreground hover:underline",children:[e4,"/",e3]})]})]}),description:"Automatically deploy changes on every commit",children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(H.FormControl_Shadcn_,{children:(0,t.jsx)(K.Input_Shadcn_,{...e,placeholder:"e.g. main, feat/some-feature",autoComplete:"off",onChange:t=>{e.onChange(t),ey(!1)}})}),(0,t.jsx)("div",{className:"absolute top-2.5 right-3 flex items-center gap-2",children:e.value?eX?(0,t.jsx)(d.Loader2,{size:14,className:"animate-spin"}):ej?(0,t.jsx)(r.Check,{size:14,className:"text-brand",strokeWidth:2}):null:null})]})})}),eO&&(0,t.jsx)(ee.GenericSkeletonLoader,{}),eU&&(0,t.jsx)(N.default,{error:eI,subject:"Failed to retrieve GitHub connection information"}),eD&&(0,t.jsx)(t.Fragment,{children:!e1&&(0,t.jsxs)("div",{className:"flex items-center gap-2 justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Y.Label_Shadcn_,{children:"Sync with a GitHub branch"}),!ex&&(0,t.jsx)(B.Badge,{variant:"warning",children:"Required"})]}),(0,t.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Keep this preview branch in sync with a chosen GitHub branch"})]}),(0,t.jsx)(G.Button,{type:"default",icon:(0,t.jsx)(c.Github,{}),onClick:()=>{eg(!1),ed.push(`/project/${eE}/settings/integrations`)},children:"Configure"})]})}),ef&&(0,t.jsx)(Q.FormField_Shadcn_,{control:ek.control,name:"withData",render:({field:e})=>(0,t.jsx)(Z.FormItemLayout,{label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.Label_Shadcn_,{className:"mr-2",children:"Include data"}),!eB&&(0,t.jsx)(B.Badge,{variant:"warning",children:"Requires PITR"})]}),layout:"flex-row-reverse",className:"[&>div>label]:mb-1",description:"Clone production data into this branch",children:(0,t.jsx)(H.FormControl_Shadcn_,{children:(0,t.jsx)(V.Switch,{disabled:!eB,checked:e.value,onCheckedChange:e.onChange})})})})]}),(0,t.jsx)(q.DialogSectionSeparator,{}),(0,t.jsxs)(q.DialogSection,{padding:"medium",className:(0,X.cn)("flex flex-col gap-4",eN&&"opacity-25 pointer-events-none"),children:[eT&&(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("figure",{className:"w-10 h-10 rounded-md bg-info-200 border border-info-400 flex items-center justify-center",children:(0,t.jsx)(n.DatabaseZap,{className:"text-info",size:20,strokeWidth:2})})}),(0,t.jsx)("div",{className:"flex flex-col gap-y-1",children:eq?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.ShimmeringLoader,{className:"w-32 h-5 py-0"}),(0,t.jsx)(ee.ShimmeringLoader,{className:"w-72 h-8 py-0"})]}):(0,t.jsx)(t.Fragment,{children:eH?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:"Branch disk size will incur additional cost per month"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"The additional cost and time taken to create a data branch is relative to the size of your database. We are unable to provide an estimate as we were unable to retrieve your project's disk configuration"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm text-foreground",children:["Branch disk size is billed at $",eY.total.toFixed(2)," ","per month"]}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Creating a data branch will take about"," ",(0,t.jsxs)("span",{className:"text-foreground",children:[(720/21e3*eW.size_gb+3).toFixed()," minutes"]})," ","and costs"," ",(0,t.jsxs)("span",{className:"text-foreground",children:["$",eY.total.toFixed(2)]})," ","per month based on your current target database volume size of"," ",eW.size_gb," GB and your"," ",(0,t.jsxs)(J.Tooltip,{children:[(0,t.jsx)(J.TooltipTrigger,{children:(0,t.jsx)("span",{className:E.InlineLinkClassName,children:"project's disk configuration"})}),(0,t.jsxs)(J.TooltipContent,{side:"bottom",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("p",{className:"w-24",children:"Disk type:"}),(0,t.jsx)("p",{className:"w-16",children:eW.type.toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("p",{className:"w-24",children:"Targer disk size:"}),(0,t.jsxs)("p",{className:"w-16",children:[eW.size_gb," GB"]}),(0,t.jsxs)("p",{children:["($",eY.size.toFixed(2),")"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("p",{className:"w-24",children:"IOPs:"}),(0,t.jsxs)("p",{className:"w-16",children:[eW.iops," IOPS"]}),(0,t.jsxs)("p",{children:["($",eY.iops.toFixed(2),")"]})]}),"throughput_mbps"in eW&&(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("p",{className:"w-24",children:"Throughput:"}),(0,t.jsxs)("p",{className:"w-16",children:[eW.throughput_mbps," MB/s"]}),(0,t.jsxs)("p",{children:["($",eY.throughput.toFixed(2),")"]})]}),(0,t.jsxs)("p",{className:"mt-2",children:["More info in"," ",(0,t.jsx)(E.InlineLink,{onClick:()=>eg(!1),className:"pointer-events-auto",href:`/project/${ec}/settings/compute-and-disk`,children:"Compute and Disk"})]})]})]}),"."]})]})})})]}),e1&&(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("figure",{className:"w-10 h-10 rounded-md bg-info-200 border border-info-400 flex items-center justify-center",children:(0,t.jsx)(l.GitMerge,{className:"text-info",size:20,strokeWidth:2})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)("p",{className:"text-sm text-foreground",children:e2?.git_branch?"Merging to production enabled":"Merging to production disabled"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:e2?.git_branch?(0,t.jsxs)(t.Fragment,{children:["When this branch is merged to"," ",(0,t.jsx)("span",{className:"text-foreground",children:e2.git_branch}),", migrations will be deployed to production. Otherwise, migrations only run on preview branches."]}):(0,t.jsx)(t.Fragment,{children:'Merging this branch to production will not deploy migrations. To enable production deployment, enable "Deploy to production" in project integration settings.'})})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("figure",{className:"w-10 h-10 rounded-md bg-info-200 border border-info-400 flex items-center justify-center",children:(0,t.jsx)(o.DollarSign,{className:"text-info",size:20,strokeWidth:2})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("p",{className:"text-sm text-foreground",children:["Branch compute is billed at $",eT?eK.priceHourly:I.instanceSizeSpecs.micro.priceHourly," ","per hour"]}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:eT?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("code",{className:"text-code-inline",children:eK.label})," compute size is automatically selected to match your production branch. You may downgrade after creation or pause the branch when not in use to save cost."]}):(0,t.jsx)(t.Fragment,{children:"This cost will continue for as long as the branch has not been removed."})})]})]}),!eB&&(0,t.jsx)(S.BranchingPITRNotice,{})]}),(0,t.jsxs)(q.DialogFooter,{className:"justify-end gap-2",padding:"medium",children:[(0,t.jsx)(G.Button,{type:"default",disabled:e0,onClick:()=>eg(!1),children:"Cancel"}),(0,t.jsx)(w.ButtonTooltip,{form:eC,disabled:e8,loading:e0,type:eN?"default":"primary",htmlType:"submit",tooltip:{content:{side:"bottom",text:e5}},children:"Create branch"})]})]})})]})})}],470834)},71005,447808,e=>{"use strict";var t=e.i(242882),s=e.i(234745),a=e.i(144676),i=e.i(10429);let r={list:e=>["projects",e,"custom-domains"],reverify:e=>["projects",e,"custom-domains","reverify"]};async function n({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:i}=await (0,s.get)("/v1/projects/{ref}/custom-hostname",{params:{path:{ref:e}},signal:t});if(i){if(i.message?.includes("not allowed to set up custom domain"))return{customDomain:null,status:"0_not_allowed"};if(i.message?.includes("custom hostname configuration"))return{customDomain:null,status:"0_no_hostname_configured"};(0,s.handleError)(i)}return{customDomain:a.data.result,status:a.status}}e.s(["customDomainKeys",0,r],447808),e.s(["useCustomDomainsQuery",0,({projectRef:e},{enabled:s=!0,...o}={})=>{let{data:l}=(0,a.useProjectAddonsQuery)({projectRef:e}),c=!!l?.selected_addons.find(e=>"custom_domain"===e.type);return(0,t.useQuery)({queryKey:r.list(e),queryFn:({signal:t})=>n({projectRef:e},t),enabled:s&&i.IS_PLATFORM&&void 0!==e&&c,...o})}],71005)},659876,20328,886893,453925,645871,677304,e=>{"use strict";var t=e.i(478902);e.i(128328);var s=e.i(158639),a=e.i(587433),i=e.i(356003),r=e.i(34231),n=e.i(48189),o=e.i(876298),l=e.i(10429);let c={INTRODUCTION:"introduction",USER_MANAGEMENT:"user-management",ENTITIES:"entities",STORED_PROCEDURES:"stored-procedures",STORAGE:"storage",EDGE_FUNCTIONS:"edge-functions",REALTIME:"realtime"},d=[{name:"Connect",key:c.INTRODUCTION},{name:"User Management",key:c.USER_MANAGEMENT},{name:"Tables & Views",key:c.ENTITIES},{name:"Stored Procedures",key:c.STORED_PROCEDURES},{name:"Storage",key:c.STORAGE},{name:"Edge Functions",key:c.EDGE_FUNCTIONS},{name:"Realtime",key:c.REALTIME}],u={init:{key:"introduction",category:c.INTRODUCTION,title:"Connect to your project",description:"Projects have a RESTful endpoint that you can use with your project's API key to query and manage your database. Put these keys in your .env file.",js:(e,t)=>`
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = '${t}'
const supabaseKey = process.env.SUPABASE_KEY
const supabase = createClient(supabaseUrl, supabaseKey)`,bash:()=>"# No client library required for Bash."},clientApiKeys:{key:"client-api-keys",category:c.INTRODUCTION,title:"Client API Keys",description:`Client keys allow "anonymous access" to your database, until the user has logged in. After logging in, the keys will switch to the user's own login token.

In this documentation, we will refer to the key using the name \`SUPABASE_KEY\`. You can find the \`anon\` key in the [API settings](/project/[ref]/settings/api) page.`,js:(e,t)=>`
const SUPABASE_KEY = '${e}'
const SUPABASE_URL = '${t}'
const supabase = createClient(SUPABASE_URL, process.env.SUPABASE_KEY);`,bash:(e,t)=>`${e}`},serviceApiKeys:{key:"service-keys",category:c.INTRODUCTION,title:"Service Keys",description:`Service keys have *FULL* access to your data, bypassing any security policies. Be VERY careful where you expose these keys. They should only be used on a server and never on a client or browser.

In this documentation, we refer to the key using the name \`SERVICE_KEY\`. You can find the \`service_role\` key above or in the [API settings](/project/[ref]/settings/api) page.`,js:(e,t)=>`
const SUPABASE_KEY = '${e}'
const SUPABASE_URL = 'https://${t}'
const supabase = createClient(SUPABASE_URL, process.env.SUPABASE_KEY);`,bash:(e,t)=>`${e}`},userManagement:{key:"user-management",category:c.USER_MANAGEMENT,title:"Introduction",description:`Supabase makes it easy to manage your users.

  Supabase assigns each user a unique ID. You can reference this ID anywhere in your database. For example, you might create a \`profiles\` table references the user using a \`user_id\` field.

  Supabase already has built in the routes to sign up, login, and log out for managing users in your apps and websites.`,js:void 0,bash:void 0},signUp:{key:"sign-up",category:c.USER_MANAGEMENT,title:"Sign up",description:`Allow your users to sign up and create a new account

  After they have signed up, all interactions using the Supabase client will be performed as "that user".`,js:(e,t)=>`
const { data, error } = await supabase.auth.signUp({
  email: 'someone@email.com',
  password: 'some-secure-password'
})`,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/signup' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "email": "someone@email.com",
  "password": "some-secure-password"
}'`},emailLogin:{key:"email-login",category:c.USER_MANAGEMENT,title:"Log in with Email/Password",description:`
If an account is created, users can login to your app.

After they have logged in, all interactions using the Supabase JS client will be performed as "that user".`,js:(e,t)=>`
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'someone@email.com',
  password: 'some-secure-password'
})
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/token?grant_type=password' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "email": "someone@email.com",
  "password": "some-secure-password"
}'
    `},magicLinkLogin:{key:"magic-link-login",category:c.USER_MANAGEMENT,title:"Log in with Magic Link via Email",description:`
Send a user a passwordless link which they can use to redeem an access_token.

After they have clicked the link, all interactions using the Supabase JS client will be performed as "that user".`,js:(e,t)=>`
const { data, error } = await supabase.auth.signInWithOtp({
  email: 'someone@email.com'
})
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/magiclink' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "email": "someone@email.com"
}'
    `},phoneLogin:{key:"phone-log-in",category:c.USER_MANAGEMENT,title:"Sign up with Phone/Password",description:`
A phone number can be used instead of an email as a primary account confirmation mechanism.

The user will receive a mobile OTP via sms with which they can verify that they control the phone number.

You must enter your own twilio credentials on the auth settings page to enable sms confirmations.`,js:(e,t)=>`
const { data, error } = await supabase.auth.signUp({
  phone: '+13334445555',
  password: 'some-password'
})
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/signup' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "phone": "+13334445555",
  "password": "some-password"
}'
    `},smsLogin:{key:"sms-otp-log-in",category:c.USER_MANAGEMENT,title:"Login via SMS OTP",description:`
SMS OTPs work like magic links, except you have to provide an interface for the user to verify the 6 digit number they receive.

You must enter your own twilio credentials on the auth settings page to enable SMS-based Logins.`,js:(e,t)=>`
const { data, error } = await supabase.auth.signInWithOtp({
  phone: '+13334445555'
})
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/otp' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "phone": "+13334445555"
}'
    `},smsVerify:{key:"sms-verify",category:c.USER_MANAGEMENT,title:"Verify an SMS OTP",description:`
Once the user has received the OTP, have them enter it in a form and send it for verification

You must enter your own twilio credentials on the auth settings page to enable SMS-based OTP verification.`,js:(e,t)=>`
const { data, error } = await supabase.auth.verifyOtp({
  phone: '+13334445555',
  token: '123456',
  type: 'sms'
})
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/verify' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "type": "sms",
  "phone": "+13334445555",
  "token": "123456"
}'
    `},oauthLogin:{key:"oauth-login",category:c.USER_MANAGEMENT,title:"Log in with Third Party OAuth",description:`
Users can log in with Third Party OAuth like Google, Facebook, GitHub, and more. You must first enable each of these in the Auth Providers settings [here](https://supabase.com).

View all the available [Third Party OAuth providers](https://supabase.com).

After they have logged in, all interactions using the Supabase JS client will be performed as "that user".

Generate your Client ID and secret from: [Google](https://console.developers.google.com/apis/credentials), [Github](https://github.com/settings/applications/new), [Gitlab](https://gitlab.com/oauth/applications), [Facebook](https://developers.facebook.com/apps), and [Bitbucket](https://support.atlassian.com/bitbucket-cloud/docs/use-oauth-on-bitbucket-cloud).`,js:(e,t)=>`
const { data, error } = await supabase.auth.signInWithOAuth({
  provider: 'github'
})
    `,bash:(e,t)=>"No available command"},user:{key:"get-user",category:c.USER_MANAGEMENT,title:"Get user",description:"Get the JSON object for the logged in user.",js:(e,t)=>`
const { data: { user } } = await supabase.auth.getUser()
    `,bash:(e,t)=>`
curl -X GET '${t}/auth/v1/user' \\
-H "apikey: ${e}" \\
-H "Authorization: Bearer USER_TOKEN"
    `},forgotPassWordEmail:{key:"forgot-password-email",category:c.USER_MANAGEMENT,title:"Forgot password / email",description:'Sends the user a log in link via email. Once logged in you should direct the user to a new password form. And use "Update User" below to save the new password.',js:(e,t)=>`
const { data, error } = await supabase.auth.resetPasswordForEmail(email)
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/recover' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-d '{
"email": "someone@email.com"
}'
`},updateUser:{key:"update-user",category:c.USER_MANAGEMENT,title:"Update User",description:"Update the user with a new email or password. Each key (email, password, and data) is optional.",js:(e,t)=>`
const { data, error } = await supabase.auth.updateUser({
  email: "new@email.com",
  password: "new-password",
  data: { hello: 'world' }
})
    `,bash:(e,t)=>`
curl -X PUT '${t}/auth/v1/user' \\
-H "apikey: ${e}" \\
-H "Authorization: Bearer <USERS-ACCESS-TOKEN>" \\
-H "Content-Type: application/json" \\
-d '{
"email": "someone@email.com",
"password": "new-password",
"data": {
  "key": "value"
}
}'
`},logout:{key:"log-out",category:c.USER_MANAGEMENT,title:"Log out",description:'After calling log out, all interactions using the Supabase JS client will be "anonymous".',js:(e,t)=>`
const { error } = await supabase.auth.signOut()
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/logout' \\
-H "apikey: ${e}" \\
-H "Content-Type: application/json" \\
-H "Authorization: Bearer USER_TOKEN"
    `},emailInvite:{key:"email-invite",category:c.USER_MANAGEMENT,title:"Invite user over email",description:`
Send a user a passwordless link which they can use to sign up and log in.

After they have clicked the link, all interactions using the Supabase JS client will be performed as "that user".

This endpoint requires you use the \`service_role_key\` when initializing the client, and should only be invoked from the server, never from the client.`,js:(e,t)=>`
const { data, error } = await supabase.auth.api.inviteUserByEmail('someone@email.com')
    `,bash:(e,t)=>`
curl -X POST '${t}/auth/v1/invite' \\
-H "apikey: ${e}" \\
-H "Authorization: Bearer ${e}" \\
-H "Content-Type: application/json" \\
-d '{
  "email": "someone@email.com"
}'
    `},storage:{key:"storage",category:c.STORAGE,title:"Introduction",description:`Supabase Storage makes it simple to upload and serve files of any size, providing a robust framework for file access controls.

You can use Supabase Storage to store images, videos, documents, and any other file type. Serve your assets with a global CDN to reduce latency from over 285 cities globally. Supabase Storage includes a built-in image optimizer, so you can resize and compress your media files on the fly.`,js:void 0,bash:void 0},edgeFunctions:{key:"edge-function",category:c.EDGE_FUNCTIONS,title:"Introduction",description:`
Edge Functions are server-side TypeScript functions, distributed globally at the edgeâ€”close to your users. They can be used for listening to webhooks or integrating your Supabase project with third-parties like Stripe. Edge Functions are developed using Deno, which offers a few benefits to you as a developer:
`,js:void 0,bash:void 0},edgeFunctionsPreReq:{key:"edge-function-pre-req",category:c.EDGE_FUNCTIONS,title:"Pre-requisites",description:`
Follow the steps to prepare your Supabase project on your local machine.

- Install the Supabase [CLI](${l.DOCS_URL}/guides/cli).
- [Login to the CLI](${l.DOCS_URL}/reference/cli/usage#supabase-login) using the command: \`supabase login\`..
- [Initialize Supabase](${l.DOCS_URL}/guides/getting-started/local-development#getting-started) inside your project using the command: \`supabase init\`..
- [Link to your Remote Project](${l.DOCS_URL}/reference/cli/usage#supabase-link) using the command \`supabase link --project-ref [ref]\`..
- Setup your environment: Follow the steps [here](${l.DOCS_URL}/guides/functions/quickstart#setting-up-your-environment).
`,js:void 0,bash:void 0},createEdgeFunction:{key:"create-edge-function",category:c.EDGE_FUNCTIONS,title:"Create an Edge Function",description:`
Create a Supabase Edge Function locally via the Supabase CLI.
`,js:()=>"// Create an edge function via the Supabase CLI",bash:()=>`
supabase functions new hello-world
`},deployEdgeFunction:{key:"deploy-edge-function",category:c.EDGE_FUNCTIONS,title:"Deploy an Edge Function",description:`
Deploy a Supabase Edge Function to your Supabase project via the Supabase CLI.
`,js:()=>"// Deploy an edge function via the Supabase CLI",bash:()=>`supabase functions deploy hello-world --project-ref [ref]
`},entitiesIntroduction:{key:"entities-introduction",category:c.ENTITIES,title:"Introduction",description:`
All views and tables in the \`public\` schema, and those accessible by the active database role for a request are available for querying via the API.

If you don't want to expose tables in your API, simply add them to a different schema (not the \`public\` schema).
`,js:void 0,bash:void 0},generatingTypes:{key:"generating-types",category:c.ENTITIES,title:"Generating Types",description:`
Supabase APIs are generated from your database, which means that we can use database introspection to generate type-safe API definitions.

You can generate types from your database either through the [Supabase CLI](${l.DOCS_URL}/guides/database/api/generating-types), or by downloading the types file via the button on the right and importing it in your application within \`src/index.ts\`.
`,js:void 0,bash:void 0},graphql:{key:"graphql",category:c.ENTITIES,title:"GraphQL vs PostgREST",description:`
If you have a GraphQL background, you might be wondering if you can fetch your data in a single round-trip. The answer is yes! The syntax is very similar. This example shows how you might achieve the same thing with Apollo GraphQL and Supabase.

Still want GraphQL?
If you still want to use GraphQL, you can. Supabase provides you with a full Postgres database, so as long as your middleware can connect to the database then you can still use the tools you love. You can find the database connection details [in the settings](/project/[ref]/database/settings).
`,js:(e,t)=>`
// With Apollo GraphQL
const { loading, error, data } = useQuery(gql\`
  query GetDogs {
    dogs {
      id
      breed
      owner {
        id
        name
      }
    }
  }
    \`)

// With Supabase
const { data, error } = await supabase
  .from('dogs')
  .select(\`
      id, breed,
      owner (id, name)
  \`)
`,bash:(e,t)=>`
// With Apollo GraphQL
const { loading, error, data } = useQuery(gql\`
  query GetDogs {
    dogs {
      id
      breed
      owner {
        id
        name
      }
    }
  }
    \`)

// With Supabase
const { data, error } = await supabase
  .from('dogs')
  .select(\`
      id, breed,
      owner (id, name)
  \`)
    `},storedProceduresIntroduction:{key:"stored-procedures-introduction",category:c.STORED_PROCEDURES,title:"Introduction",description:`
All of your database stored procedures are available on your API. This means you can build your logic directly into the database (if you're brave enough)!

The API endpoint supports POST (and in some cases GET) to execute the function.
`,js:void 0,bash:void 0},realtime:{key:"realtime-introduction",category:c.REALTIME,title:"Introduction",description:`
Supabase provides a globally distributed cluster of Realtime servers that enable the following functionality:

- [Broadcast](${l.DOCS_URL}/guides/realtime/broadcast): Send ephemeral messages from client to clients with low latency.
- [Presence](${l.DOCS_URL}/guides/realtime/presence): Track and synchronize shared state between clients.
- [Postgres Changes](${l.DOCS_URL}/guides/realtime/postgres-changes): Listen to Postgres database changes and send them to authorized clients.
`,js:void 0,bash:void 0},subscribeChannel:{key:"subscribe-to-channel",category:c.REALTIME,title:"Subscribe to channel",description:`
Creates an event handler that listens to changes.

- By default, Broadcast and Presence are enabled for all projects.
- By default, listening to database changes is disabled for new projects due to database performance and security concerns. You can turn it on by managing Realtime's [replication](${l.DOCS_URL}/guides/api#realtime-api-overview).
- You can receive the "previous" data for updates and deletes by setting the table's \`REPLICA IDENTITY\` to \`FULL\` (e.g., \`ALTER TABLE your_table REPLICA IDENTITY FULL;\`).
- Row level security is not applied to delete statements. When RLS is enabled and replica identity is set to full, only the primary key is sent to clients.
`,js:()=>`
supabase
  .channel('any')
  .on('broadcast', { event: 'cursor-pos' }, payload => {
    console.log('Cursor position received!', payload)
  })
  .subscribe((status) => {
    if (status === 'SUBSCRIBED') {
      channel.send({
        type: 'broadcast',
        event: 'cursor-pos',
        payload: { x: Math.random(), y: Math.random() },
      })
    }
  })
    `,bash:()=>"# Realtime streams are only supported by our client libraries"},unsubscribeChannel:{key:"unsubscribe-channel",category:c.REALTIME,title:"Unsubscribe from a channel",description:`
Unsubscribes and removes Realtime channel from Realtime client.

Removing a channel is a great way to maintain the performance of your project's Realtime service as well as your database if you're listening to Postgres changes. Supabase will automatically handle cleanup 30 seconds after a client is disconnected, but unused channels may cause degradation as more clients are simultaneously subscribed.
`,js:()=>"supabase.removeChannel(myChannel)",bash:()=>"# Realtime streams are only supported by our client libraries"},unsubscribeChannels:{key:"unsubscribe-channels",category:c.REALTIME,title:"Unsubscribe from all channels",description:`
Unsubscribes and removes all Realtime channels from Realtime client.

Removing a channel is a great way to maintain the performance of your project's Realtime service as well as your database if you're listening to Postgres changes. Supabase will automatically handle cleanup 30 seconds after a client is disconnected, but unused channels may cause degradation as more clients are simultaneously subscribed.
`,js:()=>"supabase.removeChannels()",bash:()=>"# Realtime streams are only supported by our client libraries"},retrieveAllChannels:{key:"unsubscribe-channel",category:c.REALTIME,title:"Unsubscribe from a channel",description:`
Returns all Realtime channels.
`,js:()=>"const channels = supabase.getChannels()",bash:()=>"# Realtime streams are only supported by our client libraries"}},p={rpcSingle:{key:"invoke-function",title:"Invoke function",category:c.STORED_PROCEDURES,description:void 0,docsUrl:`${l.DOCS_URL}/reference/javascript/rpc`,code:({rpcName:e,rpcParams:t,endpoint:s,apiKey:a,showBearer:i=!0})=>{let r=t.map(e=>`"${e.name}": "value"`).join(", "),n=!t.length,o=n?"":`
-d '{ ${r} }' \\`,l=n?"":`, {${t.length?t.map(e=>`
    ${e.name}`).join(", ").concat("\n  "):""}}`;return[{key:"rpc-single",title:void 0,bash:`
  curl -X POST '${s}/rest/v1/rpc/${e}' \\${o}
  -H "Content-Type: application/json" \\
  -H "apikey: ${a}" ${i?`\\
  -H "Authorization: Bearer ${a}"`:""}
        `,js:`
let { data, error } = await supabase
  .rpc('${e}'${l})

if (error) console.error(error)
else console.log(data)
        `}]}},readRows:{key:"read-rows",title:"Read rows",category:c.ENTITIES,docsUrl:`${l.DOCS_URL}/reference/javascript/select`,description:"To read rows in this table, use the `select` method.",code:({resourceId:e,endpoint:t,apikey:s})=>[{key:"read-all-rows",title:"Read all rows",bash:`
curl '${t}/rest/v1/${e}?select=*' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}"
          `,js:`
let { data: ${e}, error } = await supabase
  .from('${e}')
  .select('*')
          `},{key:"read-specific-columns",title:"Read specific columns",bash:`
curl '${t}/rest/v1/${e}?select=some_column,other_column' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}"
          `,js:`
let { data: ${e}, error } = await supabase
  .from('${e}')
  .select('some_column,other_column')
  `},{key:"read-foreign-tables",title:"Read referenced tables",bash:`
curl '${t}/rest/v1/${e}?select=some_column,other_table(foreign_key)' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}"
          `,js:`
let { data: ${e}, error } = await supabase
  .from('${e}')
  .select(\`
    some_column,
    other_table (
      foreign_key
    )
  \`)
          `},{key:"with-pagination",title:"With pagination",bash:`
curl '${t}/rest/v1/${e}?select=*' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}" \\
-H "Range: 0-9"
          `,js:`
let { data: ${e}, error } = await supabase
  .from('${e}')
  .select('*')
  .range(0, 9)
          `}]},filtering:{key:"filter-rows",category:c.ENTITIES,title:"Filtering",description:"Supabase provides a wide range of filters",docsUrl:`${l.DOCS_URL}/reference/javascript/using-filters`,code:({resourceId:e,endpoint:t,apikey:s})=>[{key:"with-filtering",title:"With filtering",bash:`
curl --get '${t}/rest/v1/${e}' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}" \\
-H "Range: 0-9" \\
-d "select=*" \\
\\
\`# Filters\` \\
-d "column=eq.Equal+to" \\
-d "column=gt.Greater+than" \\
-d "column=lt.Less+than" \\
-d "column=gte.Greater+than+or+equal+to" \\
-d "column=lte.Less+than+or+equal+to" \\
-d "column=like.*CaseSensitive*" \\
-d "column=ilike.*CaseInsensitive*" \\
-d "column=is.null" \\
-d "column=in.(Array,Values)" \\
-d "column=neq.Not+equal+to" \\
\\
\`# Arrays\` \\
-d "array_column=cs.{array,contains}" \\
-d "array_column=cd.{contained,by}" \\
\\
\`# Logical operators\` \\
-d "column=not.like.Negate+filter" \\
-d "or=(some_column.eq.Some+value,other_column.eq.Other+value)"
        `,js:`
let { data: ${e}, error } = await supabase
  .from('${e}')
  .select("*")

  // Filters
  .eq('column', 'Equal to')
  .gt('column', 'Greater than')
  .lt('column', 'Less than')
  .gte('column', 'Greater than or equal to')
  .lte('column', 'Less than or equal to')
  .like('column', '%CaseSensitive%')
  .ilike('column', '%CaseInsensitive%')
  .is('column', null)
  .in('column', ['Array', 'Values'])
  .neq('column', 'Not equal to')

  // Arrays
  .contains('array_column', ['array', 'contains'])
  .containedBy('array_column', ['contained', 'by'])

  // Logical operators
  .not('column', 'like', 'Negate filter')
  .or('some_column.eq.Some value, other_column.eq.Other value')
          `}]},insertRows:{key:"insert-rows",category:c.ENTITIES,title:"Insert rows",description:`
\`insert\` lets you insert into your tables. You can also insert in bulk and do UPSERT.

\`insert\` will also return the replaced values for UPSERT.
`,docsUrl:`${l.DOCS_URL}/reference/javascript/insert`,code:({resourceId:e,endpoint:t,apikey:s})=>[{key:"insert-a-row",title:"Insert a row",bash:`
curl -X POST '${t}/rest/v1/${e}' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}" \\
-H "Content-Type: application/json" \\
-H "Prefer: return=minimal" \\
-d '{ "some_column": "someValue", "other_column": "otherValue" }'
          `,js:`
const { data, error } = await supabase
  .from('${e}')
  .insert([
    { some_column: 'someValue', other_column: 'otherValue' },
  ])
  .select()
          `},{key:"insert-many-rows",title:"Insert many rows",bash:`
curl -X POST '${t}/rest/v1/${e}' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}" \\
-H "Content-Type: application/json" \\
-d '[{ "some_column": "someValue" }, { "other_column": "otherValue" }]'
          `,js:`
const { data, error } = await supabase
  .from('${e}')
  .insert([
    { some_column: 'someValue' },
    { some_column: 'otherValue' },
  ])
  .select()
          `},{key:"upsert-matching-rows",title:"Upsert matching rows",bash:`
curl -X POST '${t}/rest/v1/${e}' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}" \\
-H "Content-Type: application/json" \\
-H "Prefer: resolution=merge-duplicates" \\
-d '{ "some_column": "someValue", "other_column": "otherValue" }'
          `,js:`
const { data, error } = await supabase
  .from('${e}')
  .upsert({ some_column: 'someValue' })
  .select()
          `}]},updateRows:{key:"update-rows",category:c.ENTITIES,title:"Update rows",description:`
\`update\` lets you update rows. \`update\` will match all rows by default. You can update specific rows using horizontal filters, e.g. \`eq\`, \`lt\`, and \`is\`.

\`update\` will also return the replaced values for UPDATE.
`,docsUrl:`${l.DOCS_URL}/reference/javascript/update`,code:({resourceId:e,endpoint:t,apikey:s})=>[{key:"update-matching-rows",title:"Update matching rows",bash:`
curl -X PATCH '${t}/rest/v1/${e}?some_column=eq.someValue' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}" \\
-H "Content-Type: application/json" \\
-H "Prefer: return=minimal" \\
-d '{ "other_column": "otherValue" }'
          `,js:`
const { data, error } = await supabase
  .from('${e}')
  .update({ other_column: 'otherValue' })
  .eq('some_column', 'someValue')
  .select()
          `}]},deleteRows:{key:"delete-rows",category:c.ENTITIES,title:"Delete rows",description:`
\`delete\` lets you delete rows. \`delete\` will match all rows by default, so remember to specify your filters!
`,docsUrl:`${l.DOCS_URL}/reference/javascript/delete`,code:({resourceId:e,endpoint:t,apikey:s})=>[{key:"delete-matching-rows",title:"Delete matching rows",bash:`
curl -X DELETE '${t}/rest/v1/${e}?some_column=eq.someValue' \\
-H "apikey: ${s}" \\
-H "Authorization: Bearer ${s}"
          `,js:`
const { error } = await supabase
  .from('${e}')
  .delete()
  .eq('some_column', 'someValue')
          `}]},subscribeChanges:{key:"subscribe-changes",category:c.ENTITIES,title:"Subscribe to changes",description:`
Supabase provides realtime functionality and broadcasts database changes to authorized users depending on Row Level Security (RLS) policies.
`,docsUrl:`${l.DOCS_URL}/reference/javascript/subscribe`,code:({resourceId:e})=>[{key:"subscribe-all-events",title:"Subscribe to all events",bash:"# Realtime streams are only supported by our client libraries",js:`
const channels = supabase.channel('custom-all-channel')
  .on(
    'postgres_changes',
    { event: '*', schema: 'public', table: '${e}' },
    (payload) => {
      console.log('Change received!', payload)
    }
  )
  .subscribe()`},{key:"subscribe-to-inserts",title:"Subscribe to inserts",bash:"# Realtime streams are only supported by our client libraries",js:`
const channels = supabase.channel('custom-insert-channel')
  .on(
    'postgres_changes',
    { event: 'INSERT', schema: 'public', table: '${e}' },
    (payload) => {
      console.log('Change received!', payload)
    }
  )
  .subscribe()`},{key:"subscribe-to-updates",title:"Subscribe to updates",bash:"# Realtime streams are only supported by our client libraries",js:`
const channels = supabase.channel('custom-update-channel')
  .on(
    'postgres_changes',
    { event: 'UPDATE', schema: 'public', table: '${e}' },
    (payload) => {
      console.log('Change received!', payload)
    }
  )
  .subscribe()`},{key:"subscribe-to-deletes",title:"Subscribe to deletes",bash:"# Realtime streams are only supported by our client libraries",js:`
const channels = supabase.channel('custom-delete-channel')
  .on(
    'postgres_changes',
    { event: 'DELETE', schema: 'public', table: '${e}' },
    (payload) => {
      console.log('Change received!', payload)
    }
  )
  .subscribe()`},{key:"subscribe-to-specific-rows",title:"Subscribe to specific rows",bash:"# Realtime streams are only supported by our client libraries",js:`
const channels = supabase.channel('custom-filter-channel')
  .on(
    'postgres_changes',
    { event: '*', schema: 'public', table: '${e}', filter: 'some_column=eq.some_value' },
    (payload) => {
      console.log('Change received!', payload)
    }
  )
  .subscribe()`}]},uploadFile:{key:"upload-file",category:c.STORAGE,title:"Upload a file",docsUrl:`${l.DOCS_URL}/reference/javascript/storage-from-upload`,description:`
Upload a file to an existing bucket. RLS policy permissions required:
- \`buckets\` table permissions: none
- \`objects\` table permissions: only \`insert\` when you are uploading new files and \`select\`, \`insert\`, and \`update\` when you are upserting files.
`,code:({name:e,apikey:t,endpoint:s})=>[{key:"storage-upload-file",title:void 0,bash:`
curl -X POST '${s}/storage/v1/object/${e}/folder/avatar1.png' \\
-H 'Content-Type: image/png' \\
-H "Authorization: Bearer ${t}" \\
--data-binary @/path/to/your/file'
-H 'Content-Type: multipart/form-data' \\
-H "Authorization: Bearer ${t}" \\
--data-raw $'your_file_data'
        `,js:`
const avatarFile = event.target.files[0]
const { data, error } = await supabase
  .storage
  .from('${e}')
  .upload('folder/avatar1.png', avatarFile, {
    cacheControl: '3600',
    upsert: false
  })
`}]},deleteFiles:{key:"delete-files",category:c.STORAGE,title:"Delete files",docsUrl:`${l.DOCS_URL}/reference/javascript/storage-from-remove`,description:`
Delete files within the bucket. RLS policy permissions required:
- \`buckets\` table permissions: none
- \`objects\` table permissions: \`delete\` and \`select\`
`,code:({name:e,apikey:t,endpoint:s})=>[{key:"storage-delete-files",title:void 0,bash:`
curl -X DELETE '${s}/storage/v1/object/${e}' \\
-H "Content-Type: application/json" \\
-H "Authorization: Bearer ${t}" \\
-d '{ "prefixes": ["file_name", "another_file_name"] }'
`,js:`
const { data, error } = await supabase
  .storage
  .from('${e}')
  .remove(['folder/avatar1.png'])
        `}]},listFiles:{key:"list-files",category:c.STORAGE,title:"List all files",docsUrl:`${l.DOCS_URL}/reference/javascript/storage-from-list`,description:`
List all files within the bucket. RLS policy permissions required:
- \`buckets\` table permissions: none
- \`objects\` table permissions: \`select\`
`,code:({name:e,apikey:t,endpoint:s})=>[{key:"storage-list-files",title:void 0,bash:`
curl -X POST '${s}/storage/v1/object/list/${e}' \\
-H "Content-Type: application/json" \\
-H "Authorization: Bearer ${t}" \\
-d '{ "limit": 100, "offset": 0, "prefix": "", "sortBy": { "column": "name", "order": "asc" } }'`,js:`
const { data, error } = await supabase
  .storage
  .from('${e}')
  .list('folder', {
    limit: 100,
    offset: 0,
    sortBy: { column: 'name', order: 'asc' },
  })
        `}]},downloadFile:{key:"download-file",category:c.STORAGE,title:"Download a file",docsUrl:`${l.DOCS_URL}/reference/javascript/storage-from-download`,description:`
Downloads a file from a private bucket. For public buckets, make a request to the URL returned from getPublicUrl instead. RLS policy permissions required:
- \`buckets\` table permissions: none
- \`objects\` table permissions: \`select\`
`,code:({name:e,apikey:t,endpoint:s})=>[{key:"storage-download-file",title:void 0,bash:`
curl -X GET '${s}/storage/v1/object/${e}/folder/avatar1.png' \\
-H "Content-Type: application/json" \\
-H "Authorization: Bearer ${t}" \\
--output avatar1.png
`,js:`
const { data, error } = await supabase
  .storage
  .from('${e}')
  .download('folder/avatar1.png')
      `}]},createSignedURL:{key:"create-signed-url",category:c.STORAGE,title:"Create a signed URL",docsUrl:`${l.DOCS_URL}/reference/javascript/storage-from-createsignedurl`,description:`
Create a signed URL which can be used to share a file for a fixed amount of time. RLS policy permissions required:
- \`buckets\` table permissions: none
- \`objects\` table permissions: \`select\`
`,code:({name:e,apikey:t,endpoint:s})=>[{key:"storage-create-signed-url",title:void 0,bash:`
curl -X POST '${s}/storage/v1/object/sign/${e}/folder/avatar1.png' \\
-H "Content-Type: application/json" \\
-H "Authorization: Bearer ${t}" \\
-d '{ "expiresIn": 60 }'
        `,js:`
const { data, error } = await supabase
  .storage
  .from('${e}')
  .createSignedUrl('folder/avatar1.png', 60)
        `}]},retrievePublicURL:{key:"retrieve-public-url",category:c.STORAGE,title:"Retrieve public URL",docsUrl:`${l.DOCS_URL}/reference/javascript/storage-from-getpublicurl`,description:`
A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.

This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.

The bucket needs to be set to public, either via \`updateBucket()\` or by going to Storage on supabase.com/dashboard, clicking the overflow menu on a bucket and choosing "Make public"

RLS policy permissions required:
- \`buckets\` table permissions: none
- \`objects\` table permissions: none
`,code:({name:e,apikey:t,endpoint:s})=>[{key:"storage-retrieve-public-url",title:void 0,bash:`
# No bash command available.
# You can construct the public URL by concatenating the bucket URL with the path to the asset
# e.g ${s}/storage/v1/object/public/${e}/folder/avatar1.png`,js:`
const { data } = supabase
  .storage
  .from('${e}')
  .getPublicUrl('folder/avatar1.png')
        `}]},invokeEdgeFunction:{key:"invoke-edge-function",category:c.EDGE_FUNCTIONS,title:"Invoke an edge function",docsUrl:`${l.DOCS_URL}/reference/javascript/functions-invoke`,description:`
Invokes a Supabase Edge Function. Requires an Authorization header, and invoke params generally match the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) spec.

When you pass in a body to your function, we automatically attach the \`Content-Type\` header for \`Blob\`, \`ArrayBuffer\`, \`File\`, \`FormData\` and \`String\`. If it doesn't match any of these types we assume the payload is \`json\`, serialize it and attach the \`Content-Type\` header as \`application/json\`. You can override this behavior by passing in a \`Content-Type\` header of your own.

Responses are automatically parsed as \`json\`, \`blob\` and \`form-data\` depending on the \`Content-Type\` header sent by your function. Responses are parsed as \`text\` by default.
`,code:({name:e,endpoint:t,apikey:s})=>[{key:"invoke-edge-function",title:void 0,bash:`
curl --request POST '${t}/functions/v1/${e}' \\
--header 'Authorization: Bearer ${s}' \\
--header 'Content-Type: application/json' \\
--data '{ "name": "Functions" }'
        `,js:`
const { data, error } = await supabase
  .functions
  .invoke('${e}', {
    body: { foo: 'bar' }
  })`}]}};e.s(["API_DOCS_CATEGORIES",0,c,"DOCS_CONTENT",0,u,"DOCS_MENU",0,d,"DOCS_RESOURCE_CONTENT",0,p],20328);var h=e.i(200243),m=e.i(513826),g=e.i(592383),x=e.i(162082),f=e.i(265735);let j=({selectedLanguage:e,snippet:a,codeSnippets:i})=>{let{ref:r}=(0,s.useParams)(),{data:n}=(0,f.useSelectedOrganizationQuery)(),{mutate:o}=(0,x.useSendEventMutation)();return(0,t.jsxs)("div",{id:a.key,className:"space-y-4 py-6",children:[(0,t.jsxs)("div",{className:"px-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"doc-heading",children:a.title}),void 0!==a.docsUrl&&(0,t.jsx)(m.DocsButton,{abbrev:!1,href:a.docsUrl})]}),void 0!==a.description&&(0,t.jsx)("div",{className:"doc-section",children:(0,t.jsx)("article",{className:"text text-sm text-foreground-light",children:(0,t.jsx)(g.Markdown,{className:"max-w-none",content:a.description.replaceAll("[ref]",r??"_")})})})]}),i.map(s=>(0,t.jsxs)("div",{className:"px-4 space-y-2",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:s.title}),(0,t.jsx)("div",{className:"codeblock-container",children:(0,t.jsx)("div",{className:"bg rounded p-2",children:(0,t.jsx)(h.SimpleCodeBlock,{className:e,onCopy:()=>{o({action:"api_docs_code_copy_button_clicked",properties:{title:s.title,selectedLanguage:e},groups:{project:r??"Unknown",organization:n?.slug??"Unknown"}})},children:s[e]})})})]},s.key))]})};e.s(["default",0,j],886893),e.s(["Bucket",0,({language:e,apikey:l,endpoint:c})=>{(0,i.useQueryClient)();let{ref:d}=(0,s.useParams)(),u=(0,o.useAppStateSnapshot)().activeDocsSection[1],h=(0,r.useBucketInfoQueryPreferCached)(u,d),m=h?.allowed_mime_types,g=h?.file_size_limit;return void 0===h?null:(0,t.jsxs)("div",{className:"divide-y",children:[(0,t.jsxs)("div",{className:"space-y-1 px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("h2",{children:h.name}),(0,t.jsx)(a.Badge,{variant:h.public?"warning":"default",children:h.public?"Public":"Private"})]}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Allowed MIME types:"," ",null===m?"All types are allowed":0===(m??[]).length?"No types are allowed":(m??[]).length>1?(m??[]).join(", "):"Unknown"]}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Max file size limit:"," ",null===g?"No limit":`${(0,n.formatBytes)(g)}`]})]}),(0,t.jsx)(j,{selectedLanguage:e,snippet:p.uploadFile,codeSnippets:p.uploadFile.code({name:u,apikey:l,endpoint:c})}),(0,t.jsx)(j,{selectedLanguage:e,snippet:p.deleteFiles,codeSnippets:p.deleteFiles.code({name:u,apikey:l,endpoint:c})}),(0,t.jsx)(j,{selectedLanguage:e,snippet:p.listFiles,codeSnippets:p.listFiles.code({name:u,apikey:l,endpoint:c})}),(0,t.jsx)(j,{selectedLanguage:e,snippet:p.downloadFile,codeSnippets:p.downloadFile.code({name:u,apikey:l,endpoint:c})}),h.public?(0,t.jsx)(j,{selectedLanguage:e,snippet:p.retrievePublicURL,codeSnippets:p.retrievePublicURL.code({name:u,apikey:l,endpoint:c})}):(0,t.jsx)(j,{selectedLanguage:e,snippet:p.createSignedURL,codeSnippets:p.createSignedURL.code({name:u,apikey:l,endpoint:c})})]})}],659876);var y=e.i(240788);e.s(["EdgeFunction",0,({language:e,apikey:a="API_KEY",endpoint:i})=>{let{ref:r}=(0,s.useParams)(),n=(0,o.useAppStateSnapshot)(),{data:l}=(0,y.useEdgeFunctionsQuery)({projectRef:r}),c=n.activeDocsSection[1],d=(l??[]).find(e=>e.name===c);return void 0===d?null:(0,t.jsxs)("div",{className:"divide-y",children:[(0,t.jsx)("div",{className:"space-y-1 px-4 py-4",children:(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("h2",{children:d.name})})}),(0,t.jsx)(j,{selectedLanguage:e,snippet:p.invokeEdgeFunction,codeSnippets:p.invokeEdgeFunction.code({name:c,endpoint:`${i}`,apikey:a})})]})}],453925);let b=({apikey:e,endpoint:a,selectedLanguage:i,snippet:r,children:n})=>{let{ref:o}=(0,s.useParams)(),{data:l}=(0,f.useSelectedOrganizationQuery)(),{mutate:c}=(0,x.useSendEventMutation)(),d=r[i]?.(e,a).replaceAll("[ref]",o??"");return(0,t.jsxs)("div",{className:"space-y-4 py-6 pb-2 last:pb-6",children:[(0,t.jsxs)("div",{className:"px-4 space-y-4",children:[(0,t.jsx)("h2",{id:r.key,tabIndex:-1,className:"doc-heading",children:r.title}),void 0!==r.description&&(0,t.jsx)("div",{className:"doc-section",children:(0,t.jsx)("article",{className:"text text-sm text-foreground-light",children:(0,t.jsx)(g.Markdown,{className:"max-w-none",content:r.description.replaceAll("[ref]",o??"_")})})})]}),n,void 0!==d&&(0,t.jsx)("div",{className:"px-4 codeblock-container",children:(0,t.jsx)("div",{className:"bg rounded p-2",children:(0,t.jsx)(h.SimpleCodeBlock,{className:i,onCopy:()=>{c({action:"api_docs_code_copy_button_clicked",properties:{title:r.title,selectedLanguage:i},groups:{project:o??"Unknown",organization:l?.slug??"Unknown"}})},children:d})})})]})};e.s(["default",0,b],645871),e.s(["EdgeFunctions",0,({language:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{selectedLanguage:e,snippet:u.edgeFunctions}),(0,t.jsx)(b,{selectedLanguage:e,snippet:u.edgeFunctionsPreReq}),(0,t.jsx)(b,{selectedLanguage:e,snippet:u.createEdgeFunction}),(0,t.jsx)(b,{selectedLanguage:e,snippet:u.deployEdgeFunction})]})],677304)},74227,e=>{"use strict";e.i(242882);var t=e.i(234745);async function s({ref:e,included_schemas:s},a){if(!e)throw Error("Project ref is required");let{data:i,error:r}=await (0,t.get)("/v1/projects/{ref}/types/typescript",{params:{path:{ref:e},query:{included_schemas:s}},signal:a});return r&&(0,t.handleError)(r),i}e.i(47302),e.s(["generateTypes",()=>s])},709371,e=>{"use strict";var t=e.i(478902),s=e.i(786741),a=e.i(389959),i=e.i(355901);e.i(128328);var r=e.i(158639),n=e.i(513826),o=e.i(462142),l=e.i(74227),c=e.i(10429),d=e.i(837710),u=e.i(645871),p=e.i(20328);e.s(["Entities",0,({language:e})=>{let{ref:h}=(0,r.useParams)(),[m,g]=(0,a.useState)(!1),{data:x}=(0,o.useProjectPostgrestConfigQuery)({projectRef:h}),f=async()=>{try{g(!0);let e=await (0,l.generateTypes)({ref:h,included_schemas:x?.db_schema}),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.types)),t.setAttribute("download","supabase.ts"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),i.toast.success("Successfully generated types! File is being downloaded")}catch(e){i.toast.error(`Failed to generate types: ${e.message}`)}finally{g(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.default,{selectedLanguage:e,snippet:p.DOCS_CONTENT.entitiesIntroduction}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.default,{selectedLanguage:e,snippet:p.DOCS_CONTENT.generatingTypes}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2 px-4 mt-3",children:[(0,t.jsx)(n.DocsButton,{href:`${c.DOCS_URL}/guides/database/api/generating-types`}),(0,t.jsx)(d.Button,{type:"default",disabled:m,loading:m,icon:(0,t.jsx)(s.Download,{strokeWidth:1.5}),onClick:f,children:"Generate and download types"})]}),(0,t.jsx)("p",{className:"text-xs text-foreground-light px-4 mt-2",children:"Remember to re-generate and download this file as you make changes to your tables."})]}),(0,t.jsx)(u.default,{selectedLanguage:e,snippet:p.DOCS_CONTENT.graphql})]})}])},984278,e=>{"use strict";var t=e.i(242882),s=e.i(234745);async function a({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:i}=await (0,s.get)("/platform/projects/{ref}/api/rest",{params:{path:{ref:e}},signal:t});return i&&(0,s.handleError)(i),a}e.s(["useProjectJsonSchemaQuery",0,({projectRef:e},{enabled:s=!0,...i}={})=>(0,t.useQuery)({queryKey:["projects",e,"docs"],queryFn:({signal:t})=>a({projectRef:e},t),enabled:s&&void 0!==e,...i})],984278)},589445,96545,714413,237657,521891,e=>{"use strict";var t=e.i(478902);e.i(128328);var s=e.i(158639),a=e.i(389959),i=e.i(707843),r=e.i(984278),n=e.i(876298),o=e.i(10429),l=e.i(454931),c=e.i(88816),d=e.i(837710),u=e.i(917007),p=e.i(549815),h=e.i(911509),m=e.i(866205),g=e.i(793912),x=e.i(135144),f=e.i(689805);let j=({simplifiedVersion:e=!1})=>{let s=(0,n.useAppStateSnapshot)(),[i,r]=(0,a.useState)(!1),j=e=>{s.setDocsLanguage(e),r(!1)};return(0,t.jsx)("div",{className:"flex items-center gap-x-2",children:(0,t.jsxs)(f.Popover_Shadcn_,{modal:!1,open:i,onOpenChange:r,children:[(0,t.jsx)(x.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(d.Button,{type:"default",className:e?"px-1":"",icon:e?"js"===s.docsLanguage?(0,t.jsx)("img",{src:`${o.BASE_PATH}/img/libraries/javascript-icon.svg`,alt:"javascript logo",width:"14"}):(0,t.jsx)(l.Terminal,{size:14,strokeWidth:2.5}):void 0,iconRight:!e&&(0,t.jsx)(c.ChevronDown,{size:14,strokeWidth:2}),children:e?void 0:`Language: ${"js"===s.docsLanguage?"Javascript":"Bash"}`})}),(0,t.jsx)(g.PopoverContent_Shadcn_,{className:"p-0 w-24",side:"bottom",align:"end",children:(0,t.jsx)(m.Command_Shadcn_,{children:(0,t.jsx)(h.CommandList_Shadcn_,{children:(0,t.jsxs)(u.CommandGroup_Shadcn_,{children:[(0,t.jsx)(p.CommandItem_Shadcn_,{className:"cursor-pointer",onSelect:()=>j("js"),onClick:()=>j("js"),children:(0,t.jsx)("p",{children:"Javascript"})}),(0,t.jsx)(p.CommandItem_Shadcn_,{className:"cursor-pointer",onSelect:()=>j("bash"),onClick:()=>j("bash"),children:(0,t.jsx)("p",{children:"Bash"})})]})})})})]})})};e.s(["default",0,j],96545);var y=e.i(20328),b=e.i(886893);let v=e=>{let t=`Note:
This is a Primary Key.<pk/>`,s=`Note:
This is a Foreign Key to`,a=e.lastIndexOf(t),i=e.lastIndexOf(s),r=e;return a>=0&&(r=r.substring(0,a)),i>=0&&(r=r.substring(0,i)),r};e.s(["navigateToSection",0,e=>{{let t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,s=document.getElementById(e);s&&(s.scrollIntoView({behavior:t?"instant":"smooth"}),setTimeout(()=>s.focus(),300))}},"tempRemovePostgrestText",0,v],714413),e.s(["Entity",0,({language:e,apikey:o="",endpoint:l=""})=>{let{ref:c}=(0,s.useParams)(),d=(0,n.useAppStateSnapshot)().activeDocsSection[1],{data:u,refetch:p}=(0,r.useProjectJsonSchemaQuery)({projectRef:c}),h=u?.definitions?.[d],m=void 0!==h?Object.entries(h.properties).map(([e,t])=>({...t,id:e,required:(h?.required??[]).includes(e)})):[];return((0,a.useEffect)(()=>{void 0!==d&&p()},[d]),void 0===d)?null:(0,t.jsxs)("div",{className:"divide-y relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sticky top-0 bg-surface-100 z-10 border-b shadow-md",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)("h2",{children:d}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:h?.description??"No description available"})]}),(0,t.jsx)(j,{})]}),(0,t.jsxs)("div",{className:"space-y-2 px-4 py-4 !border-t-0",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Columns"}),(0,t.jsx)(i.default,{head:[(0,t.jsx)(i.default.th,{children:"Name"},"name"),(0,t.jsx)(i.default.th,{children:"Format"},"format"),(0,t.jsx)(i.default.th,{children:"Type"},"type"),(0,t.jsx)(i.default.th,{children:"Description"},"description")],body:m.map(e=>{let s=function(e,t){if(void 0===e&&("jsonb"===t||"json"===t))return"json";switch(e){case"string":return"string";case"integer":case"number":return"number";case"json":return"json";case"boolean":return"boolean";default:return e}}(e.type,e.format);return(0,t.jsxs)(i.default.tr,{children:[(0,t.jsx)(i.default.td,{title:e.id,children:e.id}),(0,t.jsx)(i.default.td,{title:e.format,children:(0,t.jsx)("p",{className:"truncate",children:e.format})}),(0,t.jsx)(i.default.td,{title:s,children:s}),(0,t.jsx)(i.default.td,{title:e.description,children:v(e.description??"").trim()})]},e.id)})})]}),(0,t.jsx)(b.default,{selectedLanguage:e,snippet:y.DOCS_RESOURCE_CONTENT.readRows,codeSnippets:y.DOCS_RESOURCE_CONTENT.readRows.code({resourceId:d,endpoint:l,apikey:o})}),(0,t.jsx)(b.default,{selectedLanguage:e,snippet:y.DOCS_RESOURCE_CONTENT.filtering,codeSnippets:y.DOCS_RESOURCE_CONTENT.filtering.code({resourceId:d,endpoint:l,apikey:o})}),(0,t.jsx)(b.default,{selectedLanguage:e,snippet:y.DOCS_RESOURCE_CONTENT.insertRows,codeSnippets:y.DOCS_RESOURCE_CONTENT.insertRows.code({resourceId:d,endpoint:l,apikey:o})}),(0,t.jsx)(b.default,{selectedLanguage:e,snippet:y.DOCS_RESOURCE_CONTENT.updateRows,codeSnippets:y.DOCS_RESOURCE_CONTENT.updateRows.code({resourceId:d,endpoint:l,apikey:o})}),(0,t.jsx)(b.default,{selectedLanguage:e,snippet:y.DOCS_RESOURCE_CONTENT.deleteRows,codeSnippets:y.DOCS_RESOURCE_CONTENT.deleteRows.code({resourceId:d,endpoint:l,apikey:o})}),(0,t.jsx)(b.default,{selectedLanguage:e,snippet:y.DOCS_RESOURCE_CONTENT.subscribeChanges,codeSnippets:y.DOCS_RESOURCE_CONTENT.subscribeChanges.code({resourceId:d})})]})}],589445);var S=e.i(902858),N=e.i(816467),w=e.i(171997),E=e.i(375761),C=e.i(108892),_=e.i(377451),k=e.i(162082),T=e.i(2579),P=e.i(265735),R=e.i(645871);e.s(["Introduction",0,({showKeys:e,language:i,apikey:r,endpoint:n})=>{let{ref:o}=(0,s.useParams)(),{can:l}=(0,T.useAsyncCheckPermissions)(S.PermissionAction.SECRETS_READ,"*"),{data:c}=(0,C.useAPIKeysQuery)({projectRef:o},{enabled:l}),{data:u}=(0,_.useProjectSettingsV2Query)({projectRef:o}),{data:p}=(0,P.useSelectedOrganizationQuery)(),{mutate:h}=(0,k.useSendEventMutation)(),[m,g]=(0,a.useState)();(0,a.useEffect)(()=>{void 0!==m&&setTimeout(()=>g(void 0),2e3)},[m]);let{anonKey:x,serviceKey:f}=(0,C.getKeys)(c),j=x?.api_key,b=f?.api_key??"SUPABASE_CLIENT_SERVICE_KEY";return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.default,{selectedLanguage:i,apikey:r,endpoint:n,snippet:y.DOCS_CONTENT.init,children:(0,t.jsxs)("div",{className:"px-4 space-y-6",children:[(0,t.jsxs)("div",{className:"flex space-x-4 mt-8",children:[(0,t.jsx)("p",{className:"text-sm w-40",children:"Project URL"}),(0,t.jsx)(w.Input,{disabled:!0,readOnly:!0,copy:!0,size:"small",value:n,className:"w-full"})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("p",{className:"text-sm w-40",children:"Client API key"}),(0,t.jsx)(w.Input,{disabled:!0,readOnly:!0,size:"small",value:e?r:"Reveal API keys via dropdown in the header",className:"w-full",descriptionText:"This key is safe to use in a browser if you have enabled Row Level Security (RLS) for your tables and configured policies.",actions:[(0,t.jsx)(d.Button,{type:"default",icon:(0,t.jsx)(N.Copy,{}),onClick:()=>{g("anon"),(0,E.copyToClipboard)(j??"SUPABASE_CLIENT_ANON_KEY"),h({action:"api_docs_code_copy_button_clicked",properties:{title:"Client API key",selectedLanguage:i},groups:{project:o??"Unknown",organization:p?.slug??"Unknown"}})},children:"anon"===m?"Copied":"Copy"},"copy")]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("p",{className:"text-sm w-40 mb-16",children:"Service key"}),(0,t.jsx)(w.Input,{disabled:!0,readOnly:!0,size:"small",value:e?b??"SUPABASE_CLIENT_SERVICE_KEY":"Reveal API keys via dropdown in the header",className:"w-full",descriptionText:(0,t.jsxs)("p",{children:["This key has the ability to bypass Row Level Security."," ",(0,t.jsx)("span",{className:"text-amber-900",children:"Never share it publicly."})]}),actions:[(0,t.jsx)(d.Button,{type:"default",icon:(0,t.jsx)(N.Copy,{}),onClick:()=>{g("service"),(0,E.copyToClipboard)(b),h({action:"api_docs_code_copy_button_clicked",properties:{title:"Service key",selectedLanguage:i},groups:{project:o??"Unknown",organization:p?.slug??"Unknown"}})},children:"service"===m?"Copied":"Copy"},"copy")]})]})]})}),(0,t.jsx)(R.default,{selectedLanguage:i,apikey:r,endpoint:n,snippet:y.DOCS_CONTENT.clientApiKeys}),(0,t.jsx)(R.default,{selectedLanguage:i,apikey:e?b:"SUPABASE_CLIENT_SERVICE_KEY",endpoint:n,snippet:y.DOCS_CONTENT.serviceApiKeys})]})}],237657),e.s(["Realtime",0,({language:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.default,{selectedLanguage:e,snippet:y.DOCS_CONTENT.realtime}),(0,t.jsx)(R.default,{selectedLanguage:e,snippet:y.DOCS_CONTENT.subscribeChannel}),(0,t.jsx)(R.default,{selectedLanguage:e,snippet:y.DOCS_CONTENT.unsubscribeChannel}),(0,t.jsx)(R.default,{selectedLanguage:e,snippet:y.DOCS_CONTENT.unsubscribeChannels}),(0,t.jsx)(R.default,{selectedLanguage:e,snippet:y.DOCS_CONTENT.retrieveAllChannels})]})],521891)},10758,e=>{"use strict";var t=e.i(242882),s=e.i(234745);async function a({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:i}=await (0,s.get)("/platform/projects/{ref}/api/rest",{params:{path:{ref:e}},signal:t});i&&(0,s.handleError)(i);let r=a.definitions,n=r?Object.entries(r).map(([e,t])=>({...t,name:e,fields:Object.entries(t.properties||{}).map(([e,t])=>({...t,name:e}))})):[],o=a.paths;return{data:a,tables:n,functions:o?Object.entries(o).map(([e,t])=>({...t,path:e,name:e.replace("/rpc/","")})).filter(e=>e.path.includes("/rpc")).sort((e,t)=>e.name.localeCompare(t.name)):[]}}e.s(["useOpenAPISpecQuery",0,({projectRef:e},{enabled:s=!0,...i}={})=>(0,t.useQuery)({queryKey:["projects",e,"open-api-spec"],queryFn:({signal:t})=>a({projectRef:e},t),enabled:s&&void 0!==e,...i})],10758)},498272,949931,794484,35285,e=>{"use strict";var t=e.i(478902);e.i(128328);var s=e.i(158639),a=e.i(389959),i=e.i(587433),r=e.i(707843),n=e.i(984278),o=e.i(10758),l=e.i(876298),c=e.i(20328),d=e.i(886893);e.s(["RPC",0,({language:e})=>{let{ref:u}=(0,s.useParams)(),p=(0,l.useAppStateSnapshot)(),{data:h,refetch:m}=(0,n.useProjectJsonSchemaQuery)({projectRef:u}),{data:g,refetch:x}=(0,o.useOpenAPISpecQuery)({projectRef:u}),f=g?.functions??[],j=p.activeDocsSection[1],y=f.find(e=>e.name===j),{post:{parameters:b}}=y??{},v=h?.paths[y?.path],S=v?.post?.summary,N=Object.entries(b&&b[0]&&b[0].schema&&b[0].schema.properties?b[0].schema.properties:{}).map(([e,t])=>({name:e,...t,required:b[0].schema.required.includes(e)})).filter(e=>!!e.name);return((0,a.useEffect)(()=>{void 0!==j&&(m(),x())},[j]),void 0===y)?null:(0,t.jsxs)("div",{className:"divide-y",children:[(0,t.jsxs)("div",{className:"space-y-1 px-4 py-4",children:[(0,t.jsx)("h2",{children:y.name}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:S??"No description available"})]}),(0,t.jsxs)("div",{className:"space-y-2 px-4 py-4",children:[(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Function arguments"}),(0,t.jsx)(r.default,{head:[(0,t.jsx)(r.default.th,{children:"Name"},"name"),(0,t.jsx)(r.default.th,{children:"Format"},"format"),(0,t.jsx)(r.default.th,{children:"Type"},"type"),(0,t.jsx)(r.default.th,{},"required")],body:N.map(e=>(0,t.jsxs)(r.default.tr,{children:[(0,t.jsx)(r.default.td,{title:e.name,children:(0,t.jsx)("p",{className:"font-mono text-xs text-foreground truncate",children:e.name})}),(0,t.jsx)(r.default.td,{title:e.format,children:e.format}),(0,t.jsx)(r.default.td,{title:e.type,children:e.type}),(0,t.jsx)(r.default.td,{children:e.required?(0,t.jsx)(i.Badge,{variant:"warning",children:"Required"}):(0,t.jsx)(i.Badge,{variant:"default",children:"Optional"})})]},e.name))})]}),(0,t.jsx)(d.default,{selectedLanguage:e,snippet:c.DOCS_RESOURCE_CONTENT.rpcSingle,codeSnippets:c.DOCS_RESOURCE_CONTENT.rpcSingle.code({rpcName:j,rpcParams:N,endpoint:"endpoint",apiKey:"apiKey",showBearer:!0})})]})}],498272);var u=e.i(645871);e.s(["Storage",0,({language:e})=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(u.default,{selectedLanguage:e,snippet:c.DOCS_CONTENT.storage})})],949931),e.s(["StoredProcedures",0,({language:e})=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(u.default,{selectedLanguage:e,snippet:c.DOCS_CONTENT.storedProceduresIntroduction})})],794484);var p=e.i(912793);e.s(["UserManagement",0,({language:e,apikey:s,endpoint:a})=>{let{authenticationSignInProviders:i}=(0,p.useIsFeatureEnabled)(["authentication:sign_in_providers"]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.default,{selectedLanguage:e,snippet:c.DOCS_CONTENT.userManagement}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.signUp}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.emailLogin}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.magicLinkLogin}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.phoneLogin}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.smsLogin}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.smsVerify}),i&&(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.oauthLogin}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.user}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.forgotPassWordEmail}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.updateUser}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.logout}),(0,t.jsx)(u.default,{selectedLanguage:e,apikey:s,endpoint:a,snippet:c.DOCS_CONTENT.emailInvite})]})}],35285)},431810,e=>{"use strict";var t=e.i(389959),s=e.i(971131);function a(e,t,s){let a,i=s.initialDeps??[];function r(){var r,n,o,l;let c,d;s.key&&(null==(r=s.debug)?void 0:r.call(s))&&(c=Date.now());let u=e();if(!(u.length!==i.length||u.some((e,t)=>i[t]!==e)))return a;if(i=u,s.key&&(null==(n=s.debug)?void 0:n.call(s))&&(d=Date.now()),a=t(...u),s.key&&(null==(o=s.debug)?void 0:o.call(s))){let e=Math.round((Date.now()-c)*100)/100,t=Math.round((Date.now()-d)*100)/100,a=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%câ± ${i(t,5)} /${i(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*a,120))}deg 100% 31%);`,null==s?void 0:s.key)}return null==(l=null==s?void 0:s.onChange)||l.call(s,a),a}return r.updateDeps=e=>{i=e},r}function i(e,t){if(void 0!==e)return e;throw Error(`Unexpected undefined${t?`: ${t}`:""}`)}e.i(869176);let r=e=>{let{offsetWidth:t,offsetHeight:s}=e;return{width:t,height:s}},n=e=>e,o=e=>{let t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),a=[];for(let e=t;e<=s;e++)a.push(e);return a},l=(e,t)=>{let s=e.scrollElement;if(!s)return;let a=e.targetWindow;if(!a)return;let i=e=>{let{width:s,height:a}=e;t({width:Math.round(s),height:Math.round(a)})};if(i(r(s)),!a.ResizeObserver)return()=>{};let n=new a.ResizeObserver(t=>{let a=()=>{let e=t[0];if(null==e?void 0:e.borderBoxSize){let t=e.borderBoxSize[0];if(t)return void i({width:t.inlineSize,height:t.blockSize})}i(r(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return n.observe(s,{box:"border-box"}),()=>{n.unobserve(s)}},c={passive:!0},d="undefined"==typeof window||"onscrollend"in window,u=(e,t)=>{var s,a;let i,r=e.scrollElement;if(!r)return;let n=e.targetWindow;if(!n)return;let o=0,l=e.options.useScrollendEvent&&d?()=>void 0:(s=()=>{t(o,!1)},a=e.options.isScrollingResetDelay,function(...e){n.clearTimeout(i),i=n.setTimeout(()=>s.apply(this,e),a)}),u=s=>()=>{let{horizontal:a,isRtl:i}=e.options;o=a?r.scrollLeft*(i&&-1||1):r.scrollTop,l(),t(o,s)},p=u(!0),h=u(!1);h(),r.addEventListener("scroll",p,c);let m=e.options.useScrollendEvent&&d;return m&&r.addEventListener("scrollend",h,c),()=>{r.removeEventListener("scroll",p),m&&r.removeEventListener("scrollend",h)}},p=(e,t,s)=>{if(null==t?void 0:t.borderBoxSize){let e=t.borderBoxSize[0];if(e)return Math.round(e[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},h=(e,{adjustments:t=0,behavior:s},a)=>{var i,r;null==(r=null==(i=a.scrollElement)?void 0:i.scrollTo)||r.call(i,{[a.options.horizontal?"left":"top"]:e+t,behavior:s})};class m{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null,t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{let t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var s;null==(s=t())||s.disconnect(),e=null},observe:e=>{var s;return null==(s=t())?void 0:s.observe(e,{box:"border-box"})},unobserve:e=>{var s;return null==(s=t())?void 0:s.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{void 0===s&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:n,rangeExtractor:o,onChange:()=>{},measureElement:p,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,s;null==(s=(t=this.options).onChange)||s.call(t,this,e)},this.maybeNotify=a(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;let t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t)return void this.maybeNotify();this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=(null==(e=this.scrollElement)?void 0:e.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??("function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{let s=new Map,a=new Map;for(let i=t-1;i>=0;i--){let t=e[i];if(s.has(t.lane))continue;let r=a.get(t.lane);if(null==r||t.end>r.end?a.set(t.lane,t):t.end<r.end&&s.set(t.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=a(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,s,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=a(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:a,enabled:i},r)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));let n=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];let o=this.measurementsCache.slice(0,n);for(let i=n;i<e;i++){let e=a(i),n=1===this.options.lanes?o[i-1]:this.getFurthestMeasurement(o,i),l=n?n.end+this.options.gap:t+s,c=r.get(e),d="number"==typeof c?c:this.options.estimateSize(i),u=l+d,p=n?n.lane:i%this.options.lanes;o[i]={index:i,start:l,size:d,end:u,key:e,lane:p}}return this.measurementsCache=o,o},{key:!1,debug:()=>this.options.debug}),this.calculateRange=a(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,s,a)=>this.range=e.length>0&&t>0?function({measurements:e,outerSize:t,scrollOffset:s,lanes:a}){let i=e.length-1;if(e.length<=a)return{startIndex:0,endIndex:i};let r=g(0,i,t=>e[t].start,s),n=r;if(1===a)for(;n<i&&e[n].end<s+t;)n++;else if(a>1){let o=Array(a).fill(0);for(;n<i&&o.some(e=>e<s+t);){let t=e[n];o[t.lane]=t.end,n++}let l=Array(a).fill(s+t);for(;r>=0&&l.some(e=>e>=s);){let t=e[r];l[t.lane]=t.start,r--}r=Math.max(0,r-r%a),n=Math.min(i,n+(a-1-n%a))}return{startIndex:r,endIndex:n}}({measurements:e,outerSize:t,scrollOffset:s,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=a(()=>{let e=null,t=null,s=this.calculateRange();return s&&(e=s.startIndex,t=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,s,a,i)=>null===a||null===i?[]:e({startIndex:a,endIndex:i,overscan:t,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{let t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{let s=this.indexFromElement(e),a=this.measurementsCache[s];if(!a)return;let i=a.key,r=this.elementsCache.get(i);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{let s=this.measurementsCache[e];if(!s)return;let a=t-(this.itemSizeCache.get(s.key)??s.size);0!==a&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(s,a,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{e?this._measureElement(e,void 0):this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))})},this.getVirtualItems=a(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{let s=[];for(let a=0,i=e.length;a<i;a++){let i=t[e[a]];s.push(i)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{let t=this.getMeasurements();if(0!==t.length)return i(t[g(0,t.length-1,e=>i(t[e]).start,e)])},this.getOffsetForAlignment=(e,t,s=0)=>{let a=this.getSize(),i=this.getScrollOffset();return"auto"===t&&(t=e>=i+a?"end":"start"),"center"===t?e+=(s-a)/2:"end"===t&&(e-=a),Math.max(Math.min(this.getTotalSize()+this.options.scrollMargin-a,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));let s=this.measurementsCache[e];if(!s)return;let a=this.getSize(),i=this.getScrollOffset();if("auto"===t)if(s.end>=i+a-this.options.scrollPaddingEnd)t="end";else{if(!(s.start<=i+this.options.scrollPaddingStart))return[i,t];t="start"}let r="end"===t?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,t,s.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{"smooth"===s&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let a=0,i=t=>{if(!this.targetWindow)return;let a=this.getOffsetForIndex(e,t);if(!a)return void console.warn("Failed to get offset for index:",e);let[i,n]=a;this._scrollToOffset(i,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{let t=this.getScrollOffset(),s=this.getOffsetForIndex(e,n);s?1.01>Math.abs(s[0]-t)||r(n):console.warn("Failed to get offset for index:",e)})},r=t=>{this.targetWindow&&(++a<10?this.targetWindow.requestAnimationFrame(()=>i(t)):console.warn(`Failed to scroll to index ${e} after 10 attempts.`))};i(t)},this.scrollBy=(e,{behavior:t}={})=>{"smooth"===t&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;let t,s=this.getMeasurements();if(0===s.length)t=this.options.paddingStart;else if(1===this.options.lanes)t=(null==(e=s[s.length-1])?void 0:e.end)??0;else{let e=Array(this.options.lanes).fill(null),a=s.length-1;for(;a>=0&&e.some(e=>null===e);){let t=s[a];null===e[t.lane]&&(e[t.lane]=t.end),a--}t=Math.max(...e.filter(e=>null!==e))}return Math.max(t-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}let g=(e,t,s,a)=>{for(;e<=t;){let i=(e+t)/2|0,r=s(i);if(r<a)e=i+1;else{if(!(r>a))return i;t=i-1}}return e>0?e-1:0},x="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function f(e){return function(e){let a=t.useReducer(()=>({}),{})[1],i={...e,onChange:(t,i)=>{var r;i?(0,s.flushSync)(a):a(),null==(r=e.onChange)||r.call(e,t,i)}},[r]=t.useState(()=>new m(i));return r.setOptions(i),x(()=>r._didMount(),[]),x(()=>r._willUpdate()),r}({observeElementRect:l,observeElementOffset:u,scrollToFn:h,...e})}e.s(["useVirtualizer",()=>f],431810)},513933,e=>{"use strict";let t;var s=e.i(478902),a=e.i(431810),i=e.i(389959),r=e.i(903248),n=e.i(843778);let o=({size:e,start:t})=>({position:"absolute",top:0,left:0,width:"100%",height:`${e}px`,transform:`translateY(${t}px)`}),l=(0,i.createContext)(null),c=({children:e,value:t})=>(0,s.jsx)(l.Provider,{value:t,children:e}),d=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useVirtualizerContext must be used within a VirtualizerProvider");return e},u=({children:e,items:t,getItemKey:r,getItemSize:o,gap:l,hasNextPage:d=!1,isLoadingNextPage:u=!1,onLoadNextPage:p=()=>{},className:h,Component:m})=>{let g=(0,i.useRef)(null),x=(0,a.useVirtualizer)({count:d?t.length+1:t.length,getScrollElement:()=>g.current,getItemKey:r,estimateSize:o,overscan:5,gap:l}),f=x.getVirtualItems(),j=(0,i.useMemo)(()=>({virtualizer:x,virtualItems:f}),[x,f]);(0,i.useEffect)(()=>{let e=f[f.length-1];e&&e.index>=t.length-1&&d&&!u&&p()},[f,t.length,d,u,p]);let y={ref:e=>{g.current=e},className:(0,n.cn)("overflow-auto",h),children:e};return(0,s.jsx)(c,{value:j,children:(0,s.jsx)(m??"div",{...y})})},p=({children:e,Component:t="div"})=>{let{virtualizer:a}=d();return(0,s.jsx)(t,{style:{height:`${a.getTotalSize()}px`,width:"100%",position:"relative"},children:e})},h=(t=({index:e,start:t,size:s,item:a,itemProps:r,ItemComponent:n})=>{let l=(0,i.useMemo)(()=>o({size:s,start:t}),[s,t]),c=(0,i.useMemo)(()=>({index:e,item:a,style:l}),[e,a,l]),d=(0,i.useMemo)(()=>({...c,...r??{}}),[c,r]);return(0,i.createElement)(n,d)},(0,i.memo)(t,void 0));h.displayName="MemoizedInfiniteListItem";let m=({items:e,itemProps:t,ItemComponent:a,LoaderComponent:r})=>{let{virtualItems:n}=d();return(0,s.jsx)(s.Fragment,{children:n.map(n=>{let l=n.index>e.length-1,c=e[n.index];return l?(0,s.jsx)(r,{style:o({size:n.size,start:n.start})},n.index):(0,i.createElement)(h,{key:n.index,index:n.index,start:n.start,size:n.size,item:c,itemProps:t,ItemComponent:a})})})};e.s(["InfiniteListDefault",0,({className:e,items:t,itemProps:a,getItemKey:i,getItemSize:r,gap:n,hasNextPage:o=!1,isLoadingNextPage:l=!1,onLoadNextPage:c=()=>{},ItemComponent:d,LoaderComponent:h})=>(0,s.jsx)(u,{className:e,items:t,getItemKey:i,getItemSize:r,gap:n,hasNextPage:o,isLoadingNextPage:l,onLoadNextPage:c,children:(0,s.jsx)(p,{children:(0,s.jsx)(m,{items:t,itemProps:a,ItemComponent:d,LoaderComponent:h})})}),"LoaderForIconMenuItems",0,({style:e})=>(0,s.jsx)("div",{className:"space-y-1 my-1",style:e,children:(0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2",children:[(0,s.jsx)(r.Skeleton,{className:"h-4 w-5"}),(0,s.jsx)(r.Skeleton,{className:"w-40 h-4"})]}),(0,s.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2",children:[(0,s.jsx)(r.Skeleton,{className:"h-4 w-5"}),(0,s.jsx)(r.Skeleton,{className:"w-32 h-4"})]}),(0,s.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-75",children:[(0,s.jsx)(r.Skeleton,{className:"h-4 w-5"}),(0,s.jsx)(r.Skeleton,{className:"w-20 h-4"})]}),(0,s.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-50",children:[(0,s.jsx)(r.Skeleton,{className:"h-4 w-5"}),(0,s.jsx)(r.Skeleton,{className:"w-40 h-4"})]}),(0,s.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-25",children:[(0,s.jsx)(r.Skeleton,{className:"h-4 w-5"}),(0,s.jsx)(r.Skeleton,{className:"w-20 h-4"})]})]})})])},807297,741506,795826,e=>{"use strict";var t=e.i(478902),s=e.i(902858),a=e.i(389959),i=e.i(837710),r=e.i(539013);e.i(128328);var n=e.i(158639),o=e.i(108892),l=e.i(377451),c=e.i(71005),d=e.i(2579),u=e.i(876298),p=e.i(659876),h=e.i(453925),m=e.i(677304),g=e.i(709371),x=e.i(589445),f=e.i(237657),j=e.i(521891),y=e.i(498272),b=e.i(949931),v=e.i(794484),S=e.i(35285),N=e.i(210419),w=e.i(310474),E=e.i(513933),C=e.i(240788),_=e.i(10758),k=e.i(34231),T=e.i(912793),P=e.i(10429),R=e.i(636900),A=e.i(182074),I=e.i(843778),O=e.i(108151),D=e.i(714413),U=e.i(20328);let L=()=>(0,t.jsx)("hr",{className:"border-t !mt-3 pb-1 mx-3"}),$=(0,I.cn)("w-full px-4","text-left text-sm text-foreground-light","transition hover:text-foreground"),z=()=>{let{ref:e}=(0,n.useParams)(),s=(0,u.useAppStateSnapshot)(),r=s.activeDocsSection[0],o=(()=>{let{projectAuthAll:e,projectStorageAll:t,projectEdgeFunctionAll:s,realtimeAll:a}=(0,T.useIsFeatureEnabled)(["project_auth:all","project_storage:all","project_edge_function:all","realtime:all"]);return U.DOCS_MENU.filter(i=>"user-management"===i.key?e:"storage"===i.key?t:"edge-functions"===i.key?s:"realtime"!==i.key||a)})();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("nav",{"aria-labelledby":"api-docs-rest-categories",className:"px-2 py-4  border-b",children:[(0,t.jsx)("h2",{id:"api-docs-rest-categories",className:"sr-only",children:"REST API Docs"}),o.map(e=>{let i=r===e.key;return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)("button",{"aria-current":i?"page":void 0,className:(0,I.cn)("w-full px-3 py-2 rounded-md","text-left text-sm","transition",i&&"bg-surface-300"),onClick:()=>s.setActiveDocsSection([e.key]),children:e.name}),i&&(0,t.jsx)(F,{category:e.key})]},e.key)})]}),(0,t.jsxs)("div",{className:"px-2 py-4 border-b",children:[(0,t.jsx)(i.Button,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,t.jsx)(w.default,{src:`${P.BASE_PATH}/img/graphql.svg`,style:{width:"16px",height:"16px"},className:"text-foreground",preProcessor:e=>e.replace(/svg/,'svg class="m-auto text-color-inherit"')}),onClick:()=>s.setShowProjectApiDocs(!1),children:(0,t.jsx)(N.default,{className:"!justify-start",href:`/project/${e}/api/graphiql`,children:"GraphiQL"})}),(0,t.jsx)(i.Button,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,t.jsx)(A.BookOpen,{}),children:(0,t.jsx)(N.default,{href:`${P.DOCS_URL}/guides/graphql`,target:"_blank",rel:"noreferrer",className:"!justify-start",children:"GraphQL guide"})})]}),(0,t.jsxs)("div",{className:"px-2 py-4",children:[(0,t.jsx)(i.Button,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,t.jsx)(R.Book,{}),children:(0,t.jsx)(N.default,{href:`${P.DOCS_URL}`,target:"_blank",rel:"noreferrer",className:"!justify-start",children:"Documentation"})}),(0,t.jsx)(i.Button,{block:!0,asChild:!0,type:"text",size:"small",icon:(0,t.jsx)(A.BookOpen,{}),children:(0,t.jsx)(N.default,{href:`${P.DOCS_URL}/guides/api`,target:"_blank",rel:"noreferrer",className:"!justify-start",children:"REST guide"})})]})]})},F=({category:e})=>{let s=Object.values(U.DOCS_CONTENT).filter(t=>t.category===e);return(0,t.jsxs)("div",{className:"space-y-2 py-2",children:[s.map(e=>(0,t.jsx)("button",{className:$,onClick:()=>{(0,D.navigateToSection)(e.key)},children:e.title},e.key)),e===U.API_DOCS_CATEGORIES.ENTITIES&&(0,t.jsx)(M,{}),e===U.API_DOCS_CATEGORIES.STORED_PROCEDURES&&(0,t.jsx)(B,{}),e===U.API_DOCS_CATEGORIES.STORAGE&&(0,t.jsx)(q,{}),e===U.API_DOCS_CATEGORIES.EDGE_FUNCTIONS&&(0,t.jsx)(H,{})]})},M=()=>{let{ref:e}=(0,n.useParams)(),s=(0,u.useAppStateSnapshot)(),{data:a,isLoading:i}=(0,_.useOpenAPISpecQuery)({projectRef:e},{staleTime:6e5}),r=a?.tables??[];return(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsx)(Q,{}),r.length>0&&(0,t.jsx)(L,{}),r.map(e=>(0,t.jsx)("button",{className:$,onClick:()=>s.setActiveDocsSection([U.API_DOCS_CATEGORIES.ENTITIES,e.name]),children:e.name},e.name))]})},B=()=>{let{ref:e}=(0,n.useParams)(),s=(0,u.useAppStateSnapshot)(),{data:a,isLoading:i}=(0,_.useOpenAPISpecQuery)({projectRef:e},{staleTime:6e5}),r=a?.functions??[];return(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsx)(Q,{}),r.length>0&&(0,t.jsx)(L,{}),r.map(e=>(0,t.jsx)("button",{className:$,onClick:()=>s.setActiveDocsSection([U.API_DOCS_CATEGORIES.STORED_PROCEDURES,e.name]),children:e.name},e.name))]})},G=({item:e,style:s})=>{let a=(0,u.useAppStateSnapshot)();return(0,t.jsx)("button",{className:(0,I.cn)($,"py-1"),style:s,onClick:()=>a.setActiveDocsSection([U.API_DOCS_CATEGORIES.STORAGE,e.name]),children:e.name},e.name)},q=()=>{let{ref:e}=(0,n.useParams)(),{data:s,isLoading:a,isFetchingNextPage:i,hasNextPage:r,fetchNextPage:o}=(0,k.usePaginatedBucketsQuery)({projectRef:e}),l=s?.pages.flatMap(e=>e)??[];return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsx)(Q,{}),l.length>0&&(0,t.jsx)(L,{}),(0,t.jsx)(E.InfiniteListDefault,{className:"max-h-80",items:l,getItemKey:e=>l[e]?.name,getItemSize:()=>28,hasNextPage:!!r,isLoadingNextPage:i,onLoadNextPage:o,ItemComponent:G,LoaderComponent:({style:e})=>(0,t.jsx)(Q,{style:{...e,width:"75%"}})})]})},H=()=>{let{ref:e}=(0,n.useParams)(),s=(0,u.useAppStateSnapshot)(),{data:a,isLoading:i}=(0,C.useEdgeFunctionsQuery)({projectRef:e});return(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsx)(Q,{}),(a??[]).length>0&&(0,t.jsx)(L,{}),(a??[]).map(e=>(0,t.jsx)("button",{className:$,onClick:()=>s.setActiveDocsSection([U.API_DOCS_CATEGORIES.EDGE_FUNCTIONS,e.name]),children:e.name},e.name))]})},Q=({className:e,style:s})=>(0,t.jsx)(O.ShimmeringLoader,{style:s,className:(0,I.cn)("mx-2",e)});var W=e.i(96545),K=e.i(954676),Y=e.i(454370),V=e.i(513826),J=e.i(178527),X=e.i(206413),Z=e.i(592360),ee=e.i(689805),et=e.i(793912),es=e.i(135144),ea=e.i(463333);let ei=({category:e,title:s,docsUrl:a,menuItemFilter:i,renderResourceList:r})=>{let[,n]=(0,u.useAppStateSnapshot)().activeDocsSection;return(0,t.jsxs)(er,{children:[(0,t.jsxs)(en,{children:[(0,t.jsx)(eo,{title:s,category:e}),(0,t.jsx)(el,{category:e,resource:n,renderResourceList:r}),(0,t.jsx)(ec,{category:e,menuItemFilter:i})]}),(0,t.jsx)(en,{className:"py-4 border-t",children:(0,t.jsx)(ed,{docsUrl:a})})]})},er=({children:e})=>(0,t.jsx)("div",{className:"py-2",children:e}),en=({children:e,className:s})=>(0,t.jsx)("div",{className:(0,I.cn)("px-4",s),children:e}),eo=({title:e,category:s})=>{let a=(0,ea.useIsAPIDocsSidePanelEnabled)(),r=(0,u.useAppStateSnapshot)();return(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[a&&(0,t.jsx)(i.Button,{type:"text",icon:(0,t.jsx)(K.ChevronLeft,{}),className:"px-1",onClick:()=>{r.setActiveDocsSection([s])}}),(0,t.jsx)("p",{className:"text-sm text-foreground-light capitalize",children:e})]})},el=({category:e,resource:s,renderResourceList:r})=>{let n=(0,u.useAppStateSnapshot)(),[o,l]=(0,a.useState)(!1);return(0,t.jsxs)(ee.Popover_Shadcn_,{open:o,onOpenChange:l,modal:!1,children:[(0,t.jsx)(es.PopoverTrigger_Shadcn_,{asChild:!0,children:(0,t.jsx)(i.Button,{type:"default",size:"small",className:"w-full justify-between gap-2",iconRight:(0,t.jsx)(Y.Code,{className:"rotate-90"}),children:(0,t.jsx)("span",{className:"truncate",children:s??"Select a resource"})})}),(0,t.jsx)(et.PopoverContent_Shadcn_,{className:"p-0 w-64",side:"bottom",align:"center",children:r({selectedResource:s,onSelect:t=>{n.setActiveDocsSection([e,t]),l(!1)},closePopover:()=>l(!1)})})]})},ec=({category:e,menuItemFilter:s})=>{let i=(0,a.useMemo)(()=>{let t=Object.values(U.DOCS_RESOURCE_CONTENT).filter(t=>t.category===e);return s?t.filter(s):t},[e,s]);return(0,t.jsx)("div",{className:"py-4 space-y-2",children:i.map(e=>(0,t.jsx)("button",{className:"w-full text-left text-sm text-foreground-light px-4 hover:text-foreground",onClick:()=>(0,D.navigateToSection)(e.key),children:e.title},e.key))})},ed=({docsUrl:e})=>(0,t.jsxs)(J.Alert_Shadcn_,{className:"p-3",children:[(0,t.jsx)(Z.AlertTitle_Shadcn_,{children:(0,t.jsx)("p",{className:"text-xs",children:"Unable to find what you're looking for?"})}),(0,t.jsxs)(X.AlertDescription_Shadcn_,{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs !leading-normal",children:"The API methods shown here are only the commonly used ones to get you started building quickly."}),(0,t.jsx)("p",{className:"text-xs !leading-normal",children:"Head over to our docs site for the full API documentation."}),(0,t.jsx)(V.DocsButton,{className:"!mt-2",href:e})]})]});var eu=e.i(866205),ep=e.i(917007),eh=e.i(549815),em=e.i(911509);let eg=({items:e,emptyMessage:s,selectedResource:a,onSelect:i,closePopover:r})=>(0,t.jsx)(eu.Command_Shadcn_,{children:(0,t.jsx)(em.CommandList_Shadcn_,{children:(0,t.jsxs)(ep.CommandGroup_Shadcn_,{children:[0===e.length&&(0,t.jsx)(eh.CommandItem_Shadcn_,{disabled:!0,className:"cursor-default px-4",children:(0,t.jsx)("p",{className:"text-foreground-light",children:s})}),e.map(e=>{let s=e.name===a;return(0,t.jsx)(eh.CommandItem_Shadcn_,{className:(0,I.cn)("cursor-pointer px-4",s?"text-foreground bg-selection":"text-foreground-light"),onSelect:()=>{i(e.name),r()},children:(0,t.jsx)("p",{className:"truncate",children:e.name})},e.name)})]})})});var ex=e.i(202584),ef=e.i(703526),ej=e.i(920432),ey=e.i(201844);let eb=({projectRef:e,selectedResource:s,onSelect:i,closePopover:r})=>{let{rawQuery:n,query:o,setSearch:l}=(()=>{let[e,t]=(0,a.useState)(""),s=(0,ex.useDebounce)(e,400),i=0===e.length?void 0:s;return{rawQuery:e,query:i,setSearch:t}})(),{isFetching:c,hasNextPage:d,isFetchingNextPage:u,buckets:p,scrollContainerRef:h,sentinelRef:m}=(({projectRef:e,searchQuery:t,rawQuery:s})=>{let{data:i,isFetching:r,hasNextPage:n,fetchNextPage:o,isFetchingNextPage:l}=(0,k.usePaginatedBucketsQuery)({projectRef:e,search:t},{enabled:!!e,placeholderData:0===s.length?ey.keepPreviousData:void 0}),c=(0,a.useMemo)(()=>i?.pages.flatMap(e=>e)??[],[i]),d=(0,a.useRef)(null),[u,p]=(0,ex.useIntersectionObserver)({threshold:1,root:d.current,rootMargin:"0px"});return(0,a.useEffect)(()=>{p?.isIntersecting&&n&&!r&&o()},[p?.isIntersecting,o,n,r]),{isFetching:r,hasNextPage:n,isFetchingNextPage:l,buckets:c,scrollContainerRef:d,sentinelRef:u}})({projectRef:e,searchQuery:o,rawQuery:n}),g=!c&&0===p.length,x=n.length>0?"No buckets found for this search":"No buckets available";return(0,t.jsxs)(eu.Command_Shadcn_,{shouldFilter:!1,children:[(0,t.jsx)(ej.CommandInput_Shadcn_,{showResetIcon:!0,value:n,onValueChange:l,placeholder:"Search buckets...",handleReset:()=>l("")}),(0,t.jsxs)(em.CommandList_Shadcn_,{children:[(0,t.jsx)(ef.CommandEmpty_Shadcn_,{hidden:!g,className:"py-3 text-sm text-foreground-light",children:x}),(0,t.jsx)(ep.CommandGroup_Shadcn_,{children:c&&0===p.length?(0,t.jsx)("div",{className:"px-4 py-3 text-sm text-foreground-light",children:"Loading buckets..."}):(0,t.jsxs)("div",{ref:h,className:"max-h-72 min-h-[150px] overflow-y-auto",children:[p.map(e=>{let a=e.name===s;return(0,t.jsx)(eh.CommandItem_Shadcn_,{value:e.name,className:(0,I.cn)("cursor-pointer px-4",a?"text-foreground bg-selection":"text-foreground-light"),onSelect:()=>{i(e.name),r()},children:(0,t.jsx)("p",{className:"truncate",children:e.name})},e.id)}),d&&(0,t.jsx)("div",{ref:m,className:"h-2 w-full"})]})}),u&&(0,t.jsx)("div",{className:"px-4 py-2 text-sm text-foreground-light",children:"Loading more buckets..."})]})]})},ev={[U.API_DOCS_CATEGORIES.ENTITIES]:()=>{let{ref:e}=(0,n.useParams)(),{data:s}=(0,_.useOpenAPISpecQuery)({projectRef:e},{staleTime:6e5}),a=s?.tables??[];return(0,t.jsx)(ei,{category:U.API_DOCS_CATEGORIES.ENTITIES,title:"Tables & Views",docsUrl:`${P.DOCS_URL}/reference/javascript/select`,renderResourceList:e=>(0,t.jsx)(eg,{...e,items:a,emptyMessage:"No tables available"})})},[U.API_DOCS_CATEGORIES.STORED_PROCEDURES]:()=>{let{ref:e}=(0,n.useParams)(),{data:s}=(0,_.useOpenAPISpecQuery)({projectRef:e},{staleTime:6e5}),a=s?.functions??[];return(0,t.jsx)(ei,{category:U.API_DOCS_CATEGORIES.STORED_PROCEDURES,title:"Stored Procedures",docsUrl:`${P.DOCS_URL}/reference/javascript/rpc`,renderResourceList:e=>(0,t.jsx)(eg,{...e,items:a,emptyMessage:"No stored procedures available"})})},[U.API_DOCS_CATEGORIES.STORAGE]:()=>{let{ref:e}=(0,n.useParams)(),[,s]=(0,u.useAppStateSnapshot)().activeDocsSection,a=(0,k.useBucketInfoQueryPreferCached)(s,e),i=a?e=>(!!a.public||"retrieve-public-url"!==e.key)&&(!a.public||"create-signed-url"!==e.key):void 0;return(0,t.jsx)(ei,{category:U.API_DOCS_CATEGORIES.STORAGE,title:"Storage",docsUrl:`${P.DOCS_URL}/reference/javascript/storage-createbucket`,menuItemFilter:i,renderResourceList:s=>(0,t.jsx)(eb,{...s,projectRef:e})})},[U.API_DOCS_CATEGORIES.EDGE_FUNCTIONS]:()=>{let{ref:e}=(0,n.useParams)(),{data:s}=(0,C.useEdgeFunctionsQuery)({projectRef:e});return(0,t.jsx)(ei,{category:U.API_DOCS_CATEGORIES.EDGE_FUNCTIONS,title:"Edge Functions",docsUrl:`${P.DOCS_URL}/reference/javascript/functions-invoke`,renderResourceList:e=>(0,t.jsx)(eg,{...e,items:s??[],emptyMessage:"No edge functions available"})})}},eS=()=>{let[e]=(0,u.useAppStateSnapshot)().activeDocsSection,s=ev[e];return s?(0,t.jsx)(s,{},e):null};e.s(["ProjectAPIDocs",0,()=>{let{ref:e}=(0,n.useParams)(),N=(0,u.useAppStateSnapshot)(),w=1===N.activeDocsSection.length&&"introduction"===N.activeDocsSection[0],E=2===N.activeDocsSection.length&&"entities"===N.activeDocsSection[0],[C,_]=(0,a.useState)(!1),k=N.docsLanguage,{can:T}=(0,d.useAsyncCheckPermissions)(s.PermissionAction.SECRETS_READ,"*"),{data:P}=(0,o.useAPIKeysQuery)({projectRef:e},{enabled:N.showProjectApiDocs&&T}),{data:R}=(0,l.useProjectSettingsV2Query)({projectRef:e},{enabled:N.showProjectApiDocs}),{data:A}=(0,c.useCustomDomainsQuery)({projectRef:e},{enabled:N.showProjectApiDocs}),{anonKey:I}=(0,o.getKeys)(P),O=C?I?.api_key??"SUPABASE_CLIENT_ANON_KEY":"SUPABASE_CLIENT_ANON_KEY",D=R?.app_config?.protocol??"https",U=R?.app_config?.endpoint,L=A?.customDomain?.status==="active"?`https://${A.customDomain?.hostname}`:`${D}://${U??""}`;return(0,t.jsx)(r.SidePanel,{hideFooter:!0,size:"xxlarge",className:"max-w-5xl",visible:N.showProjectApiDocs,onCancel:()=>N.setShowProjectApiDocs(!1),children:(0,t.jsxs)("div",{className:"flex items-start h-full",children:[(0,t.jsxs)("div",{className:"w-72 border-r h-full",children:[(0,t.jsxs)("div",{className:"border-b px-4 py-2 flex items-center justify-between",children:[(0,t.jsx)("h4",{children:"API Docs"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[!E&&(0,t.jsx)(W.default,{simplifiedVersion:!0}),w&&(0,t.jsx)(i.Button,{type:"default",onClick:()=>_(!C),children:C?"Hide keys":"Show keys"})]})]}),1===N.activeDocsSection.length?(0,t.jsx)(z,{}):(0,t.jsx)(eS,{})]}),(0,t.jsxs)("div",{className:"flex-1 divide-y space-y-4 max-h-screen overflow-auto",children:["introduction"===N.activeDocsSection[0]&&(0,t.jsx)(f.Introduction,{showKeys:C,language:k,apikey:O,endpoint:L}),"user-management"===N.activeDocsSection[0]&&(0,t.jsx)(S.UserManagement,{language:k,apikey:O,endpoint:L}),"realtime"===N.activeDocsSection[0]&&(0,t.jsx)(j.Realtime,{language:k}),"storage"===N.activeDocsSection[0]&&(0,t.jsx)(t.Fragment,{children:void 0!==N.activeDocsSection[1]?(0,t.jsx)(p.Bucket,{language:k,apikey:O,endpoint:L}):(0,t.jsx)(b.Storage,{language:k})}),"edge-functions"===N.activeDocsSection[0]&&(0,t.jsx)(t.Fragment,{children:void 0!==N.activeDocsSection[1]?(0,t.jsx)(h.EdgeFunction,{language:k,apikey:O,endpoint:L}):(0,t.jsx)(m.EdgeFunctions,{language:k})}),"entities"===N.activeDocsSection[0]&&(0,t.jsx)(t.Fragment,{children:void 0!==N.activeDocsSection[1]?(0,t.jsx)(x.Entity,{language:k,apikey:O,endpoint:L}):(0,t.jsx)(g.Entities,{language:k})}),"stored-procedures"===N.activeDocsSection[0]&&(0,t.jsx)(t.Fragment,{children:void 0!==N.activeDocsSection[1]?(0,t.jsx)(y.RPC,{language:k}):(0,t.jsx)(v.StoredProcedures,{language:k})})]})]})})}],807297);var eN=e.i(217444),ew=e.i(17203),eE=e.i(271226),eC=e.i(589314),e_=e.i(598952),ek=e.i(210942);e.s(["ResourceExhaustionWarningBanner",0,()=>{let e,{ref:s}=(0,n.useParams)(),a=(0,eE.useRouter)(),{data:r}=(0,eC.useResourceWarningsQuery)({ref:s}),o=(r??[])?.find(e=>e.project===s),l=void 0!==o?o.is_readonly_mode_enabled?["is_readonly_mode_enabled"]:Object.keys(o).filter(e=>"project"!==e&&"is_readonly_mode_enabled"!==e&&null!==o[e]):[],c=void 0!==o&&l.some(e=>"critical"===o[e]),d=l.includes("is_readonly_mode_enabled")||c,u=void 0!==o?(0,ek.getWarningContent)(o,l[0],"bannerContent"):void 0,p=l.length>1?e_.RESOURCE_WARNING_MESSAGES.multiple_resource_warnings.bannerContent[c?"critical":"warning"].title:u?.title,h=l.length>1?e_.RESOURCE_WARNING_MESSAGES.multiple_resource_warnings.bannerContent[c?"critical":"warning"].description:u?.description,m=l.length>1?e_.RESOURCE_WARNING_MESSAGES.multiple_resource_warnings.docsUrl:e_.RESOURCE_WARNING_MESSAGES[l[0]]?.docsUrl,g=l.length>1?e_.RESOURCE_WARNING_MESSAGES.multiple_resource_warnings.metric:e_.RESOURCE_WARNING_MESSAGES[l[0]]?.metric,x={undefined:void 0,null:"/project/[ref]/settings/[infra-path]",disk_space:"/project/[ref]/settings/compute-and-disk",read_only:"/project/[ref]/settings/compute-and-disk",auth_email_rate_limit:"/project/[ref]/auth/rate-limits",auth_restricted_email_sending:"/project/[ref]/auth/smtp",default:e=>`/project/[ref]/settings/[infra-path]#${e}`},f=("function"==typeof(e=x[void 0===g?"undefined":null===g?"null":g]||x.default(g))?e(g):e)?.replace("[ref]",s??"default")?.replace("[infra-path]","infrastructure"),j=l.length>1?e_.RESOURCE_WARNING_MESSAGES.multiple_resource_warnings.buttonText:e_.RESOURCE_WARNING_MESSAGES[l[0]]?.buttonText,y=0===l.length,b=void 0===u,v=(a.pathname.endsWith("/usage")||a.pathname.endsWith("/infrastructure"))&&!l.includes("is_readonly_mode_enabled"),S=a.pathname.endsWith("settings/compute-and-disk")&&l.includes("is_readonly_mode_enabled"),w=e_.RESOURCE_WARNING_MESSAGES[l[0]],E=w?.restrictToRoutes,C=void 0===E||E.some(e=>"/project/[ref]"===e?"/project/[ref]"===a.pathname:a.pathname.startsWith(e));return y||b||v||S||!C?null:(0,t.jsxs)(J.Alert_Shadcn_,{variant:d?"destructive":"warning",className:(0,I.cn)("flex items-center justify-between","border-0 border-r-0 rounded-none [&>svg]:left-6 px-6 [&>svg]:w-[26px] [&>svg]:h-[26px]"),children:[(0,t.jsx)(eN.AlertTriangle,{}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(Z.AlertTitle_Shadcn_,{children:p}),(0,t.jsx)(X.AlertDescription_Shadcn_,{children:h})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[void 0!==m&&(0,t.jsx)(i.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(ew.ExternalLink,{}),children:(0,t.jsx)("a",{href:m,target:"_blank",rel:"noreferrer",children:"Learn more"})}),void 0!==f&&(0,t.jsx)(i.Button,{asChild:!0,type:"default",children:(0,t.jsx)(N.default,{href:f,children:j??"Check"})})]})]})}],741506);var eT=e.i(742251);function eP(){let e=(0,eT.usePathname)(),{ref:t}=(0,n.useParams)();return e?.includes(`/project/${t}/editor`)?"table":e?.includes(`/project/${t}/sql`)?"sql":void 0}e.s(["useEditorType",()=>eP],795826)},346600,236610,707820,e=>{"use strict";var t=e.i(478902),s=e.i(182074),a=e.i(398696),i=e.i(10429),r=e.i(587433),n=e.i(837710);e.s(["ClientLibrary",0,({language:e,officialSupport:o,docsUrl:l,gitUrl:c,altIconName:d})=>(0,t.jsxs)("div",{className:"flex items-start md:space-x-6",children:[(0,t.jsx)("img",{src:`${i.BASE_PATH}/img/libraries/${d?`${d}-icon.svg`:`${e.toLowerCase()}-icon.svg`}`,alt:`${e} logo`,width:"21",className:"hidden md:block"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:`${i.BASE_PATH}/img/libraries/${d?`${d}-icon.svg`:`${e.toLowerCase()}-icon.svg`}`,alt:`${e} logo`,width:"21",className:"block md:hidden"}),(0,t.jsxs)("h5",{className:"flex items-center gap-2 text-base text-foreground",children:[e," ",!o&&(0,t.jsx)(r.Badge,{variant:"success",children:"Community"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[l&&(0,t.jsx)("a",{href:l,target:"_blank",rel:"noreferrer",children:(0,t.jsx)(n.Button,{icon:(0,t.jsx)(s.BookOpen,{}),type:"default",children:"Docs"})}),c&&(0,t.jsx)("a",{href:c,target:"_blank",rel:"noreferrer",children:(0,t.jsxs)(n.Button,{icon:(0,t.jsx)(a.Github,{}),type:"default",children:[(0,t.jsx)("span",{className:"hidden md:inline",children:"See"})," GitHub"]})})]})]})]})],346600);var o=e.i(416050),l=e.i(896975),c=e.i(210419);e.i(128328);var d=e.i(158639),u=e.i(162082),p=e.i(265735),h=e.i(843778);e.s(["ExampleProject",0,({framework:e,title:s,description:a,url:r,iconUrl:n})=>{let{resolvedTheme:m}=(0,l.useTheme)(),{ref:g}=(0,d.useParams)(),{data:x}=(0,p.useSelectedOrganizationQuery)(),{mutate:f}=(0,u.useSendEventMutation)(),j=n||(e?`${i.BASE_PATH}/img/libraries/${e.toLowerCase()}${["expo","nextjs"].includes(e.toLowerCase())&&m?.includes("dark")?"-dark":""}-icon.svg`:"");return(0,t.jsx)(c.default,{href:r,target:"_blank",rel:"noreferrer",onClick:()=>f({action:"example_project_card_clicked",properties:{cardTitle:s},groups:{project:g??"Unknown",organization:x?.slug??"Unknown"}}),children:(0,t.jsxs)("div",{className:(0,h.cn)("group relative","border bg-surface-100 border-overlay","flex h-32 flex-row rounded-md p-4 hover:bg-overlay-hover","transition duration-150 ease-in-out"),children:[(0,t.jsx)("div",{className:"mr-4 flex flex-col",children:(0,t.jsx)("img",{className:"transition-all group-hover:scale-110",src:j,alt:`${e} logo`,width:26,height:26})}),(0,t.jsxs)("div",{className:"w-4/5 space-y-2",children:[(0,t.jsx)("h5",{className:"text-foreground",children:s}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:a})]}),(0,t.jsx)("div",{className:(0,h.cn)("absolute right-4 top-3","text-foreground-lighter transition-all duration-200","group-hover:right-3 group-hover:text-foreground"),children:(0,t.jsx)(o.ChevronRight,{})})]})})}],236610),e.s(["EXAMPLE_PROJECTS",0,[{framework:"Svelte",title:"Svelte kanban board",description:"A Trello clone using Supabase as the storage system.",url:"https://github.com/joshnuss/supabase-kanban",type:"app"},{framework:"nextjs",title:"Next.js Realtime chat app",description:"Next.js Slack clone app using Supabase realtime subscriptions",url:"https://github.com/supabase/supabase/tree/master/examples/slack-clone/nextjs-slack-clone",type:"app"},{framework:"nextjs",title:"Next.js Subscription and Auth",description:"The all-in-one starter kit for high-performance SaaS applications.",url:"https://github.com/nextjs/saas-starter",type:"app"},{framework:"Expo",title:"Expo Starter",description:"Template bottom tabs with auth flow (Typescript)",url:"https://github.com/codingki/react-native-expo-template/tree/master/template-typescript-bottom-tabs-supabase-auth-flow",type:"mobile"},{framework:"NestJS",title:"NestJS example",description:"NestJS example using Supabase Auth",url:"https://github.com/hiro1107/nestjs-supabase-auth",type:"app"},{framework:"React",title:"React realtime chat app",description:"Example app of real-time chat using supabase realtime api",url:"https://github.com/shwosner/realtime-chat-supabase-react",type:"app"},{framework:"nextjs",title:"Next.js todo list app",description:"Next.js todo list example",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/nextjs-todo-list",type:"app"},{framework:"Svelte",title:"Svelte todo list app",description:"Sveltejs todo with TailwindCSS and Snowpack",url:"https://github.com/supabase/supabase/tree/master/examples/todo-list/sveltejs-todo-list",type:"app"},{framework:"Flutter",title:"Flutter chat app",description:"A Flutter chat app built with supabase-flutter",url:"https://github.com/supabase-community/flutter-chat",type:"mobile"},{framework:"Swift",title:"Swift user management app",description:"Swift user management app using supabase-swift",url:"https://github.com/supabase/supabase-swift/tree/main/Examples/UserManagement",type:"mobile"},{framework:"Swift",title:"Swift Slack Clone",description:"Swift Slack clone app using supabase-swift",url:"https://github.com/supabase/supabase-swift/tree/main/Examples/SlackClone",type:"mobile"},{framework:"Flutter",title:"Flutter MFA app",description:"A Flutter app demonstrating how to implement MFA",url:"https://github.com/supabase/supabase/tree/master/examples/auth/flutter-mfa"},{framework:"NuxtJS",title:"NuxtJS todo list app",description:"NuxtJS todo app example",url:"https://github.com/nuxt-modules/supabase/tree/main/demo"}]],707820)},597541,e=>{"use strict";var t=e.i(242882),s=e.i(234745),a=e.i(10429),i=e.i(348682);async function r({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:a,error:i}=await (0,s.get)("/v1/projects/{ref}/api-keys/legacy",{params:{path:{ref:e}},signal:t});return i&&(0,s.handleError)(i),a}e.s(["useLegacyAPIKeysStatusQuery",0,({projectRef:e},{enabled:s=!0,...n}={})=>(0,t.useQuery)({queryKey:i.apiKeysKeys.status(e),queryFn:({signal:t})=>r({projectRef:e},t),enabled:a.IS_PLATFORM&&s&&void 0!==e,...n})])},246932,e=>{"use strict";var t=e.i(711789),s=e.i(242882),a=e.i(356003),i=e.i(389959),r=e.i(234745),n=e.i(78162);async function o({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,r.get)("/platform/projects/{ref}/config/secrets/update-status",{params:{path:{ref:e}},signal:t});a&&(0,r.handleError)(a);let i=s.update_status;return i?{changeTrackingId:i.change_tracking_id,jwtSecretUpdateError:i.error,jwtSecretUpdateProgress:i.progress,jwtSecretUpdateStatus:i.status}:null}e.s(["useJwtSecretUpdatingStatusQuery",0,({projectRef:e},{enabled:r=!0,...l}={})=>{let c=(0,a.useQueryClient)(),d=(0,s.useQuery)({queryKey:n.configKeys.jwtSecretUpdatingStatus(e),queryFn:({signal:t})=>o({projectRef:e},t),enabled:r&&void 0!==e,refetchInterval:e=>{let s=e.state.data;if(!s)return!1;let{jwtSecretUpdateStatus:a}=s;return a===t.JwtSecretUpdateStatus.Updating&&1e3},...l});return(0,i.useEffect)(()=>{d.isSuccess&&c.invalidateQueries({queryKey:n.configKeys.postgrest(e)})},[d.isSuccess,e,c]),d}])},405374,e=>{"use strict";var t=e.i(478902),s=e.i(902858),a=e.i(711789);e.i(128328);var i=e.i(158639),r=e.i(567558),n=e.i(937942),o=e.i(108892),l=e.i(597541),c=e.i(246932),d=e.i(377451),u=e.i(2579),p=e.i(585915),h=e.i(627069),m=e.i(710483),g=e.i(108151),x=e.i(746301),f=e.i(538482),j=e.i(882087),y=e.i(908319);e.s(["APIKeys",0,()=>{let{ref:e}=(0,i.useParams)(),{can:b}=(0,u.useAsyncCheckPermissions)(s.PermissionAction.SECRETS_READ,"*"),{data:v,error:S,isError:N,isPending:w}=(0,d.useProjectSettingsV2Query)({projectRef:e}),{data:E,isPending:C}=(0,l.useLegacyAPIKeysStatusQuery)({projectRef:e},{enabled:b}),{data:_,error:k,isError:T,isPending:P}=(0,o.useAPIKeysQuery)({projectRef:e},{enabled:b}),{anonKey:R,serviceKey:A,publishableKey:I,secretKey:O}=(0,o.getKeys)(_),D=!!I&&!!O,U=E?.enabled??!1,L=!D&&!R&&!A,{data:$,error:z,isError:F,isPending:M}=(0,c.useJwtSecretUpdatingStatusQuery)({projectRef:e},{enabled:!w&&L}),B=M&&!w&&L,G=$?.jwtSecretUpdateStatus,q=void 0===G||G===a.JwtSecretUpdateStatus.Updated,H=v?.app_config?.protocol??"https",Q=v?.app_config?.endpoint,W=`${H}://${Q??"-"}`;return(0,t.jsxs)(h.Card,{children:[(0,t.jsxs)(h.CardHeader,{children:[(0,t.jsx)(h.CardTitle,{className:"text-sm font-medium",children:"Project API"}),(0,t.jsxs)(h.CardDescription,{children:["Your API is secured behind an API gateway which requires an API Key for every request.",(0,t.jsx)("br",{}),"You can use the parameters below to use Supabase client libraries."]})]}),P||C||w?(0,t.jsx)(h.CardContent,{children:(0,t.jsx)(g.GenericSkeletonLoader,{})}):T||N||F?(0,t.jsx)(r.AlertError,{className:"rounded-none border-0",subject:T?"Failed to retrieve API Keys":N?"Failed to retrieve project settings":F?"Failed to update JWT secret":"",error:k??S??z}):B?(0,t.jsx)(h.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-4 space-x-2",children:[(0,t.jsx)(p.Loader,{className:"animate-spin",size:16,strokeWidth:1.5}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"JWT secret is being updated"})]})}):U||D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.CardContent,{children:(0,t.jsx)(f.FormItemLayout,{isReactForm:!1,layout:"horizontal",label:"Project URL",description:"A RESTful endpoint for querying and managing your database.",children:(0,t.jsx)(x.Input,{readOnly:!0,copy:!0,className:"input-mono",value:W})})}),(0,t.jsx)(h.CardContent,{children:(0,t.jsx)(f.FormItemLayout,{isReactForm:!1,layout:"horizontal",label:D?"Publishable API Key":(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm",children:"API Key"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 -ml-1",children:[(0,t.jsx)("code",{className:"text-code-inline",children:R?.name}),(0,t.jsx)("code",{className:"text-code-inline",children:"public"})]})]}),description:(0,t.jsxs)("p",{children:["This key is safe to use in a browser if you have enabled Row Level Security (RLS) for your tables and configured policies. You may also use the"," ",D?"secret":"service"," key which can be found"," ",(0,t.jsx)(n.InlineLink,{href:`/project/${e}/settings/api-keys${!D?"/legacy":""}`,children:"here"})," ","to bypass RLS."]}),children:(0,t.jsx)(x.Input,{readOnly:!0,className:"input-mono",copy:b&&q,reveal:R?.name!=="anon"&&b&&q,value:b?G===a.JwtSecretUpdateStatus.Failed?"JWT secret update failed, new API key may have issues":G===a.JwtSecretUpdateStatus.Updating?"Updating JWT secret...":I?.api_key??R?.api_key:"You need additional permissions to view API keys"})})}),(0,t.jsxs)(h.CardContent,{className:"relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-md -mt-[1px]",style:{backgroundImage:`
                  linear-gradient(to top, hsl(var(--background-surface-100)/1) 0%, hsl(var(--background-surface-100)/1) 30%, hsl(var(--background-surface-75)/0) 100%),
                  linear-gradient(to right, hsl(var(--border-default)/0.33) 1px, transparent 1px),
                  linear-gradient(to bottom, hsl(var(--border-default)/0.33) 1px, transparent 1px)
                `,backgroundSize:"100% 100%, 15px 15px, 15px 15px",backgroundPosition:"0 0, 0 0, 0 0"}}),(0,t.jsxs)("div",{className:"relative mt-6 mb-3",children:[(0,t.jsxs)("div",{className:"flex gap-x-3.5 relative ml-0.5 mb-4 opacity-80",children:[(0,t.jsx)(j.ConnectionIcon,{icon:"nextjs",size:26}),(0,t.jsx)(j.ConnectionIcon,{icon:"react",size:26}),(0,t.jsx)(j.ConnectionIcon,{icon:"svelte",size:22}),(0,t.jsx)(j.ConnectionIcon,{icon:"flutter",size:23}),(0,t.jsx)(j.ConnectionIcon,{icon:"prisma",size:22})]}),(0,t.jsx)("p",{className:"mb-1",children:"Choose your preferred framework"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light mb-4 md:mr-20 text-balance",children:"Connect to your project from a variety of frameworks, ORMs, an MCP server, or even directly via connection string."}),(0,t.jsx)(y.ConnectButton,{})]})]})]}):(0,t.jsx)(m.Admonition,{type:"default",className:"border-0 rounded-none",title:"Project has no API keys created yet",description:(0,t.jsxs)(t.Fragment,{children:["Create a set of API keys from your"," ",(0,t.jsx)(n.InlineLink,{href:`/project/${e}/settings/api-keys`,children:"project settings"})," ","to connect to your project"]})})]})}])},128110,565696,e=>{"use strict";var t=e.i(478902),s=e.i(710377),a=e.i(774803),i=e.i(210419),r=e.i(389959);e.i(128328);var n=e.i(158639),o=e.i(346600),l=e.i(236610),c=e.i(707820),d=e.i(405374),u=e.i(196621),p=e.i(722740),h=e.i(164045),m=e.i(242882),g=e.i(234745),x=e.i(47302);async function f({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:s,error:a}=await (0,g.get)("/platform/projects/{ref}/status",{params:{path:{ref:e}},signal:t});return a&&(0,g.handleError)(a),s}let j=({projectRef:e},{enabled:t=!0,...s}={})=>(0,m.useQuery)({queryKey:x.projectKeys.status(e),queryFn:({signal:t})=>f({projectRef:e},t),enabled:t&&void 0!==e,...s});e.s(["useProjectStatusQuery",0,j],565696);var y=e.i(276093),b=e.i(912793),v=e.i(635494),S=e.i(10429),N=e.i(837508),w=e.i(587433),E=e.i(837710);let C=({description:e})=>(0,t.jsxs)("li",{className:"my-3 flex flex-wrap space-x-3",children:[(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(s.ArrowRight,{className:"text-foreground-lighter",size:14})}),(0,t.jsx)("div",{className:"flex-1",children:e})]});e.s(["default",0,()=>{let{ref:e}=(0,n.useParams)(),{data:s}=(0,v.useSelectedProjectQuery)(),{invalidateProjectsQuery:m}=(0,p.useInvalidateProjectsInfiniteQuery)(),{invalidateProjectDetailsQuery:g}=(0,h.useInvalidateProjectDetailsQuery)(),x=(0,b.useIsFeatureEnabled)("project_homepage:show_examples"),{projectHomepageClientLibraries:f}=(0,y.useCustomContent)(["project_homepage:client_libraries"]),{data:_,isSuccess:k}=j({projectRef:e},{enabled:s?.status!==N.PROJECT_STATUS.ACTIVE_HEALTHY,refetchInterval:e=>{let t=e.state.data;return t?.status!==N.PROJECT_STATUS.ACTIVE_HEALTHY&&4e3}});return((0,r.useEffect)(()=>{k&&_?.status===N.PROJECT_STATUS.ACTIVE_HEALTHY&&(e&&g(e),m())},[k,_,e,g,m]),void 0===s)?null:(0,t.jsxs)("div",{className:"mx-auto my-8 md:my-16 w-full md:max-w-7xl items-center justify-center",children:[(0,t.jsxs)("div",{className:"px-4 md:px-6 flex flex-col space-y-16",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col md:flex-row items-start md:items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-3xl",children:s?.name}),(0,t.jsx)(w.Badge,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Loader2,{className:"animate-spin",size:12}),(0,t.jsx)("span",{children:s.status===N.PROJECT_STATUS.UNKNOWN?"Initiating project set up":"Setting up project"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:[" ","We are provisioning your database and API endpoints"]}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:" This may take a few minutes"})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"w-full grid grid-cols-12 gap-12",children:[(0,t.jsxs)("div",{className:"w-full col-span-12 space-y-12 lg:col-span-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-base text-foreground",children:"While you wait"}),(0,t.jsx)(C,{description:(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Browse the Supabase"," ",(0,t.jsx)(i.default,{href:`${S.DOCS_URL}`,className:"mb-0 text-brand transition-colors hover:text-brand-600",target:"_blank",rel:"noreferrer",children:"documentation"}),"."]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-base text-foreground",children:"Not working?"}),(0,t.jsx)(C,{description:(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Try refreshing after a couple of minutes."})}),(0,t.jsx)("ul",{children:(0,t.jsx)(C,{description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"mb-4 text-sm text-foreground-light",children:"If your dashboard hasn't connected within 2 minutes, you can open a support ticket."}),(0,t.jsx)(E.Button,{asChild:!0,type:"default",children:(0,t.jsx)(u.SupportLink,{children:"Contact support team"})})]})})})]})]}),(0,t.jsx)("div",{className:"col-span-12  lg:col-span-8 flex flex-col gap-8",children:(0,t.jsx)(d.APIKeys,{})})]})})]}),s.status===N.PROJECT_STATUS.COMING_UP&&(0,t.jsxs)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"mx-6",children:(0,t.jsx)("h4",{className:"text-lg",children:"Client libraries"})}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-8 md:gap-12 mx-6 mb-12 md:grid-cols-3",children:f.map(e=>(0,t.jsx)(o.ClientLibrary,{...e},e.language))})]}),x&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"mx-6",children:(0,t.jsx)("h5",{children:"Example projects"})}),(0,t.jsx)("div",{className:"mx-6 grid gap-2 md:gap-8 md:grid-cols-2 lg:grid-cols-3",children:c.EXAMPLE_PROJECTS.map(e=>(0,t.jsx)(l.ExampleProject,{...e},e.url))})]})]})]})}],128110)},992615,e=>{"use strict";var t=e.i(489084);e.s(["Server",()=>t.default])},333649,e=>{"use strict";var t=e.i(478902),s=e.i(17203),a=e.i(585915),i=e.i(382710),r=e.i(992615),n=e.i(210419),o=e.i(389959);e.i(128328);var l=e.i(158639),c=e.i(427432),d=e.i(164045),u=e.i(10429),p=e.i(234745);async function h(e,t){if(void 0===e)return!1;let{timeout:s}=t??{};return m(e,s)}async function m(e,t){let{error:s}=await (0,p.fetchHeadWithTimeout)(`${u.API_URL}/projects/${e}/api/rest`,[],{timeout:t??2e3});return void 0===s}var g=e.i(587433),x=e.i(837710);e.s(["default",0,({project:e})=>{let{ref:p}=(0,l.useParams)(),m=(0,o.useRef)(),{setProjectPostgrestStatus:f}=(0,d.useSetProjectPostgrestStatus)(),{invalidateProjectDetailsQuery:j}=(0,d.useInvalidateProjectDetailsQuery)();(0,o.useEffect)(()=>{if(e.restUrl)return m.current=window.setInterval(y,4e3),()=>{clearInterval(m.current)}},[e]);let y=async()=>{await h(e.ref)&&(clearInterval(m.current),f(e.ref,"ONLINE"),await j(e.ref))};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,t.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,t.jsx)("h1",{className:"text-3xl",children:e.name}),(0,t.jsx)("div",{children:(0,t.jsx)(g.Badge,{variant:"success",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Loader,{className:"animate-spin",size:12}),(0,t.jsx)("span",{children:"Connecting to project"})]})})})]}),(0,t.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,t.jsxs)("div",{className:"w-[440px] space-y-4",children:[(0,t.jsxs)("div",{className:"mx-auto flex max-w-[300px] items-center justify-center",children:[(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-md border",children:(0,t.jsx)(i.Monitor,{className:"text-foreground-light",size:30,strokeWidth:1.5})})}),(0,t.jsx)(c.default,{active:!0}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-md border",children:(0,t.jsx)(r.Server,{className:"text-foreground-light",size:30,strokeWidth:1.5})})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("p",{className:"text-center",children:["Connecting to ",e.name]}),(0,t.jsx)("p",{className:"text-center text-sm text-foreground-light",children:"If you are unable to connect after a few minutes, check your project's health to verify if it's running into any resource constraints."})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(x.Button,{asChild:!0,type:"default",children:(0,t.jsx)(n.default,{href:`/project/${p}/settings/infrastructure`,children:"Check database health"})}),(0,t.jsx)(x.Button,{asChild:!0,type:"default",icon:(0,t.jsx)(s.ExternalLink,{strokeWidth:1.5}),children:(0,t.jsx)(n.default,{href:`${u.DOCS_URL}/guides/troubleshooting?products=platform#unable-to-connect-to-your-supabase-project`,className:"translate-y-[1px]",children:"Troubleshooting"})})]})]})})]})})})}],333649)},655876,731049,703518,e=>{"use strict";var t=e.i(478902);e.i(128328);var s=e.i(158639),a=e.i(164045),i=e.i(108151);let r=()=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(i.ShimmeringLoader,{className:"w-40 h-7"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4",children:[(0,t.jsx)(i.ShimmeringLoader,{className:"w-full h-[320px] py-0"}),(0,t.jsx)(i.ShimmeringLoader,{className:"w-full h-[320px] py-0"}),(0,t.jsx)(i.ShimmeringLoader,{className:"w-full h-[320px] py-0"}),(0,t.jsx)(i.ShimmeringLoader,{className:"w-full h-[320px] py-0"})]})]});e.s(["LoadingState",0,()=>{let{ref:e}=(0,s.useParams)(),{data:n,isPending:o}=(0,a.useProjectDetailQuery)({ref:e}),l="default"!==e?n?.name:"Welcome to your project";return(0,t.jsxs)("div",{className:"w-full mx-auto",children:[(0,t.jsx)("div",{className:"px-8 border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto flex items-center space-x-6 h-[184px]",children:o?(0,t.jsx)(i.ShimmeringLoader,{className:"h-9 w-40"}):(0,t.jsx)("h1",{className:"text-3xl",children:l})})}),(0,t.jsx)("div",{className:"px-8 py-16",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,t.jsx)(r,{})})}),(0,t.jsx)("div",{className:"px-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-4",children:[(0,t.jsx)(i.ShimmeringLoader,{className:"w-40 h-7"}),(0,t.jsx)(i.ShimmeringLoader,{className:"w-full h-32"})]})})]})},"ProjectUsageLoadingState",0,r],655876);var n=e.i(242882),o=e.i(234745),l=e.i(47302);async function c({ref:e},t){if(!e)throw Error("Project ref is required");let{data:s,error:a}=await (0,o.get)("/platform/projects/{ref}/pause/status",{params:{path:{ref:e}},signal:t});return a&&(0,o.handleError)(a),s}e.s(["useProjectPauseStatusQuery",0,({ref:e},{enabled:t=!0,...s}={})=>(0,n.useQuery)({queryKey:l.projectKeys.pauseStatus(e),queryFn:({signal:t})=>c({ref:e},t),enabled:t&&void 0!==e,...s})],731049);var d=e.i(38429),u=e.i(355901);async function p({ref:e,postgresEngine:t,releaseChannel:s}){let{data:a,error:i}=await (0,o.post)("/platform/projects/{ref}/restore",{params:{path:{ref:e}},body:{postgres_engine:t,release_channel:s}});return i&&(0,o.handleError)(i),a}e.s(["useProjectRestoreMutation",0,({onSuccess:e,onError:t,...s}={})=>(0,d.useMutation)({mutationFn:e=>p(e),async onSuccess(t,s,a){await e?.(t,s,a)},async onError(e,s,a){void 0===t?u.toast.error(`Failed to restore project: ${e.message}`):t(e,s,a)},...s})],703518)},698024,e=>{"use strict";var t=e.i(38429),s=e.i(355901),a=e.i(234745);async function i({ref:e,backup:t}){let{data:s,error:i}=await (0,a.post)("/platform/database/{ref}/backups/download",{params:{path:{ref:e}},body:{id:t.id}});return i&&(0,a.handleError)(i),s}e.s(["useBackupDownloadMutation",0,({onSuccess:e,onError:a,...r}={})=>(0,t.useMutation)({mutationFn:e=>i(e),async onSuccess(t,s,a){await e?.(t,s,a)},async onError(e,t,i){void 0===a?s.toast.error(`Failed to download backup: ${e.message}`):a(e,t,i)},...r})])},800556,e=>{"use strict";var t=e.i(478902),s=e.i(532728),a=e.i(902858),i=e.i(55956),r=e.i(1606),n=e.i(210419),o=e.i(389959),l=e.i(408891),c=e.i(355901),d=e.i(97429);e.i(128328);var u=e.i(657588),p=e.i(158639),h=e.i(372598),m=e.i(567558),g=e.i(215312),x=e.i(937942),f=e.i(31563),j=e.i(164045),y=e.i(731049),b=e.i(703518),v=e.i(2579),S=e.i(265735),N=e.i(635494),w=e.i(761755),E=e.i(10429),C=e.i(837508);e.i(287509);var _=e.i(434934),k=e.i(837710),T=e.i(627069),P=e.i(843778),R=e.i(253214),A=e.i(428353),I=e.i(61863),O=e.i(613580),D=e.i(955909),U=e.i(466472),L=e.i(108151),$=e.i(88816),z=e.i(786741),F=e.i(17203),M=e.i(423782),B=e.i(698024),G=e.i(38429),q=e.i(356003),H=e.i(234745),Q=e.i(937163);let W=async({projectRef:e})=>{if(!e)throw Error("projectRef is required");let{data:t,error:s}=await (0,H.post)("/platform/storage/{ref}/archive",{params:{path:{ref:e}}});return s&&(0,H.handleError)(s),t};var K=e.i(242882);async function Y({projectRef:e},t){if(!e)throw Error("projectRef is required");let{data:s,error:a}=await (0,H.get)("/platform/storage/{ref}/archive",{params:{path:{ref:e}},signal:t});if(a)if(a?.message?.includes("Storage archive not found"))return{fileUrl:void 0};else(0,H.handleError)(a);return s}e.i(481541);var V=e.i(733957),J=e.i(499536),X=e.i(874311),Z=e.i(710483);let ee=()=>{let{ref:e}=(0,p.useParams)(),{data:s}=(0,N.useSelectedProjectQuery)(),[a,i]=(0,o.useState)(),[r,n]=(0,o.useState)(!1),l=s?.dbVersion?.replace("supabase-postgres-",""),{data:d}=(0,y.useProjectPauseStatusQuery)({ref:e},{enabled:s?.status===C.PROJECT_STATUS.INACTIVE}),u=d?.latest_downloadable_backup_id,{data:h,isSuccess:m}=(({projectRef:e},{enabled:t=!0,...s}={})=>(0,K.useQuery)({queryKey:Q.storageKeys.archive(e),queryFn:({signal:t})=>Y({projectRef:e},t),enabled:t&&void 0!==e,...s}))({projectRef:e},{refetchInterval:r,refetchOnWindowFocus:!1});(0,o.useEffect)(()=>{m&&h.fileUrl&&!1!==r&&(c.toast.success("Downloading storage objects",{id:a}),i(void 0),n(!1),b(h.fileUrl))},[m,h,r]);let g=h?.fileUrl,{mutate:f}=(0,B.useBackupDownloadMutation)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}),{mutate:j}=function({onSuccess:e,onError:t,...s}={}){let a=(0,q.useQueryClient)();return(0,G.useMutation)({mutationFn:e=>W(e),async onSuccess(t,s,i){let{projectRef:r}=s;await a.invalidateQueries({queryKey:Q.storageKeys.archive(r)}),await e?.(t,s,i)},async onError(e,s,a){void 0===t?c.toast.error(`Failed to create storage archive: ${e.message}`):t(e,s,a)},...s})}({onSuccess:()=>{i(c.toast.loading("Retrieving storage archive. This may take a few minutes depending on the size of your storage objects.")),n(5e3)}}),b=e=>{let t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Z.Admonition,{showIcon:!1,type:"warning",className:"rounded-none border-0 px-6 [&>div>div>div]:flex [&>div>div>div]:flex-col [&>div>div>div]:gap-y-3",title:"Project can no longer be restored through the dashboard",children:[(0,t.jsxs)("p",{className:"!leading-normal",children:["This project has been paused for over"," ",(0,t.jsxs)("span",{className:"text-foreground",children:[d?.max_days_till_restore_disabled??90," days"]})," ","and cannot be restored through the dashboard. However, your data remains intact and can be downloaded as a backup."]}),!!d?.last_paused_on&&(0,t.jsxs)("p",{className:"text-foreground-lighter text-sm",children:["Project last paused on"," ",(0,t.jsx)(D.TimestampInfo,{className:"text-sm",labelFormat:"DD MMM YYYY",utcTimestamp:d.last_paused_on})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"!leading-normal !mb-1",children:"Recovery options:"}),(0,t.jsxs)("ul",{className:"flex flex-col gap-y-0.5",children:[(0,t.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(F.ExternalLink,{size:14}),(0,t.jsx)(x.InlineLink,{href:`${E.DOCS_URL}/guides/platform/migrating-within-supabase/dashboard-restore`,children:"Restore the backup to a new Supabase project"})]}),(0,t.jsxs)("li",{className:"flex items-center gap-x-2",children:[(0,t.jsx)(F.ExternalLink,{size:14}),(0,t.jsx)(x.InlineLink,{href:`${E.DOCS_URL}/guides/local-development/restoring-downloaded-backup`,children:"Restore the backup on your local machine"})]})]})]})]}),(0,t.jsxs)("div",{className:"border-t flex justify-between items-center px-6 py-4 bg-alternative",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm",children:"Export your data"}),(0,t.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Download backups for your database and storage objects"})]}),(0,t.jsxs)(X.DropdownMenu,{children:[(0,t.jsx)(X.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(k.Button,{type:"default",icon:(0,t.jsx)(z.Download,{}),iconRight:(0,t.jsx)($.ChevronDown,{}),children:"Download backups"})}),(0,t.jsxs)(X.DropdownMenuContent,{className:"w-60",align:"end",children:[(0,t.jsxs)(M.DropdownMenuItemTooltip,{className:"gap-x-2",disabled:!u,onClick:()=>(()=>{if(void 0===e)return console.error("Project ref is required");if(!u)return c.toast.error("No backups available for download");let t=c.toast.loading("Fetching database backup");f({ref:e,backup:{id:u}},{onSuccess:()=>{c.toast.success("Downloading database backup",{id:t})}})})(),tooltip:{content:{side:"right",text:"No backups available, please reach out via support for assistance"}},children:[(0,t.jsx)(V.Database,{size:16}),"Database backup (PG: ",l,")"]}),(0,t.jsxs)(X.DropdownMenuItem,{className:"gap-x-2",onClick:()=>void(g?(c.toast.success("Downloading storage objects"),b(g)):j({projectRef:e})),children:[(0,t.jsx)(J.Storage,{size:16}),"Storage objects"]})]})]})]})]})};e.s(["ProjectPausedState",0,({product:e})=>{let{ref:E}=(0,p.useParams)(),{data:$}=(0,N.useSelectedProjectQuery)(),{data:z}=(0,S.useSelectedOrganizationQuery)(),{setProjectStatus:F}=(0,j.useSetProjectStatus)(),M=(0,u.useFlag)("showPostgresVersionSelector"),B=(0,w.usePHFlag)("proBenefitWording"),G=Object.values(_.AWS_REGIONS).find(e=>e.code===$?.region),q=z?.slug,{data:H,error:Q,isError:W,isSuccess:K,isPending:Y}=(0,y.useProjectPauseStatusQuery)({ref:E},{enabled:$?.status===C.PROJECT_STATUS.INACTIVE}),V=H?.remaining_days_till_restore_disabled??H?.max_days_till_restore_disabled??0,J=z?.plan?.id==="free",X=K&&!H.can_restore,{data:Z}=(0,f.useFreeProjectLimitCheckQuery)({slug:q},{enabled:J}),et=(Z||[]).length>0,[es,ea]=(0,o.useState)(!1),[ei,er]=(0,o.useState)(!1),{mutate:en,isPending:eo}=(0,b.useProjectRestoreMutation)({onSuccess:(e,t)=>{F({ref:t.ref,status:C.PROJECT_STATUS.RESTORING}),c.toast.success("Restoring project, project will be ready in a few minutes")}}),{can:el}=(0,v.useAsyncCheckPermissions)(a.PermissionAction.INFRA_EXECUTE,"queue_jobs.projects.initialize_or_resume"),ec=async e=>{if(!$)return c.toast.error("Unable to restore: project is required");if(M){let{postgresVersionSelection:t}=e,s=(0,h.extractPostgresVersionDetails)(t);en({ref:$.ref,releaseChannel:s.releaseChannel,postgresEngine:s.postgresEngine})}else en({ref:$.ref})},ed=d.z.object({postgresVersionSelection:d.z.string()}),eu=(0,l.useForm)({resolver:(0,s.zodResolver)(ed),mode:"onChange",defaultValues:{postgresVersionSelection:""}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(T.Card,{className:"w-[40rem] mx-auto",children:[(0,t.jsxs)(T.CardContent,{children:[(0,t.jsx)(r.PauseCircle,{size:48,strokeWidth:1,className:"text-foreground-lighter shrink-0 mb-4"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"mb-4",children:['The project "',$?.name,'" is currently paused']}),(0,t.jsxs)("div",{className:"text-foreground-light max-w-4xl",children:[Y&&(0,t.jsx)(L.GenericSkeletonLoader,{className:"mt-3"}),K&&!X?J?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm",children:["All data, including backups and storage objects, remains safe. You can resume this project from the dashboard within"," ",(0,t.jsxs)(O.Tooltip,{children:[(0,t.jsxs)(O.TooltipTrigger,{children:[(0,t.jsxs)("span",{className:(0,P.cn)(x.InlineLinkClassName,"text-foreground"),children:[V," day",V>1?"s":""]})," "]}),(0,t.jsxs)(O.TooltipContent,{side:"bottom",className:"w-80 text-center",children:["Free projects cannot be restored through the dashboard if they are paused for more than ",H.max_days_till_restore_disabled," days"]})]})," ","(until"," ",(0,t.jsx)(D.TimestampInfo,{displayAs:"local",utcTimestamp:(0,i.default)().utc().add(H.remaining_days_till_restore_disabled??0,"day").toISOString(),className:"text-sm text-foreground",labelFormat:"DD MMM YYYY"}),"). After that, this project will not be resumable, but data will still be available for download."]}),(0,t.jsx)("p",{className:"text-sm mt-4",children:"variant-a"===B?"Upgrade to Pro to prevent pauses and unlock features like branching, compute upgrades, and daily backups.":"To prevent future pauses, consider upgrading to Pro."}),!!H.last_paused_on&&(0,t.jsxs)("p",{className:"text-foreground-lighter text-sm",children:["Project last paused on"," ",(0,t.jsx)(D.TimestampInfo,{className:"text-sm",labelFormat:"DD MMM YYYY",utcTimestamp:H.last_paused_on})]})]}):(0,t.jsx)("p",{className:"text-sm",children:"Your project data is safe but inaccessible while paused. Once resumed, usage will be billed by compute size and hours active."}):Y?null:(0,t.jsxs)("p",{className:"text-sm",children:["All of your project's data is still intact, but your project is inaccessible while paused."," ",void 0!==e?(0,t.jsxs)(t.Fragment,{children:["Resume this project to access the"," ",(0,t.jsx)("span",{className:"text-brand",children:e})," page."]}):X?null:"Resume this project and get back to building!"]})]})]})})]}),W&&(0,t.jsx)(m.default,{className:"rounded-none border-0",error:Q,subject:"Failed to retrieve pause status"}),K&&!X&&(0,t.jsxs)(T.CardFooter,{className:"flex justify-end items-center gap-x-2",children:[J?(0,t.jsx)(k.Button,{asChild:!0,type:"default",children:(0,t.jsx)(n.default,{href:`/org/${q}/billing?panel=subscriptionPlan&source=projectPausedStateRestore`,children:"Upgrade to Pro"})}):(0,t.jsx)(k.Button,{asChild:!0,type:"default",children:(0,t.jsx)(n.default,{href:`/project/${E}/settings/general`,children:"View project settings"})}),(0,t.jsx)(g.ButtonTooltip,{size:"tiny",type:"primary",disabled:!el,onClick:()=>{el?et?er(!0):ea(!0):c.toast.error("You do not have the required permissions to restore this project")},tooltip:{content:{side:"bottom",text:el?void 0:"You need additional permissions to resume this project"}},children:"Resume project"})]}),K&&X&&(0,t.jsx)(ee,{})]}),(0,t.jsx)(U.default,{visible:es,size:"small",title:"Resume this project",onCancel:()=>ea(!1),onConfirm:()=>eu.handleSubmit(ec)(),loading:eo,confirmLabel:"Resume",confirmLabelLoading:"Resuming",cancelLabel:"Cancel",children:(0,t.jsxs)("div",{className:(0,P.cn)(M&&"flex flex-col gap-y-4"),children:[(0,t.jsx)("p",{className:"text-sm",children:J?"Your projectâ€™s data will be restored to when it was initially paused.":"Your projectâ€™s data will be restored and billing will resume based on compute size and hours active."}),(0,t.jsx)(A.Form_Shadcn_,{...eu,children:(0,t.jsx)("form",{onSubmit:eu.handleSubmit(ec),children:M&&(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(I.FormField_Shadcn_,{control:eu.control,name:"postgresVersionSelection",render:({field:e})=>(0,t.jsx)(h.PostgresVersionSelector,{field:e,form:eu,type:"unpause",label:"Postgres version",layout:"vertical",dbRegion:G?.displayName??"",cloudProvider:$?.cloud_provider??"AWS",organizationSlug:z?.slug})})})})})]})}),(0,t.jsx)(R.Dialog,{open:ei,onOpenChange:()=>er(!1),children:(0,t.jsxs)(R.DialogContent,{size:"medium",className:"gap-0 pb-0",children:[(0,t.jsx)(R.DialogHeader,{className:"border-b",children:(0,t.jsx)(R.DialogTitle,{className:"leading-normal",children:"Your organization has members who have exceeded their free project limits"})}),(0,t.jsxs)(R.DialogSection,{className:"text-sm",children:[(0,t.jsx)("p",{className:"text-foreground-light",children:"The following members have reached their maximum limits for the number of active free plan projects within organizations where they are an administrator or owner:"}),(0,t.jsx)("ul",{className:"my-4 list-disc list-inside",children:(Z||[]).map((e,s)=>(0,t.jsxs)("li",{children:[e.username||e.primary_email," (Limit: ",e.free_project_limit," free projects)"]},`member-${s}`))}),(0,t.jsx)("p",{className:"text-foreground-light",children:"These members will need to either delete, pause, or upgrade one or more of these projects before you're able to resume this project."})]}),(0,t.jsx)(R.DialogFooter,{children:(0,t.jsx)(k.Button,{htmlType:"button",type:"default",onClick:()=>er(!1),children:"Understood"})})]})})]})}],800556)},423487,105516,890374,9367,380745,796590,102519,e=>{"use strict";var t=e.i(478902),s=e.i(902858),a=e.i(786741),i=e.i(471998),r=e.i(211570),n=e.i(389959);e.i(128328);var o=e.i(158639),l=e.i(152622),c=e.i(196621),d=e.i(215312),u=e.i(423782),p=e.i(937942),h=e.i(698024),m=e.i(242882),g=e.i(234745),x=e.i(246230);async function f({projectRef:e},t){if(!e)throw Error("Project ref is required");let{data:s,error:a}=await (0,g.get)("/platform/database/{ref}/backups/downloadable-backups",{params:{path:{ref:e}},signal:t});return a&&(0,g.handleError)(a),s}let j=({projectRef:e},{enabled:t=!0,...s}={})=>(0,m.useQuery)({queryKey:x.databaseKeys.backups(e),queryFn:({signal:t})=>f({projectRef:e},t),enabled:t&&void 0!==e,...s});var y=e.i(2579),b=e.i(635494),v=e.i(837710),S=e.i(877555),N=e.i(874311);e.s(["PauseFailedState",0,()=>{let{ref:e}=(0,o.useParams)(),{data:m}=(0,b.useSelectedProjectQuery)(),[g,x]=(0,n.useState)(!1),{can:f}=(0,y.useAsyncCheckPermissions)(s.PermissionAction.UPDATE,"projects",{resource:{project_id:m?.id}}),{data:w}=j({projectRef:e}),E=w?.backups??[],{mutate:C,isPending:_}=(0,h.useBackupDownloadMutation)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,t.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,t.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(S.CriticalIcon,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{children:"Something went wrong while pausing your project"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your project's data is intact, but your project is inaccessible due to the failure while pausing. Database backups for this project can still be accessed"," ",(0,t.jsx)(p.InlineLink,{href:`/project/${e}/database/backups/scheduled`,children:"here"}),"."]}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Please contact support for assistance."})]})]}),(0,t.jsxs)("div",{className:"border-t border-overlay flex items-center justify-end gap-x-2 py-4 px-8",children:[(0,t.jsx)(v.Button,{asChild:!0,type:"default",children:(0,t.jsx)(c.SupportLink,{queryParams:{category:s.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:m?.ref,subject:"Pausing failed for project"},children:"Contact support"})}),(0,t.jsx)(d.ButtonTooltip,{type:"default",icon:(0,t.jsx)(a.Download,{}),loading:_,disabled:0===E.length,tooltip:{content:{side:"bottom",text:w?.status==="physical-backups-enabled"?"No available backups to download as project is on physical backups":0===E.length?"No available backups to download":void 0}},onClick:()=>e?0===E.length?console.error("No available backups to download"):void C({ref:e,backup:E[0]}):console.error("Project ref is required"),children:"Download backup"}),(0,t.jsxs)(N.DropdownMenu,{children:[(0,t.jsx)(N.DropdownMenuTrigger,{children:(0,t.jsx)(v.Button,{type:"default",className:"px-1.5",icon:(0,t.jsx)(i.MoreVertical,{})})}),(0,t.jsx)(N.DropdownMenuContent,{className:"w-72",align:"end",children:(0,t.jsxs)(u.DropdownMenuItemTooltip,{onClick:()=>x(!0),className:"items-start gap-x-2",disabled:!f,tooltip:{content:{side:"right",text:f?void 0:"You need additional permissions to delete this project"}},children:[(0,t.jsx)("div",{className:"translate-y-0.5",children:(0,t.jsx)(r.Trash,{size:14})}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("p",{children:"Delete project"}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Project cannot be restored once it is deleted"})]})]})})]})]})]})})}),(0,t.jsx)(l.DeleteProjectModal,{visible:g,onClose:()=>x(!1)})]})}],423487);var w=e.i(376577),E=e.i(585915),C=e.i(722740),_=e.i(164045),k=e.i(565696);e.i(10429);var T=e.i(837508),P=e.i(587433);e.s(["PausingState",0,({project:e})=>{let{ref:s}=(0,o.useParams)(),[a,i]=(0,n.useState)(!1),{invalidateProjectsQuery:r}=(0,C.useInvalidateProjectsInfiniteQuery)(),{invalidateProjectDetailsQuery:l}=(0,_.useInvalidateProjectDetailsQuery)(),{data:c,isSuccess:d}=(0,k.useProjectStatusQuery)({projectRef:s},{enabled:a,refetchInterval:e=>{let t=e.state.data;return t?.status!==T.PROJECT_STATUS.INACTIVE&&2e3}});return(0,n.useEffect)(()=>{d&&c?.status===T.PROJECT_STATUS.INACTIVE&&(s&&l(s),r())},[d,c,s,l,r]),(0,n.useEffect)(()=>{setTimeout(()=>i(!0),4e3)},[]),(0,t.jsx)("div",{className:"mx-auto my-16 w-full max-w-7xl space-y-16",children:(0,t.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:[(0,t.jsx)("h1",{className:"text-3xl",children:e.name}),(0,t.jsx)("div",{children:(0,t.jsx)(P.Badge,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(E.Loader,{className:"animate-spin",size:12}),(0,t.jsx)("span",{children:"Pausing project"})]})})})]}),(0,t.jsx)("div",{className:"mx-auto mt-8 mb-16 w-full max-w-7xl",children:(0,t.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-overlay bg-surface-100 p-8",children:(0,t.jsxs)("div",{className:"grid w-[380px] gap-4",children:[(0,t.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,t.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,t.jsx)(E.Loader,{className:"animate-spin",size:20,strokeWidth:2})}),(0,t.jsx)(w.Circle,{className:"text-foreground-lighter",size:50,strokeWidth:1.5})]}),(0,t.jsxs)("p",{className:"text-center",children:["Pausing ",e.name]}),(0,t.jsx)("p",{className:"text-center text-sm text-foreground-light",children:"You may restore your project anytime thereafter, and your data will be restored to when it was initially paused."})]})})})]})})}],105516);var R=e.i(843778);e.s(["default",0,({title:e,children:s,className:a})=>(0,t.jsxs)("div",{id:"spec-click-target",className:(0,R.cn)("flex flex-col w-full h-full","hide-scrollbar bg-dash-sidebar border-default"),children:[(0,t.jsx)("div",{className:"border-default flex max-h-12 items-center border-b px-6",style:{minHeight:"3rem"},children:(0,t.jsx)("h4",{className:"text-lg",children:e})}),(0,t.jsx)("div",{className:(0,R.cn)("flex-grow overflow-y-auto",a),children:s})]})],890374);var A=e.i(774803);e.s(["ResizingState",0,()=>{let{ref:e}=(0,o.useParams)();return(0,_.useProjectDetailQuery)({ref:e},{refetchInterval:e=>{let t=e.state.data;return t?.status!==T.PROJECT_STATUS.ACTIVE_HEALTHY&&4e3}}),(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,t.jsx)("div",{className:"space-y-6 py-6",children:(0,t.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(A.Loader2,{className:"animate-spin text-foreground-light",size:18})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("p",{children:"Resizing Project Compute size"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project is being restarted to apply compute size changes."}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"This can take a few minutes. Project will be offline while it is being restarted."})]})]})})})})}],9367),e.s(["default",0,()=>{let{ref:e}=(0,o.useParams)();return(0,_.useProjectDetailQuery)({ref:e},{refetchInterval:e=>{let t=e.state.data;return t?.status!==T.PROJECT_STATUS.ACTIVE_HEALTHY&&4e3}}),(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,t.jsx)("div",{className:"space-y-6 py-6",children:(0,t.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(A.Loader2,{className:"animate-spin",size:18})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{children:"Restarting..."}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Restarting can take a few minutes. Your project will be offline while it restarts."})]})]})})})})}],380745),e.s(["RestoreFailedState",0,()=>{let{ref:e}=(0,o.useParams)(),{data:m}=(0,b.useSelectedProjectQuery)(),[g,x]=(0,n.useState)(!1),{can:f}=(0,y.useAsyncCheckPermissions)(s.PermissionAction.UPDATE,"projects",{resource:{project_id:m?.id}}),{data:w}=j({projectRef:e}),E=w?.backups??[],{mutate:C,isPending:_}=(0,h.useBackupDownloadMutation)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:(0,t.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,t.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(S.CriticalIcon,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{children:"Something went wrong while restoring your project"}),(0,t.jsxs)("p",{className:"text-sm text-foreground-light",children:["Your project's data is intact, but your project is inaccessible due to a restoration failure. Database backups for this project can still be accessed"," ",(0,t.jsx)(p.InlineLink,{href:`/project/${e}/database/backups/scheduled`,children:"here"}),"."]}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Please contact support for assistance."})]})]}),(0,t.jsxs)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8 gap-x-2",children:[(0,t.jsx)(v.Button,{asChild:!0,type:"default",children:(0,t.jsx)(c.SupportLink,{queryParams:{category:s.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:m?.ref,subject:"Restoration failed for project"},children:"Contact support"})}),(0,t.jsx)(d.ButtonTooltip,{type:"default",icon:(0,t.jsx)(a.Download,{}),loading:_,disabled:0===E.length,tooltip:{content:{side:"bottom",text:w?.status==="physical-backups-enabled"?"No available backups to download as project is on physical backups":0===E.length?"No available backups to download":void 0}},onClick:()=>e?0===E.length?console.error("No available backups to download"):void C({ref:e,backup:E[0]}):console.error("Project ref is required"),children:"Download backup"}),(0,t.jsxs)(N.DropdownMenu,{children:[(0,t.jsx)(N.DropdownMenuTrigger,{children:(0,t.jsx)(v.Button,{type:"default",className:"w-7",icon:(0,t.jsx)(i.MoreVertical,{})})}),(0,t.jsx)(N.DropdownMenuContent,{className:"w-72",align:"end",children:(0,t.jsxs)(u.DropdownMenuItemTooltip,{onClick:()=>x(!0),className:"items-start gap-x-2",disabled:!f,tooltip:{content:{side:"right",text:f?void 0:"You need additional permissions to delete this project"}},children:[(0,t.jsx)("div",{className:"translate-y-0.5",children:(0,t.jsx)(r.Trash,{size:14})}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("p",{children:"Delete project"}),(0,t.jsx)("p",{className:"text-foreground-lighter",children:"Project cannot be restored once it is deleted"})]})]})})]})]})]})})}),(0,t.jsx)(l.DeleteProjectModal,{visible:g,onClose:()=>x(!1)})]})}],796590);var I=e.i(872646);e.s(["default",0,()=>{let{ref:e}=(0,o.useParams)(),{data:i}=(0,b.useSelectedProjectQuery)(),[r,l]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),{data:m}=j({projectRef:e}),g=(m?.backups??[]).filter(e=>!e.isPhysicalBackup),{invalidateProjectDetailsQuery:x}=(0,_.useInvalidateProjectDetailsQuery)(),{data:f,isSuccess:y}=(0,k.useProjectStatusQuery)({projectRef:e},{enabled:i?.status!==T.PROJECT_STATUS.ACTIVE_HEALTHY,refetchInterval:e=>{let t=e.state.data;return t?.status!==T.PROJECT_STATUS.ACTIVE_HEALTHY&&4e3}});(0,n.useEffect)(()=>{y&&f.status===T.PROJECT_STATUS.ACTIVE_HEALTHY&&p(!0)},[y,f,e,x]);let{mutate:S,isPending:N}=(0,h.useBackupDownloadMutation)({onSuccess:e=>{let{fileUrl:t}=e,s=document.createElement("a");s.href=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}),w=async()=>{if(!i)return console.error("Project is required");l(!0),e&&await x(e)};return(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"bg-surface-100 border border-overlay rounded-md w-3/4 lg:w-1/2",children:u?(0,t.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,t.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(I.CheckCircle,{className:"text-brand",size:18,strokeWidth:2})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{children:"Restoration complete!"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Your project has been successfully restored and is now back online."})]})]}),(0,t.jsx)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8",children:(0,t.jsx)(v.Button,{disabled:r,loading:r,onClick:w,children:"Return to project"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-6 py-6",children:(0,t.jsxs)("div",{className:"flex px-8 space-x-8",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(E.Loader,{className:"animate-spin",size:18})}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{children:"Restoration in progress"}),(0,t.jsx)("p",{className:"text-sm text-foreground-light",children:"Restoration can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while the restoration is running."})]})]})}),(0,t.jsxs)("div",{className:"border-t border-overlay flex items-center justify-end py-4 px-8 gap-x-2",children:[(0,t.jsx)(v.Button,{asChild:!0,type:"default",children:(0,t.jsx)(c.SupportLink,{queryParams:{category:s.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:i?.ref,subject:"Ongoing restoration for project"},children:"Contact support"})}),(0,t.jsx)(d.ButtonTooltip,{type:"default",icon:(0,t.jsx)(a.Download,{}),loading:N,disabled:0===g.length,tooltip:{content:{side:"bottom",text:0===g.length?"No available backups to download":void 0}},onClick:()=>e?0===g.length?console.error("No available backups to download"):void S({ref:e,backup:g[0]}):console.error("Project ref is required"),children:"Download latest backup"})]})]})})})}],102519)},838055,e=>{"use strict";var t=e.i(711789),s=e.i(242882),a=e.i(356003),i=e.i(389959),r=e.i(234745);e.i(10429);var n=e.i(837508),o=e.i(78162);async function l({projectRef:e,trackingId:t},s){if(!e)throw Error("projectRef is required");let a={};t&&(a.tracking_id=t);let{data:i,error:n}=await (0,r.get)("/v1/projects/{ref}/upgrade/status",{params:{path:{ref:e},query:a},signal:s});return n&&(0,r.handleError)(n),i}e.s(["useProjectUpgradingStatusQuery",0,({projectRef:e,projectStatus:r,trackingId:c},{enabled:d=!0,...u}={})=>{let p=(0,a.useQueryClient)(),h=(0,s.useQuery)({queryKey:o.configKeys.upgradeStatus(e),queryFn:({signal:t})=>l({projectRef:e,trackingId:c},t),enabled:d&&void 0!==e,refetchInterval:e=>{let s=e.state.data;return!!s&&(r===n.PROJECT_STATUS.UPGRADING&&s.databaseUpgradeStatus?.status!==t.DatabaseUpgradeStatus.Upgrading||s.databaseUpgradeStatus?.status===t.DatabaseUpgradeStatus.Upgrading)&&5e3},...u});return(0,i.useEffect)(()=>{if(!h.isSuccess)return;let s=h.data;s.databaseUpgradeStatus?.status===t.DatabaseUpgradeStatus.Upgraded&&p.invalidateQueries({queryKey:o.configKeys.upgradeEligibility(e)})},[h.isSuccess,h.data,e,p]),h}])},825713,e=>{"use strict";var t=e.i(478902),s=e.i(175452),a=e.i(271226),i=e.i(389959);e.i(128328);var r=e.i(117672),n=e.i(158639),o=e.i(470834),l=e.i(807297),c=e.i(741506),d=e.i(809323),u=e.i(265100),p=e.i(276093),h=e.i(265735),m=e.i(635494),g=e.i(951138),x=e.i(761755),f=e.i(10429),j=e.i(837508),y=e.i(876298),b=e.i(189329),v=e.i(843778),S=e.i(818843),N=e.i(725805),w=e.i(985142),E=e.i(795826),C=e.i(940750),_=e.i(128110),k=e.i(333649),T=e.i(655876),P=e.i(800556),R=e.i(423487),A=e.i(105516),I=e.i(890374),O=e.i(9367),D=e.i(380745),U=e.i(796590),L=e.i(102519),$=e.i(711789),z=e.i(55956),F=e.i(867637),M=e.i(370410),B=e.i(872646),G=e.i(376577),q=e.i(585915),H=e.i(180148),Q=e.i(699879),W=e.i(655605),K=e.i(742251),Y=e.i(902858),V=e.i(196621),J=e.i(838055),X=e.i(164045),Z=e.i(837710),ee=e.i(613580);let et=[{key:$.DatabaseUpgradeProgress.Started,initial:"Prepare new server",progress:"Preparing new server",completed:"Prepared new server"},{key:$.DatabaseUpgradeProgress.LaunchedUpgradedInstance,initial:"Prepare new server for migration",progress:"Preparing new server for migration",completed:"New server ready for migration"},{key:$.DatabaseUpgradeProgress.DetachedVolumeFromUpgradedInstance,initial:"Execute pre-upgrade checks",progress:"Executing pre-upgrade checks",completed:"Completed pre-upgrade checks"},{key:$.DatabaseUpgradeProgress.AttachedVolumeToOriginalInstance,initial:"Shut down API services",progress:"Shutting down API services",completed:"Completed shutting down API services"},{key:$.DatabaseUpgradeProgress.InitiatedDataUpgrade,initial:"Migrate to new database",progress:"Migrating to new database",completed:"Completed migration to new database"},{key:$.DatabaseUpgradeProgress.CompletedDataUpgrade,initial:"Execute database migration",progress:"Executing database migration",completed:"Completed database migration"},{key:$.DatabaseUpgradeProgress.DetachedVolumeFromOriginalInstance,initial:"Update database extensions",progress:"Updating database extensions",completed:"Updated database extensions"},{key:$.DatabaseUpgradeProgress.AttachedVolumeToUpgradedInstance,initial:"Optimize database",progress:"Optimizing database",completed:"Completed optimization of database"}],es=()=>{let{ref:e}=(0,n.useParams)(),s=(0,K.useSearchParams)(),{data:a}=(0,m.useSelectedProjectQuery)(),[r,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),{invalidateProjectDetailsQuery:d}=(0,X.useInvalidateProjectDetailsQuery)(),{data:u}=(0,J.useProjectUpgradingStatusQuery)({projectRef:e,projectStatus:a?.status,trackingId:s.get("trackingId")},{enabled:f.IS_PLATFORM}),{initiated_at:p,status:h,progress:g,target_version:x,error:j}=u?.databaseUpgradeStatus??{},y=Number((g||"").split("_")[0]),b=h===$.DatabaseUpgradeStatus.Failed,v=h===$.DatabaseUpgradeStatus.Upgraded,S=h===$.DatabaseUpgradeStatus.Upgrading&&g===$.DatabaseUpgradeProgress.CompletedUpgrade,N=z.default.utc(p??0).format("DD MMM YYYY HH:mm:ss"),w=z.default.utc(p??0).local().format("DD MMM YYYY HH:mm:ss (ZZ)"),E=async()=>{o(!0),e&&await d(e)},C=`Upgrade information:%0Aâ€¢ Initiated at: ${p}%0Aâ€¢ Target Version: ${x}%0Aâ€¢ Error: ${j}`;return(0,t.jsx)("div",{className:"w-full mx-auto my-16 space-y-16 max-w-7xl",children:(0,t.jsxs)("div",{className:"mx-6 space-y-16",children:[(0,t.jsx)("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:space-y-0 lg:space-x-6",children:(0,t.jsx)("h1",{className:"text-3xl",children:a?.name})}),(0,t.jsx)("div",{className:"w-full mx-auto mt-8 mb-16 max-w-7xl",children:(0,t.jsx)("div",{className:"flex h-[500px] items-center justify-center rounded border border-muted bg-surface-100 p-8",children:v?(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,t.jsx)(B.CheckCircle,{className:"text-brand",size:40,strokeWidth:1.5})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-center",children:"Upgrade completed!"}),(0,t.jsxs)("p",{className:"mt-4 text-center text-sm text-foreground-light w-[300px] mx-auto",children:["Your project has been successfully upgraded to Postgres ",x," and is now back online."]})]}),(0,t.jsx)("div",{className:"mx-auto",children:(0,t.jsx)(Z.Button,{loading:r,disabled:r,onClick:E,children:"Return to project"})})]}):b?(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsx)("div",{className:"relative mx-auto max-w-[300px]",children:(0,t.jsx)(F.AlertCircle,{className:"text-amber-900",size:40,strokeWidth:1.5})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-center",children:"We ran into an issue while upgrading your project"}),(0,t.jsx)("p",{className:"mt-4 text-center text-sm text-foreground-light w-full md:w-[450px] mx-auto",children:"Your project is back online and its data is not affected. Please reach out to us via our support form for assistance with the upgrade."})]}),(0,t.jsxs)("div",{className:"flex items-center mx-auto space-x-2",children:[(0,t.jsx)(Z.Button,{asChild:!0,type:"default",children:(0,t.jsx)(V.SupportLink,{queryParams:{category:Y.SupportCategories.DATABASE_UNRESPONSIVE,projectRef:e,subject:"Upgrade%20failed%20for%20project",message:C},children:"Contact support"})}),(0,t.jsx)(Z.Button,{loading:r,disabled:r,onClick:E,children:"Return to project"})]})]}):(0,t.jsxs)("div",{className:"grid w-[480px] gap-4",children:[(0,t.jsxs)("div",{className:"relative mx-auto max-w-[300px]",children:[(0,t.jsx)("div",{className:"absolute flex items-center justify-center w-full h-full",children:(0,t.jsx)(W.Settings,{className:"animate-spin",size:20,strokeWidth:2})}),(0,t.jsx)(G.Circle,{className:"text-foreground-lighter",size:50,strokeWidth:1.5})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[S?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-center",children:"Performing a full backup"}),(0,t.jsx)("p",{className:"text-sm text-center text-foreground-light",children:"Upgrade is now complete, and your project is online. A full backup is now being performed to ensure that there is a proper base backup available post-upgrade. This can take from a few minutes up to several hours depending on the size of your database."})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-center",children:"Upgrading in progress"}),(0,t.jsx)("p",{className:"text-sm text-center text-foreground-light",children:"Upgrades can take from a few minutes up to several hours depending on the size of your database. Your project will be offline while it is being upgraded."})]}),(0,t.jsxs)("div",{className:"!mt-4 !mb-2 py-3 px-4 transition-all overflow-hidden border rounded relative",style:{maxHeight:l?"500px":"110px"},children:[l?(0,t.jsx)(Q.Minimize2,{size:14,strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:()=>c(!1)}):(0,t.jsx)(H.Maximize2,{size:14,strokeWidth:2,className:"absolute z-10 cursor-pointer top-3 right-3",onClick:()=>c(!0)}),(0,t.jsx)("div",{className:"space-y-2 transition-all",style:{translate:l?"0px 0px":`0px ${-((y-2<=0?0:y>6?5:y-2)*28)}px`},children:et.map((e,s)=>{let a=e.key===g,i=y>s;return(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[a?(0,t.jsx)("div",{className:"flex items-center justify-center w-5 h-5 rounded-full",children:(0,t.jsx)(q.Loader,{size:20,className:"animate-spin text-foreground-light",strokeWidth:2})}):i?(0,t.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-brand border-brand",children:(0,t.jsx)(M.Check,{size:12,className:"text-white",strokeWidth:3})}):(0,t.jsx)("div",{className:"flex items-center justify-center w-5 h-5 border rounded-full bg-overlay-hover"}),(0,t.jsx)("p",{className:`text-sm ${a?"text-foreground":i?"text-foreground-light":"text-foreground-lighter"} hover:text-foreground transition`,children:a?e.progress:i?e.completed:e.initial})]},e.key)})})]}),void 0!==p&&(0,t.jsxs)(ee.Tooltip,{children:[(0,t.jsx)(ee.TooltipTrigger,{children:(0,t.jsxs)("p",{className:"text-sm text-center text-foreground-light",children:["Started on: ",N," (UTC)"]})}),(0,t.jsx)(ee.TooltipContent,{side:"bottom",children:w})]})]})]})})})]})})},ea=["/project/[ref]/settings/general","/project/[ref]/database/settings","/project/[ref]/storage/settings","/project/[ref]/settings/infrastructure","/project/[ref]/settings/addons"],ei=["/project/[ref]/branches","/project/[ref]/database/backups/scheduled","/project/[ref]/database/backups/pitr","/project/[ref]/settings/addons","/project/[ref]/functions"],er=["/project/[ref]/reports","/project/[ref]/settings/general","/project/[ref]/database/settings","/project/[ref]/settings/infrastructure","/project/[ref]/settings/addons"],en=(0,i.forwardRef)(({title:e,isLoading:i=!1,isBlocking:n=!0,product:g="",productMenu:x,children:f,selectedTable:b,resizableSidebar:S=!1,productMenuClassName:_},k)=>{let T=(0,a.useRouter)(),{data:R}=(0,h.useSelectedOrganizationQuery)(),{data:A}=(0,m.useSelectedProjectQuery)(),{mobileMenuOpen:O,showSidebar:D,setMobileMenuOpen:U}=(0,y.useAppStateSnapshot)(),L=(0,C.useSetMainScrollContainer)(),$=(0,r.mergeRefs)(k,L),{appTitle:z}=(0,p.useCustomContent)(["app:title"]),F=z||"Supabase",M=void 0===(0,E.useEditorType)()||D,B=A?.name,G=R?.name,q=A?.status===j.PROJECT_STATUS.INACTIVE,H="/project/[ref]"===T.pathname||T.pathname.includes("/project/[ref]/settings")||T.pathname.includes("/project/[ref]/functions");return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.default,{children:[(0,t.jsx)("title",{children:e?`${e} | ${F}`:b?`${b} | ${B} | ${G} | ${F}`:B?`${B} | ${G} | ${F}`:G?`${G} | ${F}`:F}),(0,t.jsx)("meta",{name:"description",content:"Supabase Studio"})]}),(0,t.jsx)("div",{className:"flex flex-row h-full w-full",children:(0,t.jsxs)(N.ResizablePanelGroup,{direction:"horizontal",children:[x&&(0,t.jsx)(N.ResizablePanel,{order:1,minSize:1,maxSize:33,defaultSize:15,id:"panel-left",className:(0,v.cn)("hidden md:block","transition-all duration-[120ms]",M?S?"min-w-64 max-w-[32rem]":"min-w-64 max-w-64":"w-0 flex-shrink-0 max-w-0"),children:M&&(0,t.jsx)(d.AnimatePresence,{initial:!1,children:(0,t.jsx)(u.motion.div,{initial:{width:0,opacity:0,height:"100%"},animate:{width:"auto",opacity:1,height:"100%"},exit:{width:0,opacity:0,height:"100%"},className:"h-full",transition:{duration:.12},children:(0,t.jsx)(el,{isLoading:i,isBlocking:n,productMenu:x,children:(0,t.jsx)(I.default,{title:g,className:_,children:x})})})})}),x&&M&&(0,t.jsx)(N.ResizableHandle,{withHandle:!0,disabled:!S,className:"hidden md:flex"}),(0,t.jsx)(N.ResizablePanel,{order:2,minSize:67,maxSize:99,defaultSize:85,id:"panel-project-content",className:(0,v.cn)("h-full flex flex-col w-full xl:min-w-[600px] bg-dash-sidebar"),children:(0,t.jsx)("main",{className:"h-full flex flex-col flex-1 w-full overflow-y-auto overflow-x-hidden @container",ref:$,children:q&&!H?(0,t.jsx)("div",{className:"mx-auto my-16 w-full h-full max-w-7xl flex items-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(P.ProjectPausedState,{product:g})})}):(0,t.jsxs)(ec,{isLoading:i,isBlocking:n,children:[(0,t.jsx)(c.ResourceExhaustionWarningBanner,{}),f]})})})]})}),(0,t.jsx)(o.CreateBranchModal,{}),(0,t.jsx)(l.ProjectAPIDocs,{}),(0,t.jsx)(w.default,{open:O,onOpenChange:U,children:x})]})});en.displayName="ProjectLayout";let eo=(0,g.withAuth)(en),el=({isLoading:e,isBlocking:t=!0,productMenu:s,children:i})=>{let r=(0,a.useRouter)(),{data:n}=(0,m.useSelectedProjectQuery)(),o=!ea.includes(r.pathname);return t?!e&&s&&(!o||o&&void 0!==n)?i:null:i},ec=({isLoading:e,isBlocking:s=!0,children:r})=>{let o=(0,a.useRouter)(),{ref:l}=(0,n.useParams)(),c=(0,b.useDatabaseSelectorStateSnapshot)(),{data:d}=(0,m.useSelectedProjectQuery)(),u="new-home"===(0,x.usePHFlag)("homeNew"),p=o.pathname.includes("/project/[ref]/branches"),h=o.pathname.includes("/project/[ref]/settings"),g=o.pathname.includes("/project/[ref]/functions"),f="/project/[ref]/settings/vault"===o.pathname,y=o.pathname.includes("/project/[ref]/database/backups"),v="/project/[ref]"===o.pathname,N=!g&&!h&&!ei.includes(o.pathname)||f,w=!er.includes(o.pathname),E=!ea.includes(o.pathname),C=d?.status===j.PROJECT_STATUS.RESTARTING,P=d?.status===j.PROJECT_STATUS.RESIZING,I=d?.status===j.PROJECT_STATUS.UPGRADING,$=d?.status===j.PROJECT_STATUS.RESTORING,z=d?.status===j.PROJECT_STATUS.RESTORE_FAILED,F=d?.status===j.PROJECT_STATUS.COMING_UP||d?.status===j.PROJECT_STATUS.UNKNOWN,M=d?.status===j.PROJECT_STATUS.PAUSING,B=d?.status===j.PROJECT_STATUS.PAUSE_FAILED,G=d?.postgrestStatus==="OFFLINE",q=u&&N&&F&&!p&&!v,H=N&&F&&!p&&!(u&&v);return((0,i.useEffect)(()=>{q&&l&&o.replace(`/project/${l}`)},[q,l,o]),(0,i.useEffect)(()=>{l&&c.setSelectedDatabaseId(l)},[l]),s&&(e||E&&void 0===d))?o.pathname.endsWith("[ref]")?(0,t.jsx)(T.LoadingState,{}):(0,t.jsx)(S.LogoLoader,{}):C&&!y?(0,t.jsx)(D.default,{}):P&&!y?(0,t.jsx)(O.ResizingState,{}):I&&!y?(0,t.jsx)(es,{}):M?(0,t.jsx)(A.PausingState,{project:d}):B?(0,t.jsx)(R.PauseFailedState,{}):w&&G?(0,t.jsx)(k.default,{project:d}):N&&$?(0,t.jsx)(L.default,{}):!z||y||g?q?(0,t.jsx)(S.LogoLoader,{}):H?(0,t.jsx)(_.default,{}):(0,t.jsx)(i.Fragment,{children:r},d?.ref):(0,t.jsx)(U.RestoreFailedState,{})};e.s(["ProjectLayout",0,en,"ProjectLayoutWithAuth",0,eo],825713)}]);

//# debugId=55032391-f889-67da-e64e-8e7627a01228
//# sourceMappingURL=10b62c9a2fc47052.js.map